"use strict";(self.webpackChunksport_show_forum=self.webpackChunksport_show_forum||[]).push([[179],{7128:(rn,et,N)=>{N.d(et,{nm:()=>xt});var f=N(4027),we=(N(5e3),N(3692),N(5867),N(5861)),Se=N(9681),Pe=N(4859),he=N(2090),He=N(1877);const ae=new Map,ve={activated:!1,tokenObservers:[]},De={initialized:!1,enabled:!1};function ot(Oe){return ae.get(Oe)||ve}function at(Oe,Le){ae.set(Oe,Le)}function dt(){return De}class rt{constructor(Le,_t,kt,zt,en){if(this.operation=Le,this.retryPolicy=_t,this.getWaitDuration=kt,this.lowerBound=zt,this.upperBound=en,this.pending=null,this.nextErrorWaitInterval=zt,zt>en)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(Le){var _t=this;return(0,we.Z)(function*(){_t.stop();try{_t.pending=new he.BH,yield function ht(Oe){return new Promise(Le=>{setTimeout(Le,Oe)})}(_t.getNextRun(Le)),_t.pending.resolve(),yield _t.pending.promise,_t.pending=new he.BH,yield _t.operation(),_t.pending.resolve(),yield _t.pending.promise,_t.process(!0).catch(()=>{})}catch(kt){_t.retryPolicy(kt)?_t.process(!1).catch(()=>{}):_t.stop()}})()}getNextRun(Le){if(Le)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const _t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),_t}}}const fe=new he.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ke(Oe){if(!ot(Oe).activated)throw fe.create("use-before-activation",{appName:Oe.name})}function Qe(Oe,Le){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,we.Z)(function*({url:Oe,body:Le},_t){const kt={"Content-Type":"application/json"},zt=_t.getImmediate({optional:!0});if(zt){const vi=yield zt.getHeartbeatsHeader();vi&&(kt["X-Firebase-Client"]=vi)}const en={method:"POST",body:JSON.stringify(Le),headers:kt};let wn,vr;try{wn=yield fetch(Oe,en)}catch(vi){throw fe.create("fetch-network-error",{originalErrorMessage:vi.message})}if(200!==wn.status)throw fe.create("fetch-status-error",{httpStatus:wn.status});try{vr=yield wn.json()}catch(vi){throw fe.create("fetch-parse-error",{originalErrorMessage:vi.message})}const Er=vr.ttl.match(/^([\d.]+)(s)$/);if(!Er||!Er[2]||isNaN(Number(Er[1])))throw fe.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${vr.ttl}`});const Xr=1e3*Number(Er[1]),oi=Date.now();return{token:vr.attestationToken,expireTimeMillis:oi+Xr,issuedAtTimeMillis:oi}})).apply(this,arguments)}function ut(Oe,Le){const{projectId:_t,appId:kt,apiKey:zt}=Oe.options;return{url:`https://content-firebaseappcheck.googleapis.com/v1beta/projects/${_t}/apps/${kt}:exchangeDebugToken?key=${zt}`,body:{debug_token:Le}}}const $t="firebase-app-check-store";let Rn=null;function sn(){return Rn||(Rn=new Promise((Oe,Le)=>{try{const _t=indexedDB.open("firebase-app-check-database",1);_t.onsuccess=kt=>{Oe(kt.target.result)},_t.onerror=kt=>{var zt;Le(fe.create("storage-open",{originalErrorMessage:null===(zt=kt.target.error)||void 0===zt?void 0:zt.message}))},_t.onupgradeneeded=kt=>{0===kt.oldVersion&&kt.target.result.createObjectStore($t,{keyPath:"compositeKey"})}}catch(_t){Le(fe.create("storage-open",{originalErrorMessage:_t.message}))}}),Rn)}function Cn(){return(Cn=(0,we.Z)(function*(Oe,Le){const kt=(yield sn()).transaction($t,"readwrite"),en=kt.objectStore($t).put({compositeKey:Oe,value:Le});return new Promise((wn,vr)=>{en.onsuccess=Er=>{wn()},kt.onerror=Er=>{var Xr;vr(fe.create("storage-set",{originalErrorMessage:null===(Xr=Er.target.error)||void 0===Xr?void 0:Xr.message}))}})})).apply(this,arguments)}const xn=new He.Yd("@firebase/app-check");function Xe(Oe,Le){return(0,he.hl)()?function St(Oe,Le){return function gn(Oe,Le){return Cn.apply(this,arguments)}(function zn(Oe){return`${Oe.options.appId}-${Oe.name}`}(Oe),Le)}(Oe,Le).catch(_t=>{xn.warn(`Failed to write token to IndexedDB. Error: ${_t}`)}):Promise.resolve()}function pn(){return dt().enabled}function Nn(){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,we.Z)(function*(){const Oe=dt();if(Oe.enabled&&Oe.token)return Oe.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const Hn={error:"UNKNOWN_ERROR"};function Kn(Oe){return he.US.encodeString(JSON.stringify(Oe),!1)}function Ot(Oe){return hn.apply(this,arguments)}function hn(){return(hn=(0,we.Z)(function*(Oe,Le=!1){const _t=Oe.app;Ke(_t);const kt=ot(_t);let en,zt=kt.token;if(!zt){const Er=yield kt.cachedTokenPromise;Er&&Jn(Er)&&(zt=Er)}if(!Le&&zt&&Jn(zt))return{token:zt.token};let vr,wn=!1;if(pn()){kt.exchangeTokenPromise||(kt.exchangeTokenPromise=Qe(ut(_t,yield Nn()),Oe.heartbeatServiceProvider).then(Xr=>(kt.exchangeTokenPromise=void 0,Xr)),wn=!0);const Er=yield kt.exchangeTokenPromise;return yield Xe(_t,Er),at(_t,Object.assign(Object.assign({},kt),{token:Er})),{token:Er.token}}try{kt.exchangeTokenPromise||(kt.exchangeTokenPromise=kt.provider.getToken().then(Er=>(kt.exchangeTokenPromise=void 0,Er)),wn=!0),zt=yield kt.exchangeTokenPromise}catch(Er){"appCheck/throttled"===Er.code?xn.warn(Er.message):xn.error(Er),en=Er}return zt?(vr={token:zt.token},at(_t,Object.assign(Object.assign({},kt),{token:zt})),yield Xe(_t,zt)):vr=Fn(en),wn&&Ar(_t,vr),vr})).apply(this,arguments)}function hr(Oe,Le){const _t=ot(Oe),kt=_t.tokenObservers.filter(zt=>zt.next!==Le);0===kt.length&&_t.tokenRefresher&&_t.tokenRefresher.isRunning()&&_t.tokenRefresher.stop(),at(Oe,Object.assign(Object.assign({},_t),{tokenObservers:kt}))}function Tr(Oe){const{app:Le}=Oe,_t=ot(Le);let kt=_t.tokenRefresher;kt||(kt=function Bn(Oe){const{app:Le}=Oe;return new rt((0,we.Z)(function*(){let kt;if(kt=ot(Le).token?yield Ot(Oe,!0):yield Ot(Oe),kt.error)throw kt.error}),()=>!0,()=>{const _t=ot(Le);if(_t.token){let kt=_t.token.issuedAtTimeMillis+.5*(_t.token.expireTimeMillis-_t.token.issuedAtTimeMillis)+3e5;return kt=Math.min(kt,_t.token.expireTimeMillis-3e5),Math.max(0,kt-Date.now())}return 0},3e4,96e4)}(Oe),at(Le,Object.assign(Object.assign({},_t),{tokenRefresher:kt}))),!kt.isRunning()&&_t.isTokenAutoRefreshEnabled&&kt.start()}function Ar(Oe,Le){const _t=ot(Oe).tokenObservers;for(const kt of _t)try{"EXTERNAL"===kt.type&&null!=Le.error?kt.error(Le.error):kt.next(Le)}catch(zt){}}function Jn(Oe){return Oe.expireTimeMillis-Date.now()>0}function Fn(Oe){return{token:Kn(Hn),error:Oe}}class Ye{constructor(Le,_t){this.app=Le,this.heartbeatServiceProvider=_t}_delete(){const{tokenObservers:Le}=ot(this.app);for(const _t of Le)hr(this.app,_t.next);return Promise.resolve()}}const _n="app-check-internal";!function Ut(){(0,Se._registerComponent)(new Pe.wA("app-check",Oe=>function Fe(Oe,Le){return new Ye(Oe,Le)}(Oe.getProvider("app").getImmediate(),Oe.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((Oe,Le,_t)=>{Oe.getProvider(_n).initialize()})),(0,Se._registerComponent)(new Pe.wA(_n,Oe=>function ue(Oe){return{getToken:Le=>Ot(Oe,Le),addTokenListener:Le=>function Gt(Oe,Le,_t,kt){const{app:zt}=Oe,en=ot(zt),wn={next:_t,error:kt,type:Le};if(at(zt,Object.assign(Object.assign({},en),{tokenObservers:[...en.tokenObservers,wn]})),en.token&&Jn(en.token)){const vr=en.token;Promise.resolve().then(()=>{_t({token:vr.token}),Tr(Oe)}).catch(()=>{})}en.cachedTokenPromise.then(()=>Tr(Oe))}(Oe,"INTERNAL",Le),removeTokenListener:Le=>hr(Oe.app,Le)}}(Oe.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,Se.registerVersion)("@firebase/app-check","0.5.5")}();class xt{constructor(){return(0,f.vb)("app-check")}}"undefined"!=typeof window&&window},3692:(rn,et,N)=>{N.d(et,{Ot:()=>Z,z6:()=>we,ZF:()=>be,hX:()=>ot});var f=N(5867),T=N(5e3),P=N(4027);class Z{constructor(rt){return rt}}class we{constructor(){return(0,f.C6)()}}const he=new T.OlP("angularfire2._apps"),He={provide:Z,useFactory:function Pe(st){return st&&1===st.length?st[0]:new Z((0,f.Mq)())},deps:[[new T.FiY,he]]},ae={provide:we,deps:[[new T.FiY,he]]};function ve(st){return(rt,ht)=>{const ke=rt.runOutsideAngular(()=>st(ht));return new Z(ke)}}let De=(()=>{class st{constructor(ht){(0,f.KN)("angularfire",P.q4.full,"core"),(0,f.KN)("angularfire",P.q4.full,"app"),(0,f.KN)("angular",T.q4F.full,ht.toString())}}return st.\u0275fac=function(ht){return new(ht||st)(T.LFG(T.Lbi))},st.\u0275mod=T.oAB({type:st}),st.\u0275inj=T.cJS({providers:[He,ae]}),st})();function ot(st,...rt){return{ngModule:De,providers:[{provide:he,useFactory:ve(st),multi:!0,deps:[T.R0b,T.zs3,P.HU,...rt]}]}}const be=(0,P.u3)(f.ZF,!0)},3999:(rn,et,N)=>{N.d(et,{gx:()=>Ct,dh:()=>be,fD:()=>Lt,v0:()=>Ce,AR:()=>fe});var f=N(4027),T=N(5e3),P=N(3692),Z=N(5867),we=N(7128),Se=N(424),ve=(N(2090),N(9681),N(1877),N(4859),N(8306));function De(Me){return new ve.y(function(Ge){return{unsubscribe:(0,Se.t)(Me,Ge.next.bind(Ge),Ge.error.bind(Ge),Ge.complete.bind(Ge))}})}class Ct{constructor(Ge){return Ge}}class be{constructor(){return(0,f.vb)("auth")}}const Mt=new T.OlP("angularfire2.auth-instances");function st(Me){return(Ge,le)=>{const oe=Ge.runOutsideAngular(()=>Me(le));return new Ct(oe)}}const rt={provide:be,deps:[[new T.FiY,Mt]]},ht={provide:Ct,useFactory:function Pt(Me,Ge){const le=(0,f.JM)("auth",Me,Ge);return le&&new Ct(le)},deps:[[new T.FiY,Mt],P.Ot]};let ke=(()=>{class Me{constructor(){(0,Z.KN)("angularfire",f.q4.full,"auth")}}return Me.\u0275fac=function(le){return new(le||Me)},Me.\u0275mod=T.oAB({type:Me}),Me.\u0275inj=T.cJS({providers:[ht,rt]}),Me})();function fe(Me,...Ge){return{ngModule:ke,providers:[{provide:Mt,useFactory:st(Me),multi:!0,deps:[T.R0b,T.zs3,f.HU,P.z6,[new T.FiY,we.nm],...Ge]}]}}const Lt=(0,f.u3)(De,!0),Ce=(0,f.u3)(Se.n,!0)},1205:(rn,et,N)=>{N.d(et,{zQ:()=>Ne,rT:()=>it,f7:()=>We,L6:()=>Lt,_Q:()=>Ke,lh:()=>xe,Qv:()=>fe,nw:()=>Qe});var f=N(5e3),T=N(7579),P=N(9646),Z=N(8306),we=N(8996),Se=N(6451),Pe=N(6063);class he extends T.x{constructor(ut=1/0,nt=1/0,Ce=Pe.l){super(),this._bufferSize=ut,this._windowTime=nt,this._timestampProvider=Ce,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=nt===1/0,this._bufferSize=Math.max(1,ut),this._windowTime=Math.max(1,nt)}next(ut){const{isStopped:nt,_buffer:Ce,_infiniteTimeWindow:$t,_timestampProvider:an,_windowTime:Rn}=this;nt||(Ce.push(ut),!$t&&Ce.push(an.now()+Rn)),this._trimBuffer(),super.next(ut)}_subscribe(ut){this._throwIfClosed(),this._trimBuffer();const nt=this._innerSubscribe(ut),{_infiniteTimeWindow:Ce,_buffer:$t}=this,an=$t.slice();for(let Rn=0;Rn<an.length&&!ut.closed;Rn+=Ce?1:2)ut.next(an[Rn]);return this._checkFinalizedStatuses(ut),nt}_trimBuffer(){const{_bufferSize:ut,_timestampProvider:nt,_buffer:Ce,_infiniteTimeWindow:$t}=this,an=($t?1:2)*ut;if(ut<1/0&&an<Ce.length&&Ce.splice(0,Ce.length-an),!$t){const Rn=nt.now();let sn=0;for(let un=1;un<Ce.length&&Ce[un]<=Rn;un+=2)sn=un;sn&&Ce.splice(0,sn+1)}}}var He=N(3099);function ae(Wt,ut,nt){let Ce,$t=!1;return Wt&&"object"==typeof Wt?({bufferSize:Ce=1/0,windowTime:ut=1/0,refCount:$t=!1,scheduler:nt}=Wt):Ce=null!=Wt?Wt:1/0,(0,He.B)({connector:()=>new he(Ce,ut,nt),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:$t})}var ve=N(3900),De=N(576);function ot(Wt,ut){return(0,De.m)(ut)?(0,ve.w)(()=>Wt,ut):(0,ve.w)(()=>Wt)}var at=N(5363),dt=N(4004),Ct=N(590),be=N(9468),mt=N(9300),Mt=N(4027),Pt=N(2011),st=N(9808),rt=N(7128);N(127);const fe=new f.OlP("angularfire2.auth.use-emulator"),Lt=new f.OlP("angularfire2.auth.settings"),Ke=new f.OlP("angularfire2.auth.tenant-id"),it=new f.OlP("angularfire2.auth.langugage-code"),xe=new f.OlP("angularfire2.auth.use-device-language"),We=new f.OlP("angularfire.auth.persistence"),Qe=(Wt,ut,nt,Ce,$t,an,Rn,sn)=>(0,Pt.cc)(`${Wt.name}.auth`,"AngularFireAuth",Wt.name,()=>{const un=ut.runOutsideAngular(()=>Wt.auth());if(nt&&un.useEmulator(...nt),Ce&&(un.tenantId=Ce),un.languageCode=$t,an&&un.useDeviceLanguage(),Rn)for(const[St,Yt]of Object.entries(Rn))un.settings[St]=Yt;return sn&&un.setPersistence(sn),un},[nt,Ce,$t,an,Rn,sn]);let Ne=(()=>{class Wt{constructor(nt,Ce,$t,an,Rn,sn,un,St,Yt,Kt,gn,Cn){const Pn=new T.x,Qn=(0,P.of)(void 0).pipe((0,at.Q)(Rn.outsideAngular),(0,ve.w)(()=>an.runOutsideAngular(()=>Promise.resolve().then(N.bind(N,5881)))),(0,dt.U)(()=>(0,Pt.on)(nt,an,Ce)),(0,dt.U)(zn=>Qe(zn,an,sn,St,Yt,Kt,un,gn)),ae({bufferSize:1,refCount:!1}));if((0,st.PM)($t))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,P.of)(null);else{Qn.pipe((0,Ct.P)()).subscribe();const xn=Qn.pipe((0,ve.w)(Xe=>Xe.getRedirectResult().then(It=>It,()=>null)),Mt.iC,ae({bufferSize:1,refCount:!1})),sr=Qn.pipe((0,ve.w)(Xe=>new Z.y(It=>({unsubscribe:an.runOutsideAngular(()=>Xe.onAuthStateChanged(Rt=>It.next(Rt),Rt=>It.error(Rt),()=>It.complete()))})))),wt=Qn.pipe((0,ve.w)(Xe=>new Z.y(It=>({unsubscribe:an.runOutsideAngular(()=>Xe.onIdTokenChanged(Rt=>It.next(Rt),Rt=>It.error(Rt),()=>It.complete()))}))));this.authState=xn.pipe(ot(sr),(0,be.R)(Rn.outsideAngular),(0,at.Q)(Rn.insideAngular)),this.user=xn.pipe(ot(wt),(0,be.R)(Rn.outsideAngular),(0,at.Q)(Rn.insideAngular)),this.idToken=this.user.pipe((0,ve.w)(Xe=>Xe?(0,we.D)(Xe.getIdToken()):(0,P.of)(null))),this.idTokenResult=this.user.pipe((0,ve.w)(Xe=>Xe?(0,we.D)(Xe.getIdTokenResult()):(0,P.of)(null))),this.credential=(0,Se.T)(xn,Pn,this.authState.pipe((0,mt.h)(Xe=>!Xe))).pipe((0,dt.U)(Xe=>(null==Xe?void 0:Xe.user)?Xe:null),(0,be.R)(Rn.outsideAngular),(0,at.Q)(Rn.insideAngular))}return(0,Pt.pX)(this,Qn,an,{spy:{apply:(zn,xn,sr)=>{(zn.startsWith("signIn")||zn.startsWith("createUser"))&&sr.then(wt=>Pn.next(wt))}}})}}return Wt.\u0275fac=function(nt){return new(nt||Wt)(f.LFG(Pt.Dh),f.LFG(Pt.xv,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Mt.HU),f.LFG(fe,8),f.LFG(Lt,8),f.LFG(Ke,8),f.LFG(it,8),f.LFG(xe,8),f.LFG(We,8),f.LFG(rt.nm,8))},Wt.\u0275prov=f.Yz7({token:Wt,factory:Wt.\u0275fac,providedIn:"any"}),Wt})()},5019:(rn,et,N)=>{N.d(et,{KQ:()=>Jn,JS:()=>Fn});var f=N(5e3),T=N(4986),P=N(8306),Z=N(9646),we=N(6451),Se=N(4482),Pe=N(5403),he=N(8421),He=N(4671),ae=N(5032),ve=N(7669),at=N(4004),dt=N(3099),Ct=N(3900),be=N(5026),mt=N(1884),Mt=N(4027),Pt=N(2011),rt=(N(5881),N(3942)),ht=N(4859),ke=N(1627),fe=N(2090);const xe=new(N(1877).Yd)("@firebase/database-compat"),We=function(Ye){xe.warn("FIREBASE WARNING: "+Ye)};class dn{constructor(Fe){this._delegate=Fe}cancel(Fe){(0,fe.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,fe.Wj)("OnDisconnect.cancel","onComplete",Fe,!0);const ue=this._delegate.cancel();return Fe&&ue.then(()=>Fe(null),$=>Fe($)),ue}remove(Fe){(0,fe.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,fe.Wj)("OnDisconnect.remove","onComplete",Fe,!0);const ue=this._delegate.remove();return Fe&&ue.then(()=>Fe(null),$=>Fe($)),ue}set(Fe,ue){(0,fe.Dv)("OnDisconnect.set",1,2,arguments.length),(0,fe.Wj)("OnDisconnect.set","onComplete",ue,!0);const $=this._delegate.set(Fe);return ue&&$.then(()=>ue(null),z=>ue(z)),$}setWithPriority(Fe,ue,$){(0,fe.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,fe.Wj)("OnDisconnect.setWithPriority","onComplete",$,!0);const z=this._delegate.setWithPriority(Fe,ue);return $&&z.then(()=>$(null),me=>$(me)),z}update(Fe,ue){if((0,fe.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(Fe)){const z={};for(let me=0;me<Fe.length;++me)z[""+me]=Fe[me];Fe=z,We("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,fe.Wj)("OnDisconnect.update","onComplete",ue,!0);const $=this._delegate.update(Fe);return ue&&$.then(()=>ue(null),z=>ue(z)),$}}class Wt{constructor(Fe,ue){this.committed=Fe,this.snapshot=ue}toJSON(){return(0,fe.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class ut{constructor(Fe,ue){this._database=Fe,this._delegate=ue}val(){return(0,fe.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,fe.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,fe.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,fe.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(Fe){return(0,fe.Dv)("DataSnapshot.child",0,1,arguments.length),Fe=String(Fe),(0,ke.FQ)("DataSnapshot.child","path",Fe,!1),new ut(this._database,this._delegate.child(Fe))}hasChild(Fe){return(0,fe.Dv)("DataSnapshot.hasChild",1,1,arguments.length),(0,ke.FQ)("DataSnapshot.hasChild","path",Fe,!1),this._delegate.hasChild(Fe)}getPriority(){return(0,fe.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(Fe){return(0,fe.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,fe.Wj)("DataSnapshot.forEach","action",Fe,!1),this._delegate.forEach(ue=>Fe(new ut(this._database,ue)))}hasChildren(){return(0,fe.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,fe.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,fe.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ce(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class nt{constructor(Fe,ue){this.database=Fe,this._delegate=ue}on(Fe,ue,$,z){var me;(0,fe.Dv)("Query.on",2,4,arguments.length),(0,fe.Wj)("Query.on","callback",ue,!1);const de=nt.getCancelAndContextArgs_("Query.on",$,z),Me=(le,oe)=>{ue.call(de.context,new ut(this.database,le),oe)};Me.userCallback=ue,Me.context=de.context;const Ge=null===(me=de.cancel)||void 0===me?void 0:me.bind(de.context);switch(Fe){case"value":return(0,ke.jM)(this._delegate,Me,Ge),ue;case"child_added":return(0,ke.yv)(this._delegate,Me,Ge),ue;case"child_removed":return(0,ke.MQ)(this._delegate,Me,Ge),ue;case"child_changed":return(0,ke.Jr)(this._delegate,Me,Ge),ue;case"child_moved":return(0,ke.Vt)(this._delegate,Me,Ge),ue;default:throw new Error((0,fe.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(Fe,ue,$){if((0,fe.Dv)("Query.off",0,3,arguments.length),function(Ye,Fe,ue){if(void 0!==Fe)switch(Fe){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,fe.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,Fe),(0,fe.Wj)("Query.off","callback",ue,!0),(0,fe.lb)("Query.off","context",$,!0),ue){const z=()=>{};z.userCallback=ue,z.context=$,(0,ke.S1)(this._delegate,Fe,z)}else(0,ke.S1)(this._delegate,Fe)}get(){return(0,ke.U2)(this._delegate).then(Fe=>new ut(this.database,Fe))}once(Fe,ue,$,z){(0,fe.Dv)("Query.once",1,4,arguments.length),(0,fe.Wj)("Query.once","callback",ue,!0);const me=nt.getCancelAndContextArgs_("Query.once",$,z),de=new fe.BH,Me=(le,oe)=>{const Ee=new ut(this.database,le);ue&&ue.call(me.context,Ee,oe),de.resolve(Ee)};Me.userCallback=ue,Me.context=me.context;const Ge=le=>{me.cancel&&me.cancel.call(me.context,le),de.reject(le)};switch(Fe){case"value":(0,ke.jM)(this._delegate,Me,Ge,{onlyOnce:!0});break;case"child_added":(0,ke.yv)(this._delegate,Me,Ge,{onlyOnce:!0});break;case"child_removed":(0,ke.MQ)(this._delegate,Me,Ge,{onlyOnce:!0});break;case"child_changed":(0,ke.Jr)(this._delegate,Me,Ge,{onlyOnce:!0});break;case"child_moved":(0,ke.Vt)(this._delegate,Me,Ge,{onlyOnce:!0});break;default:throw new Error((0,fe.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return de.promise}limitToFirst(Fe){return(0,fe.Dv)("Query.limitToFirst",1,1,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.Kk)(Fe)))}limitToLast(Fe){return(0,fe.Dv)("Query.limitToLast",1,1,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.vh)(Fe)))}orderByChild(Fe){return(0,fe.Dv)("Query.orderByChild",1,1,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.g2)(Fe)))}orderByKey(){return(0,fe.Dv)("Query.orderByKey",0,0,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.R)()))}orderByPriority(){return(0,fe.Dv)("Query.orderByPriority",0,0,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.HE)()))}orderByValue(){return(0,fe.Dv)("Query.orderByValue",0,0,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.Bd)()))}startAt(Fe=null,ue){return(0,fe.Dv)("Query.startAt",0,2,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.e0)(Fe,ue)))}startAfter(Fe=null,ue){return(0,fe.Dv)("Query.startAfter",0,2,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.TQ)(Fe,ue)))}endAt(Fe=null,ue){return(0,fe.Dv)("Query.endAt",0,2,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.Wu)(Fe,ue)))}endBefore(Fe=null,ue){return(0,fe.Dv)("Query.endBefore",0,2,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.Lx)(Fe,ue)))}equalTo(Fe,ue){return(0,fe.Dv)("Query.equalTo",1,2,arguments.length),new nt(this.database,(0,ke.IO)(this._delegate,(0,ke.EW)(Fe,ue)))}toString(){return(0,fe.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,fe.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(Fe){if((0,fe.Dv)("Query.isEqual",1,1,arguments.length),!(Fe instanceof nt))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(Fe._delegate)}static getCancelAndContextArgs_(Fe,ue,$){const z={cancel:void 0,context:void 0};if(ue&&$)z.cancel=ue,(0,fe.Wj)(Fe,"cancel",z.cancel,!0),z.context=$,(0,fe.lb)(Fe,"context",z.context,!0);else if(ue)if("object"==typeof ue&&null!==ue)z.context=ue;else{if("function"!=typeof ue)throw new Error((0,fe.gK)(Fe,"cancelOrContext")+" must either be a cancel callback or a context object.");z.cancel=ue}return z}get ref(){return new Ce(this.database,new ke.tn(this._delegate._repo,this._delegate._path))}}class Ce extends nt{constructor(Fe,ue){super(Fe,new ke.JH(ue._repo,ue._path,new ke.G$,!1)),this.database=Fe,this._delegate=ue}getKey(){return(0,fe.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(Fe){return(0,fe.Dv)("Reference.child",1,1,arguments.length),"number"==typeof Fe&&(Fe=String(Fe)),new Ce(this.database,(0,ke.iU)(this._delegate,Fe))}getParent(){(0,fe.Dv)("Reference.parent",0,0,arguments.length);const Fe=this._delegate.parent;return Fe?new Ce(this.database,Fe):null}getRoot(){return(0,fe.Dv)("Reference.root",0,0,arguments.length),new Ce(this.database,this._delegate.root)}set(Fe,ue){(0,fe.Dv)("Reference.set",1,2,arguments.length),(0,fe.Wj)("Reference.set","onComplete",ue,!0);const $=(0,ke.t8)(this._delegate,Fe);return ue&&$.then(()=>ue(null),z=>ue(z)),$}update(Fe,ue){if((0,fe.Dv)("Reference.update",1,2,arguments.length),Array.isArray(Fe)){const z={};for(let me=0;me<Fe.length;++me)z[""+me]=Fe[me];Fe=z,We("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ke.mI)("Reference.update",this._delegate._path),(0,fe.Wj)("Reference.update","onComplete",ue,!0);const $=(0,ke.Vx)(this._delegate,Fe);return ue&&$.then(()=>ue(null),z=>ue(z)),$}setWithPriority(Fe,ue,$){(0,fe.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,fe.Wj)("Reference.setWithPriority","onComplete",$,!0);const z=(0,ke.cy)(this._delegate,Fe,ue);return $&&z.then(()=>$(null),me=>$(me)),z}remove(Fe){(0,fe.Dv)("Reference.remove",0,1,arguments.length),(0,fe.Wj)("Reference.remove","onComplete",Fe,!0);const ue=(0,ke.Od)(this._delegate);return Fe&&ue.then(()=>Fe(null),$=>Fe($)),ue}transaction(Fe,ue,$){(0,fe.Dv)("Reference.transaction",1,3,arguments.length),(0,fe.Wj)("Reference.transaction","transactionUpdate",Fe,!1),(0,fe.Wj)("Reference.transaction","onComplete",ue,!0),function(Ye,Fe,ue,$){if(void 0!==ue&&"boolean"!=typeof ue)throw new Error((0,fe.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,$);const z=(0,ke.i3)(this._delegate,Fe,{applyLocally:$}).then(me=>new Wt(me.committed,new ut(this.database,me.snapshot)));return ue&&z.then(me=>ue(null,me.committed,me.snapshot),me=>ue(me,!1,null)),z}setPriority(Fe,ue){(0,fe.Dv)("Reference.setPriority",1,2,arguments.length),(0,fe.Wj)("Reference.setPriority","onComplete",ue,!0);const $=(0,ke.Sl)(this._delegate,Fe);return ue&&$.then(()=>ue(null),z=>ue(z)),$}push(Fe,ue){(0,fe.Dv)("Reference.push",0,2,arguments.length),(0,fe.Wj)("Reference.push","onComplete",ue,!0);const $=(0,ke.VF)(this._delegate,Fe),z=$.then(de=>new Ce(this.database,de));ue&&z.then(()=>ue(null),de=>ue(de));const me=new Ce(this.database,$);return me.then=z.then.bind(z),me.catch=z.catch.bind(z,void 0),me}onDisconnect(){return(0,ke.mI)("Reference.onDisconnect",this._delegate._path),new dn(new ke.vA(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class $t{constructor(Fe,ue){this._delegate=Fe,this.app=ue,this.INTERNAL={delete:()=>this._delegate._delete()}}useEmulator(Fe,ue,$={}){(0,ke.dH)(this._delegate,Fe,ue,$)}ref(Fe){if((0,fe.Dv)("database.ref",0,1,arguments.length),Fe instanceof Ce){const ue=(0,ke.qT)(this._delegate,Fe.toString());return new Ce(this,ue)}{const ue=(0,ke.iH)(this._delegate,Fe);return new Ce(this,ue)}}refFromURL(Fe){(0,fe.Dv)("database.refFromURL",1,1,arguments.length);const $=(0,ke.qT)(this._delegate,Fe);return new Ce(this,$)}goOffline(){return(0,fe.Dv)("database.goOffline",0,0,arguments.length),(0,ke.Sb)(this._delegate)}goOnline(){return(0,fe.Dv)("database.goOnline",0,0,arguments.length),(0,ke.$o)(this._delegate)}}$t.ServerValue={TIMESTAMP:(0,ke.Bt)(),increment:Ye=>(0,ke.nP)(Ye)};var Rn=Object.freeze({__proto__:null,initStandalone:function an({app:Ye,url:Fe,version:ue,customAuthImpl:$,namespace:z,nodeAdmin:me=!1}){(0,ke.AM)(ue);const de=new ht.zt("auth-internal",new ht.H0("database-standalone"));return de.setComponent(new ht.wA("auth-internal",()=>$,"PRIVATE")),{instance:new $t((0,ke.wj)(Ye,de,void 0,Fe,me),Ye),namespace:z}}});const sn=$t.ServerValue;!function un(Ye){Ye.INTERNAL.registerComponent(new ht.wA("database-compat",(Fe,{instanceIdentifier:ue})=>{const $=Fe.getProvider("app-compat").getImmediate(),z=Fe.getProvider("database").getImmediate({identifier:ue});return new $t(z,$)},"PUBLIC").setServiceProps({Reference:Ce,Query:nt,Database:$t,DataSnapshot:ut,enableLogging:ke.U7,INTERNAL:Rn,ServerValue:sn}).setMultipleInstances(!0)),Ye.registerVersion("@firebase/database-compat","0.1.7")}(rt.Z);var St=N(1205),Yt=N(7128),Kt=N(127);function Pn(Ye){return null==Ye}function Qn(Ye){return"function"==typeof Ye.set}function zn(Ye,Fe){return Qn(Fe)?Fe:Ye.ref(Fe)}function xn(Ye,Fe){if(function gn(Ye){return"string"==typeof Ye}(Ye))return Fe.stringCase();if(Qn(Ye))return Fe.firebaseCase();if(function Cn(Ye){return"function"==typeof Ye.exportVal}(Ye))return Fe.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof Ye)}function sr(Ye,Fe,ue="on",$=T.z){return new P.y(z=>{let me=null;return me=Ye[ue](Fe,(de,Me)=>{$.schedule(()=>{z.next({snapshot:de,prevKey:Me})}),"once"===ue&&$.schedule(()=>z.complete())},de=>{$.schedule(()=>z.error(de))}),"on"===ue?{unsubscribe(){null!=me&&Ye.off(Fe,me)}}:{unsubscribe(){}}}).pipe((0,at.U)(z=>{const{snapshot:me,prevKey:de}=z;let Me=null;return me.exists()&&(Me=me.key),{type:Fe,payload:me,prevKey:de,key:Me}}),(0,dt.B)())}function Xe(Ye,Fe){const ue=Ye.length;for(let $=0;$<ue;$++)if(Ye[$].payload.key===Fe)return $;return-1}function Rt(Ye,Fe){const{payload:ue,prevKey:$,key:z}=Fe,me=Xe(Ye,z),de=function It(Ye,Fe){if(Pn(Fe))return 0;{const ue=Xe(Ye,Fe);return-1===ue?Ye.length:ue+1}}(Ye,$);switch(Fe.type){case"value":if(Fe.payload&&Fe.payload.exists()){let Me=null;Fe.payload.forEach(Ge=>{const le={payload:Ge,type:"value",prevKey:Me,key:Ge.key};return Me=Ge.key,Ye=[...Ye,le],!1})}return Ye;case"child_added":if(me>-1){const Me=Ye[me-1];(Me&&Me.key||null)!==$&&(Ye=Ye.filter(Ge=>Ge.payload.key!==ue.key)).splice(de,0,Fe)}else{if(null==$)return[Fe,...Ye];(Ye=Ye.slice()).splice(de,0,Fe)}return Ye;case"child_removed":return Ye.filter(Me=>Me.payload.key!==ue.key);case"child_changed":return Ye.map(Me=>Me.payload.key===z?Fe:Me);case"child_moved":if(me>-1){const Me=Ye.splice(me,1)[0];return(Ye=Ye.slice()).splice(de,0,Me),Ye}return Ye;default:return Ye}}function pn(Ye){return(Pn(Ye)||0===Ye.length)&&(Ye=["child_added","child_removed","child_changed","child_moved"]),Ye}function Nn(Ye,Fe,ue){return function wt(Ye,Fe,ue){return sr(Ye,"value","once",ue).pipe((0,Ct.w)($=>{const z=[(0,Z.of)($)];return Fe.forEach(me=>z.push(sr(Ye,me,"on",ue))),(0,we.T)(...z).pipe((0,be.R)(Rt,[]))}),(0,mt.x)())}(Ye,Fe=pn(Fe),ue)}function Vn(Ye,Fe,ue){const $=(Fe=pn(Fe)).map(z=>sr(Ye,z,"on",ue));return(0,we.T)(...$)}function Ot(Ye,Fe){return function($,z){return xn($,{stringCase:()=>Ye.child($)[Fe](z),firebaseCase:()=>$[Fe](z),snapshotCase:()=>$.ref[Fe](z)})}}function hn(Ye){return function(ue){return ue?xn(ue,{stringCase:()=>Ye.child(ue).remove(),firebaseCase:()=>ue.remove(),snapshotCase:()=>ue.ref.remove()}):Ye.remove()}}function hr(Ye,Fe){return function(){return sr(Ye,"value","on",Fe)}}const Bn=new f.OlP("angularfire2.realtimeDatabaseURL"),Ar=new f.OlP("angularfire2.database.use-emulator");let Jn=(()=>{class Ye{constructor(ue,$,z,me,de,Me,Ge,le,oe,Ee,qe,se,ge,ye,lt){this.schedulers=Me;const yt=Ge,Qt=(0,Pt.on)(ue,de,$);le&&(0,St.nw)(Qt,de,oe,qe,se,ge,Ee,ye),this.database=(0,Pt.cc)(`${Qt.name}.database.${z}`,"AngularFireDatabase",Qt.name,()=>{const bn=de.runOutsideAngular(()=>Qt.database(z||void 0));return yt&&bn.useEmulator(...yt),bn},[yt])}list(ue,$){const z=this.schedulers.ngZone.runOutsideAngular(()=>zn(this.database,ue));let me=z;return $&&(me=$(z)),function Gt(Ye,Fe){const ue=Fe.schedulers.outsideAngular,$=Fe.schedulers.ngZone.run(()=>Ye.ref);return{query:Ye,update:Ot($,"update"),set:Ot($,"set"),push:z=>$.push(z),remove:hn($),snapshotChanges:z=>Nn(Ye,z,ue).pipe(Mt.iC),stateChanges:z=>Vn(Ye,z,ue).pipe(Mt.iC),auditTrail:z=>function Dn(Ye,Fe,ue){return function Kn(Ye,Fe,ue){return function Hn(Ye,Fe){return sr(Ye,"value","on",Fe).pipe((0,at.U)(ue=>{let $;return ue.payload.forEach(z=>($=z.key,!1)),{data:ue,lastKeyToLoad:$}}))}(Ye,ue).pipe(function De(...Ye){const Fe=(0,ve.jO)(Ye);return(0,Se.e)((ue,$)=>{const z=Ye.length,me=new Array(z);let de=Ye.map(()=>!1),Me=!1;for(let Ge=0;Ge<z;Ge++)(0,he.Xf)(Ye[Ge]).subscribe((0,Pe.x)($,le=>{me[Ge]=le,!Me&&!de[Ge]&&(de[Ge]=!0,(Me=de.every(He.y))&&(de=null))},ae.Z));ue.subscribe((0,Pe.x)($,Ge=>{if(Me){const le=[Ge,...me];$.next(Fe?Fe(...le):le)}}))})}(Fe),(0,at.U)(([z,me])=>{const de=z.lastKeyToLoad,Me=me.map(Ge=>Ge.key);return{actions:me,lastKeyToLoad:de,loadedKeys:Me}}),function ot(Ye){return(0,Se.e)((Fe,ue)=>{let $=!1,z=0;Fe.subscribe((0,Pe.x)(ue,me=>($||($=!Ye(me,z++)))&&ue.next(me)))})}(z=>-1===z.loadedKeys.indexOf(z.lastKeyToLoad)),(0,at.U)(z=>z.actions))}(Ye,Vn(Ye,Fe).pipe((0,be.R)((z,me)=>[...z,me],[])),ue)}(Ye,z,ue).pipe(Mt.iC),valueChanges:(z,me)=>Nn(Ye,z,ue).pipe((0,at.U)(Me=>Me.map(Ge=>me&&me.idField?Object.assign(Object.assign({},Ge.payload.val()),{[me.idField]:Ge.key}):Ge.payload.val())),Mt.iC)}}(me,this)}object(ue){return function Tr(Ye,Fe){return{query:Ye,snapshotChanges:()=>hr(Ye,Fe.schedulers.outsideAngular)().pipe(Mt.iC),update:ue=>Ye.ref.update(ue),set:ue=>Ye.ref.set(ue),remove:()=>Ye.ref.remove(),valueChanges:()=>hr(Ye,Fe.schedulers.outsideAngular)().pipe(Mt.iC,(0,at.U)($=>$.payload.exists()?$.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>zn(this.database,ue)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return Ye.\u0275fac=function(ue){return new(ue||Ye)(f.LFG(Pt.Dh),f.LFG(Pt.xv,8),f.LFG(Bn,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Mt.HU),f.LFG(Ar,8),f.LFG(St.zQ,8),f.LFG(St.Qv,8),f.LFG(St.L6,8),f.LFG(St._Q,8),f.LFG(St.rT,8),f.LFG(St.lh,8),f.LFG(St.f7,8),f.LFG(Yt.nm,8))},Ye.\u0275prov=f.Yz7({token:Ye,factory:Ye.\u0275fac,providedIn:"any"}),Ye})(),Fn=(()=>{class Ye{constructor(){Kt.Z.registerVersion("angularfire",Mt.q4.full,"rtdb-compat")}}return Ye.\u0275fac=function(ue){return new(ue||Ye)},Ye.\u0275mod=f.oAB({type:Ye}),Ye.\u0275inj=f.cJS({providers:[Jn]}),Ye})()},3290:(rn,et,N)=>{N.d(et,{ST:()=>Ye,yb:()=>Fe});var f=N(5e3),T=N(4986),P=N(8306),Z=N(8996),we=N(9646),Se=N(4027),Pe=N(8675),he=N(1520),He=N(4004),ae=N(5026),ve=N(1884),De=N(9300),ot=N(2011),at=N(9808),Ct=(N(5881),N(3942)),be=N(5525),mt=N(2090),Mt=N(4859);function rt(ue,$){if(void 0===$)return{merge:!1};if(void 0!==$.mergeFields&&void 0!==$.merge)throw new be.WA("invalid-argument",`Invalid options passed to function ${ue}(): You cannot specify both "merge" and "mergeFields".`);return $}function ht(){if("undefined"==typeof Uint8Array)throw new be.WA("unimplemented","Uint8Arrays are not available in this environment.")}function ke(){if(!(0,be.Me)())throw new be.WA("unimplemented","Blobs are unavailable in Firestore in this environment.")}class fe{constructor($){this._delegate=$}static fromBase64String($){return ke(),new fe(be.Jj.fromBase64String($))}static fromUint8Array($){return ht(),new fe(be.Jj.fromUint8Array($))}toBase64(){return ke(),this._delegate.toBase64()}toUint8Array(){return ht(),this._delegate.toUint8Array()}isEqual($){return this._delegate.isEqual($._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function Lt(ue){return function Ke(ue,$){if("object"!=typeof ue||null===ue)return!1;const z=ue;for(const me of $)if(me in z&&"function"==typeof z[me])return!0;return!1}(ue,["next","error","complete"])}class it{enableIndexedDbPersistence($,z){return(0,be.ST)($._delegate,{forceOwnership:z})}enableMultiTabIndexedDbPersistence($){return(0,be.fH)($._delegate)}clearIndexedDbPersistence($){return(0,be.Fc)($._delegate)}}class xe{constructor($,z,me){this._delegate=z,this._persistenceProvider=me,this.INTERNAL={delete:()=>this.terminate()},$ instanceof be.l7||(this._appCompat=$)}get _databaseId(){return this._delegate._databaseId}settings($){const z=this._delegate._getSettings();!$.merge&&z.host!==$.host&&(0,be.yq)("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),$.merge&&delete($=Object.assign(Object.assign({},z),$)).merge,this._delegate._setSettings($)}useEmulator($,z,me={}){(0,be.at)(this._delegate,$,z,me)}enableNetwork(){return(0,be.Ix)(this._delegate)}disableNetwork(){return(0,be.TF)(this._delegate)}enablePersistence($){let z=!1,me=!1;return $&&(z=!!$.synchronizeTabs,me=!!$.experimentalForceOwningTab,(0,be.Wi)("synchronizeTabs",z,"experimentalForceOwningTab",me)),z?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,me)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return(0,be.Mx)(this._delegate)}onSnapshotsInSync($){return(0,be.sc)(this._delegate,$)}get app(){if(!this._appCompat)throw new be.WA("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection($){try{return new Yt(this,(0,be.hJ)(this._delegate,$))}catch(z){throw nt(z,"collection()","Firestore.collection()")}}doc($){try{return new ut(this,(0,be.JU)(this._delegate,$))}catch(z){throw nt(z,"doc()","Firestore.doc()")}}collectionGroup($){try{return new sn(this,(0,be.B$)(this._delegate,$))}catch(z){throw nt(z,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction($){return(0,be.i3)(this._delegate,z=>$(new Ne(this,z)))}batch(){return(0,be.qY)(this._delegate),new dn(new be.PU(this._delegate,$=>(0,be.GL)(this._delegate,$)))}loadBundle($){return(0,be.Pb)(this._delegate,$)}namedQuery($){return(0,be.L$)(this._delegate,$).then(z=>z?new sn(this,z):null)}}class We extends be.u7{constructor($){super(),this.firestore=$}convertBytes($){return new fe(new be.Jj($))}convertReference($){const z=this.convertDocumentKey($,this.firestore._databaseId);return ut.forKey(z,this.firestore,null)}}class Ne{constructor($,z){this._firestore=$,this._delegate=z,this._userDataWriter=new We($)}get($){const z=Kt($);return this._delegate.get(z).then(me=>new an(this._firestore,new be.xU(this._firestore._delegate,this._userDataWriter,me._key,me._document,me.metadata,z.converter)))}set($,z,me){const de=Kt($);return me?(rt("Transaction.set",me),this._delegate.set(de,z,me)):this._delegate.set(de,z),this}update($,z,me,...de){const Me=Kt($);return 2===arguments.length?this._delegate.update(Me,z):this._delegate.update(Me,z,me,...de),this}delete($){const z=Kt($);return this._delegate.delete(z),this}}class dn{constructor($){this._delegate=$}set($,z,me){const de=Kt($);return me?(rt("WriteBatch.set",me),this._delegate.set(de,z,me)):this._delegate.set(de,z),this}update($,z,me,...de){const Me=Kt($);return 2===arguments.length?this._delegate.update(Me,z):this._delegate.update(Me,z,me,...de),this}delete($){const z=Kt($);return this._delegate.delete(z),this}commit(){return this._delegate.commit()}}class Wt{constructor($,z,me){this._firestore=$,this._userDataWriter=z,this._delegate=me}fromFirestore($,z){const me=new be.$q(this._firestore._delegate,this._userDataWriter,$._key,$._document,$.metadata,null);return this._delegate.fromFirestore(new Rn(this._firestore,me),null!=z?z:{})}toFirestore($,z){return z?this._delegate.toFirestore($,z):this._delegate.toFirestore($)}static getInstance($,z){const me=Wt.INSTANCES;let de=me.get($);de||(de=new WeakMap,me.set($,de));let Me=de.get(z);return Me||(Me=new Wt($,new We($),z),de.set(z,Me)),Me}}Wt.INSTANCES=new WeakMap;class ut{constructor($,z){this.firestore=$,this._delegate=z,this._userDataWriter=new We($)}static forPath($,z,me){if($.length%2!=0)throw new be.WA("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${$.canonicalString()} has ${$.length}`);return new ut(z,new be.my(z._delegate,me,new be.Ky($)))}static forKey($,z,me){return new ut(z,new be.my(z._delegate,me,$))}get id(){return this._delegate.id}get parent(){return new Yt(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection($){try{return new Yt(this.firestore,(0,be.hJ)(this._delegate,$))}catch(z){throw nt(z,"collection()","DocumentReference.collection()")}}isEqual($){return($=(0,mt.m9)($))instanceof be.my&&(0,be.Eo)(this._delegate,$)}set($,z){z=rt("DocumentReference.set",z);try{return z?(0,be.pl)(this._delegate,$,z):(0,be.pl)(this._delegate,$)}catch(me){throw nt(me,"setDoc()","DocumentReference.set()")}}update($,z,...me){try{return 1===arguments.length?(0,be.r7)(this._delegate,$):(0,be.r7)(this._delegate,$,z,...me)}catch(de){throw nt(de,"updateDoc()","DocumentReference.update()")}}delete(){return(0,be.oe)(this._delegate)}onSnapshot(...$){const z=Ce($),me=$t($,de=>new an(this.firestore,new be.xU(this.firestore._delegate,this._userDataWriter,de._key,de._document,de.metadata,this._delegate.converter)));return(0,be.cf)(this._delegate,z,me)}get($){let z;return z="cache"===(null==$?void 0:$.source)?(0,be.kl)(this._delegate):"server"===(null==$?void 0:$.source)?(0,be.Xk)(this._delegate):(0,be.QT)(this._delegate),z.then(me=>new an(this.firestore,new be.xU(this.firestore._delegate,this._userDataWriter,me._key,me._document,me.metadata,this._delegate.converter)))}withConverter($){return new ut(this.firestore,this._delegate.withConverter($?Wt.getInstance(this.firestore,$):null))}}function nt(ue,$,z){return ue.message=ue.message.replace($,z),ue}function Ce(ue){for(const $ of ue)if("object"==typeof $&&!Lt($))return $;return{}}function $t(ue,$){var z,me;let de;return de=Lt(ue[0])?ue[0]:Lt(ue[1])?ue[1]:"function"==typeof ue[0]?{next:ue[0],error:ue[1],complete:ue[2]}:{next:ue[1],error:ue[2],complete:ue[3]},{next:Me=>{de.next&&de.next($(Me))},error:null===(z=de.error)||void 0===z?void 0:z.bind(de),complete:null===(me=de.complete)||void 0===me?void 0:me.bind(de)}}class an{constructor($,z){this._firestore=$,this._delegate=z}get ref(){return new ut(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data($){return this._delegate.data($)}get($,z){return this._delegate.get($,z)}isEqual($){return(0,be.qK)(this._delegate,$._delegate)}}class Rn extends an{data($){const z=this._delegate.data($);return(0,be.K9)(void 0!==z,"Document in a QueryDocumentSnapshot should exist"),z}}class sn{constructor($,z){this.firestore=$,this._delegate=z,this._userDataWriter=new We($)}where($,z,me){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.ar)($,z,me)))}catch(de){throw nt(de,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy($,z){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.Xo)($,z)))}catch(me){throw nt(me,/(orderBy|where)\(\)/,"Query.$1()")}}limit($){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.b9)($)))}catch(z){throw nt(z,"limit()","Query.limit()")}}limitToLast($){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.vh)($)))}catch(z){throw nt(z,"limitToLast()","Query.limitToLast()")}}startAt(...$){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.e0)(...$)))}catch(z){throw nt(z,"startAt()","Query.startAt()")}}startAfter(...$){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.TQ)(...$)))}catch(z){throw nt(z,"startAfter()","Query.startAfter()")}}endBefore(...$){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.Lx)(...$)))}catch(z){throw nt(z,"endBefore()","Query.endBefore()")}}endAt(...$){try{return new sn(this.firestore,(0,be.IO)(this._delegate,(0,be.Wu)(...$)))}catch(z){throw nt(z,"endAt()","Query.endAt()")}}isEqual($){return(0,be.iE)(this._delegate,$._delegate)}get($){let z;return z="cache"===(null==$?void 0:$.source)?(0,be.UQ)(this._delegate):"server"===(null==$?void 0:$.source)?(0,be.zN)(this._delegate):(0,be.PL)(this._delegate),z.then(me=>new St(this.firestore,new be.W(this.firestore._delegate,this._userDataWriter,this._delegate,me._snapshot)))}onSnapshot(...$){const z=Ce($),me=$t($,de=>new St(this.firestore,new be.W(this.firestore._delegate,this._userDataWriter,this._delegate,de._snapshot)));return(0,be.cf)(this._delegate,z,me)}withConverter($){return new sn(this.firestore,this._delegate.withConverter($?Wt.getInstance(this.firestore,$):null))}}class un{constructor($,z){this._firestore=$,this._delegate=z}get type(){return this._delegate.type}get doc(){return new Rn(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class St{constructor($,z){this._firestore=$,this._delegate=z}get query(){return new sn(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map($=>new Rn(this._firestore,$))}docChanges($){return this._delegate.docChanges($).map(z=>new un(this._firestore,z))}forEach($,z){this._delegate.forEach(me=>{$.call(z,new Rn(this._firestore,me))})}isEqual($){return(0,be.qK)(this._delegate,$._delegate)}}class Yt extends sn{constructor($,z){super($,z),this.firestore=$,this._delegate=z}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const $=this._delegate.parent;return $?new ut(this.firestore,$):null}doc($){try{return new ut(this.firestore,void 0===$?(0,be.JU)(this._delegate):(0,be.JU)(this._delegate,$))}catch(z){throw nt(z,"doc()","CollectionReference.doc()")}}add($){return(0,be.ET)(this._delegate,$).then(z=>new ut(this.firestore,z))}isEqual($){return(0,be.Eo)(this._delegate,$._delegate)}withConverter($){return new Yt(this.firestore,this._delegate.withConverter($?Wt.getInstance(this.firestore,$):null))}}function Kt(ue){return(0,be.Cf)(ue,be.my)}class gn{constructor(...$){this._delegate=new be.Lz(...$)}static documentId(){return new gn(be.Xb.keyField().canonicalString())}isEqual($){return($=(0,mt.m9)($))instanceof be.Lz&&this._delegate._internalPath.isEqual($._internalPath)}}class Cn{constructor($){this._delegate=$}static serverTimestamp(){const $=(0,be.Bt)();return $._methodName="FieldValue.serverTimestamp",new Cn($)}static delete(){const $=(0,be.AK)();return $._methodName="FieldValue.delete",new Cn($)}static arrayUnion(...$){const z=(0,be.vr)(...$);return z._methodName="FieldValue.arrayUnion",new Cn(z)}static arrayRemove(...$){const z=(0,be.Ab)(...$);return z._methodName="FieldValue.arrayRemove",new Cn(z)}static increment($){const z=(0,be.nP)($);return z._methodName="FieldValue.increment",new Cn(z)}isEqual($){return this._delegate.isEqual($._delegate)}}const Pn={Firestore:xe,GeoPoint:be.F8,Timestamp:be.EK,Blob:fe,Transaction:Ne,WriteBatch:dn,DocumentReference:ut,DocumentSnapshot:an,Query:sn,QueryDocumentSnapshot:Rn,QuerySnapshot:St,CollectionReference:Yt,FieldPath:gn,FieldValue:Cn,setLogLevel:function Qe(ue){(0,be.Ub)(ue)},CACHE_SIZE_UNLIMITED:be.IX};!function zn(ue){(function Qn(ue,$){ue.INTERNAL.registerComponent(new Mt.wA("firestore-compat",z=>{const me=z.getProvider("app-compat").getImmediate(),de=z.getProvider("firestore").getImmediate();return $(me,de)},"PUBLIC").setServiceProps(Object.assign({},Pn)))})(ue,($,z)=>new xe($,z,new it)),ue.registerVersion("@firebase/firestore-compat","0.1.16")}(Ct.Z);var xn=N(1205),sr=N(7128),wt=N(127);function It(ue,$){return function Xe(ue,$=T.z){return new P.y(z=>{let me;return null!=$?$.schedule(()=>{me=ue.onSnapshot({includeMetadataChanges:!0},z)}):me=ue.onSnapshot({includeMetadataChanges:!0},z),()=>{null!=me&&me()}})}(ue,$)}function pn(ue,$){return It(ue,$).pipe((0,He.U)(z=>({payload:z,type:"query"})))}function Nn(ue,$){return pn(ue,$).pipe((0,Pe.O)(void 0),(0,he.G)(),(0,He.U)(([z,me])=>{const de=me.payload.docChanges(),Me=de.map(Ge=>({type:Ge.type,payload:Ge}));return z&&JSON.stringify(z.payload.metadata)!==JSON.stringify(me.payload.metadata)&&me.payload.docs.forEach((Ge,le)=>{const oe=de.find(qe=>qe.doc.ref.isEqual(Ge.ref)),Ee=null==z?void 0:z.payload.docs.find(qe=>qe.ref.isEqual(Ge.ref));oe&&JSON.stringify(oe.doc.metadata)===JSON.stringify(Ge.metadata)||!oe&&Ee&&JSON.stringify(Ee.metadata)===JSON.stringify(Ge.metadata)||Me.push({type:"modified",payload:{oldIndex:le,newIndex:le,type:"modified",doc:Ge}})}),Me}))}function Vn(ue,$,z){return Nn(ue,z).pipe((0,ae.R)((me,de)=>function Dn(ue,$,z){return $.forEach(me=>{z.indexOf(me.type)>-1&&(ue=function Kn(ue,$){switch($.type){case"added":if(!ue[$.newIndex]||!ue[$.newIndex].doc.ref.isEqual($.doc.ref))return Hn(ue,$.newIndex,0,$);break;case"modified":if(null==ue[$.oldIndex]||ue[$.oldIndex].doc.ref.isEqual($.doc.ref)){if($.oldIndex!==$.newIndex){const z=ue.slice();return z.splice($.oldIndex,1),z.splice($.newIndex,0,$),z}return Hn(ue,$.newIndex,1,$)}break;case"removed":if(ue[$.oldIndex]&&ue[$.oldIndex].doc.ref.isEqual($.doc.ref))return Hn(ue,$.oldIndex,1)}return ue}(ue,me))}),ue}(me,de.map(Me=>Me.payload),$),[]),(0,ve.x)(),(0,He.U)(me=>me.map(de=>({type:de.type,payload:de}))))}function Hn(ue,$,z,...me){const de=ue.slice();return de.splice($,z,...me),de}function Ot(ue){return(!ue||0===ue.length)&&(ue=["added","removed","modified"]),ue}class hn{constructor($,z,me){this.ref=$,this.query=z,this.afs=me}stateChanges($){let z=Nn(this.query,this.afs.schedulers.outsideAngular);return $&&$.length>0&&(z=z.pipe((0,He.U)(me=>me.filter(de=>$.indexOf(de.type)>-1)))),z.pipe((0,Pe.O)(void 0),(0,he.G)(),(0,De.h)(([me,de])=>de.length>0||!me),(0,He.U)(([me,de])=>de),Se.iC)}auditTrail($){return this.stateChanges($).pipe((0,ae.R)((z,me)=>[...z,...me],[]))}snapshotChanges($){const z=Ot($);return Vn(this.query,z,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges($={}){return pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(z=>z.payload.docs.map(me=>$.idField?Object.assign(Object.assign({},me.data()),{[$.idField]:me.id}):me.data())),Se.iC)}get($){return(0,Z.D)(this.query.get($)).pipe(Se.iC)}add($){return this.ref.add($)}doc($){return new Gt(this.ref.doc($),this.afs)}}class Gt{constructor($,z){this.ref=$,this.afs=z}set($,z){return this.ref.set($,z)}update($){return this.ref.update($)}delete(){return this.ref.delete()}collection($,z){const me=this.ref.collection($),{ref:de,query:Me}=Fn(me,z);return new hn(de,Me,this.afs)}snapshotChanges(){return function Rt(ue,$){return It(ue,$).pipe((0,Pe.O)(void 0),(0,he.G)(),(0,He.U)(([z,me])=>me.exists?(null==z?void 0:z.exists)?{payload:me,type:"modified"}:{payload:me,type:"added"}:{payload:me,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges($={}){return this.snapshotChanges().pipe((0,He.U)(({payload:z})=>$.idField?Object.assign(Object.assign({},z.data()),{[$.idField]:z.id}):z.data()))}get($){return(0,Z.D)(this.ref.get($)).pipe(Se.iC)}}class hr{constructor($,z){this.query=$,this.afs=z}stateChanges($){return $&&0!==$.length?Nn(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(z=>z.filter(me=>$.indexOf(me.type)>-1)),(0,De.h)(z=>z.length>0),Se.iC):Nn(this.query,this.afs.schedulers.outsideAngular).pipe(Se.iC)}auditTrail($){return this.stateChanges($).pipe((0,ae.R)((z,me)=>[...z,...me],[]))}snapshotChanges($){const z=Ot($);return Vn(this.query,z,this.afs.schedulers.outsideAngular).pipe(Se.iC)}valueChanges($={}){return pn(this.query,this.afs.schedulers.outsideAngular).pipe((0,He.U)(me=>me.payload.docs.map(de=>$.idField?Object.assign({[$.idField]:de.id},de.data()):de.data())),Se.iC)}get($){return(0,Z.D)(this.query.get($)).pipe(Se.iC)}}const Tr=new f.OlP("angularfire2.enableFirestorePersistence"),Bn=new f.OlP("angularfire2.firestore.persistenceSettings"),Ar=new f.OlP("angularfire2.firestore.settings"),Jn=new f.OlP("angularfire2.firestore.use-emulator");function Fn(ue,$=(z=>z)){return{query:$(ue),ref:ue}}let Ye=(()=>{class ue{constructor(z,me,de,Me,Ge,le,oe,Ee,qe,se,ge,ye,lt,yt,Qt,bn,fn){this.schedulers=oe;const On=(0,ot.on)(z,le,me),mr=qe;se&&(0,xn.nw)(On,le,ge,lt,yt,Qt,ye,bn),[this.firestore,this.persistenceEnabled$]=(0,ot.cc)(`${On.name}.firestore`,"AngularFirestore",On.name,()=>{const Rr=le.runOutsideAngular(()=>On.firestore());if(Me&&Rr.settings(Me),mr&&Rr.useEmulator(...mr),de&&!(0,at.PM)(Ge)){const or=()=>{try{return(0,Z.D)(Rr.enablePersistence(Ee||void 0).then(()=>!0,()=>!1))}catch($e){return"undefined"!=typeof console&&console.warn($e),(0,we.of)(!1)}};return[Rr,le.runOutsideAngular(or)]}return[Rr,(0,we.of)(!1)]},[Me,mr,de])}collection(z,me){let de;de="string"==typeof z?this.firestore.collection(z):z;const{ref:Me,query:Ge}=Fn(de,me),le=this.schedulers.ngZone.run(()=>Me);return new hn(le,Ge,this)}collectionGroup(z,me){const de=me||(Ge=>Ge),Me=this.firestore.collectionGroup(z);return new hr(de(Me),this)}doc(z){let me;me="string"==typeof z?this.firestore.doc(z):z;const de=this.schedulers.ngZone.run(()=>me);return new Gt(de,this)}createId(){return this.firestore.collection("_").doc().id}}return ue.\u0275fac=function(z){return new(z||ue)(f.LFG(ot.Dh),f.LFG(ot.xv,8),f.LFG(Tr,8),f.LFG(Ar,8),f.LFG(f.Lbi),f.LFG(f.R0b),f.LFG(Se.HU),f.LFG(Bn,8),f.LFG(Jn,8),f.LFG(xn.zQ,8),f.LFG(xn.Qv,8),f.LFG(xn.L6,8),f.LFG(xn._Q,8),f.LFG(xn.rT,8),f.LFG(xn.lh,8),f.LFG(xn.f7,8),f.LFG(sr.nm,8))},ue.\u0275prov=f.Yz7({token:ue,factory:ue.\u0275fac,providedIn:"any"}),ue})(),Fe=(()=>{class ue{constructor(){wt.Z.registerVersion("angularfire",Se.q4.full,"fst-compat")}static enablePersistence(z){return{ngModule:ue,providers:[{provide:Tr,useValue:!0},{provide:Bn,useValue:z}]}}}return ue.\u0275fac=function(z){return new(z||ue)},ue.\u0275mod=f.oAB({type:ue}),ue.\u0275inj=f.cJS({providers:[Ye]}),ue})()},2011:(rn,et,N)=>{N.d(et,{hO:()=>ot,xv:()=>He,Dh:()=>he,GT:()=>Se,cc:()=>at,on:()=>ae,pX:()=>we});var f=N(5e3),T=N(127),P=N(4027);rn=N.hmd(rn);const Z=["ngOnDestroy"],we=(mt,Mt,Pt,st={})=>new Proxy(mt,{get:(rt,ht)=>Pt.runOutsideAngular(()=>{var ke;if(mt[ht])return(null===(ke=null==st?void 0:st.spy)||void 0===ke?void 0:ke.get)&&st.spy.get(ht,mt[ht]),mt[ht];if(Z.indexOf(ht)>-1)return()=>{};const fe=Mt.toPromise().then(Lt=>{const Ke=Lt&&Lt[ht];return"function"==typeof Ke?Ke.bind(Lt):Ke&&Ke.then?Ke.then(it=>Pt.run(()=>it)):Pt.run(()=>Ke)});return new Proxy(()=>{},{get:(Lt,Ke)=>fe[Ke],apply:(Lt,Ke,it)=>fe.then(xe=>{var We;const Qe=xe&&xe(...it);return(null===(We=null==st?void 0:st.spy)||void 0===We?void 0:We.apply)&&st.spy.apply(ht,it,Qe),Qe})})})}),Se=(mt,Mt)=>{Mt.forEach(Pt=>{Object.getOwnPropertyNames(Pt.prototype||Pt).forEach(st=>{Object.defineProperty(mt.prototype,st,Object.getOwnPropertyDescriptor(Pt.prototype||Pt,st))})})};class Pe{constructor(Mt){return Mt}}const he=new f.OlP("angularfire2.app.options"),He=new f.OlP("angularfire2.app.name");function ae(mt,Mt,Pt){const rt="object"==typeof Pt&&Pt||{};rt.name=rt.name||"string"==typeof Pt&&Pt||"[DEFAULT]";const ke=T.Z.apps.filter(fe=>fe&&fe.name===rt.name)[0]||Mt.runOutsideAngular(()=>T.Z.initializeApp(mt,rt));try{JSON.stringify(mt)!==JSON.stringify(ke.options)&&ve("error",`${ke.name} Firebase App already initialized with different options${rn.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(fe){}return new Pe(ke)}const ve=(mt,...Mt)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[mt](...Mt)},De={provide:Pe,useFactory:ae,deps:[he,f.R0b,[new f.FiY,He]]};let ot=(()=>{class mt{constructor(Pt){T.Z.registerVersion("angularfire",P.q4.full,"core"),T.Z.registerVersion("angularfire",P.q4.full,"app-compat"),T.Z.registerVersion("angular",f.q4F.full,Pt.toString())}static initializeApp(Pt,st){return{ngModule:mt,providers:[{provide:he,useValue:Pt},{provide:He,useValue:st}]}}}return mt.\u0275fac=function(Pt){return new(Pt||mt)(f.LFG(f.Lbi))},mt.\u0275mod=f.oAB({type:mt}),mt.\u0275inj=f.cJS({providers:[De]}),mt})();function at(mt,Mt,Pt,st,rt){const[,ht,ke]=globalThis.\u0275AngularfireInstanceCache.find(fe=>fe[0]===mt)||[];if(ht)return function dt(mt,Mt){try{return mt.toString()===Mt.toString()}catch(Pt){return mt===Mt}}(rt,ke)||(be("error",`${Mt} was already initialized on the ${Pt} Firebase App with different settings.${Ct?" You may need to reload as Firebase is not HMR aware.":""}`),be("warn",{is:rt,was:ke})),ht;{const fe=st();return globalThis.\u0275AngularfireInstanceCache.push([mt,fe,rt]),fe}}const Ct=!!rn.hot,be=(mt,...Mt)=>{(0,f.X6Q)()&&"undefined"!=typeof console&&console[mt](...Mt)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},3266:(rn,et,N)=>{N.d(et,{vr:()=>We,ad:()=>xn,Cm:()=>mt});var f=N(4027),T=N(5e3),P=N(3999),Z=N(3692),we=N(5867),Se=N(7128),Pe=N(5525);class he{constructor(me){return me}}const He="firestore",De=new T.OlP("angularfire2.firestore-instances");function at(z){return(me,de)=>{const Me=me.runOutsideAngular(()=>z(de));return new he(Me)}}const dt={provide:class ae{constructor(){return(0,f.vb)(He)}},deps:[[new T.FiY,De]]},Ct={provide:he,useFactory:function ot(z,me){const de=(0,f.JM)(He,z,me);return de&&new he(de)},deps:[[new T.FiY,De],Z.Ot]};let be=(()=>{class z{constructor(){(0,we.KN)("angularfire",f.q4.full,"fst")}}return z.\u0275fac=function(de){return new(de||z)},z.\u0275mod=T.oAB({type:z}),z.\u0275inj=T.cJS({providers:[Ct,dt]}),z})();function mt(z,...me){return{ngModule:be,providers:[{provide:De,useFactory:at(z),multi:!0,deps:[T.R0b,T.zs3,f.HU,Z.z6,[new T.FiY,P.dh],[new T.FiY,Se.nm],...me]}]}}const We=(0,f.u3)(Pe.vr,!0),xn=(0,f.u3)(Pe.ad,!0)},4027:(rn,et,N)=>{N.d(et,{q4:()=>be,iC:()=>an,HU:()=>dn,vb:()=>xe,JM:()=>it,nk:()=>Ke,n1:()=>fe,_J:()=>Lt,u3:()=>un});var f=N(5e3),T=N(5867),P=N(3226),Z=N(2375),we=N(6148),Se=N(4408),he=N(7565);const ae=new class He extends he.v{}(class Pe extends Se.o{constructor(Yt,Kt){super(Yt,Kt),this.scheduler=Yt,this.work=Kt}schedule(Yt,Kt=0){return Kt>0?super.schedule(Yt,Kt):(this.delay=Kt,this.state=Yt,this.scheduler.flush(this),this)}execute(Yt,Kt){return Kt>0||this.closed?super.execute(Yt,Kt):this._execute(Yt,Kt)}requestAsyncId(Yt,Kt,gn=0){return null!=gn&&gn>0||null==gn&&this.delay>0?super.requestAsyncId(Yt,Kt,gn):Yt.flush(this)}});var De=N(4986),ot=N(8306),at=N(8505),dt=N(9468),Ct=N(5363);const be=new f.GfV("7.3.0"),mt="__angularfire_symbol__analyticsIsSupportedValue",Mt="__angularfire_symbol__analyticsIsSupported",Pt="__angularfire_symbol__remoteConfigIsSupportedValue",st="__angularfire_symbol__remoteConfigIsSupported",rt="__angularfire_symbol__messagingIsSupportedValue",ht="__angularfire_symbol__messagingIsSupported";globalThis[Mt]||(globalThis[Mt]=(0,we.Gb)().then(St=>globalThis[mt]=St).catch(()=>globalThis[mt]=!1)),globalThis[ht]||(globalThis[ht]=(0,Z.Gb)().then(St=>globalThis[rt]=St).catch(()=>globalThis[rt]=!1)),globalThis[st]||(globalThis[st]=(0,P.Gb)().then(St=>globalThis[Pt]=St).catch(()=>globalThis[Pt]=!1));const ke=St=>`The APP_INITIALIZER that is "making" isSupported() sync for the sake of convenient DI has not resolved in this\ncontext. Rather than injecting ${St} in the constructor, first ensure that ${St} is supported by calling\n\`await isSupported()\`, then retrieve the instance from the injector manually \`injector.get(${St})\`.`,fe={async:()=>globalThis[ht],sync:()=>{const St=globalThis[rt];if(void 0===St)throw new Error(ke("Messaging"));return St}},Lt={async:()=>globalThis[st],sync:()=>{const St=globalThis[Pt];if(void 0===St)throw new Error(ke("RemoteConfig"));return St}},Ke={async:()=>globalThis[Mt],sync:()=>{const St=globalThis[mt];if(void 0===St)throw new Error(ke("Analytics"));return St}};function it(St,Yt,Kt){if(Yt){if(1===Yt.length)return Yt[0];const Pn=Yt.filter(Qn=>Qn.app===Kt);if(1===Pn.length)return Pn[0]}return Kt.container.getProvider(St).getImmediate({optional:!0})}const xe=(St,Yt)=>{const Kt=Yt?[Yt]:(0,T.C6)(),gn=[];return Kt.forEach(Cn=>{Cn.container.getProvider(St).instances.forEach(Qn=>{gn.includes(Qn)||gn.push(Qn)})}),gn};function We(){}class Qe{constructor(Yt,Kt=ae){this.zone=Yt,this.delegate=Kt}now(){return this.delegate.now()}schedule(Yt,Kt,gn){const Cn=this.zone;return this.delegate.schedule(function(Qn){Cn.runGuarded(()=>{Yt.apply(this,[Qn])})},Kt,gn)}}class Ne{constructor(Yt){this.zone=Yt,this.task=null}call(Yt,Kt){const gn=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)),Kt.pipe((0,at.b)({next:gn,complete:gn,error:gn})).subscribe(Yt).add(gn)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let dn=(()=>{class St{constructor(Kt){this.ngZone=Kt,this.outsideAngular=Kt.runOutsideAngular(()=>new Qe(Zone.current)),this.insideAngular=Kt.run(()=>new Qe(Zone.current,De.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return St.\u0275fac=function(Kt){return new(Kt||St)(f.LFG(f.R0b))},St.\u0275prov=f.Yz7({token:St,factory:St.\u0275fac,providedIn:"root"}),St})();function Wt(){const St=globalThis.\u0275AngularFireScheduler;if(!St)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return St}function ut(St){return Wt().ngZone.runOutsideAngular(()=>St())}function nt(St){return Wt().ngZone.run(()=>St())}function an(St){return Wt(),function Rn(St){return function(Kt){return(Kt=Kt.lift(new Ne(St.ngZone))).pipe((0,dt.R)(St.outsideAngular),(0,Ct.Q)(St.insideAngular))}}(Wt())(St)}const sn=(St,Yt)=>function(){const gn=arguments;return Yt&&setTimeout(()=>{"scheduled"===Yt.state&&Yt.invoke()},10),nt(()=>St.apply(void 0,gn))},un=(St,Yt)=>function(){let Kt;const gn=arguments;for(let Pn=0;Pn<arguments.length;Pn++)"function"==typeof gn[Pn]&&(Yt&&(Kt||(Kt=nt(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",We,{},We,We)))),gn[Pn]=sn(gn[Pn],Kt));const Cn=ut(()=>St.apply(this,gn));if(!Yt){if(Cn instanceof ot.y){const Pn=Wt();return Cn.pipe((0,dt.R)(Pn.outsideAngular),(0,Ct.Q)(Pn.insideAngular))}return nt(()=>Cn)}return Cn instanceof ot.y?Cn.pipe(an):Cn instanceof Promise?nt(()=>new Promise((Pn,Qn)=>Cn.then(zn=>nt(()=>Pn(zn)),zn=>nt(()=>Qn(zn))))):"function"==typeof Cn&&Kt?function(){return setTimeout(()=>{Kt&&"scheduled"===Kt.state&&Kt.invoke()},10),Cn.apply(this,arguments)}:nt(()=>Cn)}},424:(rn,et,N)=>{N.d(et,{$:()=>Ps,A:()=>ve,E:()=>Je,G:()=>kn,I:()=>fi,K:()=>oe,L:()=>ai,M:()=>Ei,N:()=>cs,P:()=>hu,Q:()=>bi,R:()=>sd,T:()=>Ci,U:()=>Di,V:()=>Lr,W:()=>Rs,X:()=>Vt,Y:()=>kr,Z:()=>lr,_:()=>zr,a:()=>qs,a0:()=>qo,a1:()=>U,a2:()=>q,a3:()=>Sn,a4:()=>ns,a5:()=>rs,a6:()=>oo,a7:()=>Yu,a8:()=>Ma,a9:()=>Eo,aA:()=>Uo,aB:()=>Ha,aC:()=>Ut,aG:()=>Xn,aJ:()=>Ti,aa:()=>No,ab:()=>Du,ae:()=>ui,af:()=>Pa,ag:()=>Qo,aj:()=>Zi,ak:()=>Au,am:()=>Fo,an:()=>ea,ao:()=>mr,ap:()=>Ke,aq:()=>On,ar:()=>Qt,as:()=>Pt,at:()=>rl,au:()=>Ea,av:()=>st,aw:()=>fe,ax:()=>xe,ay:()=>Ee,az:()=>Bo,b:()=>on,c:()=>tl,d:()=>ec,e:()=>Xl,f:()=>Wa,g:()=>ad,h:()=>od,i:()=>At,j:()=>ud,k:()=>Ya,l:()=>ji,m:()=>Qa,n:()=>hd,o:()=>he,r:()=>Ba,s:()=>Bi,t:()=>li,u:()=>Ys,z:()=>at});var f=N(5861),T=N(2090),P=N(9681),Z=N(655),we=N(1877),Se=N(4859);const he={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"},ve={EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"};const at=function De(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance."}},dt=function ot(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},Ct=new T.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),mt=new we.Yd("@firebase/auth");function Mt(D,...g){mt.logLevel<=we.in.ERROR&&mt.error(`Auth (${P.SDK_VERSION}): ${D}`,...g)}function Pt(D,...g){throw ke(D,...g)}function st(D,...g){return ke(D,...g)}function rt(D,g,y){const M=Object.assign(Object.assign({},dt()),{[g]:y});return new T.LL("auth","Firebase",M).create(g,{appName:D.name})}function ht(D,g,y){if(!(g instanceof y))throw y.name!==g.constructor.name&&Pt(D,"argument-error"),rt(D,"argument-error",`Type of ${g.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function ke(D,...g){if("string"!=typeof D){const y=g[0],M=[...g.slice(1)];return M[0]&&(M[0].appName=D.name),D._errorFactory.create(y,...M)}return Ct.create(D,...g)}function fe(D,g,...y){if(!D)throw ke(g,...y)}function Lt(D){const g="INTERNAL ASSERTION FAILED: "+D;throw Mt(g),new Error(g)}function Ke(D,g){D||Lt(g)}const it=new Map;function xe(D){Ke(D instanceof Function,"Expected a class definition");let g=it.get(D);return g?(Ke(g instanceof D,"Instance stored in cache mismatched with class"),g):(g=new D,it.set(D,g),g)}function Ne(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.href)||""}function dn(){return"http:"===Wt()||"https:"===Wt()}function Wt(){var D;return"undefined"!=typeof self&&(null===(D=self.location)||void 0===D?void 0:D.protocol)||null}class Ce{constructor(g,y){this.shortDelay=g,this.longDelay=y,Ke(y>g,"Short delay should be less than long delay!"),this.isMobile=(0,T.uI)()||(0,T.b$)()}get(){return function ut(){return!("undefined"!=typeof navigator&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(dn()||(0,T.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function $t(D,g){Ke(D.emulator,"Emulator should always be set here");const{url:y}=D.emulator;return g?`${y}${g.startsWith("/")?g.slice(1):g}`:y}class an{static initialize(g,y,M){this.fetchImpl=g,y&&(this.headersImpl=y),M&&(this.responseImpl=M)}static fetch(){return this.fetchImpl?this.fetchImpl:"undefined"!=typeof self&&"fetch"in self?self.fetch:void Lt("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:"undefined"!=typeof self&&"Headers"in self?self.Headers:void Lt("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:"undefined"!=typeof self&&"Response"in self?self.Response:void Lt("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Rn={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"internal-error",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error"},sn=new Ce(3e4,6e4);function un(D,g){return D.tenantId&&!g.tenantId?Object.assign(Object.assign({},g),{tenantId:D.tenantId}):g}function St(D,g,y,M){return Yt.apply(this,arguments)}function Yt(){return(Yt=(0,f.Z)(function*(D,g,y,M,ee={}){return Kt(D,ee,(0,f.Z)(function*(){let pe={},ct={};M&&("GET"===g?ct=M:pe={body:JSON.stringify(M)});const Ft=(0,T.xO)(Object.assign({key:D.config.apiKey},ct)).slice(1),ln=yield D._getAdditionalHeaders();return ln["Content-Type"]="application/json",D.languageCode&&(ln["X-Firebase-Locale"]=D.languageCode),an.fetch()(Qn(D,D.config.apiHost,y,Ft),Object.assign({method:g,headers:ln,referrerPolicy:"no-referrer"},pe))}))})).apply(this,arguments)}function Kt(D,g,y){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*(D,g,y){D._canInitEmulator=!1;const M=Object.assign(Object.assign({},Rn),g);try{const ee=new zn(D),pe=yield Promise.race([y(),ee.promise]);ee.clearNetworkTimeout();const ct=yield pe.json();if("needConfirmation"in ct)throw xn(D,"account-exists-with-different-credential",ct);if(pe.ok&&!("errorMessage"in ct))return ct;{const Ft=pe.ok?ct.errorMessage:ct.error.message,[ln,ir]=Ft.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ln)throw xn(D,"credential-already-in-use",ct);if("EMAIL_EXISTS"===ln)throw xn(D,"email-already-in-use",ct);const fr=M[ln]||ln.toLowerCase().replace(/[_\s]+/g,"-");if(ir)throw rt(D,fr,ir);Pt(D,fr)}}catch(ee){if(ee instanceof T.ZR)throw ee;Pt(D,"network-request-failed")}})).apply(this,arguments)}function Cn(D,g,y,M){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,f.Z)(function*(D,g,y,M,ee={}){const pe=yield St(D,g,y,M,ee);return"mfaPendingCredential"in pe&&Pt(D,"multi-factor-auth-required",{_serverResponse:pe}),pe})).apply(this,arguments)}function Qn(D,g,y,M){const ee=`${g}${y}?${M}`;return D.config.emulator?$t(D.config,ee):`${D.config.apiScheme}://${ee}`}class zn{constructor(g){this.auth=g,this.timer=null,this.promise=new Promise((y,M)=>{this.timer=setTimeout(()=>M(st(this.auth,"network-request-failed")),sn.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function xn(D,g,y){const M={appName:D.name};y.email&&(M.email=y.email),y.phoneNumber&&(M.phoneNumber=y.phoneNumber);const ee=st(D,g,M);return ee.customData._tokenResponse=y,ee}function wt(){return(wt=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:delete",g)})).apply(this,arguments)}function Xe(D,g){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function Rt(D,g){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:lookup",g)})).apply(this,arguments)}function Nn(D){if(D)try{const g=new Date(Number(D));if(!isNaN(g.getTime()))return g.toUTCString()}catch(g){}}function Hn(){return(Hn=(0,f.Z)(function*(D,g=!1){const y=(0,T.m9)(D),M=yield y.getIdToken(g),ee=Ot(M);fe(ee&&ee.exp&&ee.auth_time&&ee.iat,y.auth,"internal-error");const pe="object"==typeof ee.firebase?ee.firebase:void 0,ct=null==pe?void 0:pe.sign_in_provider;return{claims:ee,token:M,authTime:Nn(Kn(ee.auth_time)),issuedAtTime:Nn(Kn(ee.iat)),expirationTime:Nn(Kn(ee.exp)),signInProvider:ct||null,signInSecondFactor:(null==pe?void 0:pe.sign_in_second_factor)||null}})).apply(this,arguments)}function Kn(D){return 1e3*Number(D)}function Ot(D){const[g,y,M]=D.split(".");if(void 0===g||void 0===y||void 0===M)return Mt("JWT malformed, contained fewer than 3 sections"),null;try{const ee=(0,T.tV)(y);return ee?JSON.parse(ee):(Mt("Failed to decode base64 JWT payload"),null)}catch(ee){return Mt("Caught error parsing JWT payload as JSON",ee),null}}function Gt(D,g){return hr.apply(this,arguments)}function hr(){return(hr=(0,f.Z)(function*(D,g,y=!1){if(y)return g;try{return yield g}catch(M){throw M instanceof T.ZR&&Tr(M)&&D.auth.currentUser===D&&(yield D.auth.signOut()),M}})).apply(this,arguments)}function Tr({code:D}){return"auth/user-disabled"===D||"auth/user-token-expired"===D}class Bn{constructor(g){this.user=g,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){!this.isRunning||(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(g){var y;if(g){const M=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),M}{this.errorBackoff=3e4;const ee=(null!==(y=this.user.stsTokenManager.expirationTime)&&void 0!==y?y:0)-Date.now()-3e5;return Math.max(0,ee)}}schedule(g=!1){var y=this;if(!this.isRunning)return;const M=this.getInterval(g);this.timerId=setTimeout((0,f.Z)(function*(){yield y.iteration()}),M)}iteration(){var g=this;return(0,f.Z)(function*(){try{yield g.user.getIdToken(!0)}catch(y){return void("auth/network-request-failed"===y.code&&g.schedule(!0))}g.schedule()})()}}class Ar{constructor(g,y){this.createdAt=g,this.lastLoginAt=y,this._initializeTime()}_initializeTime(){this.lastSignInTime=Nn(this.lastLoginAt),this.creationTime=Nn(this.createdAt)}_copy(g){this.createdAt=g.createdAt,this.lastLoginAt=g.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function Jn(D){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(D){var g;const y=D.auth,M=yield D.getIdToken(),ee=yield Gt(D,Rt(y,{idToken:M}));fe(null==ee?void 0:ee.users.length,y,"internal-error");const pe=ee.users[0];D._notifyReloadListener(pe);const ct=(null===(g=pe.providerUserInfo)||void 0===g?void 0:g.length)?$(pe.providerUserInfo):[],Ft=ue(D.providerData,ct),fr=!!D.isAnonymous&&!(D.email&&pe.passwordHash||(null==Ft?void 0:Ft.length)),hi={uid:pe.localId,displayName:pe.displayName||null,photoURL:pe.photoUrl||null,email:pe.email||null,emailVerified:pe.emailVerified||!1,phoneNumber:pe.phoneNumber||null,tenantId:pe.tenantId||null,providerData:Ft,metadata:new Ar(pe.createdAt,pe.lastLoginAt),isAnonymous:fr};Object.assign(D,hi)})).apply(this,arguments)}function Fe(){return(Fe=(0,f.Z)(function*(D){const g=(0,T.m9)(D);yield Jn(g),yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)})).apply(this,arguments)}function ue(D,g){return[...D.filter(M=>!g.some(ee=>ee.providerId===M.providerId)),...g]}function $(D){return D.map(g=>{var{providerId:y}=g,M=(0,Z._T)(g,["providerId"]);return{providerId:y,uid:M.rawId||"",displayName:M.displayName||null,email:M.email||null,phoneNumber:M.phoneNumber||null,photoURL:M.photoUrl||null}})}function me(){return(me=(0,f.Z)(function*(D,g){const y=yield Kt(D,{},(0,f.Z)(function*(){const M=(0,T.xO)({grant_type:"refresh_token",refresh_token:g}).slice(1),{tokenApiHost:ee,apiKey:pe}=D.config,ct=Qn(D,ee,"/v1/token",`key=${pe}`),Ft=yield D._getAdditionalHeaders();return Ft["Content-Type"]="application/x-www-form-urlencoded",an.fetch()(ct,{method:"POST",headers:Ft,body:M})}));return{accessToken:y.access_token,expiresIn:y.expires_in,refreshToken:y.refresh_token}})).apply(this,arguments)}class de{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(g){fe(g.idToken,"internal-error"),fe(void 0!==g.idToken,"internal-error"),fe(void 0!==g.refreshToken,"internal-error");const y="expiresIn"in g&&void 0!==g.expiresIn?Number(g.expiresIn):function hn(D){const g=Ot(D);return fe(g,"internal-error"),fe(void 0!==g.exp,"internal-error"),fe(void 0!==g.iat,"internal-error"),Number(g.exp)-Number(g.iat)}(g.idToken);this.updateTokensAndExpiration(g.idToken,g.refreshToken,y)}getToken(g,y=!1){var M=this;return(0,f.Z)(function*(){return fe(!M.accessToken||M.refreshToken,g,"user-token-expired"),y||!M.accessToken||M.isExpired?M.refreshToken?(yield M.refresh(g,M.refreshToken),M.accessToken):null:M.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(g,y){var M=this;return(0,f.Z)(function*(){const{accessToken:ee,refreshToken:pe,expiresIn:ct}=yield function z(D,g){return me.apply(this,arguments)}(g,y);M.updateTokensAndExpiration(ee,pe,Number(ct))})()}updateTokensAndExpiration(g,y,M){this.refreshToken=y||null,this.accessToken=g||null,this.expirationTime=Date.now()+1e3*M}static fromJSON(g,y){const{refreshToken:M,accessToken:ee,expirationTime:pe}=y,ct=new de;return M&&(fe("string"==typeof M,"internal-error",{appName:g}),ct.refreshToken=M),ee&&(fe("string"==typeof ee,"internal-error",{appName:g}),ct.accessToken=ee),pe&&(fe("number"==typeof pe,"internal-error",{appName:g}),ct.expirationTime=pe),ct}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(g){this.accessToken=g.accessToken,this.refreshToken=g.refreshToken,this.expirationTime=g.expirationTime}_clone(){return Object.assign(new de,this.toJSON())}_performRefresh(){return Lt("not implemented")}}function Me(D,g){fe("string"==typeof D||void 0===D,"internal-error",{appName:g})}class Ge{constructor(g){var{uid:y,auth:M,stsTokenManager:ee}=g,pe=(0,Z._T)(g,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Bn(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=y,this.auth=M,this.stsTokenManager=ee,this.accessToken=ee.accessToken,this.displayName=pe.displayName||null,this.email=pe.email||null,this.emailVerified=pe.emailVerified||!1,this.phoneNumber=pe.phoneNumber||null,this.photoURL=pe.photoURL||null,this.isAnonymous=pe.isAnonymous||!1,this.tenantId=pe.tenantId||null,this.providerData=pe.providerData?[...pe.providerData]:[],this.metadata=new Ar(pe.createdAt||void 0,pe.lastLoginAt||void 0)}getIdToken(g){var y=this;return(0,f.Z)(function*(){const M=yield Gt(y,y.stsTokenManager.getToken(y.auth,g));return fe(M,y.auth,"internal-error"),y.accessToken!==M&&(y.accessToken=M,yield y.auth._persistUserIfCurrent(y),y.auth._notifyListenersIfCurrent(y)),M})()}getIdTokenResult(g){return function Dn(D){return Hn.apply(this,arguments)}(this,g)}reload(){return function Ye(D){return Fe.apply(this,arguments)}(this)}_assign(g){this!==g&&(fe(this.uid===g.uid,this.auth,"internal-error"),this.displayName=g.displayName,this.photoURL=g.photoURL,this.email=g.email,this.emailVerified=g.emailVerified,this.phoneNumber=g.phoneNumber,this.isAnonymous=g.isAnonymous,this.tenantId=g.tenantId,this.providerData=g.providerData.map(y=>Object.assign({},y)),this.metadata._copy(g.metadata),this.stsTokenManager._assign(g.stsTokenManager))}_clone(g){return new Ge(Object.assign(Object.assign({},this),{auth:g,stsTokenManager:this.stsTokenManager._clone()}))}_onReload(g){fe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=g,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(g){this.reloadListener?this.reloadListener(g):this.reloadUserInfo=g}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(g,y=!1){var M=this;return(0,f.Z)(function*(){let ee=!1;g.idToken&&g.idToken!==M.stsTokenManager.accessToken&&(M.stsTokenManager.updateFromServerResponse(g),ee=!0),y&&(yield Jn(M)),yield M.auth._persistUserIfCurrent(M),ee&&M.auth._notifyListenersIfCurrent(M)})()}delete(){var g=this;return(0,f.Z)(function*(){const y=yield g.getIdToken();return yield Gt(g,function sr(D,g){return wt.apply(this,arguments)}(g.auth,{idToken:y})),g.stsTokenManager.clearRefreshToken(),g.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(g=>Object.assign({},g)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(g,y){var M,ee,pe,ct,Ft,ln,ir,fr;const hi=null!==(M=y.displayName)&&void 0!==M?M:void 0,Qi=null!==(ee=y.email)&&void 0!==ee?ee:void 0,$o=null!==(pe=y.phoneNumber)&&void 0!==pe?pe:void 0,yu=null!==(ct=y.photoURL)&&void 0!==ct?ct:void 0,Ja=null!==(Ft=y.tenantId)&&void 0!==Ft?Ft:void 0,ul=null!==(ln=y._redirectEventId)&&void 0!==ln?ln:void 0,fd=null!==(ir=y.createdAt)&&void 0!==ir?ir:void 0,Vr=null!==(fr=y.lastLoginAt)&&void 0!==fr?fr:void 0,{uid:ll,emailVerified:ju,isAnonymous:cl,providerData:Xa,stsTokenManager:eu}=y;fe(ll&&eu,g,"internal-error");const ic=de.fromJSON(this.name,eu);fe("string"==typeof ll,g,"internal-error"),Me(hi,g.name),Me(Qi,g.name),fe("boolean"==typeof ju,g,"internal-error"),fe("boolean"==typeof cl,g,"internal-error"),Me($o,g.name),Me(yu,g.name),Me(Ja,g.name),Me(ul,g.name),Me(fd,g.name),Me(Vr,g.name);const tu=new Ge({uid:ll,auth:g,email:Qi,emailVerified:ju,displayName:hi,isAnonymous:cl,photoURL:yu,phoneNumber:$o,tenantId:Ja,stsTokenManager:ic,createdAt:fd,lastLoginAt:Vr});return Xa&&Array.isArray(Xa)&&(tu.providerData=Xa.map(_i=>Object.assign({},_i))),ul&&(tu._redirectEventId=ul),tu}static _fromIdTokenResponse(g,y,M=!1){return(0,f.Z)(function*(){const ee=new de;ee.updateFromServerResponse(y);const pe=new Ge({uid:y.localId,auth:g,stsTokenManager:ee,isAnonymous:M});return yield Jn(pe),pe})()}}const oe=(()=>{class D{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,f.Z)(function*(){return!0})()}_set(y,M){var ee=this;return(0,f.Z)(function*(){ee.storage[y]=M})()}_get(y){var M=this;return(0,f.Z)(function*(){const ee=M.storage[y];return void 0===ee?null:ee})()}_remove(y){var M=this;return(0,f.Z)(function*(){delete M.storage[y]})()}_addListener(y,M){}_removeListener(y,M){}}return D.type="NONE",D})();function Ee(D,g,y){return`firebase:${D}:${g}:${y}`}class qe{constructor(g,y,M){this.persistence=g,this.auth=y,this.userKey=M;const{config:ee,name:pe}=this.auth;this.fullUserKey=Ee(this.userKey,ee.apiKey,pe),this.fullPersistenceKey=Ee("persistence",ee.apiKey,pe),this.boundEventHandler=y._onStorageEvent.bind(y),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(g){return this.persistence._set(this.fullUserKey,g.toJSON())}getCurrentUser(){var g=this;return(0,f.Z)(function*(){const y=yield g.persistence._get(g.fullUserKey);return y?Ge._fromJSON(g.auth,y):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(g){var y=this;return(0,f.Z)(function*(){if(y.persistence===g)return;const M=yield y.getCurrentUser();return yield y.removeCurrentUser(),y.persistence=g,M?y.setCurrentUser(M):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(g,y,M="authUser"){return(0,f.Z)(function*(){if(!y.length)return new qe(xe(oe),g,M);const ee=(yield Promise.all(y.map(function(){var ir=(0,f.Z)(function*(fr){if(yield fr._isAvailable())return fr});return function(fr){return ir.apply(this,arguments)}}()))).filter(ir=>ir);let pe=ee[0]||xe(oe);const ct=Ee(M,g.config.apiKey,g.name);let Ft=null;for(const ir of y)try{const fr=yield ir._get(ct);if(fr){const hi=Ge._fromJSON(g,fr);ir!==pe&&(Ft=hi),pe=ir;break}}catch(fr){}const ln=ee.filter(ir=>ir._shouldAllowMigration);return pe._shouldAllowMigration&&ln.length?(pe=ln[0],Ft&&(yield pe._set(ct,Ft.toJSON())),yield Promise.all(y.map(function(){var ir=(0,f.Z)(function*(fr){if(fr!==pe)try{yield fr._remove(ct)}catch(hi){}});return function(fr){return ir.apply(this,arguments)}}())),new qe(pe,g,M)):new qe(pe,g,M)})()}}function se(D){const g=D.toLowerCase();if(g.includes("opera/")||g.includes("opr/")||g.includes("opios/"))return"Opera";if(yt(g))return"IEMobile";if(g.includes("msie")||g.includes("trident/"))return"IE";if(g.includes("edge/"))return"Edge";if(ge(g))return"Firefox";if(g.includes("silk/"))return"Silk";if(bn(g))return"Blackberry";if(fn(g))return"Webos";if(ye(g))return"Safari";if((g.includes("chrome/")||lt(g))&&!g.includes("edge/"))return"Chrome";if(Qt(g))return"Android";{const M=D.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===(null==M?void 0:M.length))return M[1]}return"Other"}function ge(D=(0,T.z$)()){return/firefox\//i.test(D)}function ye(D=(0,T.z$)()){const g=D.toLowerCase();return g.includes("safari/")&&!g.includes("chrome/")&&!g.includes("crios/")&&!g.includes("android")}function lt(D=(0,T.z$)()){return/crios\//i.test(D)}function yt(D=(0,T.z$)()){return/iemobile/i.test(D)}function Qt(D=(0,T.z$)()){return/android/i.test(D)}function bn(D=(0,T.z$)()){return/blackberry/i.test(D)}function fn(D=(0,T.z$)()){return/webos/i.test(D)}function On(D=(0,T.z$)()){return/iphone|ipad|ipod/i.test(D)}function mr(D=(0,T.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(D)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(D)}function $e(D=(0,T.z$)()){return On(D)||Qt(D)||fn(D)||bn(D)||/windows phone/i.test(D)||yt(D)}function Ht(D,g=[]){let y;switch(D){case"Browser":y=se((0,T.z$)());break;case"Worker":y=`${se((0,T.z$)())}-${D}`;break;default:y=D}const M=g.length?g.join(","):"FirebaseCore-web";return`${y}/JsCore/${P.SDK_VERSION}/${M}`}class _n{constructor(g,y,M){this.app=g,this.heartbeatServiceProvider=y,this.config=M,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new _e(this),this.idTokenSubscription=new _e(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=Ct,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=g.name,this.clientVersion=M.sdkClientVersion}_initializeWithPersistence(g,y){var M=this;return y&&(this._popupRedirectResolver=xe(y)),this._initializationPromise=this.queue((0,f.Z)(function*(){var ee,pe;if(!M._deleted&&(M.persistenceManager=yield qe.create(M,g),!M._deleted)){if(null===(ee=M._popupRedirectResolver)||void 0===ee?void 0:ee._shouldInitProactively)try{yield M._popupRedirectResolver._initialize(M)}catch(ct){}yield M.initializeCurrentUser(y),M.lastNotifiedUid=(null===(pe=M.currentUser)||void 0===pe?void 0:pe.uid)||null,!M._deleted&&(M._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var g=this;return(0,f.Z)(function*(){if(g._deleted)return;const y=yield g.assertedPersistence.getCurrentUser();if(g.currentUser||y){if(g.currentUser&&y&&g.currentUser.uid===y.uid)return g._currentUser._assign(y),void(yield g.currentUser.getIdToken());yield g._updateCurrentUser(y)}})()}initializeCurrentUser(g){var y=this;return(0,f.Z)(function*(){var M;let ee=yield y.assertedPersistence.getCurrentUser();if(g&&y.config.authDomain){yield y.getOrInitRedirectPersistenceManager();const pe=null===(M=y.redirectUser)||void 0===M?void 0:M._redirectEventId,ct=null==ee?void 0:ee._redirectEventId,Ft=yield y.tryRedirectSignIn(g);(!pe||pe===ct)&&(null==Ft?void 0:Ft.user)&&(ee=Ft.user)}return ee?ee._redirectEventId?(fe(y._popupRedirectResolver,y,"argument-error"),yield y.getOrInitRedirectPersistenceManager(),y.redirectUser&&y.redirectUser._redirectEventId===ee._redirectEventId?y.directlySetCurrentUser(ee):y.reloadAndSetCurrentUserOrClear(ee)):y.reloadAndSetCurrentUserOrClear(ee):y.directlySetCurrentUser(null)})()}tryRedirectSignIn(g){var y=this;return(0,f.Z)(function*(){let M=null;try{M=yield y._popupRedirectResolver._completeRedirectFn(y,g,!0)}catch(ee){yield y._setRedirectUser(null)}return M})()}reloadAndSetCurrentUserOrClear(g){var y=this;return(0,f.Z)(function*(){try{yield Jn(g)}catch(M){if("auth/network-request-failed"!==M.code)return y.directlySetCurrentUser(null)}return y.directlySetCurrentUser(g)})()}useDeviceLanguage(){this.languageCode=function nt(){if("undefined"==typeof navigator)return null;const D=navigator;return D.languages&&D.languages[0]||D.language||null}()}_delete(){var g=this;return(0,f.Z)(function*(){g._deleted=!0})()}updateCurrentUser(g){var y=this;return(0,f.Z)(function*(){const M=g?(0,T.m9)(g):null;return M&&fe(M.auth.config.apiKey===y.config.apiKey,y,"invalid-user-token"),y._updateCurrentUser(M&&M._clone(y))})()}_updateCurrentUser(g){var y=this;return(0,f.Z)(function*(){if(!y._deleted)return g&&fe(y.tenantId===g.tenantId,y,"tenant-id-mismatch"),y.queue((0,f.Z)(function*(){yield y.directlySetCurrentUser(g),y.notifyAuthListeners()}))})()}signOut(){var g=this;return(0,f.Z)(function*(){return(g.redirectPersistenceManager||g._popupRedirectResolver)&&(yield g._setRedirectUser(null)),g._updateCurrentUser(null)})()}setPersistence(g){var y=this;return this.queue((0,f.Z)(function*(){yield y.assertedPersistence.setPersistence(xe(g))}))}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(g){this._errorFactory=new T.LL("auth","Firebase",g())}onAuthStateChanged(g,y,M){return this.registerStateListener(this.authStateSubscription,g,y,M)}onIdTokenChanged(g,y,M){return this.registerStateListener(this.idTokenSubscription,g,y,M)}toJSON(){var g;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(g=this._currentUser)||void 0===g?void 0:g.toJSON()}}_setRedirectUser(g,y){var M=this;return(0,f.Z)(function*(){const ee=yield M.getOrInitRedirectPersistenceManager(y);return null===g?ee.removeCurrentUser():ee.setCurrentUser(g)})()}getOrInitRedirectPersistenceManager(g){var y=this;return(0,f.Z)(function*(){if(!y.redirectPersistenceManager){const M=g&&xe(g)||y._popupRedirectResolver;fe(M,y,"argument-error"),y.redirectPersistenceManager=yield qe.create(y,[xe(M._redirectPersistence)],"redirectUser"),y.redirectUser=yield y.redirectPersistenceManager.getCurrentUser()}return y.redirectPersistenceManager})()}_redirectUserForId(g){var y=this;return(0,f.Z)(function*(){var M,ee;return y._isInitialized&&(yield y.queue((0,f.Z)(function*(){}))),(null===(M=y._currentUser)||void 0===M?void 0:M._redirectEventId)===g?y._currentUser:(null===(ee=y.redirectUser)||void 0===ee?void 0:ee._redirectEventId)===g?y.redirectUser:null})()}_persistUserIfCurrent(g){var y=this;return(0,f.Z)(function*(){if(g===y.currentUser)return y.queue((0,f.Z)(function*(){return y.directlySetCurrentUser(g)}))})()}_notifyListenersIfCurrent(g){g===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var g,y;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const M=null!==(y=null===(g=this.currentUser)||void 0===g?void 0:g.uid)&&void 0!==y?y:null;this.lastNotifiedUid!==M&&(this.lastNotifiedUid=M,this.authStateSubscription.next(this.currentUser))}registerStateListener(g,y,M,ee){if(this._deleted)return()=>{};const pe="function"==typeof y?y:y.next.bind(y),ct=this._isInitialized?Promise.resolve():this._initializationPromise;return fe(ct,this,"internal-error"),ct.then(()=>pe(this.currentUser)),"function"==typeof y?g.addObserver(y,M,ee):g.addObserver(y)}directlySetCurrentUser(g){var y=this;return(0,f.Z)(function*(){y.currentUser&&y.currentUser!==g&&(y._currentUser._stopProactiveRefresh(),g&&y.isProactiveRefreshEnabled&&g._startProactiveRefresh()),y.currentUser=g,g?yield y.assertedPersistence.setCurrentUser(g):yield y.assertedPersistence.removeCurrentUser()})()}queue(g){return this.operations=this.operations.then(g,g),this.operations}get assertedPersistence(){return fe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(g){!g||this.frameworks.includes(g)||(this.frameworks.push(g),this.frameworks.sort(),this.clientVersion=Ht(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var g=this;return(0,f.Z)(function*(){var y;const M={"X-Client-Version":g.clientVersion};g.app.options.appId&&(M["X-Firebase-gmpid"]=g.app.options.appId);const ee=yield null===(y=g.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===y?void 0:y.getHeartbeatsHeader();return ee&&(M["X-Firebase-Client"]=ee),M})()}}function Ut(D){return(0,T.m9)(D)}class _e{constructor(g){this.auth=g,this.observer=null,this.addObserver=(0,T.ne)(y=>this.observer=y)}get next(){return fe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function Je(D,g,y){const M=Ut(D);fe(M._canInitEmulator,M,"emulator-config-failed"),fe(/^https?:\/\//.test(g),M,"invalid-emulator-scheme");const ee=!!(null==y?void 0:y.disableWarnings),pe=xt(g),{host:ct,port:Ft}=function mn(D){const g=xt(D),y=/(\/\/)?([^?#/]+)/.exec(D.substr(g.length));if(!y)return{host:"",port:null};const M=y[2].split("@").pop()||"",ee=/^(\[[^\]]+\])(:|$)/.exec(M);if(ee){const pe=ee[1];return{host:pe,port:yr(M.substr(pe.length+1))}}{const[pe,ct]=M.split(":");return{host:pe,port:yr(ct)}}}(g);M.config.emulator={url:`${pe}//${ct}${null===Ft?"":`:${Ft}`}/`},M.settings.appVerificationDisabledForTesting=!0,M.emulatorConfig=Object.freeze({host:ct,port:Ft,protocol:pe.replace(":",""),options:Object.freeze({disableWarnings:ee})}),ee||function Wn(){function D(){const g=document.createElement("p"),y=g.style;g.innerText="Running in emulator mode. Do not use with production credentials.",y.position="fixed",y.width="100%",y.backgroundColor="#ffffff",y.border=".1em solid #000000",y.color="#b50000",y.bottom="0px",y.left="0px",y.margin="0px",y.zIndex="10000",y.textAlign="center",g.classList.add("firebase-emulator-warning"),document.body.appendChild(g)}"undefined"!=typeof console&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),"undefined"!=typeof window&&"undefined"!=typeof document&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",D):D())}()}function xt(D){const g=D.indexOf(":");return g<0?"":D.substr(0,g+1)}function yr(D){if(!D)return null;const g=Number(D);return isNaN(g)?null:g}class kn{constructor(g,y){this.providerId=g,this.signInMethod=y}toJSON(){return Lt("not implemented")}_getIdTokenResponse(g){return Lt("not implemented")}_linkToIdToken(g,y){return Lt("not implemented")}_getReauthenticationResolver(g){return Lt("not implemented")}}function ur(D,g){return jr.apply(this,arguments)}function jr(){return(jr=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:resetPassword",un(D,g))})).apply(this,arguments)}function Wr(D,g){return nr.apply(this,arguments)}function nr(){return(nr=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function yi(D,g){return qi.apply(this,arguments)}function qi(){return(qi=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:update",un(D,g))})).apply(this,arguments)}function er(){return(er=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithPassword",un(D,g))})).apply(this,arguments)}function $n(D,g){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:sendOobCode",un(D,g))})).apply(this,arguments)}function _r(D,g){return Oe.apply(this,arguments)}function Oe(){return(Oe=(0,f.Z)(function*(D,g){return $n(D,g)})).apply(this,arguments)}function Le(D,g){return _t.apply(this,arguments)}function _t(){return(_t=(0,f.Z)(function*(D,g){return $n(D,g)})).apply(this,arguments)}function kt(D,g){return zt.apply(this,arguments)}function zt(){return(zt=(0,f.Z)(function*(D,g){return $n(D,g)})).apply(this,arguments)}function en(D,g){return wn.apply(this,arguments)}function wn(){return(wn=(0,f.Z)(function*(D,g){return $n(D,g)})).apply(this,arguments)}function Er(){return(Er=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithEmailLink",un(D,g))})).apply(this,arguments)}function oi(){return(oi=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithEmailLink",un(D,g))})).apply(this,arguments)}class vi extends kn{constructor(g,y,M,ee=null){super("password",M),this._email=g,this._password=y,this._tenantId=ee}static _fromEmailAndPassword(g,y){return new vi(g,y,"password")}static _fromEmailAndCode(g,y,M=null){return new vi(g,y,"emailLink",M)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g;if((null==y?void 0:y.email)&&(null==y?void 0:y.password)){if("password"===y.signInMethod)return this._fromEmailAndPassword(y.email,y.password);if("emailLink"===y.signInMethod)return this._fromEmailAndCode(y.email,y.password,y.tenantId)}return null}_getIdTokenResponse(g){var y=this;return(0,f.Z)(function*(){switch(y.signInMethod){case"password":return function ys(D,g){return er.apply(this,arguments)}(g,{returnSecureToken:!0,email:y._email,password:y._password});case"emailLink":return function vr(D,g){return Er.apply(this,arguments)}(g,{email:y._email,oobCode:y._password});default:Pt(g,"internal-error")}})()}_linkToIdToken(g,y){var M=this;return(0,f.Z)(function*(){switch(M.signInMethod){case"password":return Wr(g,{idToken:y,returnSecureToken:!0,email:M._email,password:M._password});case"emailLink":return function Xr(D,g){return oi.apply(this,arguments)}(g,{idToken:y,email:M._email,oobCode:M._password});default:Pt(g,"internal-error")}})()}_getReauthenticationResolver(g){return this._getIdTokenResponse(g)}}function ls(D,g){return ni.apply(this,arguments)}function ni(){return(ni=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithIdp",un(D,g))})).apply(this,arguments)}class fi extends kn{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(g){const y=new fi(g.providerId,g.signInMethod);return g.idToken||g.accessToken?(g.idToken&&(y.idToken=g.idToken),g.accessToken&&(y.accessToken=g.accessToken),g.nonce&&!g.pendingToken&&(y.nonce=g.nonce),g.pendingToken&&(y.pendingToken=g.pendingToken)):g.oauthToken&&g.oauthTokenSecret?(y.accessToken=g.oauthToken,y.secret=g.oauthTokenSecret):Pt("argument-error"),y}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:ee}=y,pe=(0,Z._T)(y,["providerId","signInMethod"]);if(!M||!ee)return null;const ct=new fi(M,ee);return ct.idToken=pe.idToken||void 0,ct.accessToken=pe.accessToken||void 0,ct.secret=pe.secret,ct.nonce=pe.nonce,ct.pendingToken=pe.pendingToken||null,ct}_getIdTokenResponse(g){return ls(g,this.buildRequest())}_linkToIdToken(g,y){const M=this.buildRequest();return M.idToken=y,ls(g,M)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ls(g,y)}buildRequest(){const g={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)g.pendingToken=this.pendingToken;else{const y={};this.idToken&&(y.id_token=this.idToken),this.accessToken&&(y.access_token=this.accessToken),this.secret&&(y.oauth_token_secret=this.secret),y.providerId=this.providerId,this.nonce&&!this.pendingToken&&(y.nonce=this.nonce),g.postBody=(0,T.xO)(y)}return g}}function So(D,g){return Ji.apply(this,arguments)}function Ji(){return(Ji=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:sendVerificationCode",un(D,g))})).apply(this,arguments)}function xo(){return(xo=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",un(D,g))})).apply(this,arguments)}function Mo(){return(Mo=(0,f.Z)(function*(D,g){const y=yield Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",un(D,g));if(y.temporaryProof)throw xn(D,"account-exists-with-different-credential",y);return y})).apply(this,arguments)}const Ro={USER_NOT_FOUND:"user-not-found"};function Xi(){return(Xi=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithPhoneNumber",un(D,Object.assign(Object.assign({},g),{operation:"REAUTH"})),Ro)})).apply(this,arguments)}class di extends kn{constructor(g){super("phone","phone"),this.params=g}static _fromVerification(g,y){return new di({verificationId:g,verificationCode:y})}static _fromTokenResponse(g,y){return new di({phoneNumber:g,temporaryProof:y})}_getIdTokenResponse(g){return function _o(D,g){return xo.apply(this,arguments)}(g,this._makeVerificationRequest())}_linkToIdToken(g,y){return function zo(D,g){return Mo.apply(this,arguments)}(g,Object.assign({idToken:y},this._makeVerificationRequest()))}_getReauthenticationResolver(g){return function ca(D,g){return Xi.apply(this,arguments)}(g,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:g,phoneNumber:y,verificationId:M,verificationCode:ee}=this.params;return g&&y?{temporaryProof:g,phoneNumber:y}:{sessionInfo:M,code:ee}}toJSON(){const g={providerId:this.providerId};return this.params.phoneNumber&&(g.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(g.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(g.verificationCode=this.params.verificationCode),this.params.verificationId&&(g.verificationId=this.params.verificationId),g}static fromJSON(g){"string"==typeof g&&(g=JSON.parse(g));const{verificationId:y,verificationCode:M,phoneNumber:ee,temporaryProof:pe}=g;return M||y||ee||pe?new di({verificationId:y,verificationCode:M,phoneNumber:ee,temporaryProof:pe}):null}}class es{constructor(g){var y,M,ee,pe,ct,Ft;const ln=(0,T.zd)((0,T.pd)(g)),ir=null!==(y=ln.apiKey)&&void 0!==y?y:null,fr=null!==(M=ln.oobCode)&&void 0!==M?M:null,hi=function cr(D){switch(D){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(ee=ln.mode)&&void 0!==ee?ee:null);fe(ir&&fr&&hi,"argument-error"),this.apiKey=ir,this.operation=hi,this.code=fr,this.continueUrl=null!==(pe=ln.continueUrl)&&void 0!==pe?pe:null,this.languageCode=null!==(ct=ln.languageCode)&&void 0!==ct?ct:null,this.tenantId=null!==(Ft=ln.tenantId)&&void 0!==Ft?Ft:null}static parseLink(g){const y=function ro(D){const g=(0,T.zd)((0,T.pd)(D)).link,y=g?(0,T.zd)((0,T.pd)(g)).deep_link_id:null,M=(0,T.zd)((0,T.pd)(D)).deep_link_id;return(M?(0,T.zd)((0,T.pd)(M)).link:null)||M||y||g||D}(g);try{return new es(y)}catch(M){return null}}}let ai=(()=>{class D{constructor(){this.providerId=D.PROVIDER_ID}static credential(y,M){return vi._fromEmailAndPassword(y,M)}static credentialWithLink(y,M){const ee=es.parseLink(M);return fe(ee,"argument-error"),vi._fromEmailAndCode(y,ee.code,ee.tenantId)}}return D.PROVIDER_ID="password",D.EMAIL_PASSWORD_SIGN_IN_METHOD="password",D.EMAIL_LINK_SIGN_IN_METHOD="emailLink",D})();class Ii{constructor(g){this.providerId=g,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(g){this.defaultLanguageCode=g}setCustomParameters(g){return this.customParameters=g,this}getCustomParameters(){return this.customParameters}}class ei extends Ii{constructor(){super(...arguments),this.scopes=[]}addScope(g){return this.scopes.includes(g)||this.scopes.push(g),this}getScopes(){return[...this.scopes]}}class Ci extends ei{static credentialFromJSON(g){const y="string"==typeof g?JSON.parse(g):g;return fe("providerId"in y&&"signInMethod"in y,"argument-error"),fi._fromParams(y)}credential(g){return this._credential(Object.assign(Object.assign({},g),{nonce:g.rawNonce}))}_credential(g){return fe(g.idToken||g.accessToken,"argument-error"),fi._fromParams(Object.assign(Object.assign({},g),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(g){return Ci.oauthCredentialFromTaggedObject(g)}static credentialFromError(g){return Ci.oauthCredentialFromTaggedObject(g.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:y,oauthAccessToken:M,oauthTokenSecret:ee,pendingToken:pe,nonce:ct,providerId:Ft}=g;if(!M&&!ee&&!y&&!pe||!Ft)return null;try{return new Ci(Ft)._credential({idToken:y,accessToken:M,nonce:ct,pendingToken:pe})}catch(ln){return null}}}let Ei=(()=>{class D extends ei{constructor(){super("facebook.com")}static credential(y){return fi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.FACEBOOK_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch(M){return null}}}return D.FACEBOOK_SIGN_IN_METHOD="facebook.com",D.PROVIDER_ID="facebook.com",D})(),cs=(()=>{class D extends ei{constructor(){super("google.com"),this.addScope("profile")}static credential(y,M){return fi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GOOGLE_SIGN_IN_METHOD,idToken:y,accessToken:M})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthIdToken:M,oauthAccessToken:ee}=y;if(!M&&!ee)return null;try{return D.credential(M,ee)}catch(pe){return null}}}return D.GOOGLE_SIGN_IN_METHOD="google.com",D.PROVIDER_ID="google.com",D})(),bi=(()=>{class D extends ei{constructor(){super("github.com")}static credential(y){return fi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.GITHUB_SIGN_IN_METHOD,accessToken:y})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y||!("oauthAccessToken"in y)||!y.oauthAccessToken)return null;try{return D.credential(y.oauthAccessToken)}catch(M){return null}}}return D.GITHUB_SIGN_IN_METHOD="github.com",D.PROVIDER_ID="github.com",D})();class Ti extends kn{constructor(g,y){super(g,g),this.pendingToken=y}_getIdTokenResponse(g){return ls(g,this.buildRequest())}_linkToIdToken(g,y){const M=this.buildRequest();return M.idToken=y,ls(g,M)}_getReauthenticationResolver(g){const y=this.buildRequest();return y.autoCreate=!1,ls(g,y)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(g){const y="string"==typeof g?JSON.parse(g):g,{providerId:M,signInMethod:ee,pendingToken:pe}=y;return M&&ee&&pe&&M===ee?new Ti(M,pe):null}static _create(g,y){return new Ti(g,y)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class Di extends Ii{constructor(g){fe(g.startsWith("saml."),"argument-error"),super(g)}static credentialFromResult(g){return Di.samlCredentialFromTaggedObject(g)}static credentialFromError(g){return Di.samlCredentialFromTaggedObject(g.customData||{})}static credentialFromJSON(g){const y=Ti.fromJSON(g);return fe(y,"argument-error"),y}static samlCredentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{pendingToken:y,providerId:M}=g;if(!y||!M)return null;try{return Ti._create(M,y)}catch(ee){return null}}}let Lr=(()=>{class D extends ei{constructor(){super("twitter.com")}static credential(y,M){return fi._fromParams({providerId:D.PROVIDER_ID,signInMethod:D.TWITTER_SIGN_IN_METHOD,oauthToken:y,oauthTokenSecret:M})}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{oauthAccessToken:M,oauthTokenSecret:ee}=y;if(!M||!ee)return null;try{return D.credential(M,ee)}catch(pe){return null}}}return D.TWITTER_SIGN_IN_METHOD="twitter.com",D.PROVIDER_ID="twitter.com",D})();function ts(D,g){return io.apply(this,arguments)}function io(){return(io=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signUp",un(D,g))})).apply(this,arguments)}class Gr{constructor(g){this.user=g.user,this.providerId=g.providerId,this._tokenResponse=g._tokenResponse,this.operationType=g.operationType}static _fromIdTokenResponse(g,y,M,ee=!1){return(0,f.Z)(function*(){const pe=yield Ge._fromIdTokenResponse(g,M,ee),ct=ds(M);return new Gr({user:pe,providerId:ct,_tokenResponse:M,operationType:y})})()}static _forOperation(g,y,M){return(0,f.Z)(function*(){yield g._updateTokensIfNecessary(M,!0);const ee=ds(M);return new Gr({user:g,providerId:ee,_tokenResponse:M,operationType:y})})()}}function ds(D){return D.providerId?D.providerId:"phoneNumber"in D?"phone":null}function Rs(D){return vo.apply(this,arguments)}function vo(){return(vo=(0,f.Z)(function*(D){var g;const y=Ut(D);if(yield y._initializationPromise,null===(g=y.currentUser)||void 0===g?void 0:g.isAnonymous)return new Gr({user:y.currentUser,providerId:null,operationType:"signIn"});const M=yield ts(y,{returnSecureToken:!0}),ee=yield Gr._fromIdTokenResponse(y,"signIn",M,!0);return yield y._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class xr extends T.ZR{constructor(g,y,M,ee){var pe;super(y.code,y.message),this.operationType=M,this.user=ee,Object.setPrototypeOf(this,xr.prototype),this.customData={appName:g.name,tenantId:null!==(pe=g.tenantId)&&void 0!==pe?pe:void 0,_serverResponse:y.customData._serverResponse,operationType:M}}static _fromErrorAndOperation(g,y,M,ee){return new xr(g,y,M,ee)}}function Ko(D,g,y,M){return("reauthenticate"===g?y._getReauthenticationResolver(D):y._getIdTokenResponse(D)).catch(pe=>{throw"auth/multi-factor-auth-required"===pe.code?xr._fromErrorAndOperation(D,pe,g,M):pe})}function Po(D){return new Set(D.map(({providerId:g})=>g).filter(g=>!!g))}function Zi(D,g){return Ws.apply(this,arguments)}function Ws(){return(Ws=(0,f.Z)(function*(D,g){const y=(0,T.m9)(D);yield B(!0,y,g);const{providerUserInfo:M}=yield Xe(y.auth,{idToken:yield y.getIdToken(),deleteProvider:[g]}),ee=Po(M||[]);return y.providerData=y.providerData.filter(pe=>ee.has(pe.providerId)),ee.has("phone")||(y.phoneNumber=null),yield y.auth._persistUserIfCurrent(y),y})).apply(this,arguments)}function hs(D,g){return Ir.apply(this,arguments)}function Ir(){return(Ir=(0,f.Z)(function*(D,g,y=!1){const M=yield Gt(D,g._linkToIdToken(D.auth,yield D.getIdToken()),y);return Gr._forOperation(D,"link",M)})).apply(this,arguments)}function B(D,g,y){return J.apply(this,arguments)}function J(){return(J=(0,f.Z)(function*(D,g,y){yield Jn(g);const ee=!1===D?"provider-already-linked":"no-such-provider";fe(Po(g.providerData).has(y)===D,g.auth,ee)})).apply(this,arguments)}function j(D,g){return ie.apply(this,arguments)}function ie(){return(ie=(0,f.Z)(function*(D,g,y=!1){const{auth:M}=D,ee="reauthenticate";try{const pe=yield Gt(D,Ko(M,ee,g,D),y);fe(pe.idToken,M,"internal-error");const ct=Ot(pe.idToken);fe(ct,M,"internal-error");const{sub:Ft}=ct;return fe(D.uid===Ft,M,"user-mismatch"),Gr._forOperation(D,ee,pe)}catch(pe){throw"auth/user-not-found"===(null==pe?void 0:pe.code)&&Pt(M,"user-mismatch"),pe}})).apply(this,arguments)}function je(D,g){return gt.apply(this,arguments)}function gt(){return(gt=(0,f.Z)(function*(D,g,y=!1){const M="signIn",ee=yield Ko(D,M,g),pe=yield Gr._fromIdTokenResponse(D,M,ee);return y||(yield D._updateCurrentUser(pe.user)),pe})).apply(this,arguments)}function Vt(D,g){return Un.apply(this,arguments)}function Un(){return(Un=(0,f.Z)(function*(D,g){return je(Ut(D),g)})).apply(this,arguments)}function kr(D,g){return Sr.apply(this,arguments)}function Sr(){return(Sr=(0,f.Z)(function*(D,g){const y=(0,T.m9)(D);return yield B(!1,y,g.providerId),hs(y,g)})).apply(this,arguments)}function lr(D,g){return Cr.apply(this,arguments)}function Cr(){return(Cr=(0,f.Z)(function*(D,g){return j((0,T.m9)(D),g)})).apply(this,arguments)}function ti(D,g){return Ur.apply(this,arguments)}function Ur(){return(Ur=(0,f.Z)(function*(D,g){return Cn(D,"POST","/v1/accounts:signInWithCustomToken",un(D,g))})).apply(this,arguments)}function zr(D,g){return fs.apply(this,arguments)}function fs(){return(fs=(0,f.Z)(function*(D,g){const y=Ut(D),M=yield ti(y,{token:g,returnSecureToken:!0}),ee=yield Gr._fromIdTokenResponse(y,"signIn",M);return yield y._updateCurrentUser(ee.user),ee})).apply(this,arguments)}class Hi{constructor(g,y){this.factorId=g,this.uid=y.mfaEnrollmentId,this.enrollmentTime=new Date(y.enrolledAt).toUTCString(),this.displayName=y.displayName}static _fromServerResponse(g,y){return"phoneInfo"in y?Gn._fromServerResponse(g,y):Pt(g,"internal-error")}}class Gn extends Hi{constructor(g){super("phone",g),this.phoneNumber=g.phoneInfo}static _fromServerResponse(g,y){return new Gn(y)}}function Ui(D,g,y){var M;fe((null===(M=y.url)||void 0===M?void 0:M.length)>0,D,"invalid-continue-uri"),fe(void 0===y.dynamicLinkDomain||y.dynamicLinkDomain.length>0,D,"invalid-dynamic-link-domain"),g.continueUrl=y.url,g.dynamicLinkDomain=y.dynamicLinkDomain,g.canHandleCodeInApp=y.handleCodeInApp,y.iOS&&(fe(y.iOS.bundleId.length>0,D,"missing-ios-bundle-id"),g.iOSBundleId=y.iOS.bundleId),y.android&&(fe(y.android.packageName.length>0,D,"missing-android-pkg-name"),g.androidInstallApp=y.android.installApp,g.androidMinimumVersionCode=y.android.minimumVersion,g.androidPackageName=y.android.packageName)}function Ps(D,g,y){return so.apply(this,arguments)}function so(){return(so=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D),ee={requestType:"PASSWORD_RESET",email:g};y&&Ui(M,ee,y),yield Le(M,ee)})).apply(this,arguments)}function qo(D,g,y){return H.apply(this,arguments)}function H(){return(H=(0,f.Z)(function*(D,g,y){yield ur((0,T.m9)(D),{oobCode:g,newPassword:y})})).apply(this,arguments)}function U(D,g){return F.apply(this,arguments)}function F(){return(F=(0,f.Z)(function*(D,g){yield yi((0,T.m9)(D),{oobCode:g})})).apply(this,arguments)}function q(D,g){return tt.apply(this,arguments)}function tt(){return(tt=(0,f.Z)(function*(D,g){const y=(0,T.m9)(D),M=yield ur(y,{oobCode:g}),ee=M.requestType;switch(fe(ee,y,"internal-error"),ee){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":fe(M.newEmail,y,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":fe(M.mfaInfo,y,"internal-error");default:fe(M.email,y,"internal-error")}let pe=null;return M.mfaInfo&&(pe=Hi._fromServerResponse(Ut(y),M.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.newEmail:M.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===M.requestType?M.email:M.newEmail)||null,multiFactorInfo:pe},operation:ee}})).apply(this,arguments)}function Sn(D,g){return tr.apply(this,arguments)}function tr(){return(tr=(0,f.Z)(function*(D,g){const{data:y}=yield q((0,T.m9)(D),g);return y.email})).apply(this,arguments)}function ns(D,g,y){return Ai.apply(this,arguments)}function Ai(){return(Ai=(0,f.Z)(function*(D,g,y){const M=Ut(D),ee=yield ts(M,{returnSecureToken:!0,email:g,password:y}),pe=yield Gr._fromIdTokenResponse(M,"signIn",ee);return yield M._updateCurrentUser(pe.user),pe})).apply(this,arguments)}function rs(D,g,y){return Vt((0,T.m9)(D),ai.credential(g,y))}function oo(D,g,y){return vs.apply(this,arguments)}function vs(){return(vs=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D),ee={requestType:"EMAIL_SIGNIN",email:g};fe(y.handleCodeInApp,M,"argument-error"),y&&Ui(M,ee,y),yield kt(M,ee)})).apply(this,arguments)}function Yu(D,g){const y=es.parseLink(g);return"EMAIL_SIGNIN"===(null==y?void 0:y.operation)}function Ma(D,g,y){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D),ee=ai.credentialWithLink(g,y||Ne());return fe(ee._tenantId===(M.tenantId||null),M,"tenant-id-mismatch"),Vt(M,ee)})).apply(this,arguments)}function Es(D,g){return pi.apply(this,arguments)}function pi(){return(pi=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:createAuthUri",un(D,g))})).apply(this,arguments)}function Eo(D,g){return da.apply(this,arguments)}function da(){return(da=(0,f.Z)(function*(D,g){const M={identifier:g,continueUri:dn()?Ne():"http://localhost"},{signinMethods:ee}=yield Es((0,T.m9)(D),M);return ee||[]})).apply(this,arguments)}function No(D,g){return ao.apply(this,arguments)}function ao(){return(ao=(0,f.Z)(function*(D,g){const y=(0,T.m9)(D),ee={requestType:"VERIFY_EMAIL",idToken:yield D.getIdToken()};g&&Ui(y.auth,ee,g);const{email:pe}=yield _r(y.auth,ee);pe!==D.email&&(yield D.reload())})).apply(this,arguments)}function Du(D,g,y){return Zo.apply(this,arguments)}function Zo(){return(Zo=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D),pe={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield D.getIdToken(),newEmail:g};y&&Ui(M.auth,pe,y);const{email:ct}=yield en(M.auth,pe);ct!==D.email&&(yield D.reload())})).apply(this,arguments)}function Yo(D,g){return Si.apply(this,arguments)}function Si(){return(Si=(0,f.Z)(function*(D,g){return St(D,"POST","/v1/accounts:update",g)})).apply(this,arguments)}function ui(D,g){return Oo.apply(this,arguments)}function Oo(){return(Oo=(0,f.Z)(function*(D,{displayName:g,photoURL:y}){if(void 0===g&&void 0===y)return;const M=(0,T.m9)(D),pe={idToken:yield M.getIdToken(),displayName:g,photoUrl:y,returnSecureToken:!0},ct=yield Gt(M,Yo(M.auth,pe));M.displayName=ct.displayName||null,M.photoURL=ct.photoUrl||null;const Ft=M.providerData.find(({providerId:ln})=>"password"===ln);Ft&&(Ft.displayName=M.displayName,Ft.photoURL=M.photoURL),yield M._updateTokensIfNecessary(ct)})).apply(this,arguments)}function Pa(D,g){return Jo((0,T.m9)(D),g,null)}function Qo(D,g){return Jo((0,T.m9)(D),null,g)}function Jo(D,g,y){return Gs.apply(this,arguments)}function Gs(){return(Gs=(0,f.Z)(function*(D,g,y){const{auth:M}=D,pe={idToken:yield D.getIdToken(),returnSecureToken:!0};g&&(pe.email=g),y&&(pe.password=y);const ct=yield Gt(D,Wr(M,pe));yield D._updateTokensIfNecessary(ct,!0)})).apply(this,arguments)}class Yi{constructor(g,y,M={}){this.isNewUser=g,this.providerId=y,this.profile=M}}class zs extends Yi{constructor(g,y,M,ee){super(g,y,M),this.username=ee}}class wo extends Yi{constructor(g,y){super(g,"facebook.com",y)}}class Qu extends zs{constructor(g,y){super(g,"github.com",y,"string"==typeof(null==y?void 0:y.login)?null==y?void 0:y.login:null)}}class ko extends Yi{constructor(g,y){super(g,"google.com",y)}}class Xo extends zs{constructor(g,y,M){super(g,"twitter.com",y,M)}}function Au(D){const{user:g,_tokenResponse:y}=D;return g.isAnonymous&&!y?{providerId:null,isNewUser:!1,profile:null}:function is(D){var g,y;if(!D)return null;const{providerId:M}=D,ee=D.rawUserInfo?JSON.parse(D.rawUserInfo):{},pe=D.isNewUser||"identitytoolkit#SignupNewUserResponse"===D.kind;if(!M&&(null==D?void 0:D.idToken)){const ct=null===(y=null===(g=Ot(D.idToken))||void 0===g?void 0:g.firebase)||void 0===y?void 0:y.sign_in_provider;if(ct)return new Yi(pe,"anonymous"!==ct&&"custom"!==ct?ct:null)}if(!M)return null;switch(M){case"facebook.com":return new wo(pe,ee);case"github.com":return new Qu(pe,ee);case"google.com":return new ko(pe,ee);case"twitter.com":return new Xo(pe,ee,D.screenName||null);case"custom":case"anonymous":return new Yi(pe,null);default:return new Yi(pe,M,ee)}}(y)}function li(D,g,y,M){return(0,T.m9)(D).onAuthStateChanged(g,y,M)}class Wi{constructor(g,y){this.type=g,this.credential=y}static _fromIdtoken(g){return new Wi("enroll",g)}static _fromMfaPendingCredential(g){return new Wi("signin",g)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(g){var y,M;if(null==g?void 0:g.multiFactorSession){if(null===(y=g.multiFactorSession)||void 0===y?void 0:y.pendingCredential)return Wi._fromMfaPendingCredential(g.multiFactorSession.pendingCredential);if(null===(M=g.multiFactorSession)||void 0===M?void 0:M.idToken)return Wi._fromIdtoken(g.multiFactorSession.idToken)}return null}}class uo{constructor(g,y,M){this.session=g,this.hints=y,this.signInResolver=M}static _fromError(g,y){const M=Ut(g),ee=y.customData._serverResponse,pe=(ee.mfaInfo||[]).map(Ft=>Hi._fromServerResponse(M,Ft));fe(ee.mfaPendingCredential,M,"internal-error");const ct=Wi._fromMfaPendingCredential(ee.mfaPendingCredential);return new uo(ct,pe,function(){var Ft=(0,f.Z)(function*(ln){const ir=yield ln._process(M,ct);delete ee.mfaInfo,delete ee.mfaPendingCredential;const fr=Object.assign(Object.assign({},ee),{idToken:ir.idToken,refreshToken:ir.refreshToken});switch(y.operationType){case"signIn":const hi=yield Gr._fromIdTokenResponse(M,y.operationType,fr);return yield M._updateCurrentUser(hi.user),hi;case"reauthenticate":return fe(y.user,M,"internal-error"),Gr._forOperation(y.user,y.operationType,fr);default:Pt(M,"internal-error")}});return function(ln){return Ft.apply(this,arguments)}}())}resolveSignIn(g){var y=this;return(0,f.Z)(function*(){return y.signInResolver(g)})()}}function Fo(D,g){var y;const M=(0,T.m9)(D),ee=g;return fe(g.customData.operationType,M,"argument-error"),fe(null===(y=ee.customData._serverResponse)||void 0===y?void 0:y.mfaPendingCredential,M,"argument-error"),uo._fromError(M,ee)}function uu(D,g){return St(D,"POST","/v2/accounts/mfaEnrollment:start",un(D,g))}class Su{constructor(g){this.user=g,this.enrolledFactors=[],g._onReload(y=>{y.mfaInfo&&(this.enrolledFactors=y.mfaInfo.map(M=>Hi._fromServerResponse(g.auth,M)))})}static _fromUser(g){return new Su(g)}getSession(){var g=this;return(0,f.Z)(function*(){return Wi._fromIdtoken(yield g.user.getIdToken())})()}enroll(g,y){var M=this;return(0,f.Z)(function*(){const ee=g,pe=yield M.getSession(),ct=yield Gt(M.user,ee._process(M.user.auth,pe,y));return yield M.user._updateTokensIfNecessary(ct),M.user.reload()})()}unenroll(g){var y=this;return(0,f.Z)(function*(){const M="string"==typeof g?g:g.uid,ee=yield y.user.getIdToken(),pe=yield Gt(y.user,function gi(D,g){return St(D,"POST","/v2/accounts/mfaEnrollment:withdraw",un(D,g))}(y.user.auth,{idToken:ee,mfaEnrollmentId:M}));y.enrolledFactors=y.enrolledFactors.filter(({uid:ct})=>ct!==M),yield y.user._updateTokensIfNecessary(pe);try{yield y.user.reload()}catch(ct){if("auth/user-token-expired"!==ct.code)throw ct}})()}}const Ri=new WeakMap;function ea(D){const g=(0,T.m9)(D);return Ri.has(g)||Ri.set(g,Su._fromUser(g)),Ri.get(g)}const ps="__sak";class ri{constructor(g,y){this.storageRetriever=g,this.type=y}_isAvailable(){try{return this.storage?(this.storage.setItem(ps,"1"),this.storage.removeItem(ps),Promise.resolve(!0)):Promise.resolve(!1)}catch(g){return Promise.resolve(!1)}}_set(g,y){return this.storage.setItem(g,JSON.stringify(y)),Promise.resolve()}_get(g){const y=this.storage.getItem(g);return Promise.resolve(y?JSON.parse(y):null)}_remove(g){return this.storage.removeItem(g),Promise.resolve()}get storage(){return this.storageRetriever()}}const on=(()=>{class D extends ri{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(y,M)=>this.onStorageEvent(y,M),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ns(){const D=(0,T.z$)();return ye(D)||On(D)}()&&function pt(){try{return!(!window||window===window.top)}catch(D){return!1}}(),this.fallbackToPolling=$e(),this._shouldAllowMigration=!0}forAllChangedKeys(y){for(const M of Object.keys(this.listeners)){const ee=this.storage.getItem(M),pe=this.localCache[M];ee!==pe&&y(M,pe,ee)}}onStorageEvent(y,M=!1){if(!y.key)return void this.forAllChangedKeys((Ft,ln,ir)=>{this.notifyListeners(Ft,ir)});const ee=y.key;if(M?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ft=this.storage.getItem(ee);if(y.newValue!==Ft)null!==y.newValue?this.storage.setItem(ee,y.newValue):this.storage.removeItem(ee);else if(this.localCache[ee]===y.newValue&&!M)return}const pe=()=>{const Ft=this.storage.getItem(ee);!M&&this.localCache[ee]===Ft||this.notifyListeners(ee,Ft)},ct=this.storage.getItem(ee);!function or(){return(0,T.w1)()&&10===document.documentMode}()||ct===y.newValue||y.newValue===y.oldValue?pe():setTimeout(pe,10)}notifyListeners(y,M){this.localCache[y]=M;const ee=this.listeners[y];if(ee)for(const pe of Array.from(ee))pe(M&&JSON.parse(M))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((y,M,ee)=>{this.onStorageEvent(new StorageEvent("storage",{key:y,oldValue:M,newValue:ee}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(y,M){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[y]||(this.listeners[y]=new Set,this.localCache[y]=this.storage.getItem(y)),this.listeners[y].add(M)}_removeListener(y,M){this.listeners[y]&&(this.listeners[y].delete(M),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(y,M){var ee=()=>super._set,pe=this;return(0,f.Z)(function*(){yield ee().call(pe,y,M),pe.localCache[y]=JSON.stringify(M)})()}_get(y){var M=()=>super._get,ee=this;return(0,f.Z)(function*(){const pe=yield M().call(ee,y);return ee.localCache[y]=JSON.stringify(pe),pe})()}_remove(y){var M=()=>super._remove,ee=this;return(0,f.Z)(function*(){yield M().call(ee,y),delete ee.localCache[y]})()}}return D.type="LOCAL",D})(),qs=(()=>{class D extends ri{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(y,M){}_removeListener(y,M){}}return D.type="SESSION",D})();let In=(()=>{class D{constructor(y){this.eventTarget=y,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(y){const M=this.receivers.find(pe=>pe.isListeningto(y));if(M)return M;const ee=new D(y);return this.receivers.push(ee),ee}isListeningto(y){return this.eventTarget===y}handleEvent(y){var M=this;return(0,f.Z)(function*(){const ee=y,{eventId:pe,eventType:ct,data:Ft}=ee.data,ln=M.handlersMap[ct];if(!(null==ln?void 0:ln.size))return;ee.ports[0].postMessage({status:"ack",eventId:pe,eventType:ct});const ir=Array.from(ln).map(function(){var hi=(0,f.Z)(function*(Qi){return Qi(ee.origin,Ft)});return function(Qi){return hi.apply(this,arguments)}}()),fr=yield function Ju(D){return Promise.all(D.map(function(){var g=(0,f.Z)(function*(y){try{return{fulfilled:!0,value:yield y}}catch(M){return{fulfilled:!1,reason:M}}});return function(y){return g.apply(this,arguments)}}()))}(ir);ee.ports[0].postMessage({status:"done",eventId:pe,eventType:ct,response:fr})})()}_subscribe(y,M){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[y]||(this.handlersMap[y]=new Set),this.handlersMap[y].add(M)}_unsubscribe(y,M){this.handlersMap[y]&&M&&this.handlersMap[y].delete(M),(!M||0===this.handlersMap[y].size)&&delete this.handlersMap[y],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return D.receivers=[],D})();function Xn(D="",g=10){let y="";for(let M=0;M<g;M++)y+=Math.floor(10*Math.random());return D+y}class ql{constructor(g){this.target=g,this.handlers=new Set}removeMessageHandler(g){g.messageChannel&&(g.messageChannel.port1.removeEventListener("message",g.onMessage),g.messageChannel.port1.close()),this.handlers.delete(g)}_send(g,y,M=50){var ee=this;return(0,f.Z)(function*(){const pe="undefined"!=typeof MessageChannel?new MessageChannel:null;if(!pe)throw new Error("connection_unavailable");let ct,Ft;return new Promise((ln,ir)=>{const fr=Xn("",20);pe.port1.start();const hi=setTimeout(()=>{ir(new Error("unsupported_event"))},M);Ft={messageChannel:pe,onMessage(Qi){const $o=Qi;if($o.data.eventId===fr)switch($o.data.status){case"ack":clearTimeout(hi),ct=setTimeout(()=>{ir(new Error("timeout"))},3e3);break;case"done":clearTimeout(ct),ln($o.data.response);break;default:clearTimeout(hi),clearTimeout(ct),ir(new Error("invalid_response"))}}},ee.handlers.add(Ft),pe.port1.addEventListener("message",Ft.onMessage),ee.target.postMessage({eventType:g,eventId:fr,data:y},[pe.port2])}).finally(()=>{Ft&&ee.removeMessageHandler(Ft)})})()}}function nn(){return window}function Jt(){return void 0!==nn().WorkerGlobalScope&&"function"==typeof nn().importScripts}function ha(){return(ha=(0,f.Z)(function*(){if(!(null==navigator?void 0:navigator.serviceWorker))return null;try{return(yield navigator.serviceWorker.ready).active}catch(D){return null}})).apply(this,arguments)}const Fa="firebaseLocalStorageDb",La="firebaseLocalStorage",du="fbase_key";class Io{constructor(g){this.request=g}toPromise(){return new Promise((g,y)=>{this.request.addEventListener("success",()=>{g(this.request.result)}),this.request.addEventListener("error",()=>{y(this.request.error)})})}}function fa(D,g){return D.transaction([La],g?"readwrite":"readonly").objectStore(La)}function xu(){const D=indexedDB.open(Fa,1);return new Promise((g,y)=>{D.addEventListener("error",()=>{y(D.error)}),D.addEventListener("upgradeneeded",()=>{const M=D.result;try{M.createObjectStore(La,{keyPath:du})}catch(ee){y(ee)}}),D.addEventListener("success",(0,f.Z)(function*(){const M=D.result;M.objectStoreNames.contains(La)?g(M):(M.close(),yield function gs(){const D=indexedDB.deleteDatabase(Fa);return new Io(D).toPromise()}(),g(yield xu()))}))})}function R(D,g,y){return b.apply(this,arguments)}function b(){return(b=(0,f.Z)(function*(D,g,y){const M=fa(D,!0).put({[du]:g,value:y});return new Io(M).toPromise()})).apply(this,arguments)}function V(){return(V=(0,f.Z)(function*(D,g){const y=fa(D,!1).get(g),M=yield new Io(y).toPromise();return void 0===M?null:M.value})).apply(this,arguments)}function W(D,g){const y=fa(D,!0).delete(g);return new Io(y).toPromise()}const At=(()=>{class D{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var y=this;return(0,f.Z)(function*(){return y.db||(y.db=yield xu()),y.db})()}_withRetries(y){var M=this;return(0,f.Z)(function*(){let ee=0;for(;;)try{const pe=yield M._openDb();return yield y(pe)}catch(pe){if(ee++>3)throw pe;M.db&&(M.db.close(),M.db=void 0)}})()}initializeServiceWorkerMessaging(){var y=this;return(0,f.Z)(function*(){return Jt()?y.initializeReceiver():y.initializeSender()})()}initializeReceiver(){var y=this;return(0,f.Z)(function*(){y.receiver=In._getInstance(function Zl(){return Jt()?self:null}()),y.receiver._subscribe("keyChanged",function(){var M=(0,f.Z)(function*(ee,pe){return{keyProcessed:(yield y._poll()).includes(pe.key)}});return function(ee,pe){return M.apply(this,arguments)}}()),y.receiver._subscribe("ping",function(){var M=(0,f.Z)(function*(ee,pe){return["keyChanged"]});return function(ee,pe){return M.apply(this,arguments)}}())})()}initializeSender(){var y=this;return(0,f.Z)(function*(){var M,ee;if(y.activeServiceWorker=yield function ii(){return ha.apply(this,arguments)}(),!y.activeServiceWorker)return;y.sender=new ql(y.activeServiceWorker);const pe=yield y.sender._send("ping",{},800);!pe||(null===(M=pe[0])||void 0===M?void 0:M.fulfilled)&&(null===(ee=pe[0])||void 0===ee?void 0:ee.value.includes("keyChanged"))&&(y.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(y){var M=this;return(0,f.Z)(function*(){if(M.sender&&M.activeServiceWorker&&function ta(){var D;return(null===(D=null==navigator?void 0:navigator.serviceWorker)||void 0===D?void 0:D.controller)||null}()===M.activeServiceWorker)try{yield M.sender._send("keyChanged",{key:y},M.serviceWorkerReceiverAvailable?800:50)}catch(ee){}})()}_isAvailable(){return(0,f.Z)(function*(){try{if(!indexedDB)return!1;const y=yield xu();return yield R(y,ps,"1"),yield W(y,ps),!0}catch(y){}return!1})()}_withPendingWrite(y){var M=this;return(0,f.Z)(function*(){M.pendingWrites++;try{yield y()}finally{M.pendingWrites--}})()}_set(y,M){var ee=this;return(0,f.Z)(function*(){return ee._withPendingWrite((0,f.Z)(function*(){return yield ee._withRetries(pe=>R(pe,y,M)),ee.localCache[y]=M,ee.notifyServiceWorker(y)}))})()}_get(y){var M=this;return(0,f.Z)(function*(){const ee=yield M._withRetries(pe=>function C(D,g){return V.apply(this,arguments)}(pe,y));return M.localCache[y]=ee,ee})()}_remove(y){var M=this;return(0,f.Z)(function*(){return M._withPendingWrite((0,f.Z)(function*(){return yield M._withRetries(ee=>W(ee,y)),delete M.localCache[y],M.notifyServiceWorker(y)}))})()}_poll(){var y=this;return(0,f.Z)(function*(){const M=yield y._withRetries(ct=>{const Ft=fa(ct,!1).getAll();return new Io(Ft).toPromise()});if(!M)return[];if(0!==y.pendingWrites)return[];const ee=[],pe=new Set;for(const{fbase_key:ct,value:Ft}of M)pe.add(ct),JSON.stringify(y.localCache[ct])!==JSON.stringify(Ft)&&(y.notifyListeners(ct,Ft),ee.push(ct));for(const ct of Object.keys(y.localCache))y.localCache[ct]&&!pe.has(ct)&&(y.notifyListeners(ct,null),ee.push(ct));return ee})()}notifyListeners(y,M){this.localCache[y]=M;const ee=this.listeners[y];if(ee)for(const pe of Array.from(ee))pe(M)}startPolling(){var y=this;this.stopPolling(),this.pollTimer=setInterval((0,f.Z)(function*(){return y._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(y,M){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[y]||(this.listeners[y]=new Set,this._get(y)),this.listeners[y].add(M)}_removeListener(y,M){this.listeners[y]&&(this.listeners[y].delete(M),0===this.listeners[y].size&&delete this.listeners[y]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return D.type="LOCAL",D})();function En(D,g){return St(D,"POST","/v2/accounts/mfaSignIn:start",un(D,g))}function rr(){return(rr=(0,f.Z)(function*(D){return(yield St(D,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Os(D){return new Promise((g,y)=>{const M=document.createElement("script");M.setAttribute("src",D),M.onload=g,M.onerror=ee=>{const pe=st("internal-error");pe.customData=ee,y(pe)},M.type="text/javascript",M.charset="UTF-8",function Dr(){var D,g;return null!==(g=null===(D=document.getElementsByTagName("head"))||void 0===D?void 0:D[0])&&void 0!==g?g:document}().appendChild(M)})}function Kr(D){return`__${D}${Math.floor(1e6*Math.random())}`}const Fr=1e12;class ks{constructor(g){this.auth=g,this.counter=Fr,this._widgets=new Map}render(g,y){const M=this.counter;return this._widgets.set(M,new Xu(g,this.auth.name,y||{})),this.counter++,M}reset(g){var y;const M=g||Fr;null===(y=this._widgets.get(M))||void 0===y||y.delete(),this._widgets.delete(M)}getResponse(g){var y;return(null===(y=this._widgets.get(g||Fr))||void 0===y?void 0:y.getResponse())||""}execute(g){var y=this;return(0,f.Z)(function*(){var M;return null===(M=y._widgets.get(g||Fr))||void 0===M||M.execute(),""})()}}class Xu{constructor(g,y,M){this.params=M,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const ee="string"==typeof g?document.getElementById(g):g;fe(ee,"argument-error",{appName:y}),this.container=ee,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Gi(D){const g=[],y="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let M=0;M<D;M++)g.push(y.charAt(Math.floor(Math.random()*y.length)));return g.join("")}(50);const{callback:g,"expired-callback":y}=this.params;if(g)try{g(this.responseToken)}catch(M){}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,y)try{y()}catch(M){}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const Pi=Kr("rcb"),Yl=new Ce(3e4,6e4);class wr{constructor(){this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!!nn().grecaptcha}load(g,y=""){return fe(function Va(D){return D.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(D)}(y),g,"argument-error"),this.shouldResolveImmediately(y)?Promise.resolve(nn().grecaptcha):new Promise((M,ee)=>{const pe=nn().setTimeout(()=>{ee(st(g,"network-request-failed"))},Yl.get());nn()[Pi]=()=>{nn().clearTimeout(pe),delete nn()[Pi];const Ft=nn().grecaptcha;if(!Ft)return void ee(st(g,"internal-error"));const ln=Ft.render;Ft.render=(ir,fr)=>{const hi=ln(ir,fr);return this.counter++,hi},this.hostLanguage=y,M(Ft)},Os(`https://www.google.com/recaptcha/api.js??${(0,T.xO)({onload:Pi,render:"explicit",hl:y})}`).catch(()=>{clearTimeout(pe),ee(st(g,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(g){return!!nn().grecaptcha&&(g===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class Ql{load(g){return(0,f.Z)(function*(){return new ks(g)})()}clearedOneInstance(){}}const vn="recaptcha",Jl={theme:"light",type:"image"};class sd{constructor(g,y=Object.assign({},Jl),M){this.parameters=y,this.type=vn,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=Ut(M),this.isInvisible="invisible"===this.parameters.size,fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment");const ee="string"==typeof g?document.getElementById(g):g;fe(ee,this.auth,"argument-error"),this.container=ee,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new Ql:new wr,this.validateStartingState()}verify(){var g=this;return(0,f.Z)(function*(){g.assertNotDestroyed();const y=yield g.render(),M=g.getAssertedRecaptcha();return M.getResponse(y)||new Promise(pe=>{const ct=Ft=>{!Ft||(g.tokenChangeListeners.delete(ct),pe(Ft))};g.tokenChangeListeners.add(ct),g.isInvisible&&M.execute(y)})})()}render(){try{this.assertNotDestroyed()}catch(g){return Promise.reject(g)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(g=>{throw this.renderPromise=null,g})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(g=>{this.container.removeChild(g)})}validateStartingState(){fe(!this.parameters.sitekey,this.auth,"argument-error"),fe(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),fe("undefined"!=typeof document,this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(g){return y=>{if(this.tokenChangeListeners.forEach(M=>M(y)),"function"==typeof g)g(y);else if("string"==typeof g){const M=nn()[g];"function"==typeof M&&M(y)}}}assertNotDestroyed(){fe(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var g=this;return(0,f.Z)(function*(){if(yield g.init(),!g.widgetId){let y=g.container;if(!g.isInvisible){const M=document.createElement("div");y.appendChild(M),y=M}g.widgetId=g.getAssertedRecaptcha().render(y,g.parameters)}return g.widgetId})()}init(){var g=this;return(0,f.Z)(function*(){fe(dn()&&!Jt(),g.auth,"internal-error"),yield function pa(){let D=null;return new Promise(g=>{"complete"!==document.readyState?(D=()=>g(),window.addEventListener("load",D)):g()}).catch(g=>{throw D&&window.removeEventListener("load",D),g})}(),g.recaptcha=yield g._recaptchaLoader.load(g.auth,g.auth.languageCode||void 0);const y=yield function jn(D){return rr.apply(this,arguments)}(g.auth);fe(y,g.auth,"internal-error"),g.parameters.sitekey=y})()}getAssertedRecaptcha(){return fe(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class Zs{constructor(g,y){this.verificationId=g,this.onConfirmation=y}confirm(g){const y=di._fromVerification(this.verificationId,g);return this.onConfirmation(y)}}function Bi(D,g,y){return Fs.apply(this,arguments)}function Fs(){return(Fs=(0,f.Z)(function*(D,g,y){const M=Ut(D),ee=yield lo(M,g,(0,T.m9)(y));return new Zs(ee,pe=>Vt(M,pe))})).apply(this,arguments)}function ji(D,g,y){return _s.apply(this,arguments)}function _s(){return(_s=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D);yield B(!1,M,"phone");const ee=yield lo(M.auth,g,(0,T.m9)(y));return new Zs(ee,pe=>kr(M,pe))})).apply(this,arguments)}function Ba(D,g,y){return ja.apply(this,arguments)}function ja(){return(ja=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D),ee=yield lo(M.auth,g,(0,T.m9)(y));return new Zs(ee,pe=>lr(M,pe))})).apply(this,arguments)}function lo(D,g,y){return Ni.apply(this,arguments)}function Ni(){return(Ni=(0,f.Z)(function*(D,g,y){var M;const ee=yield y.verify();try{let pe;if(fe("string"==typeof ee,D,"argument-error"),fe(y.type===vn,D,"argument-error"),pe="string"==typeof g?{phoneNumber:g}:g,"session"in pe){const ct=pe.session;if("phoneNumber"in pe)return fe("enroll"===ct.type,D,"internal-error"),(yield uu(D,{idToken:ct.credential,phoneEnrollmentInfo:{phoneNumber:pe.phoneNumber,recaptchaToken:ee}})).phoneSessionInfo.sessionInfo;{fe("signin"===ct.type,D,"internal-error");const Ft=(null===(M=pe.multiFactorHint)||void 0===M?void 0:M.uid)||pe.multiFactorUid;return fe(Ft,D,"missing-multi-factor-info"),(yield En(D,{mfaPendingCredential:ct.credential,mfaEnrollmentId:Ft,phoneSignInInfo:{recaptchaToken:ee}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:ct}=yield So(D,{phoneNumber:pe.phoneNumber,recaptchaToken:ee});return ct}}finally{y._reset()}})).apply(this,arguments)}function Ys(D,g){return el.apply(this,arguments)}function el(){return(el=(0,f.Z)(function*(D,g){yield hs((0,T.m9)(D),g)})).apply(this,arguments)}let hu=(()=>{class D{constructor(y){this.providerId=D.PROVIDER_ID,this.auth=Ut(y)}verifyPhoneNumber(y,M){return lo(this.auth,y,(0,T.m9)(M))}static credential(y,M){return di._fromVerification(y,M)}static credentialFromResult(y){return D.credentialFromTaggedObject(y)}static credentialFromError(y){return D.credentialFromTaggedObject(y.customData||{})}static credentialFromTaggedObject({_tokenResponse:y}){if(!y)return null;const{phoneNumber:M,temporaryProof:ee}=y;return M&&ee?di._fromTokenResponse(M,ee):null}}return D.PROVIDER_ID="phone",D.PHONE_SIGN_IN_METHOD="phone",D})();function ws(D,g){return g?xe(g):(fe(D._popupRedirectResolver,D,"argument-error"),D._popupRedirectResolver)}class Mu extends kn{constructor(g){super("custom","custom"),this.params=g}_getIdTokenResponse(g){return ls(g,this._buildIdpRequest())}_linkToIdToken(g,y){return ls(g,this._buildIdpRequest(y))}_getReauthenticationResolver(g){return ls(g,this._buildIdpRequest())}_buildIdpRequest(g){const y={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return g&&(y.idToken=g),y}}function Ml(D){return je(D.auth,new Mu(D),D.bypassAuthState)}function Tc(D){const{auth:g,user:y}=D;return fe(y,g,"internal-error"),j(y,new Mu(D),D.bypassAuthState)}function Oi(D){return fu.apply(this,arguments)}function fu(){return(fu=(0,f.Z)(function*(D){const{auth:g,user:y}=D;return fe(y,g,"internal-error"),hs(y,new Mu(D),D.bypassAuthState)})).apply(this,arguments)}class si{constructor(g,y,M,ee,pe=!1){this.auth=g,this.resolver=M,this.user=ee,this.bypassAuthState=pe,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(y)?y:[y]}execute(){var g=this;return new Promise(function(){var y=(0,f.Z)(function*(M,ee){g.pendingPromise={resolve:M,reject:ee};try{g.eventManager=yield g.resolver._initialize(g.auth),yield g.onExecution(),g.eventManager.registerConsumer(g)}catch(pe){g.reject(pe)}});return function(M,ee){return y.apply(this,arguments)}}())}onAuthEvent(g){var y=this;return(0,f.Z)(function*(){const{urlResponse:M,sessionId:ee,postBody:pe,tenantId:ct,error:Ft,type:ln}=g;if(Ft)return void y.reject(Ft);const ir={auth:y.auth,requestUri:M,sessionId:ee,tenantId:ct||void 0,postBody:pe||void 0,user:y.user,bypassAuthState:y.bypassAuthState};try{y.resolve(yield y.getIdpTask(ln)(ir))}catch(fr){y.reject(fr)}})()}onError(g){this.reject(g)}getIdpTask(g){switch(g){case"signInViaPopup":case"signInViaRedirect":return Ml;case"linkViaPopup":case"linkViaRedirect":return Oi;case"reauthViaPopup":case"reauthViaRedirect":return Tc;default:Pt(this.auth,"internal-error")}}resolve(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(g),this.unregisterAndCleanUp()}reject(g){Ke(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(g),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Is=new Ce(2e3,1e4);function tl(D,g,y){return Ls.apply(this,arguments)}function Ls(){return(Ls=(0,f.Z)(function*(D,g,y){const M=Ut(D);ht(D,g,Ii);const ee=ws(M,y);return new co(M,"signInViaPopup",g,ee).executeNotNull()})).apply(this,arguments)}function Xl(D,g,y){return ga.apply(this,arguments)}function ga(){return(ga=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D);ht(M.auth,g,Ii);const ee=ws(M.auth,y);return new co(M.auth,"reauthViaPopup",g,ee,M).executeNotNull()})).apply(this,arguments)}function ec(D,g,y){return pu.apply(this,arguments)}function pu(){return(pu=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D);ht(M.auth,g,Ii);const ee=ws(M.auth,y);return new co(M.auth,"linkViaPopup",g,ee,M).executeNotNull()})).apply(this,arguments)}let co=(()=>{class D extends si{constructor(y,M,ee,pe,ct){super(y,M,pe,ct),this.provider=ee,this.authWindow=null,this.pollId=null,D.currentPopupAction&&D.currentPopupAction.cancel(),D.currentPopupAction=this}executeNotNull(){var y=this;return(0,f.Z)(function*(){const M=yield y.execute();return fe(M,y.auth,"internal-error"),M})()}onExecution(){var y=this;return(0,f.Z)(function*(){Ke(1===y.filter.length,"Popup operations only handle one event");const M=Xn();y.authWindow=yield y.resolver._openPopup(y.auth,y.provider,y.filter[0],M),y.authWindow.associatedEvent=M,y.resolver._originValidation(y.auth).catch(ee=>{y.reject(ee)}),y.resolver._isIframeWebStorageSupported(y.auth,ee=>{ee||y.reject(st(y.auth,"web-storage-unsupported"))}),y.pollUserCancellation()})()}get eventId(){var y;return(null===(y=this.authWindow)||void 0===y?void 0:y.associatedEvent)||null}cancel(){this.reject(st(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,D.currentPopupAction=null}pollUserCancellation(){const y=()=>{var M,ee;this.pollId=(null===(ee=null===(M=this.authWindow)||void 0===M?void 0:M.window)||void 0===ee?void 0:ee.closed)?window.setTimeout(()=>{this.pollId=null,this.reject(st(this.auth,"popup-closed-by-user"))},2e3):window.setTimeout(y,Is.get())};y()}}return D.currentPopupAction=null,D})();const Ru=new Map;class Rl extends si{constructor(g,y,M=!1){super(g,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],y,void 0,M),this.eventId=null}execute(){var g=()=>super.execute,y=this;return(0,f.Z)(function*(){let M=Ru.get(y.auth._key());if(!M){try{const pe=(yield function ra(D,g){return ma.apply(this,arguments)}(y.resolver,y.auth))?yield g().call(y):null;M=()=>Promise.resolve(pe)}catch(ee){M=()=>Promise.reject(ee)}Ru.set(y.auth._key(),M)}return y.bypassAuthState||Ru.set(y.auth._key(),()=>Promise.resolve(null)),M()})()}onAuthEvent(g){var y=()=>super.onAuthEvent,M=this;return(0,f.Z)(function*(){if("signInViaRedirect"===g.type)return y().call(M,g);if("unknown"!==g.type){if(g.eventId){const ee=yield M.auth._redirectUserForId(g.eventId);if(ee)return M.user=ee,y().call(M,g);M.resolve(null)}}else M.resolve(null)})()}onExecution(){return(0,f.Z)(function*(){})()}cleanUp(){}}function ma(){return(ma=(0,f.Z)(function*(D,g){const y=Dc(g),M=mi(D);if(!(yield M._isAvailable()))return!1;const ee="true"===(yield M._get(y));return yield M._remove(y),ee})).apply(this,arguments)}function ia(D,g){return Qs.apply(this,arguments)}function Qs(){return(Qs=(0,f.Z)(function*(D,g){return mi(D)._set(Dc(g),"true")})).apply(this,arguments)}function Ha(){Ru.clear()}function mi(D){return xe(D._redirectPersistence)}function Dc(D){return Ee("pendingRedirect",D.config.apiKey,D.name)}function Wa(D,g,y){return function Ga(D,g,y){return Pu.apply(this,arguments)}(D,g,y)}function Pu(){return(Pu=(0,f.Z)(function*(D,g,y){const M=Ut(D);ht(D,g,Ii);const ee=ws(M,y);return yield ia(ee,M),ee._openRedirect(M,g,"signInViaRedirect")})).apply(this,arguments)}function od(D,g,y){return function sa(D,g,y){return Nu.apply(this,arguments)}(D,g,y)}function Nu(){return(Nu=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D);ht(M.auth,g,Ii);const ee=ws(M.auth,y);yield ia(ee,M.auth);const pe=yield gu(M);return ee._openRedirect(M.auth,g,"reauthViaRedirect",pe)})).apply(this,arguments)}function ad(D,g,y){return function ci(D,g,y){return _a.apply(this,arguments)}(D,g,y)}function _a(){return(_a=(0,f.Z)(function*(D,g,y){const M=(0,T.m9)(D);ht(M.auth,g,Ii);const ee=ws(M.auth,y);yield B(!1,M,g.providerId),yield ia(ee,M.auth);const pe=yield gu(M);return ee._openRedirect(M.auth,g,"linkViaRedirect",pe)})).apply(this,arguments)}function ud(D,g){return ya.apply(this,arguments)}function ya(){return(ya=(0,f.Z)(function*(D,g){return yield Ut(D)._initializationPromise,Uo(D,g,!1)})).apply(this,arguments)}function Uo(D,g){return Cs.apply(this,arguments)}function Cs(){return(Cs=(0,f.Z)(function*(D,g,y=!1){const M=Ut(D),ee=ws(M,g),ct=yield new Rl(M,ee,y).execute();return ct&&!y&&(delete ct.user._redirectEventId,yield M._persistUserIfCurrent(ct.user),yield M._setRedirectUser(null,g)),ct})).apply(this,arguments)}function gu(D){return Vo.apply(this,arguments)}function Vo(){return(Vo=(0,f.Z)(function*(D){const g=Xn(`${D.uid}:::`);return D._redirectEventId=g,yield D.auth._setRedirectUser(D),yield D.auth._persistUserIfCurrent(D),g})).apply(this,arguments)}class Bo{constructor(g){this.auth=g,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(g){this.consumers.add(g),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,g)&&(this.sendToConsumer(this.queuedRedirectEvent,g),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(g){this.consumers.delete(g)}onEvent(g){if(this.hasEventBeenHandled(g))return!1;let y=!1;return this.consumers.forEach(M=>{this.isEventForConsumer(g,M)&&(y=!0,this.sendToConsumer(g,M),this.saveEventToCache(g))}),this.hasHandledPotentialRedirect||!function ku(D){switch(D.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return va(D);default:return!1}}(g)||(this.hasHandledPotentialRedirect=!0,y||(this.queuedRedirectEvent=g,y=!0)),y}sendToConsumer(g,y){var M;if(g.error&&!va(g)){const ee=(null===(M=g.error.code)||void 0===M?void 0:M.split("auth/")[1])||"internal-error";y.onError(st(this.auth,ee))}else y.onAuthEvent(g)}isEventForConsumer(g,y){const M=null===y.eventId||!!g.eventId&&g.eventId===y.eventId;return y.filter.includes(g.type)&&M}hasEventBeenHandled(g){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(Ou(g))}saveEventToCache(g){this.cachedEventUids.add(Ou(g)),this.lastProcessedEventTime=Date.now()}}function Ou(D){return[D.type,D.eventId,D.sessionId,D.tenantId].filter(g=>g).join("-")}function va({type:D,error:g}){return"unknown"===D&&"auth/no-auth-event"===(null==g?void 0:g.code)}function Ea(D){return bs.apply(this,arguments)}function bs(){return(bs=(0,f.Z)(function*(D,g={}){return St(D,"GET","/v1/projects",g)})).apply(this,arguments)}const wa=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,za=/^https?/;function Fu(){return(Fu=(0,f.Z)(function*(D){if(D.config.emulator)return;const{authorizedDomains:g}=yield Ea(D);for(const y of g)try{if(Ka(y))return}catch(M){}Pt(D,"unauthorized-domain")})).apply(this,arguments)}function Ka(D){const g=Ne(),{protocol:y,hostname:M}=new URL(g);if(D.startsWith("chrome-extension://")){const ct=new URL(D);return""===ct.hostname&&""===M?"chrome-extension:"===y&&D.replace("chrome-extension://","")===g.replace("chrome-extension://",""):"chrome-extension:"===y&&ct.hostname===M}if(!za.test(y))return!1;if(wa.test(D))return M===D;const ee=D.replace(/\./g,"\\.");return new RegExp("^(.+\\."+ee+"|"+ee+")$","i").test(M)}const Ca=new Ce(3e4,6e4);function Lu(){const D=nn().___jsl;if(null==D?void 0:D.H)for(const g of Object.keys(D.H))if(D.H[g].r=D.H[g].r||[],D.H[g].L=D.H[g].L||[],D.H[g].r=[...D.H[g].L],D.CP)for(let y=0;y<D.CP.length;y++)D.CP[y]=null}let Uu=null;function mu(D){return Uu=Uu||function ld(D){return new Promise((g,y)=>{var M,ee,pe;function ct(){Lu(),gapi.load("gapi.iframes",{callback:()=>{g(gapi.iframes.getContext())},ontimeout:()=>{Lu(),y(st(D,"network-request-failed"))},timeout:Ca.get()})}if(null===(ee=null===(M=nn().gapi)||void 0===M?void 0:M.iframes)||void 0===ee?void 0:ee.Iframe)g(gapi.iframes.getContext());else{if(!(null===(pe=nn().gapi)||void 0===pe?void 0:pe.load)){const Ft=Kr("iframefcb");return nn()[Ft]=()=>{gapi.load?ct():y(st(D,"network-request-failed"))},Os(`https://apis.google.com/js/api.js?onload=${Ft}`).catch(ln=>y(ln))}ct()}}).catch(g=>{throw Uu=null,g})}(D),Uu}const oa=new Ce(5e3,15e3),dd={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Vu=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Co(D){const g=D.config;fe(g.authDomain,D,"auth-domain-config-required");const y=g.emulator?$t(g,"emulator/auth/iframe"):`https://${D.config.authDomain}/__/auth/iframe`,M={apiKey:g.apiKey,appName:D.name,v:P.SDK_VERSION},ee=Vu.get(D.config.apiHost);ee&&(M.eid=ee);const pe=D._getFrameworks();return pe.length&&(M.fw=pe.join(",")),`${y}?${(0,T.xO)(M).slice(1)}`}function Bu(){return Bu=(0,f.Z)(function*(D){const g=yield mu(D),y=nn().gapi;return fe(y,D,"internal-error"),g.open({where:document.body,url:Co(D),messageHandlersFilter:y.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:dd,dontclear:!0},M=>new Promise(function(){var ee=(0,f.Z)(function*(pe,ct){yield M.restyle({setHideOnLeave:!1});const Ft=st(D,"network-request-failed"),ln=nn().setTimeout(()=>{ct(Ft)},oa.get());function ir(){nn().clearTimeout(ln),pe(M)}M.ping(ir).then(ir,()=>{ct(Ft)})});return function(pe,ct){return ee.apply(this,arguments)}}()))}),Bu.apply(this,arguments)}const ss={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class os{constructor(g){this.window=g,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch(g){}}}function rl(D,g,y,M,ee,pe){fe(D.config.authDomain,D,"auth-domain-config-required"),fe(D.config.apiKey,D,"invalid-api-key");const ct={apiKey:D.config.apiKey,appName:D.name,authType:y,redirectUrl:M,v:P.SDK_VERSION,eventId:ee};if(g instanceof Ii){g.setDefaultLanguage(D.languageCode),ct.providerId=g.providerId||"",(0,T.xb)(g.getCustomParameters())||(ct.customParameters=JSON.stringify(g.getCustomParameters()));for(const[ln,ir]of Object.entries(pe||{}))ct[ln]=ir}if(g instanceof ei){const ln=g.getScopes().filter(ir=>""!==ir);ln.length>0&&(ct.scopes=ln.join(","))}D.tenantId&&(ct.tid=D.tenantId);const Ft=ct;for(const ln of Object.keys(Ft))void 0===Ft[ln]&&delete Ft[ln];return`${function Vd({config:D}){return D.emulator?$t(D,"emulator/auth/handler"):`https://${D.authDomain}/__/auth/handler`}(D)}?${(0,T.xO)(Ft).slice(1)}`}const il="webStorageSupport",Ya=class jo{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=qs,this._completeRedirectFn=Uo}_openPopup(g,y,M,ee){var pe=this;return(0,f.Z)(function*(){var ct;Ke(null===(ct=pe.eventManagers[g._key()])||void 0===ct?void 0:ct.manager,"_initialize() not called before _openPopup()");const Ft=rl(g,y,M,Ne(),ee);return function tc(D,g,y,M=500,ee=600){const pe=Math.max((window.screen.availHeight-ee)/2,0).toString(),ct=Math.max((window.screen.availWidth-M)/2,0).toString();let Ft="";const ln=Object.assign(Object.assign({},ss),{width:M.toString(),height:ee.toString(),top:pe,left:ct}),ir=(0,T.z$)().toLowerCase();y&&(Ft=lt(ir)?"_blank":y),ge(ir)&&(g=g||"http://localhost",ln.scrollbars="yes");const fr=Object.entries(ln).reduce((Qi,[$o,yu])=>`${Qi}${$o}=${yu},`,"");if(function Rr(D=(0,T.z$)()){var g;return On(D)&&!!(null===(g=window.navigator)||void 0===g?void 0:g.standalone)}(ir)&&"_self"!==Ft)return function Sc(D,g){const y=document.createElement("a");y.href=D,y.target=g;const M=document.createEvent("MouseEvent");M.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),y.dispatchEvent(M)}(g||"",Ft),new os(null);const hi=window.open(g||"",Ft,fr);fe(hi,D,"popup-blocked");try{hi.focus()}catch(Qi){}return new os(hi)}(g,Ft,Xn())})()}_openRedirect(g,y,M,ee){var pe=this;return(0,f.Z)(function*(){return yield pe._originValidation(g),function bt(D){nn().location.href=D}(rl(g,y,M,Ne(),ee)),new Promise(()=>{})})()}_initialize(g){const y=g._key();if(this.eventManagers[y]){const{manager:ee,promise:pe}=this.eventManagers[y];return ee?Promise.resolve(ee):(Ke(pe,"If manager is not set, promise should be"),pe)}const M=this.initAndGetManager(g);return this.eventManagers[y]={promise:M},M.catch(()=>{delete this.eventManagers[y]}),M}initAndGetManager(g){var y=this;return(0,f.Z)(function*(){const M=yield function Us(D){return Bu.apply(this,arguments)}(g),ee=new Bo(g);return M.register("authEvent",pe=>(fe(null==pe?void 0:pe.authEvent,g,"invalid-auth-event"),{status:ee.onEvent(pe.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),y.eventManagers[g._key()]={manager:ee},y.iframes[g._key()]=M,ee})()}_isIframeWebStorageSupported(g,y){this.iframes[g._key()].send(il,{type:il},ee=>{var pe;const ct=null===(pe=null==ee?void 0:ee[0])||void 0===pe?void 0:pe[il];void 0!==ct&&y(!!ct),Pt(g,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(g){const y=g._key();return this.originValidationPromises[y]||(this.originValidationPromises[y]=function Ia(D){return Fu.apply(this,arguments)}(g)),this.originValidationPromises[y]}get _shouldInitProactively(){return $e()||ye()||On()}};class sl extends class xc{constructor(g){this.factorId=g}_process(g,y,M){switch(y.type){case"enroll":return this._finalizeEnroll(g,y.credential,M);case"signin":return this._finalizeSignIn(g,y.credential);default:return Lt("unexpected MultiFactorSessionType")}}}{constructor(g){super("phone"),this.credential=g}static _fromCredential(g){return new sl(g)}_finalizeEnroll(g,y,M){return function lu(D,g){return St(D,"POST","/v2/accounts/mfaEnrollment:finalize",un(D,g))}(g,{idToken:y,displayName:M,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(g,y){return function Tn(D,g){return St(D,"POST","/v2/accounts/mfaSignIn:finalize",un(D,g))}(g,{mfaPendingCredential:y,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let Qa=(()=>{class D{constructor(){}static assertion(y){return sl._fromCredential(y)}}return D.FACTOR_ID="phone",D})();var _u="@firebase/auth",nc="0.19.11";class rc{constructor(g){this.auth=g,this.internalListeners=new Map}getUid(){var g;return this.assertAuthConfigured(),(null===(g=this.auth.currentUser)||void 0===g?void 0:g.uid)||null}getToken(g){var y=this;return(0,f.Z)(function*(){return y.assertAuthConfigured(),yield y.auth._initializationPromise,y.auth.currentUser?{accessToken:yield y.auth.currentUser.getIdToken(g)}:null})()}addAuthTokenListener(g){if(this.assertAuthConfigured(),this.internalListeners.has(g))return;const y=this.auth.onIdTokenChanged(M=>{var ee;g((null===(ee=M)||void 0===ee?void 0:ee.stsTokenManager.accessToken)||null)});this.internalListeners.set(g,y),this.updateProactiveRefresh()}removeAuthTokenListener(g){this.assertAuthConfigured();const y=this.internalListeners.get(g);!y||(this.internalListeners.delete(g),y(),this.updateProactiveRefresh())}assertAuthConfigured(){fe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function hd(D=(0,P.getApp)()){const g=(0,P._getProvider)(D,"auth");return g.isInitialized()?g.getImmediate():function We(D,g){const y=(0,P._getProvider)(D,"auth");if(y.isInitialized()){const ee=y.getImmediate(),pe=y.getOptions();if((0,T.vZ)(pe,null!=g?g:{}))return ee;Pt(ee,"already-initialized")}return y.initialize({options:g})}(D,{popupRedirectResolver:Ya,persistence:[At,on,qs]})}!function al(D){(0,P._registerComponent)(new Se.wA("auth",(g,{options:y})=>{const M=g.getProvider("app").getImmediate(),ee=g.getProvider("heartbeat"),{apiKey:pe,authDomain:ct}=M.options;return((Ft,ln)=>{fe(pe&&!pe.includes(":"),"invalid-api-key",{appName:Ft.name}),fe(!(null==ct?void 0:ct.includes(":")),"argument-error",{appName:Ft.name});const ir={apiKey:pe,authDomain:ct,clientPlatform:D,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ht(D)},fr=new _n(Ft,ln,ir);return function Qe(D,g){const y=(null==g?void 0:g.persistence)||[],M=(Array.isArray(y)?y:[y]).map(xe);(null==g?void 0:g.errorMap)&&D._updateErrorMap(g.errorMap),D._initializeWithPersistence(M,null==g?void 0:g.popupRedirectResolver)}(fr,y),fr})(M,ee)},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((g,y,M)=>{g.getProvider("auth-internal").initialize()})),(0,P._registerComponent)(new Se.wA("auth-internal",g=>{const y=Ut(g.getProvider("auth").getImmediate());return new rc(y)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,P.registerVersion)(_u,nc,function ol(D){switch(D){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(D)),(0,P.registerVersion)(_u,nc,"esm2017")}("Browser")},1627:(rn,et,N)=>{N.d(et,{vA:()=>sc,JH:()=>$r,G$:()=>F,tn:()=>Vs,wj:()=>dc,AM:()=>He,FQ:()=>Us,mI:()=>ss,iU:()=>vu,dH:()=>Ll,U7:()=>wd,Wu:()=>yd,Lx:()=>fl,EW:()=>Kd,U2:()=>dl,N8:()=>fo,Sb:()=>hc,$o:()=>pl,nP:()=>Zd,Kk:()=>As,vh:()=>$d,S1:()=>ac,yv:()=>md,Jr:()=>Bd,Vt:()=>jd,MQ:()=>_d,jM:()=>kl,g2:()=>Hd,R:()=>Wd,HE:()=>Ed,Bd:()=>zd,VF:()=>oc,IO:()=>qd,iH:()=>pd,qT:()=>Ts,Od:()=>Eu,i3:()=>ru,Bt:()=>ua,t8:()=>wu,Sl:()=>Ds,cy:()=>Wu,TQ:()=>Ih,e0:()=>vd,Vx:()=>gd});var f=N(5861),T=N(9681),P=N(4859),Z=N(2090),we=N(1877);const Se="@firebase/database";let he="";function He(h){he=h}class ae{constructor(l){this.domStorage_=l,this.prefix_="firebase:"}set(l,c){null==c?this.domStorage_.removeItem(this.prefixedName_(l)):this.domStorage_.setItem(this.prefixedName_(l),(0,Z.Pz)(c))}get(l){const c=this.domStorage_.getItem(this.prefixedName_(l));return null==c?null:(0,Z.cI)(c)}remove(l){this.domStorage_.removeItem(this.prefixedName_(l))}prefixedName_(l){return this.prefix_+l}toString(){return this.domStorage_.toString()}}class ve{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(l,c){null==c?delete this.cache_[l]:this.cache_[l]=c}get(l){return(0,Z.r3)(this.cache_,l)?this.cache_[l]:null}remove(l){delete this.cache_[l]}}const De=function(h){try{if("undefined"!=typeof window&&void 0!==window[h]){const l=window[h];return l.setItem("firebase:sentinel","cache"),l.removeItem("firebase:sentinel"),new ae(l)}}catch(l){}return new ve},ot=De("localStorage"),at=De("sessionStorage"),dt=new we.Yd("@firebase/database"),Ct=function(){let h=1;return function(){return h++}}(),be=function(h){const l=(0,Z.dS)(h),c=new Z.gQ;c.update(l);const _=c.digest();return Z.US.encodeByteArray(_)},mt=function(...h){let l="";for(let c=0;c<h.length;c++){const _=h[c];Array.isArray(_)||_&&"object"==typeof _&&"number"==typeof _.length?l+=mt.apply(null,_):l+="object"==typeof _?(0,Z.Pz)(_):_,l+=" "}return l};let Mt=null,Pt=!0;const st=function(h,l){(0,Z.hu)(!l||!0===h||!1===h,"Can't turn on custom loggers persistently."),!0===h?(dt.logLevel=we.in.VERBOSE,Mt=dt.log.bind(dt),l&&at.set("logging_enabled",!0)):"function"==typeof h?Mt=h:(Mt=null,at.remove("logging_enabled"))},rt=function(...h){if(!0===Pt&&(Pt=!1,null===Mt&&!0===at.get("logging_enabled")&&st(!0)),Mt){const l=mt.apply(null,h);Mt(l)}},ht=function(h){return function(...l){rt(h,...l)}},ke=function(...h){const l="FIREBASE INTERNAL ERROR: "+mt(...h);dt.error(l)},fe=function(...h){const l=`FIREBASE FATAL ERROR: ${mt(...h)}`;throw dt.error(l),new Error(l)},Lt=function(...h){const l="FIREBASE WARNING: "+mt(...h);dt.warn(l)},it=function(h){return"number"==typeof h&&(h!=h||h===Number.POSITIVE_INFINITY||h===Number.NEGATIVE_INFINITY)},We="[MIN_NAME]",Qe="[MAX_NAME]",Ne=function(h,l){if(h===l)return 0;if(h===We||l===Qe)return-1;if(l===We||h===Qe)return 1;{const c=Kt(h),_=Kt(l);return null!==c?null!==_?c-_==0?h.length-l.length:c-_:-1:null!==_?1:h<l?-1:1}},dn=function(h,l){return h===l?0:h<l?-1:1},Wt=function(h,l){if(l&&h in l)return l[h];throw new Error("Missing required key ("+h+") in object: "+(0,Z.Pz)(l))},ut=function(h){if("object"!=typeof h||null===h)return(0,Z.Pz)(h);const l=[];for(const _ in h)l.push(_);l.sort();let c="{";for(let _=0;_<l.length;_++)0!==_&&(c+=","),c+=(0,Z.Pz)(l[_]),c+=":",c+=ut(h[l[_]]);return c+="}",c},nt=function(h,l){const c=h.length;if(c<=l)return[h];const _=[];for(let A=0;A<c;A+=l)_.push(h.substring(A,A+l>c?c:A+l));return _};function Ce(h,l){for(const c in h)h.hasOwnProperty(c)&&l(c,h[c])}const $t=function(h){(0,Z.hu)(!it(h),"Invalid JSON number");const _=1023;let A,L,G,ce,Ae;0===h?(L=0,G=0,A=1/h==-1/0?1:0):(A=h<0,(h=Math.abs(h))>=Math.pow(2,1-_)?(ce=Math.min(Math.floor(Math.log(h)/Math.LN2),_),L=ce+_,G=Math.round(h*Math.pow(2,52-ce)-Math.pow(2,52))):(L=0,G=Math.round(h/Math.pow(2,-1074))));const Be=[];for(Ae=52;Ae;Ae-=1)Be.push(G%2?1:0),G=Math.floor(G/2);for(Ae=11;Ae;Ae-=1)Be.push(L%2?1:0),L=Math.floor(L/2);Be.push(A?1:0),Be.reverse();const Dt=Be.join("");let Et="";for(Ae=0;Ae<64;Ae+=8){let Bt=parseInt(Dt.substr(Ae,8),2).toString(16);1===Bt.length&&(Bt="0"+Bt),Et+=Bt}return Et.toLowerCase()},un=new RegExp("^-?(0*)\\d{1,10}$"),St=-2147483648,Yt=2147483647,Kt=function(h){if(un.test(h)){const l=Number(h);if(l>=St&&l<=Yt)return l}return null},gn=function(h){try{h()}catch(l){setTimeout(()=>{throw Lt("Exception was thrown by user callback.",l.stack||""),l},Math.floor(0))}},Pn=function(h,l){const c=setTimeout(h,l);return"object"==typeof c&&c.unref&&c.unref(),c};class Qn{constructor(l,c){this.appName_=l,this.appCheckProvider=c,this.appCheck=null==c?void 0:c.getImmediate({optional:!0}),this.appCheck||null==c||c.get().then(_=>this.appCheck=_)}getToken(l){return this.appCheck?this.appCheck.getToken(l):new Promise((c,_)=>{setTimeout(()=>{this.appCheck?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){var c;null===(c=this.appCheckProvider)||void 0===c||c.get().then(_=>_.addTokenListener(l))}notifyForInvalidToken(){Lt(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class zn{constructor(l,c,_){this.appName_=l,this.firebaseOptions_=c,this.authProvider_=_,this.auth_=null,this.auth_=_.getImmediate({optional:!0}),this.auth_||_.onInit(A=>this.auth_=A)}getToken(l){return this.auth_?this.auth_.getToken(l).catch(c=>c&&"auth/token-not-initialized"===c.code?(rt("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(c)):new Promise((c,_)=>{setTimeout(()=>{this.auth_?this.getToken(l).then(c,_):c(null)},0)})}addTokenChangeListener(l){this.auth_?this.auth_.addAuthTokenListener(l):this.authProvider_.get().then(c=>c.addAuthTokenListener(l))}removeTokenChangeListener(l){this.authProvider_.get().then(c=>c.removeAuthTokenListener(l))}notifyForInvalidToken(){let l='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';l+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Lt(l)}}let xn=(()=>{class h{constructor(c){this.accessToken=c}getToken(c){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(c){c(this.accessToken)}removeTokenChangeListener(c){}notifyForInvalidToken(){}}return h.OWNER="owner",h})();const pn=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,Hn="websocket",Kn="long_polling";class Ot{constructor(l,c,_,A,L=!1,G="",ce=!1){this.secure=c,this.namespace=_,this.webSocketOnly=A,this.nodeAdmin=L,this.persistenceKey=G,this.includeNamespaceInQueryParams=ce,this._host=l.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=ot.get("host:"+l)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(l){l!==this.internalHost&&(this.internalHost=l,this.isCacheableHost()&&ot.set("host:"+this._host,this.internalHost))}toString(){let l=this.toURLString();return this.persistenceKey&&(l+="<"+this.persistenceKey+">"),l}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function Gt(h,l,c){let _;if((0,Z.hu)("string"==typeof l,"typeof type must == string"),(0,Z.hu)("object"==typeof c,"typeof params must == object"),l===Hn)_=(h.secure?"wss://":"ws://")+h.internalHost+"/.ws?";else{if(l!==Kn)throw new Error("Unknown connection type: "+l);_=(h.secure?"https://":"http://")+h.internalHost+"/.lp?"}(function hn(h){return h.host!==h.internalHost||h.isCustomHost()||h.includeNamespaceInQueryParams})(h)&&(c.ns=h.namespace);const A=[];return Ce(c,(L,G)=>{A.push(L+"="+G)}),_+A.join("&")}class hr{constructor(){this.counters_={}}incrementCounter(l,c=1){(0,Z.r3)(this.counters_,l)||(this.counters_[l]=0),this.counters_[l]+=c}get(){return(0,Z.p$)(this.counters_)}}const Tr={},Bn={};function Ar(h){const l=h.toString();return Tr[l]||(Tr[l]=new hr),Tr[l]}class Fn{constructor(l){this.onMessage_=l,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(l,c){this.closeAfterResponse=l,this.onClose=c,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(l,c){for(this.pendingResponses[l]=c;this.pendingResponses[this.currentResponseNum];){const _=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let A=0;A<_.length;++A)_[A]&&gn(()=>{this.onMessage_(_[A])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class yt{constructor(l,c,_,A,L,G,ce){this.connId=l,this.repoInfo=c,this.applicationId=_,this.appCheckToken=A,this.authToken=L,this.transportSessionId=G,this.lastSessionId=ce,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ht(l),this.stats_=Ar(c),this.urlFn=Ae=>(this.appCheckToken&&(Ae.ac=this.appCheckToken),Gt(c,Kn,Ae))}open(l,c){this.curSegmentNum=0,this.onDisconnect_=c,this.myPacketOrderer=new Fn(l),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(h){if((0,Z.Yr)()||"complete"===document.readyState)h();else{let l=!1;const c=function(){document.body?l||(l=!0,h()):setTimeout(c,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",c,!1),window.addEventListener("load",c,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&c()}),window.attachEvent("onload",c))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Qt((...L)=>{const[G,ce,Ae,Be,Dt]=L;if(this.incrementIncomingBytes_(L),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===G)this.id=ce,this.password=Ae;else{if("close"!==G)throw new Error("Unrecognized command received: "+G);ce?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(ce,()=>{this.onClosed_()})):this.onClosed_()}},(...L)=>{const[G,ce]=L;this.incrementIncomingBytes_(L),this.myPacketOrderer.handleResponse(G,ce)},()=>{this.onClosed_()},this.urlFn);const _={start:"t"};_.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(_.cb=this.scriptTagHolder.uniqueCallbackIdentifier),_.v="5",this.transportSessionId&&(_.s=this.transportSessionId),this.lastSessionId&&(_.ls=this.lastSessionId),this.applicationId&&(_.p=this.applicationId),this.appCheckToken&&(_.ac=this.appCheckToken),"undefined"!=typeof location&&location.hostname&&pn.test(location.hostname)&&(_.r="f");const A=this.urlFn(_);this.log_("Connecting via long-poll to "+A),this.scriptTagHolder.addTag(A,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){yt.forceAllow_=!0}static forceDisallow(){yt.forceDisallow_=!0}static isAvailable(){return!((0,Z.Yr)()||!yt.forceAllow_&&(yt.forceDisallow_||"undefined"==typeof document||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(l){const c=(0,Z.Pz)(l);this.bytesSent+=c.length,this.stats_.incrementCounter("bytes_sent",c.length);const _=(0,Z.h$)(c),A=nt(_,1840);for(let L=0;L<A.length;L++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,A.length,A[L]),this.curSegmentNum++}addDisconnectPingFrame(l,c){if((0,Z.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const _={dframe:"t"};_.id=l,_.pw=c,this.myDisconnFrame.src=this.urlFn(_),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(l){const c=(0,Z.Pz)(l).length;this.bytesReceived+=c,this.stats_.incrementCounter("bytes_received",c)}}class Qt{constructor(l,c,_,A){if(this.onDisconnect=_,this.urlFn=A,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,Z.Yr)())this.commandCB=l,this.onMessageCB=c;else{this.uniqueCallbackIdentifier=Ct(),window["pLPCommand"+this.uniqueCallbackIdentifier]=l,window["pRTLPCB"+this.uniqueCallbackIdentifier]=c,this.myIFrame=Qt.createIFrame_();let L="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(L='<script>document.domain="'+document.domain+'";<\/script>');const G="<html><body>"+L+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(G),this.myIFrame.doc.close()}catch(ce){rt("frame writing exception"),ce.stack&&rt(ce.stack),rt(ce)}}}static createIFrame_(){const l=document.createElement("iframe");if(l.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(l);try{l.contentWindow.document||rt("No IE domain setting required")}catch(c){const _=document.domain;l.src="javascript:void((function(){document.open();document.domain='"+_+"';document.close();})())"}return l.contentDocument?l.doc=l.contentDocument:l.contentWindow?l.doc=l.contentWindow.document:l.document&&(l.doc=l.document),l}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.innerHTML="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const l=this.onDisconnect;l&&(this.onDisconnect=null,l())}startLongPoll(l,c){for(this.myID=l,this.myPW=c,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const l={};l.id=this.myID,l.pw=this.myPW,l.ser=this.currentSerial;let c=this.urlFn(l),_="",A=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+_.length<=1870;){const G=this.pendingSegs.shift();_=_+"&seg"+A+"="+G.seg+"&ts"+A+"="+G.ts+"&d"+A+"="+G.d,A++}return c+=_,this.addLongPollTag_(c,this.currentSerial),!0}return!1}enqueueSegment(l,c,_){this.pendingSegs.push({seg:l,ts:c,d:_}),this.alive&&this.newRequest_()}addLongPollTag_(l,c){this.outstandingRequests.add(c);const _=()=>{this.outstandingRequests.delete(c),this.newRequest_()},A=setTimeout(_,Math.floor(25e3));this.addTag(l,()=>{clearTimeout(A),_()})}addTag(l,c){(0,Z.Yr)()?this.doNodeLongPoll(l,c):setTimeout(()=>{try{if(!this.sendNewPolls)return;const _=this.myIFrame.doc.createElement("script");_.type="text/javascript",_.async=!0,_.src=l,_.onload=_.onreadystatechange=function(){const A=_.readyState;(!A||"loaded"===A||"complete"===A)&&(_.onload=_.onreadystatechange=null,_.parentNode&&_.parentNode.removeChild(_),c())},_.onerror=()=>{rt("Long-poll script failed to load: "+l),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(_)}catch(_){}},Math.floor(1))}}let On=null;"undefined"!=typeof MozWebSocket?On=MozWebSocket:"undefined"!=typeof WebSocket&&(On=WebSocket);let mr=(()=>{class h{constructor(c,_,A,L,G,ce,Ae){this.connId=c,this.applicationId=A,this.appCheckToken=L,this.authToken=G,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ht(this.connId),this.stats_=Ar(_),this.connURL=h.connectionURL_(_,ce,Ae,L),this.nodeAdmin=_.nodeAdmin}static connectionURL_(c,_,A,L){const G={v:"5"};return!(0,Z.Yr)()&&"undefined"!=typeof location&&location.hostname&&pn.test(location.hostname)&&(G.r="f"),_&&(G.s=_),A&&(G.ls=A),L&&(G.ac=L),Gt(c,Hn,G)}open(c,_){this.onDisconnect=_,this.onMessage=c,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,ot.set("previous_websocket_failure",!0);try{if((0,Z.Yr)()){const L={headers:{"User-Agent":`Firebase/5/${he}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}};this.authToken&&(L.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(L.headers["X-Firebase-AppCheck"]=this.appCheckToken);const G=process.env,ce=0===this.connURL.indexOf("wss://")?G.HTTPS_PROXY||G.https_proxy:G.HTTP_PROXY||G.http_proxy;ce&&(L.proxy={origin:ce}),this.mySock=new On(this.connURL,[],L)}else this.mySock=new On(this.connURL,[],{headers:{"X-Firebase-GMPID":this.applicationId||"","X-Firebase-AppCheck":this.appCheckToken||""}})}catch(A){this.log_("Error instantiating WebSocket.");const L=A.message||A.data;return L&&this.log_(L),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=A=>{this.handleIncomingFrame(A)},this.mySock.onerror=A=>{this.log_("WebSocket error.  Closing connection.");const L=A.message||A.data;L&&this.log_(L),this.onClosed_()}}start(){}static forceDisallow(){h.forceDisallow_=!0}static isAvailable(){let c=!1;if("undefined"!=typeof navigator&&navigator.userAgent){const A=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);A&&A.length>1&&parseFloat(A[1])<4.4&&(c=!0)}return!c&&null!==On&&!h.forceDisallow_}static previouslyFailed(){return ot.isInMemoryStorage||!0===ot.get("previous_websocket_failure")}markConnectionHealthy(){ot.remove("previous_websocket_failure")}appendFrame_(c){if(this.frames.push(c),this.frames.length===this.totalFrames){const _=this.frames.join("");this.frames=null;const A=(0,Z.cI)(_);this.onMessage(A)}}handleNewFrameCount_(c){this.totalFrames=c,this.frames=[]}extractFrameCount_(c){if((0,Z.hu)(null===this.frames,"We already have a frame buffer"),c.length<=6){const _=Number(c);if(!isNaN(_))return this.handleNewFrameCount_(_),null}return this.handleNewFrameCount_(1),c}handleIncomingFrame(c){if(null===this.mySock)return;const _=c.data;if(this.bytesReceived+=_.length,this.stats_.incrementCounter("bytes_received",_.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(_);else{const A=this.extractFrameCount_(_);null!==A&&this.appendFrame_(A)}}send(c){this.resetKeepAlive();const _=(0,Z.Pz)(c);this.bytesSent+=_.length,this.stats_.incrementCounter("bytes_sent",_.length);const A=nt(_,16384);A.length>1&&this.sendString_(String(A.length));for(let L=0;L<A.length;L++)this.sendString_(A[L])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(c){try{this.mySock.send(c)}catch(_){this.log_("Exception thrown from WebSocket.send():",_.message||_.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return h.responsesRequiredToBeHealthy=2,h.healthyTimeout=3e4,h})();class Rr{constructor(l){this.initTransports_(l)}static get ALL_TRANSPORTS(){return[yt,mr]}initTransports_(l){const c=mr&&mr.isAvailable();let _=c&&!mr.previouslyFailed();if(l.webSocketOnly&&(c||Lt("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),_=!0),_)this.transports_=[mr];else{const A=this.transports_=[];for(const L of Rr.ALL_TRANSPORTS)L&&L.isAvailable()&&A.push(L)}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}class jr{constructor(l,c,_,A,L,G,ce,Ae,Be,Dt){this.id=l,this.repoInfo_=c,this.applicationId_=_,this.appCheckToken_=A,this.authToken_=L,this.onMessage_=G,this.onReady_=ce,this.onDisconnect_=Ae,this.onKill_=Be,this.lastSessionId=Dt,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ht("c:"+this.id+":"),this.transportManager_=new Rr(c),this.log_("Connection created"),this.start_()}start_(){const l=this.transportManager_.initialTransport();this.conn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.conn_),_=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(c,_)},Math.floor(0));const A=l.healthyTimeout||0;A>0&&(this.healthyTimeout_=Pn(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(A)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(l){return c=>{l===this.conn_?this.onConnectionLost_(c):l===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(l){return c=>{2!==this.state_&&(l===this.rx_?this.onPrimaryMessageReceived_(c):l===this.secondaryConn_?this.onSecondaryMessageReceived_(c):this.log_("message on old connection"))}}sendRequest(l){this.sendData_({t:"d",d:l})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(l){if("t"in l){const c=l.t;"a"===c?this.upgradeIfSecondaryHealthy_():"r"===c?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===c&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(l){const c=Wt("t",l),_=Wt("d",l);if("c"===c)this.onSecondaryControl_(_);else{if("d"!==c)throw new Error("Unknown protocol layer: "+c);this.pendingDataMessages.push(_)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(l){const c=Wt("t",l),_=Wt("d",l);"c"===c?this.onControl_(_):"d"===c&&this.onDataMessage_(_)}onDataMessage_(l){this.onPrimaryResponse_(),this.onMessage_(l)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(l){const c=Wt("t",l);if("d"in l){const _=l.d;if("h"===c)this.onHandshake_(_);else if("n"===c){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let A=0;A<this.pendingDataMessages.length;++A)this.onDataMessage_(this.pendingDataMessages[A]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===c?this.onConnectionShutdown_(_):"r"===c?this.onReset_(_):"e"===c?ke("Server Error: "+_):"o"===c?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ke("Unknown control packet command: "+c)}}onHandshake_(l){const c=l.ts,_=l.v,A=l.h;this.sessionId=l.s,this.repoInfo_.host=A,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,c),"5"!==_&&Lt("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const l=this.transportManager_.upgradeTransport();l&&this.startUpgrade_(l)}startUpgrade_(l){this.secondaryConn_=new l(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=l.responsesRequiredToBeHealthy||0;const c=this.connReceiver_(this.secondaryConn_),_=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(c,_),Pn(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(l){this.log_("Reset packet received.  New host: "+l),this.repoInfo_.host=l,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(l,c){this.log_("Realtime connection established."),this.conn_=l,this.state_=1,this.onReady_&&(this.onReady_(c,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):Pn(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const l=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===l||this.rx_===l)&&this.close()}onConnectionLost_(l){this.conn_=null,l||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(ot.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(l){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(l),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(l){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(l)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class Wr{put(l,c,_,A){}merge(l,c,_,A){}refreshAuthToken(l){}refreshAppCheckToken(l){}onDisconnectPut(l,c,_){}onDisconnectMerge(l,c,_){}onDisconnectCancel(l,c){}reportStats(l){}}class nr{constructor(l){this.allowedEvents_=l,this.listeners_={},(0,Z.hu)(Array.isArray(l)&&l.length>0,"Requires a non-empty array")}trigger(l,...c){if(Array.isArray(this.listeners_[l])){const _=[...this.listeners_[l]];for(let A=0;A<_.length;A++)_[A].callback.apply(_[A].context,c)}}on(l,c,_){this.validateEventType_(l),this.listeners_[l]=this.listeners_[l]||[],this.listeners_[l].push({callback:c,context:_});const A=this.getInitialEvent(l);A&&c.apply(_,A)}off(l,c,_){this.validateEventType_(l);const A=this.listeners_[l]||[];for(let L=0;L<A.length;L++)if(A[L].callback===c&&(!_||_===A[L].context))return void A.splice(L,1)}validateEventType_(l){(0,Z.hu)(this.allowedEvents_.find(c=>c===l),"Unknown event: "+l)}}class yi extends nr{constructor(){super(["online"]),this.online_=!0,"undefined"!=typeof window&&void 0!==window.addEventListener&&!(0,Z.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new yi}getInitialEvent(l){return(0,Z.hu)("online"===l,"Unknown event type: "+l),[this.online_]}currentlyOnline(){return this.online_}}class er{constructor(l,c){if(void 0===c){this.pieces_=l.split("/");let _=0;for(let A=0;A<this.pieces_.length;A++)this.pieces_[A].length>0&&(this.pieces_[_]=this.pieces_[A],_++);this.pieces_.length=_,this.pieceNum_=0}else this.pieces_=l,this.pieceNum_=c}toString(){let l="";for(let c=this.pieceNum_;c<this.pieces_.length;c++)""!==this.pieces_[c]&&(l+="/"+this.pieces_[c]);return l||"/"}}function $n(){return new er("")}function Ln(h){return h.pieceNum_>=h.pieces_.length?null:h.pieces_[h.pieceNum_]}function _r(h){return h.pieces_.length-h.pieceNum_}function Oe(h){let l=h.pieceNum_;return l<h.pieces_.length&&l++,new er(h.pieces_,l)}function Le(h){return h.pieceNum_<h.pieces_.length?h.pieces_[h.pieces_.length-1]:null}function kt(h,l=0){return h.pieces_.slice(h.pieceNum_+l)}function zt(h){if(h.pieceNum_>=h.pieces_.length)return null;const l=[];for(let c=h.pieceNum_;c<h.pieces_.length-1;c++)l.push(h.pieces_[c]);return new er(l,0)}function en(h,l){const c=[];for(let _=h.pieceNum_;_<h.pieces_.length;_++)c.push(h.pieces_[_]);if(l instanceof er)for(let _=l.pieceNum_;_<l.pieces_.length;_++)c.push(l.pieces_[_]);else{const _=l.split("/");for(let A=0;A<_.length;A++)_[A].length>0&&c.push(_[A])}return new er(c,0)}function wn(h){return h.pieceNum_>=h.pieces_.length}function vr(h,l){const c=Ln(h),_=Ln(l);if(null===c)return l;if(c===_)return vr(Oe(h),Oe(l));throw new Error("INTERNAL ERROR: innerPath ("+l+") is not within outerPath ("+h+")")}function Er(h,l){const c=kt(h,0),_=kt(l,0);for(let A=0;A<c.length&&A<_.length;A++){const L=Ne(c[A],_[A]);if(0!==L)return L}return c.length===_.length?0:c.length<_.length?-1:1}function Xr(h,l){if(_r(h)!==_r(l))return!1;for(let c=h.pieceNum_,_=l.pieceNum_;c<=h.pieces_.length;c++,_++)if(h.pieces_[c]!==l.pieces_[_])return!1;return!0}function oi(h,l){let c=h.pieceNum_,_=l.pieceNum_;if(_r(h)>_r(l))return!1;for(;c<h.pieces_.length;){if(h.pieces_[c]!==l.pieces_[_])return!1;++c,++_}return!0}class vi{constructor(l,c){this.errorPrefix_=c,this.parts_=kt(l,0),this.byteLength_=Math.max(1,this.parts_.length);for(let _=0;_<this.parts_.length;_++)this.byteLength_+=(0,Z.ug)(this.parts_[_]);xa(this)}}function xa(h){if(h.byteLength_>768)throw new Error(h.errorPrefix_+"has a key path longer than 768 bytes ("+h.byteLength_+").");if(h.parts_.length>32)throw new Error(h.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+fi(h))}function fi(h){return 0===h.parts_.length?"":"in property '"+h.parts_.join(".")+"'"}class So extends nr{constructor(){let l,c;super(["visible"]),"undefined"!=typeof document&&void 0!==document.addEventListener&&(void 0!==document.hidden?(c="visibilitychange",l="hidden"):void 0!==document.mozHidden?(c="mozvisibilitychange",l="mozHidden"):void 0!==document.msHidden?(c="msvisibilitychange",l="msHidden"):void 0!==document.webkitHidden&&(c="webkitvisibilitychange",l="webkitHidden")),this.visible_=!0,c&&document.addEventListener(c,()=>{const _=!document[l];_!==this.visible_&&(this.visible_=_,this.trigger("visible",_))},!1)}static getInstance(){return new So}getInitialEvent(l){return(0,Z.hu)("visible"===l,"Unknown event type: "+l),[this.visible_]}}const Ji=1e3;let es,di=(()=>{class h extends Wr{constructor(c,_,A,L,G,ce,Ae,Be){if(super(),this.repoInfo_=c,this.applicationId_=_,this.onDataUpdate_=A,this.onConnectStatus_=L,this.onServerInfoUpdate_=G,this.authTokenProvider_=ce,this.appCheckTokenProvider_=Ae,this.authOverride_=Be,this.id=h.nextPersistentConnectionId_++,this.log_=ht("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Ji,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,Be&&!(0,Z.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");So.getInstance().on("visible",this.onVisible_,this),-1===c.host.indexOf("fblocal")&&yi.getInstance().on("online",this.onOnline_,this)}sendRequest(c,_,A){const L=++this.requestNumber_,G={r:L,a:c,b:_};this.log_((0,Z.Pz)(G)),(0,Z.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(G),A&&(this.requestCBHash_[L]=A)}get(c){this.initConnection_();const _=new Z.BH,A={p:c._path.toString(),q:c._queryObject},L={action:"g",request:A,onComplete:ce=>{const Ae=ce.d;"ok"===ce.s?(this.onDataUpdate_(A.p,Ae,!1,null),_.resolve(Ae)):_.reject(Ae)}};this.outstandingGets_.push(L),this.outstandingGetCount_++;const G=this.outstandingGets_.length-1;return this.connected_||setTimeout(()=>{const ce=this.outstandingGets_[G];void 0===ce||L!==ce||(delete this.outstandingGets_[G],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),this.log_("get "+G+" timed out on connection"),_.reject(new Error("Client is offline.")))},3e3),this.connected_&&this.sendGet_(G),_.promise}listen(c,_,A,L){this.initConnection_();const G=c._queryIdentifier,ce=c._path.toString();this.log_("Listen called for "+ce+" "+G),this.listens.has(ce)||this.listens.set(ce,new Map),(0,Z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,Z.hu)(!this.listens.get(ce).has(G),"listen() called twice for same path/queryId.");const Ae={onComplete:L,hashFn:_,query:c,tag:A};this.listens.get(ce).set(G,Ae),this.connected_&&this.sendListen_(Ae)}sendGet_(c){const _=this.outstandingGets_[c];this.sendRequest("g",_.request,A=>{delete this.outstandingGets_[c],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),_.onComplete&&_.onComplete(A)})}sendListen_(c){const _=c.query,A=_._path.toString(),L=_._queryIdentifier;this.log_("Listen on "+A+" for "+L);const G={p:A};c.tag&&(G.q=_._queryObject,G.t=c.tag),G.h=c.hashFn(),this.sendRequest("q",G,Ae=>{const Be=Ae.d,Dt=Ae.s;h.warnOnListenWarnings_(Be,_),(this.listens.get(A)&&this.listens.get(A).get(L))===c&&(this.log_("listen response",Ae),"ok"!==Dt&&this.removeListen_(A,L),c.onComplete&&c.onComplete(Dt,Be))})}static warnOnListenWarnings_(c,_){if(c&&"object"==typeof c&&(0,Z.r3)(c,"w")){const A=(0,Z.DV)(c,"w");if(Array.isArray(A)&&~A.indexOf("no_index")){const L='".indexOn": "'+_._queryParams.getIndex().toString()+'"',G=_._path.toString();Lt(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${L} at ${G} to your security rules for better performance.`)}}}refreshAuthToken(c){this.authToken_=c,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(c)}reduceReconnectDelayIfAdminCredential_(c){(c&&40===c.length||(0,Z.GJ)(c))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(c){this.appCheckToken_=c,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const c=this.authToken_,_=(0,Z.w9)(c)?"auth":"gauth",A={cred:c};null===this.authOverride_?A.noauth=!0:"object"==typeof this.authOverride_&&(A.authvar=this.authOverride_),this.sendRequest(_,A,L=>{const G=L.s,ce=L.d||"error";this.authToken_===c&&("ok"===G?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(G,ce))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},c=>{const _=c.s,A=c.d||"error";"ok"===_?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(_,A)})}unlisten(c,_){const A=c._path.toString(),L=c._queryIdentifier;this.log_("Unlisten called for "+A+" "+L),(0,Z.hu)(c._queryParams.isDefault()||!c._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(A,L)&&this.connected_&&this.sendUnlisten_(A,L,c._queryObject,_)}sendUnlisten_(c,_,A,L){this.log_("Unlisten on "+c+" for "+_);const G={p:c};L&&(G.q=A,G.t=L),this.sendRequest("n",G)}onDisconnectPut(c,_,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",c,_,A):this.onDisconnectRequestQueue_.push({pathString:c,action:"o",data:_,onComplete:A})}onDisconnectMerge(c,_,A){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",c,_,A):this.onDisconnectRequestQueue_.push({pathString:c,action:"om",data:_,onComplete:A})}onDisconnectCancel(c,_){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",c,null,_):this.onDisconnectRequestQueue_.push({pathString:c,action:"oc",data:null,onComplete:_})}sendOnDisconnect_(c,_,A,L){const G={p:_,d:A};this.log_("onDisconnect "+c,G),this.sendRequest(c,G,ce=>{L&&setTimeout(()=>{L(ce.s,ce.d)},Math.floor(0))})}put(c,_,A,L){this.putInternal("p",c,_,A,L)}merge(c,_,A,L){this.putInternal("m",c,_,A,L)}putInternal(c,_,A,L,G){this.initConnection_();const ce={p:_,d:A};void 0!==G&&(ce.h=G),this.outstandingPuts_.push({action:c,request:ce,onComplete:L}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+_)}sendPut_(c){const _=this.outstandingPuts_[c].action,A=this.outstandingPuts_[c].request,L=this.outstandingPuts_[c].onComplete;this.outstandingPuts_[c].queued=this.connected_,this.sendRequest(_,A,G=>{this.log_(_+" response",G),delete this.outstandingPuts_[c],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),L&&L(G.s,G.d)})}reportStats(c){if(this.connected_){const _={c};this.log_("reportStats",_),this.sendRequest("s",_,A=>{"ok"!==A.s&&this.log_("reportStats","Error sending stats: "+A.d)})}}onDataMessage_(c){if("r"in c){this.log_("from server: "+(0,Z.Pz)(c));const _=c.r,A=this.requestCBHash_[_];A&&(delete this.requestCBHash_[_],A(c.b))}else{if("error"in c)throw"A server-side error has occurred: "+c.error;"a"in c&&this.onDataPush_(c.a,c.b)}}onDataPush_(c,_){this.log_("handleServerMessage",c,_),"d"===c?this.onDataUpdate_(_.p,_.d,!1,_.t):"m"===c?this.onDataUpdate_(_.p,_.d,!0,_.t):"c"===c?this.onListenRevoked_(_.p,_.q):"ac"===c?this.onAuthRevoked_(_.s,_.d):"apc"===c?this.onAppCheckRevoked_(_.s,_.d):"sd"===c?this.onSecurityDebugPacket_(_):ke("Unrecognized action received from server: "+(0,Z.Pz)(c)+"\nAre you using the latest client?")}onReady_(c,_){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(c),this.lastSessionId=_,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(c){(0,Z.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(c))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(c){c&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Ji,this.realtime_||this.scheduleConnect_(0)),this.visible_=c}onOnline_(c){c?(this.log_("Browser went online."),this.reconnectDelay_=Ji,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=Ji),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const c=(new Date).getTime()-this.lastConnectionAttemptTime_;let _=Math.max(0,this.reconnectDelay_-c);_=Math.random()*_,this.log_("Trying to reconnect in "+_+"ms"),this.scheduleConnect_(_),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var c=this;return(0,f.Z)(function*(){if(c.shouldReconnect_()){c.log_("Making a connection attempt"),c.lastConnectionAttemptTime_=(new Date).getTime(),c.lastConnectionEstablishedTime_=null;const _=c.onDataMessage_.bind(c),A=c.onReady_.bind(c),L=c.onRealtimeDisconnect_.bind(c),G=c.id+":"+h.nextConnectionId_++,ce=c.lastSessionId;let Ae=!1,Be=null;const Dt=function(){Be?Be.close():(Ae=!0,L())};c.realtime_={close:Dt,sendRequest:function(Mn){(0,Z.hu)(Be,"sendRequest call when we're not connected not allowed."),Be.sendRequest(Mn)}};const Bt=c.forceTokenRefresh_;c.forceTokenRefresh_=!1;try{const[Mn,qn]=yield Promise.all([c.authTokenProvider_.getToken(Bt),c.appCheckTokenProvider_.getToken(Bt)]);Ae?rt("getToken() completed but was canceled"):(rt("getToken() completed. Creating connection."),c.authToken_=Mn&&Mn.accessToken,c.appCheckToken_=qn&&qn.token,Be=new jr(G,c.repoInfo_,c.applicationId_,c.appCheckToken_,c.authToken_,_,A,L,Or=>{Lt(Or+" ("+c.repoInfo_.toString()+")"),c.interrupt("server_kill")},ce))}catch(Mn){c.log_("Failed to get token: "+Mn),Ae||(c.repoInfo_.nodeAdmin&&Lt(Mn),Dt())}}})()}interrupt(c){rt("Interrupting connection for reason: "+c),this.interruptReasons_[c]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(c){rt("Resuming connection for reason: "+c),delete this.interruptReasons_[c],(0,Z.xb)(this.interruptReasons_)&&(this.reconnectDelay_=Ji,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(c){const _=c-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:_})}cancelSentTransactions_(){for(let c=0;c<this.outstandingPuts_.length;c++){const _=this.outstandingPuts_[c];_&&"h"in _.request&&_.queued&&(_.onComplete&&_.onComplete("disconnect"),delete this.outstandingPuts_[c],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(c,_){let A;A=_?_.map(G=>ut(G)).join("$"):"default";const L=this.removeListen_(c,A);L&&L.onComplete&&L.onComplete("permission_denied")}removeListen_(c,_){const A=new er(c).toString();let L;if(this.listens.has(A)){const G=this.listens.get(A);L=G.get(_),G.delete(_),0===G.size&&this.listens.delete(A)}else L=void 0;return L}onAuthRevoked_(c,_){rt("Auth token revoked: "+c+"/"+_),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===c||"permission_denied"===c)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(c,_){rt("App check token revoked: "+c+"/"+_),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===c||"permission_denied"===c)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(c){this.securityDebugCallback_?this.securityDebugCallback_(c):"msg"in c&&console.log("FIREBASE: "+c.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const c of this.listens.values())for(const _ of c.values())this.sendListen_(_);for(let c=0;c<this.outstandingPuts_.length;c++)this.outstandingPuts_[c]&&this.sendPut_(c);for(;this.onDisconnectRequestQueue_.length;){const c=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(c.action,c.pathString,c.data,c.onComplete)}for(let c=0;c<this.outstandingGets_.length;c++)this.outstandingGets_[c]&&this.sendGet_(c)}sendConnectStats_(){const c={};let _="js";(0,Z.Yr)()&&(_=this.repoInfo_.nodeAdmin?"admin_node":"node"),c["sdk."+_+"."+he.replace(/\./g,"-")]=1,(0,Z.uI)()?c["framework.cordova"]=1:(0,Z.b$)()&&(c["framework.reactnative"]=1),this.reportStats(c)}shouldReconnect_(){const c=yi.getInstance().currentlyOnline();return(0,Z.xb)(this.interruptReasons_)&&c}}return h.nextPersistentConnectionId_=0,h.nextConnectionId_=0,h})();class cr{constructor(l,c){this.name=l,this.node=c}static Wrap(l,c){return new cr(l,c)}}class ro{getCompare(){return this.compare.bind(this)}indexedValueChanged(l,c){const _=new cr(We,l),A=new cr(We,c);return 0!==this.compare(_,A)}minPost(){return cr.MIN}}class $s extends ro{static get __EMPTY_NODE(){return es}static set __EMPTY_NODE(l){es=l}compare(l,c){return Ne(l.name,c.name)}isDefinedOn(l){throw(0,Z.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(l,c){return!1}minPost(){return cr.MIN}maxPost(){return new cr(Qe,es)}makePost(l,c){return(0,Z.hu)("string"==typeof l,"KeyIndex indexValue must always be a string."),new cr(l,es)}toString(){return".key"}}const ai=new $s;class Ii{constructor(l,c,_,A,L=null){this.isReverse_=A,this.resultGenerator_=L,this.nodeStack_=[];let G=1;for(;!l.isEmpty();)if(l=l,G=c?_(l.key,c):1,A&&(G*=-1),G<0)l=this.isReverse_?l.left:l.right;else{if(0===G){this.nodeStack_.push(l);break}this.nodeStack_.push(l),l=this.isReverse_?l.right:l.left}}getNext(){if(0===this.nodeStack_.length)return null;let c,l=this.nodeStack_.pop();if(c=this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value},this.isReverse_)for(l=l.left;!l.isEmpty();)this.nodeStack_.push(l),l=l.right;else for(l=l.right;!l.isEmpty();)this.nodeStack_.push(l),l=l.left;return c}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const l=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(l.key,l.value):{key:l.key,value:l.value}}}let Hs,ei=(()=>{class h{constructor(c,_,A,L,G){this.key=c,this.value=_,this.color=null!=A?A:h.RED,this.left=null!=L?L:Ei.EMPTY_NODE,this.right=null!=G?G:Ei.EMPTY_NODE}copy(c,_,A,L,G){return new h(null!=c?c:this.key,null!=_?_:this.value,null!=A?A:this.color,null!=L?L:this.left,null!=G?G:this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(c){return this.left.inorderTraversal(c)||!!c(this.key,this.value)||this.right.inorderTraversal(c)}reverseTraversal(c){return this.right.reverseTraversal(c)||c(this.key,this.value)||this.left.reverseTraversal(c)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(c,_,A){let L=this;const G=A(c,L.key);return L=G<0?L.copy(null,null,null,L.left.insert(c,_,A),null):0===G?L.copy(null,_,null,null,null):L.copy(null,null,null,null,L.right.insert(c,_,A)),L.fixUp_()}removeMin_(){if(this.left.isEmpty())return Ei.EMPTY_NODE;let c=this;return!c.left.isRed_()&&!c.left.left.isRed_()&&(c=c.moveRedLeft_()),c=c.copy(null,null,null,c.left.removeMin_(),null),c.fixUp_()}remove(c,_){let A,L;if(A=this,_(c,A.key)<0)!A.left.isEmpty()&&!A.left.isRed_()&&!A.left.left.isRed_()&&(A=A.moveRedLeft_()),A=A.copy(null,null,null,A.left.remove(c,_),null);else{if(A.left.isRed_()&&(A=A.rotateRight_()),!A.right.isEmpty()&&!A.right.isRed_()&&!A.right.left.isRed_()&&(A=A.moveRedRight_()),0===_(c,A.key)){if(A.right.isEmpty())return Ei.EMPTY_NODE;L=A.right.min_(),A=A.copy(L.key,L.value,null,null,A.right.removeMin_())}A=A.copy(null,null,null,null,A.right.remove(c,_))}return A.fixUp_()}isRed_(){return this.color}fixUp_(){let c=this;return c.right.isRed_()&&!c.left.isRed_()&&(c=c.rotateLeft_()),c.left.isRed_()&&c.left.left.isRed_()&&(c=c.rotateRight_()),c.left.isRed_()&&c.right.isRed_()&&(c=c.colorFlip_()),c}moveRedLeft_(){let c=this.colorFlip_();return c.right.left.isRed_()&&(c=c.copy(null,null,null,null,c.right.rotateRight_()),c=c.rotateLeft_(),c=c.colorFlip_()),c}moveRedRight_(){let c=this.colorFlip_();return c.left.left.isRed_()&&(c=c.rotateRight_(),c=c.colorFlip_()),c}rotateLeft_(){const c=this.copy(null,null,h.RED,null,this.right.left);return this.right.copy(null,null,this.color,c,null)}rotateRight_(){const c=this.copy(null,null,h.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,c)}colorFlip_(){const c=this.left.copy(null,null,!this.left.color,null,null),_=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,c,_)}checkMaxDepth_(){const c=this.check_();return Math.pow(2,c)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const c=this.left.check_();if(c!==this.right.check_())throw new Error("Black depths differ");return c+(this.isRed_()?0:1)}}return h.RED=!0,h.BLACK=!1,h})();class Ei{constructor(l,c=Ei.EMPTY_NODE){this.comparator_=l,this.root_=c}insert(l,c){return new Ei(this.comparator_,this.root_.insert(l,c,this.comparator_).copy(null,null,ei.BLACK,null,null))}remove(l){return new Ei(this.comparator_,this.root_.remove(l,this.comparator_).copy(null,null,ei.BLACK,null,null))}get(l){let c,_=this.root_;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c)return _.value;c<0?_=_.left:c>0&&(_=_.right)}return null}getPredecessorKey(l){let c,_=this.root_,A=null;for(;!_.isEmpty();){if(c=this.comparator_(l,_.key),0===c){if(_.left.isEmpty())return A?A.key:null;for(_=_.left;!_.right.isEmpty();)_=_.right;return _.key}c<0?_=_.left:c>0&&(A=_,_=_.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(l){return this.root_.inorderTraversal(l)}reverseTraversal(l){return this.root_.reverseTraversal(l)}getIterator(l){return new Ii(this.root_,null,this.comparator_,!1,l)}getIteratorFrom(l,c){return new Ii(this.root_,l,this.comparator_,!1,c)}getReverseIteratorFrom(l,c){return new Ii(this.root_,l,this.comparator_,!0,c)}getReverseIterator(l){return new Ii(this.root_,null,this.comparator_,!0,l)}}function cs(h,l){return Ne(h.name,l.name)}function bi(h,l){return Ne(h,l)}Ei.EMPTY_NODE=new class Ci{copy(l,c,_,A,L){return this}insert(l,c,_){return new ei(l,c,null)}remove(l,c){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(l){return!1}reverseTraversal(l){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const yo=function(h){return"number"==typeof h?"number:"+$t(h):"string:"+h},Di=function(h){if(h.isLeafNode()){const l=h.val();(0,Z.hu)("string"==typeof l||"number"==typeof l||"object"==typeof l&&(0,Z.r3)(l,".sv"),"Priority must be a string or number.")}else(0,Z.hu)(h===Hs||h.isEmpty(),"priority of unexpected type.");(0,Z.hu)(h===Hs||h.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let Lr,io,Gr,ts=(()=>{class h{constructor(c,_=h.__childrenNodeConstructor.EMPTY_NODE){this.value_=c,this.priorityNode_=_,this.lazyHash_=null,(0,Z.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),Di(this.priorityNode_)}static set __childrenNodeConstructor(c){Lr=c}static get __childrenNodeConstructor(){return Lr}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(c){return new h(this.value_,c)}getImmediateChild(c){return".priority"===c?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}getChild(c){return wn(c)?this:".priority"===Ln(c)?this.priorityNode_:h.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(c,_){return null}updateImmediateChild(c,_){return".priority"===c?this.updatePriority(_):_.isEmpty()&&".priority"!==c?this:h.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(c,_).updatePriority(this.priorityNode_)}updateChild(c,_){const A=Ln(c);return null===A?_:_.isEmpty()&&".priority"!==A?this:((0,Z.hu)(".priority"!==A||1===_r(c),".priority must be the last token in a path"),this.updateImmediateChild(A,h.__childrenNodeConstructor.EMPTY_NODE.updateChild(Oe(c),_)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(c,_){return!1}val(c){return c&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let c="";this.priorityNode_.isEmpty()||(c+="priority:"+yo(this.priorityNode_.val())+":");const _=typeof this.value_;c+=_+":",c+="number"===_?$t(this.value_):this.value_,this.lazyHash_=be(c)}return this.lazyHash_}getValue(){return this.value_}compareTo(c){return c===h.__childrenNodeConstructor.EMPTY_NODE?1:c instanceof h.__childrenNodeConstructor?-1:((0,Z.hu)(c.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(c))}compareToLeafNode_(c){const _=typeof c.value_,A=typeof this.value_,L=h.VALUE_TYPE_ORDER.indexOf(_),G=h.VALUE_TYPE_ORDER.indexOf(A);return(0,Z.hu)(L>=0,"Unknown leaf type: "+_),(0,Z.hu)(G>=0,"Unknown leaf type: "+A),L===G?"object"===A?0:this.value_<c.value_?-1:this.value_===c.value_?0:1:G-L}withIndex(){return this}isIndexed(){return!0}equals(c){if(c===this)return!0;if(c.isLeafNode()){const _=c;return this.value_===_.value_&&this.priorityNode_.equals(_.priorityNode_)}return!1}}return h.VALUE_TYPE_ORDER=["object","boolean","number","string"],h})();const xr=new class vo extends ro{compare(l,c){const _=l.node.getPriority(),A=c.node.getPriority(),L=_.compareTo(A);return 0===L?Ne(l.name,c.name):L}isDefinedOn(l){return!l.getPriority().isEmpty()}indexedValueChanged(l,c){return!l.getPriority().equals(c.getPriority())}minPost(){return cr.MIN}maxPost(){return new cr(Qe,new ts("[PRIORITY-POST]",Gr))}makePost(l,c){const _=io(l);return new cr(c,new ts("[PRIORITY-POST]",_))}toString(){return".priority"}},Ko=Math.log(2);class Po{constructor(l){this.count=parseInt(Math.log(l+1)/Ko,10),this.current_=this.count-1;const A=(L=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=l+1&A}nextBitIsOne(){const l=!(this.bits_&1<<this.current_);return this.current_--,l}}const Zi=function(h,l,c,_){h.sort(l);const A=function(Ae,Be){const Dt=Be-Ae;let Et,Bt;if(0===Dt)return null;if(1===Dt)return Et=h[Ae],Bt=c?c(Et):Et,new ei(Bt,Et.node,ei.BLACK,null,null);{const Mn=parseInt(Dt/2,10)+Ae,qn=A(Ae,Mn),Or=A(Mn+1,Be);return Et=h[Mn],Bt=c?c(Et):Et,new ei(Bt,Et.node,ei.BLACK,qn,Or)}},ce=function(Ae){let Be=null,Dt=null,Et=h.length;const Bt=function(qn,Or){const Ki=Et-qn,zu=Et;Et-=qn;const Vl=A(Ki+1,zu),ml=h[Ki],Yd=c?c(ml):ml;Mn(new ei(Yd,ml.node,Or,null,Vl))},Mn=function(qn){Be?(Be.left=qn,Be=qn):(Dt=qn,Be=qn)};for(let qn=0;qn<Ae.count;++qn){const Or=Ae.nextBitIsOne(),Ki=Math.pow(2,Ae.count-(qn+1));Or?Bt(Ki,ei.BLACK):(Bt(Ki,ei.BLACK),Bt(Ki,ei.RED))}return Dt}(new Po(h.length));return new Ei(_||l,ce)};let Ws;const hs={};class Ir{constructor(l,c){this.indexes_=l,this.indexSet_=c}static get Default(){return(0,Z.hu)(hs&&xr,"ChildrenNode.ts has not been loaded"),Ws=Ws||new Ir({".priority":hs},{".priority":xr}),Ws}get(l){const c=(0,Z.DV)(this.indexes_,l);if(!c)throw new Error("No index defined for "+l);return c instanceof Ei?c:null}hasIndex(l){return(0,Z.r3)(this.indexSet_,l.toString())}addIndex(l,c){(0,Z.hu)(l!==ai,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const _=[];let A=!1;const L=c.getIterator(cr.Wrap);let ce,G=L.getNext();for(;G;)A=A||l.isDefinedOn(G.node),_.push(G),G=L.getNext();ce=A?Zi(_,l.getCompare()):hs;const Ae=l.toString(),Be=Object.assign({},this.indexSet_);Be[Ae]=l;const Dt=Object.assign({},this.indexes_);return Dt[Ae]=ce,new Ir(Dt,Be)}addToIndexes(l,c){const _=(0,Z.UI)(this.indexes_,(A,L)=>{const G=(0,Z.DV)(this.indexSet_,L);if((0,Z.hu)(G,"Missing index implementation for "+L),A===hs){if(G.isDefinedOn(l.node)){const ce=[],Ae=c.getIterator(cr.Wrap);let Be=Ae.getNext();for(;Be;)Be.name!==l.name&&ce.push(Be),Be=Ae.getNext();return ce.push(l),Zi(ce,G.getCompare())}return hs}{const ce=c.get(l.name);let Ae=A;return ce&&(Ae=Ae.remove(new cr(l.name,ce))),Ae.insert(l,l.node)}});return new Ir(_,this.indexSet_)}removeFromIndexes(l,c){const _=(0,Z.UI)(this.indexes_,A=>{if(A===hs)return A;{const L=c.get(l.name);return L?A.remove(new cr(l.name,L)):A}});return new Ir(_,this.indexSet_)}}let B,J=(()=>{class h{constructor(c,_,A){this.children_=c,this.priorityNode_=_,this.indexMap_=A,this.lazyHash_=null,this.priorityNode_&&Di(this.priorityNode_),this.children_.isEmpty()&&(0,Z.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return B||(B=new h(new Ei(bi),null,Ir.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||B}updatePriority(c){return this.children_.isEmpty()?this:new h(this.children_,c,this.indexMap_)}getImmediateChild(c){if(".priority"===c)return this.getPriority();{const _=this.children_.get(c);return null===_?B:_}}getChild(c){const _=Ln(c);return null===_?this:this.getImmediateChild(_).getChild(Oe(c))}hasChild(c){return null!==this.children_.get(c)}updateImmediateChild(c,_){if((0,Z.hu)(_,"We should always be passing snapshot nodes"),".priority"===c)return this.updatePriority(_);{const A=new cr(c,_);let L,G;_.isEmpty()?(L=this.children_.remove(c),G=this.indexMap_.removeFromIndexes(A,this.children_)):(L=this.children_.insert(c,_),G=this.indexMap_.addToIndexes(A,this.children_));const ce=L.isEmpty()?B:this.priorityNode_;return new h(L,ce,G)}}updateChild(c,_){const A=Ln(c);if(null===A)return _;{(0,Z.hu)(".priority"!==Ln(c)||1===_r(c),".priority must be the last token in a path");const L=this.getImmediateChild(A).updateChild(Oe(c),_);return this.updateImmediateChild(A,L)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(c){if(this.isEmpty())return null;const _={};let A=0,L=0,G=!0;if(this.forEachChild(xr,(ce,Ae)=>{_[ce]=Ae.val(c),A++,G&&h.INTEGER_REGEXP_.test(ce)?L=Math.max(L,Number(ce)):G=!1}),!c&&G&&L<2*A){const ce=[];for(const Ae in _)ce[Ae]=_[Ae];return ce}return c&&!this.getPriority().isEmpty()&&(_[".priority"]=this.getPriority().val()),_}hash(){if(null===this.lazyHash_){let c="";this.getPriority().isEmpty()||(c+="priority:"+yo(this.getPriority().val())+":"),this.forEachChild(xr,(_,A)=>{const L=A.hash();""!==L&&(c+=":"+_+":"+L)}),this.lazyHash_=""===c?"":be(c)}return this.lazyHash_}getPredecessorChildName(c,_,A){const L=this.resolveIndex_(A);if(L){const G=L.getPredecessorKey(new cr(c,_));return G?G.name:null}return this.children_.getPredecessorKey(c)}getFirstChildName(c){const _=this.resolveIndex_(c);if(_){const A=_.minKey();return A&&A.name}return this.children_.minKey()}getFirstChild(c){const _=this.getFirstChildName(c);return _?new cr(_,this.children_.get(_)):null}getLastChildName(c){const _=this.resolveIndex_(c);if(_){const A=_.maxKey();return A&&A.name}return this.children_.maxKey()}getLastChild(c){const _=this.getLastChildName(c);return _?new cr(_,this.children_.get(_)):null}forEachChild(c,_){const A=this.resolveIndex_(c);return A?A.inorderTraversal(L=>_(L.name,L.node)):this.children_.inorderTraversal(_)}getIterator(c){return this.getIteratorFrom(c.minPost(),c)}getIteratorFrom(c,_){const A=this.resolveIndex_(_);if(A)return A.getIteratorFrom(c,L=>L);{const L=this.children_.getIteratorFrom(c.name,cr.Wrap);let G=L.peek();for(;null!=G&&_.compare(G,c)<0;)L.getNext(),G=L.peek();return L}}getReverseIterator(c){return this.getReverseIteratorFrom(c.maxPost(),c)}getReverseIteratorFrom(c,_){const A=this.resolveIndex_(_);if(A)return A.getReverseIteratorFrom(c,L=>L);{const L=this.children_.getReverseIteratorFrom(c.name,cr.Wrap);let G=L.peek();for(;null!=G&&_.compare(G,c)>0;)L.getNext(),G=L.peek();return L}}compareTo(c){return this.isEmpty()?c.isEmpty()?0:-1:c.isLeafNode()||c.isEmpty()?1:c===ie?-1:0}withIndex(c){if(c===ai||this.indexMap_.hasIndex(c))return this;{const _=this.indexMap_.addIndex(c,this.children_);return new h(this.children_,this.priorityNode_,_)}}isIndexed(c){return c===ai||this.indexMap_.hasIndex(c)}equals(c){if(c===this)return!0;if(c.isLeafNode())return!1;{const _=c;if(this.getPriority().equals(_.getPriority())){if(this.children_.count()===_.children_.count()){const A=this.getIterator(xr),L=_.getIterator(xr);let G=A.getNext(),ce=L.getNext();for(;G&&ce;){if(G.name!==ce.name||!G.node.equals(ce.node))return!1;G=A.getNext(),ce=L.getNext()}return null===G&&null===ce}return!1}return!1}}resolveIndex_(c){return c===ai?null:this.indexMap_.get(c.toString())}}return h.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,h})();const ie=new class j extends J{constructor(){super(new Ei(bi),J.EMPTY_NODE,Ir.Default)}compareTo(l){return l===this?0:1}equals(l){return l===this}getPriority(){return this}getImmediateChild(l){return J.EMPTY_NODE}isEmpty(){return!1}};function gt(h,l=null){if(null===h)return J.EMPTY_NODE;if("object"==typeof h&&".priority"in h&&(l=h[".priority"]),(0,Z.hu)(null===l||"string"==typeof l||"number"==typeof l||"object"==typeof l&&".sv"in l,"Invalid priority type found: "+typeof l),"object"==typeof h&&".value"in h&&null!==h[".value"]&&(h=h[".value"]),"object"!=typeof h||".sv"in h)return new ts(h,gt(l));if(h instanceof Array){let c=J.EMPTY_NODE;return Ce(h,(_,A)=>{if((0,Z.r3)(h,_)&&"."!==_.substring(0,1)){const L=gt(A);(L.isLeafNode()||!L.isEmpty())&&(c=c.updateImmediateChild(_,L))}}),c.updatePriority(gt(l))}{const c=[];let _=!1;if(Ce(h,(G,ce)=>{if("."!==G.substring(0,1)){const Ae=gt(ce);Ae.isEmpty()||(_=_||!Ae.getPriority().isEmpty(),c.push(new cr(G,Ae)))}}),0===c.length)return J.EMPTY_NODE;const L=Zi(c,cs,G=>G.name,bi);if(_){const G=Zi(c,xr.getCompare());return new J(L,gt(l),new Ir({".priority":G},{".priority":xr}))}return new J(L,gt(l),Ir.Default)}}Object.defineProperties(cr,{MIN:{value:new cr(We,J.EMPTY_NODE)},MAX:{value:new cr(Qe,ie)}}),$s.__EMPTY_NODE=J.EMPTY_NODE,ts.__childrenNodeConstructor=J,function Ti(h){Hs=h}(ie),function Rs(h){Gr=h}(ie),function ds(h){io=h}(gt);class Vt extends ro{constructor(l){super(),this.indexPath_=l,(0,Z.hu)(!wn(l)&&".priority"!==Ln(l),"Can't create PathIndex with empty path or .priority key")}extractChild(l){return l.getChild(this.indexPath_)}isDefinedOn(l){return!l.getChild(this.indexPath_).isEmpty()}compare(l,c){const _=this.extractChild(l.node),A=this.extractChild(c.node),L=_.compareTo(A);return 0===L?Ne(l.name,c.name):L}makePost(l,c){const _=gt(l),A=J.EMPTY_NODE.updateChild(this.indexPath_,_);return new cr(c,A)}maxPost(){const l=J.EMPTY_NODE.updateChild(this.indexPath_,ie);return new cr(Qe,l)}toString(){return kt(this.indexPath_,0).join("/")}}const kr=new class Un extends ro{compare(l,c){const _=l.node.compareTo(c.node);return 0===_?Ne(l.name,c.name):_}isDefinedOn(l){return!0}indexedValueChanged(l,c){return!l.equals(c)}minPost(){return cr.MIN}maxPost(){return cr.MAX}makePost(l,c){const _=gt(l);return new cr(c,_)}toString(){return".value"}},Sr="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",Ur=function(){let h=0;const l=[];return function(c){const _=c===h;let A;h=c;const L=new Array(8);for(A=7;A>=0;A--)L[A]=Sr.charAt(c%64),c=Math.floor(c/64);(0,Z.hu)(0===c,"Cannot push at time == 0");let G=L.join("");if(_){for(A=11;A>=0&&63===l[A];A--)l[A]=0;l[A]++}else for(A=0;A<12;A++)l[A]=Math.floor(64*Math.random());for(A=0;A<12;A++)G+=Sr.charAt(l[A]);return(0,Z.hu)(20===G.length,"nextPushId: Length should be 20."),G}}(),zr=function(h){if(h===""+Yt)return"-";const l=Kt(h);if(null!=l)return""+(l+1);const c=new Array(h.length);for(let G=0;G<c.length;G++)c[G]=h.charAt(G);if(c.length<786)return c.push("-"),c.join("");let _=c.length-1;for(;_>=0&&"z"===c[_];)_--;if(-1===_)return Qe;const L=Sr.charAt(Sr.indexOf(c[_])+1);return c[_]=L,c.slice(0,_+1).join("")},fs=function(h){if(h===""+St)return We;const l=Kt(h);if(null!=l)return""+(l-1);const c=new Array(h.length);for(let _=0;_<c.length;_++)c[_]=h.charAt(_);return"-"===c[c.length-1]?1===c.length?""+Yt:(delete c[c.length-1],c.join("")):(c[c.length-1]=Sr.charAt(Sr.indexOf(c[c.length-1])-1),c.join("")+"z".repeat(786-c.length))};function Hi(h){return{type:"value",snapshotNode:h}}function Gn(h,l){return{type:"child_added",snapshotNode:l,childName:h}}function Ui(h,l){return{type:"child_removed",snapshotNode:l,childName:h}}function Ps(h,l,c){return{type:"child_changed",snapshotNode:l,childName:h,oldSnap:c}}class qo{constructor(l){this.index_=l}updateChild(l,c,_,A,L,G){(0,Z.hu)(l.isIndexed(this.index_),"A node must be indexed if only a child is updated");const ce=l.getImmediateChild(c);return ce.getChild(A).equals(_.getChild(A))&&ce.isEmpty()===_.isEmpty()||(null!=G&&(_.isEmpty()?l.hasChild(c)?G.trackChildChange(Ui(c,ce)):(0,Z.hu)(l.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):ce.isEmpty()?G.trackChildChange(Gn(c,_)):G.trackChildChange(Ps(c,_,ce))),l.isLeafNode()&&_.isEmpty())?l:l.updateImmediateChild(c,_).withIndex(this.index_)}updateFullNode(l,c,_){return null!=_&&(l.isLeafNode()||l.forEachChild(xr,(A,L)=>{c.hasChild(A)||_.trackChildChange(Ui(A,L))}),c.isLeafNode()||c.forEachChild(xr,(A,L)=>{if(l.hasChild(A)){const G=l.getImmediateChild(A);G.equals(L)||_.trackChildChange(Ps(A,L,G))}else _.trackChildChange(Gn(A,L))})),c.withIndex(this.index_)}updatePriority(l,c){return l.isEmpty()?J.EMPTY_NODE:l.updatePriority(c)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class H{constructor(l){this.indexedFilter_=new qo(l.getIndex()),this.index_=l.getIndex(),this.startPost_=H.getStartPost_(l),this.endPost_=H.getEndPost_(l)}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(l){return this.index_.compare(this.getStartPost(),l)<=0&&this.index_.compare(l,this.getEndPost())<=0}updateChild(l,c,_,A,L,G){return this.matches(new cr(c,_))||(_=J.EMPTY_NODE),this.indexedFilter_.updateChild(l,c,_,A,L,G)}updateFullNode(l,c,_){c.isLeafNode()&&(c=J.EMPTY_NODE);let A=c.withIndex(this.index_);A=A.updatePriority(J.EMPTY_NODE);const L=this;return c.forEachChild(xr,(G,ce)=>{L.matches(new cr(G,ce))||(A=A.updateImmediateChild(G,J.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(l,A,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(l){if(l.hasStart()){const c=l.getIndexStartName();return l.getIndex().makePost(l.getIndexStartValue(),c)}return l.getIndex().minPost()}static getEndPost_(l){if(l.hasEnd()){const c=l.getIndexEndName();return l.getIndex().makePost(l.getIndexEndValue(),c)}return l.getIndex().maxPost()}}class U{constructor(l){this.rangedFilter_=new H(l),this.index_=l.getIndex(),this.limit_=l.getLimit(),this.reverse_=!l.isViewFromLeft()}updateChild(l,c,_,A,L,G){return this.rangedFilter_.matches(new cr(c,_))||(_=J.EMPTY_NODE),l.getImmediateChild(c).equals(_)?l:l.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(l,c,_,A,L,G):this.fullLimitUpdateChild_(l,c,_,L,G)}updateFullNode(l,c,_){let A;if(c.isLeafNode()||c.isEmpty())A=J.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<c.numChildren()&&c.isIndexed(this.index_)){let L;A=J.EMPTY_NODE.withIndex(this.index_),L=this.reverse_?c.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):c.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let G=0;for(;L.hasNext()&&G<this.limit_;){const ce=L.getNext();let Ae;if(Ae=this.reverse_?this.index_.compare(this.rangedFilter_.getStartPost(),ce)<=0:this.index_.compare(ce,this.rangedFilter_.getEndPost())<=0,!Ae)break;A=A.updateImmediateChild(ce.name,ce.node),G++}}else{let L,G,ce,Ae;if(A=c.withIndex(this.index_),A=A.updatePriority(J.EMPTY_NODE),this.reverse_){Ae=A.getReverseIterator(this.index_),L=this.rangedFilter_.getEndPost(),G=this.rangedFilter_.getStartPost();const Et=this.index_.getCompare();ce=(Bt,Mn)=>Et(Mn,Bt)}else Ae=A.getIterator(this.index_),L=this.rangedFilter_.getStartPost(),G=this.rangedFilter_.getEndPost(),ce=this.index_.getCompare();let Be=0,Dt=!1;for(;Ae.hasNext();){const Et=Ae.getNext();!Dt&&ce(L,Et)<=0&&(Dt=!0),Dt&&Be<this.limit_&&ce(Et,G)<=0?Be++:A=A.updateImmediateChild(Et.name,J.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(l,A,_)}updatePriority(l,c){return l}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(l,c,_,A,L){let G;if(this.reverse_){const Et=this.index_.getCompare();G=(Bt,Mn)=>Et(Mn,Bt)}else G=this.index_.getCompare();const ce=l;(0,Z.hu)(ce.numChildren()===this.limit_,"");const Ae=new cr(c,_),Be=this.reverse_?ce.getFirstChild(this.index_):ce.getLastChild(this.index_),Dt=this.rangedFilter_.matches(Ae);if(ce.hasChild(c)){const Et=ce.getImmediateChild(c);let Bt=A.getChildAfterChild(this.index_,Be,this.reverse_);for(;null!=Bt&&(Bt.name===c||ce.hasChild(Bt.name));)Bt=A.getChildAfterChild(this.index_,Bt,this.reverse_);const Mn=null==Bt?1:G(Bt,Ae);if(Dt&&!_.isEmpty()&&Mn>=0)return null!=L&&L.trackChildChange(Ps(c,_,Et)),ce.updateImmediateChild(c,_);{null!=L&&L.trackChildChange(Ui(c,Et));const Or=ce.updateImmediateChild(c,J.EMPTY_NODE);return null!=Bt&&this.rangedFilter_.matches(Bt)?(null!=L&&L.trackChildChange(Gn(Bt.name,Bt.node)),Or.updateImmediateChild(Bt.name,Bt.node)):Or}}return _.isEmpty()?l:Dt&&G(Be,Ae)>=0?(null!=L&&(L.trackChildChange(Ui(Be.name,Be.node)),L.trackChildChange(Gn(c,_))),ce.updateImmediateChild(c,_).updateImmediateChild(Be.name,J.EMPTY_NODE)):l}}class F{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=xr}hasStart(){return this.startSet_}hasStartAfter(){return this.startAfterSet_}hasEndBefore(){return this.endBeforeSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,Z.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:We}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,Z.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Qe}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,Z.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===xr}copy(){const l=new F;return l.limitSet_=this.limitSet_,l.limit_=this.limit_,l.startSet_=this.startSet_,l.indexStartValue_=this.indexStartValue_,l.startNameSet_=this.startNameSet_,l.indexStartName_=this.indexStartName_,l.endSet_=this.endSet_,l.indexEndValue_=this.indexEndValue_,l.endNameSet_=this.endNameSet_,l.indexEndName_=this.indexEndName_,l.index_=this.index_,l.viewFrom_=this.viewFrom_,l}}function tr(h,l,c){const _=h.copy();return _.startSet_=!0,void 0===l&&(l=null),_.indexStartValue_=l,null!=c?(_.startNameSet_=!0,_.indexStartName_=c):(_.startNameSet_=!1,_.indexStartName_=""),_}function Ai(h,l,c){const _=h.copy();return _.endSet_=!0,void 0===l&&(l=null),_.indexEndValue_=l,void 0!==c?(_.endNameSet_=!0,_.indexEndName_=c):(_.endNameSet_=!1,_.indexEndName_=""),_}function oo(h,l){const c=h.copy();return c.index_=l,c}function vs(h){const l={};if(h.isDefault())return l;let c;return h.index_===xr?c="$priority":h.index_===kr?c="$value":h.index_===ai?c="$key":((0,Z.hu)(h.index_ instanceof Vt,"Unrecognized index type!"),c=h.index_.toString()),l.orderBy=(0,Z.Pz)(c),h.startSet_&&(l.startAt=(0,Z.Pz)(h.indexStartValue_),h.startNameSet_&&(l.startAt+=","+(0,Z.Pz)(h.indexStartName_))),h.endSet_&&(l.endAt=(0,Z.Pz)(h.indexEndValue_),h.endNameSet_&&(l.endAt+=","+(0,Z.Pz)(h.indexEndName_))),h.limitSet_&&(h.isViewFromLeft()?l.limitToFirst=h.limit_:l.limitToLast=h.limit_),l}function Yu(h){const l={};if(h.startSet_&&(l.sp=h.indexStartValue_,h.startNameSet_&&(l.sn=h.indexStartName_)),h.endSet_&&(l.ep=h.indexEndValue_,h.endNameSet_&&(l.en=h.indexEndName_)),h.limitSet_){l.l=h.limit_;let c=h.viewFrom_;""===c&&(c=h.isViewFromLeft()?"l":"r"),l.vf=c}return h.index_!==xr&&(l.i=h.index_.toString()),l}class Ma extends Wr{constructor(l,c,_,A){super(),this.repoInfo_=l,this.onDataUpdate_=c,this.authTokenProvider_=_,this.appCheckTokenProvider_=A,this.log_=ht("p:rest:"),this.listens_={}}reportStats(l){throw new Error("Method not implemented.")}static getListenId_(l,c){return void 0!==c?"tag$"+c:((0,Z.hu)(l._queryParams.isDefault(),"should have a tag if it's not a default query."),l._path.toString())}listen(l,c,_,A){const L=l._path.toString();this.log_("Listen called for "+L+" "+l._queryIdentifier);const G=Ma.getListenId_(l,_),ce={};this.listens_[G]=ce;const Ae=vs(l._queryParams);this.restRequest_(L+".json",Ae,(Be,Dt)=>{let Et=Dt;if(404===Be&&(Et=null,Be=null),null===Be&&this.onDataUpdate_(L,Et,!1,_),(0,Z.DV)(this.listens_,G)===ce){let Bt;Bt=Be?401===Be?"permission_denied":"rest_error:"+Be:"ok",A(Bt,null)}})}unlisten(l,c){const _=Ma.getListenId_(l,c);delete this.listens_[_]}get(l){const c=vs(l._queryParams),_=l._path.toString(),A=new Z.BH;return this.restRequest_(_+".json",c,(L,G)=>{let ce=G;404===L&&(ce=null,L=null),null===L?(this.onDataUpdate_(_,ce,!1,null),A.resolve(ce)):A.reject(new Error(ce))}),A.promise}refreshAuthToken(l){}restRequest_(l,c={},_){return c.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([A,L])=>{A&&A.accessToken&&(c.auth=A.accessToken),L&&L.token&&(c.ac=L.token);const G=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+l+"?ns="+this.repoInfo_.namespace+(0,Z.xO)(c);this.log_("Sending REST request for "+G);const ce=new XMLHttpRequest;ce.onreadystatechange=()=>{if(_&&4===ce.readyState){this.log_("REST Response for "+G+" received. status:",ce.status,"response:",ce.responseText);let Ae=null;if(ce.status>=200&&ce.status<300){try{Ae=(0,Z.cI)(ce.responseText)}catch(Be){Lt("Failed to parse JSON response for "+G+": "+ce.responseText)}_(null,Ae)}else 401!==ce.status&&404!==ce.status&&Lt("Got unsuccessful REST response for "+G+" Status: "+ce.status),_(ce.status);_=null}},ce.open("GET",G,!0),ce.send()})}}class Ra{constructor(){this.rootNode_=J.EMPTY_NODE}getNode(l){return this.rootNode_.getChild(l)}updateSnapshot(l,c){this.rootNode_=this.rootNode_.updateChild(l,c)}}function Es(){return{value:null,children:new Map}}function pi(h,l,c){if(wn(l))h.value=c,h.children.clear();else if(null!==h.value)h.value=h.value.updateChild(l,c);else{const _=Ln(l);h.children.has(_)||h.children.set(_,Es()),pi(h.children.get(_),l=Oe(l),c)}}function Eo(h,l){if(wn(l))return h.value=null,h.children.clear(),!0;if(null!==h.value){if(h.value.isLeafNode())return!1;{const c=h.value;return h.value=null,c.forEachChild(xr,(_,A)=>{pi(h,new er(_),A)}),Eo(h,l)}}if(h.children.size>0){const c=Ln(l);return l=Oe(l),h.children.has(c)&&Eo(h.children.get(c),l)&&h.children.delete(c),0===h.children.size}return!0}function da(h,l,c){null!==h.value?c(l,h.value):function No(h,l){h.children.forEach((c,_)=>{l(_,c)})}(h,(_,A)=>{da(A,new er(l.toString()+"/"+_),c)})}class ao{constructor(l){this.collection_=l,this.last_=null}get(){const l=this.collection_.get(),c=Object.assign({},l);return this.last_&&Ce(this.last_,(_,A)=>{c[_]=c[_]-A}),this.last_=l,c}}class Si{constructor(l,c){this.server_=c,this.statsToReport_={},this.statsListener_=new ao(l);const _=1e4+2e4*Math.random();Pn(this.reportStats_.bind(this),Math.floor(_))}reportStats_(){const l=this.statsListener_.get(),c={};let _=!1;Ce(l,(A,L)=>{L>0&&(0,Z.r3)(this.statsToReport_,A)&&(c[A]=L,_=!0)}),_&&this.server_.reportStats(c),Pn(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var ui=(()=>{return(h=ui||(ui={}))[h.OVERWRITE=0]="OVERWRITE",h[h.MERGE=1]="MERGE",h[h.ACK_USER_WRITE=2]="ACK_USER_WRITE",h[h.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",ui;var h})();function Qo(h){return{fromUser:!1,fromServer:!0,queryId:h,tagged:!0}}class Jo{constructor(l,c,_){this.path=l,this.affectedTree=c,this.revert=_,this.type=ui.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(l){if(wn(this.path)){if(null!=this.affectedTree.value)return(0,Z.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const c=this.affectedTree.subtree(new er(l));return new Jo($n(),c,this.revert)}}return(0,Z.hu)(Ln(this.path)===l,"operationForChild called for unrelated child."),new Jo(Oe(this.path),this.affectedTree,this.revert)}}class Gs{constructor(l,c){this.source=l,this.path=c,this.type=ui.LISTEN_COMPLETE}operationForChild(l){return wn(this.path)?new Gs(this.source,$n()):new Gs(this.source,Oe(this.path))}}class is{constructor(l,c,_){this.source=l,this.path=c,this.snap=_,this.type=ui.OVERWRITE}operationForChild(l){return wn(this.path)?new is(this.source,$n(),this.snap.getImmediateChild(l)):new is(this.source,Oe(this.path),this.snap)}}class Yi{constructor(l,c,_){this.source=l,this.path=c,this.children=_,this.type=ui.MERGE}operationForChild(l){if(wn(this.path)){const c=this.children.subtree(new er(l));return c.isEmpty()?null:c.value?new is(this.source,$n(),c.value):new Yi(this.source,$n(),c)}return(0,Z.hu)(Ln(this.path)===l,"Can't get a merge for a child not on the path of the operation"),new Yi(this.source,Oe(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class zs{constructor(l,c,_){this.node_=l,this.fullyInitialized_=c,this.filtered_=_}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(l){if(wn(l))return this.isFullyInitialized()&&!this.filtered_;const c=Ln(l);return this.isCompleteForChild(c)}isCompleteForChild(l){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(l)}getNode(){return this.node_}}class wo{constructor(l){this.query_=l,this.index_=this.query_._queryParams.getIndex()}}function ko(h,l,c,_,A,L){const G=_.filter(ce=>ce.type===c);G.sort((ce,Ae)=>function Au(h,l,c){if(null==l.childName||null==c.childName)throw(0,Z.g5)("Should only compare child_ events.");const _=new cr(l.childName,l.snapshotNode),A=new cr(c.childName,c.snapshotNode);return h.index_.compare(_,A)}(h,ce,Ae)),G.forEach(ce=>{const Ae=function Xo(h,l,c){return"value"===l.type||"child_removed"===l.type||(l.prevName=c.getPredecessorChildName(l.childName,l.snapshotNode,h.index_)),l}(h,ce,L);A.forEach(Be=>{Be.respondsTo(ce.type)&&l.push(Be.createEvent(Ae,h.query_))})})}function xi(h,l){return{eventCache:h,serverCache:l}}function Ks(h,l,c,_){return xi(new zs(l,c,_),h.serverCache)}function li(h,l,c,_){return xi(h.eventCache,new zs(l,c,_))}function Na(h){return h.eventCache.isFullyInitialized()?h.eventCache.getNode():null}function Mi(h){return h.serverCache.isFullyInitialized()?h.serverCache.getNode():null}let Oa;class Nr{constructor(l,c=(()=>(Oa||(Oa=new Ei(dn)),Oa))()){this.value=l,this.children=c}static fromObject(l){let c=new Nr(null);return Ce(l,(_,A)=>{c=c.set(new er(_),A)}),c}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(l,c){if(null!=this.value&&c(this.value))return{path:$n(),value:this.value};if(wn(l))return null;{const _=Ln(l),A=this.children.get(_);if(null!==A){const L=A.findRootMostMatchingPathAndValue(Oe(l),c);return null!=L?{path:en(new er(_),L.path),value:L.value}:null}return null}}findRootMostValueAndPath(l){return this.findRootMostMatchingPathAndValue(l,()=>!0)}subtree(l){if(wn(l))return this;{const c=Ln(l),_=this.children.get(c);return null!==_?_.subtree(Oe(l)):new Nr(null)}}set(l,c){if(wn(l))return new Nr(c,this.children);{const _=Ln(l),L=(this.children.get(_)||new Nr(null)).set(Oe(l),c),G=this.children.insert(_,L);return new Nr(this.value,G)}}remove(l){if(wn(l))return this.children.isEmpty()?new Nr(null):new Nr(null,this.children);{const c=Ln(l),_=this.children.get(c);if(_){const A=_.remove(Oe(l));let L;return L=A.isEmpty()?this.children.remove(c):this.children.insert(c,A),null===this.value&&L.isEmpty()?new Nr(null):new Nr(this.value,L)}return this}}get(l){if(wn(l))return this.value;{const c=Ln(l),_=this.children.get(c);return _?_.get(Oe(l)):null}}setTree(l,c){if(wn(l))return c;{const _=Ln(l),L=(this.children.get(_)||new Nr(null)).setTree(Oe(l),c);let G;return G=L.isEmpty()?this.children.remove(_):this.children.insert(_,L),new Nr(this.value,G)}}fold(l){return this.fold_($n(),l)}fold_(l,c){const _={};return this.children.inorderTraversal((A,L)=>{_[A]=L.fold_(en(l,A),c)}),c(l,this.value,_)}findOnPath(l,c){return this.findOnPath_(l,$n(),c)}findOnPath_(l,c,_){const A=!!this.value&&_(c,this.value);if(A)return A;if(wn(l))return null;{const L=Ln(l),G=this.children.get(L);return G?G.findOnPath_(Oe(l),en(c,L),_):null}}foreachOnPath(l,c){return this.foreachOnPath_(l,$n(),c)}foreachOnPath_(l,c,_){if(wn(l))return this;{this.value&&_(c,this.value);const A=Ln(l),L=this.children.get(A);return L?L.foreachOnPath_(Oe(l),en(c,A),_):new Nr(null)}}foreach(l){this.foreach_($n(),l)}foreach_(l,c){this.children.inorderTraversal((_,A)=>{A.foreach_(en(l,_),c)}),this.value&&c(l,this.value)}foreachChild(l){this.children.inorderTraversal((c,_)=>{_.value&&l(c,_.value)})}}class Wi{constructor(l){this.writeTree_=l}static empty(){return new Wi(new Nr(null))}}function uo(h,l,c){if(wn(l))return new Wi(new Nr(c));{const _=h.writeTree_.findRootMostValueAndPath(l);if(null!=_){const A=_.path;let L=_.value;const G=vr(A,l);return L=L.updateChild(G,c),new Wi(h.writeTree_.set(A,L))}{const A=new Nr(c),L=h.writeTree_.setTree(l,A);return new Wi(L)}}}function Fo(h,l,c){let _=h;return Ce(c,(A,L)=>{_=uo(_,en(l,A),L)}),_}function uu(h,l){if(wn(l))return Wi.empty();{const c=h.writeTree_.setTree(l,new Nr(null));return new Wi(c)}}function lu(h,l){return null!=gi(h,l)}function gi(h,l){const c=h.writeTree_.findRootMostValueAndPath(l);return null!=c?h.writeTree_.get(c.path).getChild(vr(c.path,l)):null}function Su(h){const l=[],c=h.writeTree_.value;return null!=c?c.isLeafNode()||c.forEachChild(xr,(_,A)=>{l.push(new cr(_,A))}):h.writeTree_.children.inorderTraversal((_,A)=>{null!=A.value&&l.push(new cr(_,A.value))}),l}function Ri(h,l){if(wn(l))return h;{const c=gi(h,l);return new Wi(null!=c?new Nr(c):h.writeTree_.subtree(l))}}function ea(h){return h.writeTree_.isEmpty()}function ps(h,l){return ri($n(),h.writeTree_,l)}function ri(h,l,c){if(null!=l.value)return c.updateChild(h,l.value);{let _=null;return l.children.inorderTraversal((A,L)=>{".priority"===A?((0,Z.hu)(null!==L.value,"Priority writes must always be leaf nodes"),_=L.value):c=ri(en(h,A),L,c)}),!c.getChild(h).isEmpty()&&null!==_&&(c=c.updateChild(en(h,".priority"),_)),c}}function Ns(h,l){return fa(l,h)}function Vi(h,l){if(h.snap)return oi(h.path,l);for(const c in h.children)if(h.children.hasOwnProperty(c)&&oi(en(h.path,c),l))return!0;return!1}function Ju(h){return h.visible}function In(h,l,c){let _=Wi.empty();for(let A=0;A<h.length;++A){const L=h[A];if(l(L)){const G=L.path;let ce;if(L.snap)oi(c,G)?(ce=vr(c,G),_=uo(_,ce,L.snap)):oi(G,c)&&(ce=vr(G,c),_=uo(_,$n(),L.snap.getChild(ce)));else{if(!L.children)throw(0,Z.g5)("WriteRecord should have .snap or .children");if(oi(c,G))ce=vr(c,G),_=Fo(_,ce,L.children);else if(oi(G,c))if(ce=vr(G,c),wn(ce))_=Fo(_,$n(),L.children);else{const Ae=(0,Z.DV)(L.children,Ln(ce));if(Ae){const Be=Ae.getChild(Oe(ce));_=uo(_,$n(),Be)}}}}}return _}function Xn(h,l,c,_,A){if(_||A){const L=Ri(h.visibleWrites,l);return!A&&ea(L)?c:A||null!=c||lu(L,$n())?ps(In(h.allWrites,function(Be){return(Be.visible||A)&&(!_||!~_.indexOf(Be.writeId))&&(oi(Be.path,l)||oi(l,Be.path))},l),c||J.EMPTY_NODE):null}{const L=gi(h.visibleWrites,l);if(null!=L)return L;{const G=Ri(h.visibleWrites,l);return ea(G)?c:null!=c||lu(G,$n())?ps(G,c||J.EMPTY_NODE):null}}}function ta(h,l,c,_){return Xn(h.writeTree,h.treePath,l,c,_)}function Zl(h,l){return function ql(h,l,c){let _=J.EMPTY_NODE;const A=gi(h.visibleWrites,l);if(A)return A.isLeafNode()||A.forEachChild(xr,(L,G)=>{_=_.updateImmediateChild(L,G)}),_;if(c){const L=Ri(h.visibleWrites,l);return c.forEachChild(xr,(G,ce)=>{const Ae=ps(Ri(L,new er(G)),ce);_=_.updateImmediateChild(G,Ae)}),Su(L).forEach(G=>{_=_.updateImmediateChild(G.name,G.node)}),_}return Su(Ri(h.visibleWrites,l)).forEach(G=>{_=_.updateImmediateChild(G.name,G.node)}),_}(h.writeTree,h.treePath,l)}function Fa(h,l,c,_){return function nn(h,l,c,_,A){(0,Z.hu)(_||A,"Either existingEventSnap or existingServerSnap must exist");const L=en(l,c);if(lu(h.visibleWrites,L))return null;{const G=Ri(h.visibleWrites,L);return ea(G)?A.getChild(c):ps(G,A.getChild(c))}}(h.writeTree,h.treePath,l,c,_)}function cu(h,l){return function Jt(h,l){return gi(h.visibleWrites,l)}(h.writeTree,en(h.treePath,l))}function du(h,l,c){return function bt(h,l,c,_){const A=en(l,c),L=gi(h.visibleWrites,A);return null!=L?L:_.isCompleteForChild(c)?ps(Ri(h.visibleWrites,A),_.getNode().getImmediateChild(c)):null}(h.writeTree,h.treePath,l,c)}function Io(h,l){return fa(en(h.treePath,l),h.writeTree)}function fa(h,l){return{treePath:h,writeTree:l}}class gs{constructor(){this.changeMap=new Map}trackChildChange(l){const c=l.type,_=l.childName;(0,Z.hu)("child_added"===c||"child_changed"===c||"child_removed"===c,"Only child changes supported for tracking"),(0,Z.hu)(".priority"!==_,"Only non-priority child changes can be tracked.");const A=this.changeMap.get(_);if(A){const L=A.type;if("child_added"===c&&"child_removed"===L)this.changeMap.set(_,Ps(_,l.snapshotNode,A.snapshotNode));else if("child_removed"===c&&"child_added"===L)this.changeMap.delete(_);else if("child_removed"===c&&"child_changed"===L)this.changeMap.set(_,Ui(_,A.oldSnap));else if("child_changed"===c&&"child_added"===L)this.changeMap.set(_,Gn(_,l.snapshotNode));else{if("child_changed"!==c||"child_changed"!==L)throw(0,Z.g5)("Illegal combination of changes: "+l+" occurred after "+A);this.changeMap.set(_,Ps(_,l.snapshotNode,A.oldSnap))}}else this.changeMap.set(_,l)}getChanges(){return Array.from(this.changeMap.values())}}const R=new class xu{getCompleteChild(l){return null}getChildAfterChild(l,c,_){return null}};class b{constructor(l,c,_=null){this.writes_=l,this.viewCache_=c,this.optCompleteServerCache_=_}getCompleteChild(l){const c=this.viewCache_.eventCache;if(c.isCompleteForChild(l))return c.getNode().getImmediateChild(l);{const _=null!=this.optCompleteServerCache_?new zs(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return du(this.writes_,l,_)}}getChildAfterChild(l,c,_){const A=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:Mi(this.viewCache_),L=function La(h,l,c,_,A,L){return function ii(h,l,c,_,A,L,G){let ce;const Ae=Ri(h.visibleWrites,l),Be=gi(Ae,$n());if(null!=Be)ce=Be;else{if(null==c)return[];ce=ps(Ae,c)}if(ce=ce.withIndex(G),ce.isEmpty()||ce.isLeafNode())return[];{const Dt=[],Et=G.getCompare(),Bt=L?ce.getReverseIteratorFrom(_,G):ce.getIteratorFrom(_,G);let Mn=Bt.getNext();for(;Mn&&Dt.length<A;)0!==Et(Mn,_)&&Dt.push(Mn),Mn=Bt.getNext();return Dt}}(h.writeTree,h.treePath,l,c,_,A,L)}(this.writes_,A,c,1,_,l);return 0===L.length?null:L[0]}}function Te(h,l,c,_,A,L){const G=l.eventCache;if(null!=cu(_,c))return l;{let ce,Ae;if(wn(c))if((0,Z.hu)(l.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),l.serverCache.isFiltered()){const Be=Mi(l),Et=Zl(_,Be instanceof J?Be:J.EMPTY_NODE);ce=h.filter.updateFullNode(l.eventCache.getNode(),Et,L)}else{const Be=ta(_,Mi(l));ce=h.filter.updateFullNode(l.eventCache.getNode(),Be,L)}else{const Be=Ln(c);if(".priority"===Be){(0,Z.hu)(1===_r(c),"Can't have a priority with additional path components");const Dt=G.getNode();Ae=l.serverCache.getNode();const Et=Fa(_,c,Dt,Ae);ce=null!=Et?h.filter.updatePriority(Dt,Et):G.getNode()}else{const Dt=Oe(c);let Et;if(G.isCompleteForChild(Be)){Ae=l.serverCache.getNode();const Bt=Fa(_,c,G.getNode(),Ae);Et=null!=Bt?G.getNode().getImmediateChild(Be).updateChild(Dt,Bt):G.getNode().getImmediateChild(Be)}else Et=du(_,Be,l.serverCache);ce=null!=Et?h.filter.updateChild(G.getNode(),Be,Et,Dt,A,L):G.getNode()}}return Ks(l,ce,G.isFullyInitialized()||wn(c),h.filter.filtersNodes())}}function Ue(h,l,c,_,A,L,G,ce){const Ae=l.serverCache;let Be;const Dt=G?h.filter:h.filter.getIndexedFilter();if(wn(c))Be=Dt.updateFullNode(Ae.getNode(),_,null);else if(Dt.filtersNodes()&&!Ae.isFiltered()){const Mn=Ae.getNode().updateChild(c,_);Be=Dt.updateFullNode(Ae.getNode(),Mn,null)}else{const Mn=Ln(c);if(!Ae.isCompleteForPath(c)&&_r(c)>1)return l;const qn=Oe(c),Ki=Ae.getNode().getImmediateChild(Mn).updateChild(qn,_);Be=".priority"===Mn?Dt.updatePriority(Ae.getNode(),Ki):Dt.updateChild(Ae.getNode(),Mn,Ki,qn,R,null)}const Et=li(l,Be,Ae.isFullyInitialized()||wn(c),Dt.filtersNodes());return Te(h,Et,c,A,new b(A,Et,L),ce)}function At(h,l,c,_,A,L,G){const ce=l.eventCache;let Ae,Be;const Dt=new b(A,l,L);if(wn(c))Be=h.filter.updateFullNode(l.eventCache.getNode(),_,G),Ae=Ks(l,Be,!0,h.filter.filtersNodes());else{const Et=Ln(c);if(".priority"===Et)Be=h.filter.updatePriority(l.eventCache.getNode(),_),Ae=Ks(l,Be,ce.isFullyInitialized(),ce.isFiltered());else{const Bt=Oe(c),Mn=ce.getNode().getImmediateChild(Et);let qn;if(wn(Bt))qn=_;else{const Or=Dt.getCompleteChild(Et);qn=null!=Or?".priority"===Le(Bt)&&Or.getChild(zt(Bt)).isEmpty()?Or:Or.updateChild(Bt,_):J.EMPTY_NODE}Ae=Mn.equals(qn)?l:Ks(l,h.filter.updateChild(ce.getNode(),Et,qn,Bt,Dt,G),ce.isFullyInitialized(),h.filter.filtersNodes())}}return Ae}function En(h,l){return h.eventCache.isCompleteForChild(l)}function jn(h,l,c){return c.foreach((_,A)=>{l=l.updateChild(_,A)}),l}function rr(h,l,c,_,A,L,G,ce){if(l.serverCache.getNode().isEmpty()&&!l.serverCache.isFullyInitialized())return l;let Be,Ae=l;Be=wn(c)?_:new Nr(null).setTree(c,_);const Dt=l.serverCache.getNode();return Be.children.inorderTraversal((Et,Bt)=>{if(Dt.hasChild(Et)){const qn=jn(0,l.serverCache.getNode().getImmediateChild(Et),Bt);Ae=Ue(h,Ae,new er(Et),qn,A,L,G,ce)}}),Be.children.inorderTraversal((Et,Bt)=>{const Mn=!l.serverCache.isCompleteForChild(Et)&&void 0===Bt.value;if(!Dt.hasChild(Et)&&!Mn){const Or=jn(0,l.serverCache.getNode().getImmediateChild(Et),Bt);Ae=Ue(h,Ae,new er(Et),Or,A,L,G,ce)}}),Ae}class Ua{constructor(l,c){this.query_=l,this.eventRegistrations_=[];const _=this.query_._queryParams,A=new qo(_.getIndex()),L=function q(h){return h.loadsAllData()?new qo(h.getIndex()):h.hasLimit()?new U(h):new H(h)}(_);this.processor_=function C(h){return{filter:h}}(L);const G=c.serverCache,ce=c.eventCache,Ae=A.updateFullNode(J.EMPTY_NODE,G.getNode(),null),Be=L.updateFullNode(J.EMPTY_NODE,ce.getNode(),null),Dt=new zs(Ae,G.isFullyInitialized(),A.filtersNodes()),Et=new zs(Be,ce.isFullyInitialized(),L.filtersNodes());this.viewCache_=xi(Et,Dt),this.eventGenerator_=new wo(this.query_)}get query(){return this.query_}}function ks(h,l){const c=Mi(h.viewCache_);return c&&(h.query._queryParams.loadsAllData()||!wn(l)&&!c.getImmediateChild(Ln(l)).isEmpty())?c.getChild(l):null}function Xu(h){return 0===h.eventRegistrations_.length}function Pi(h,l,c){const _=[];if(c){(0,Z.hu)(null==l,"A cancel should cancel all event registrations.");const A=h.query._path;h.eventRegistrations_.forEach(L=>{const G=L.createCancelEvent(c,A);G&&_.push(G)})}if(l){let A=[];for(let L=0;L<h.eventRegistrations_.length;++L){const G=h.eventRegistrations_[L];if(G.matches(l)){if(l.hasAnyCallback()){A=A.concat(h.eventRegistrations_.slice(L+1));break}}else A.push(G)}h.eventRegistrations_=A}else h.eventRegistrations_=[];return _}function Yl(h,l,c,_){l.type===ui.MERGE&&null!==l.source.queryId&&((0,Z.hu)(Mi(h.viewCache_),"We should always have a full cache before handling merges"),(0,Z.hu)(Na(h.viewCache_),"Missing event cache, even though we have a server cache"));const A=h.viewCache_,L=function W(h,l,c,_,A){const L=new gs;let G,ce;if(c.type===ui.OVERWRITE){const Be=c;Be.source.fromUser?G=At(h,l,Be.path,Be.snap,_,A,L):((0,Z.hu)(Be.source.fromServer,"Unknown source."),ce=Be.source.tagged||l.serverCache.isFiltered()&&!wn(Be.path),G=Ue(h,l,Be.path,Be.snap,_,A,ce,L))}else if(c.type===ui.MERGE){const Be=c;Be.source.fromUser?G=function Tn(h,l,c,_,A,L,G){let ce=l;return _.foreach((Ae,Be)=>{const Dt=en(c,Ae);En(l,Ln(Dt))&&(ce=At(h,ce,Dt,Be,A,L,G))}),_.foreach((Ae,Be)=>{const Dt=en(c,Ae);En(l,Ln(Dt))||(ce=At(h,ce,Dt,Be,A,L,G))}),ce}(h,l,Be.path,Be.children,_,A,L):((0,Z.hu)(Be.source.fromServer,"Unknown source."),ce=Be.source.tagged||l.serverCache.isFiltered(),G=rr(h,l,Be.path,Be.children,_,A,ce,L))}else if(c.type===ui.ACK_USER_WRITE){const Be=c;G=Be.revert?function Kr(h,l,c,_,A,L){let G;if(null!=cu(_,c))return l;{const ce=new b(_,l,A),Ae=l.eventCache.getNode();let Be;if(wn(c)||".priority"===Ln(c)){let Dt;if(l.serverCache.isFullyInitialized())Dt=ta(_,Mi(l));else{const Et=l.serverCache.getNode();(0,Z.hu)(Et instanceof J,"serverChildren would be complete if leaf node"),Dt=Zl(_,Et)}Dt=Dt,Be=h.filter.updateFullNode(Ae,Dt,L)}else{const Dt=Ln(c);let Et=du(_,Dt,l.serverCache);null==Et&&l.serverCache.isCompleteForChild(Dt)&&(Et=Ae.getImmediateChild(Dt)),Be=null!=Et?h.filter.updateChild(Ae,Dt,Et,Oe(c),ce,L):l.eventCache.getNode().hasChild(Dt)?h.filter.updateChild(Ae,Dt,J.EMPTY_NODE,Oe(c),ce,L):Ae,Be.isEmpty()&&l.serverCache.isFullyInitialized()&&(G=ta(_,Mi(l)),G.isLeafNode()&&(Be=h.filter.updateFullNode(Be,G,L)))}return G=l.serverCache.isFullyInitialized()||null!=cu(_,$n()),Ks(l,Be,G,h.filter.filtersNodes())}}(h,l,Be.path,_,A,L):function Dr(h,l,c,_,A,L,G){if(null!=cu(A,c))return l;const ce=l.serverCache.isFiltered(),Ae=l.serverCache;if(null!=_.value){if(wn(c)&&Ae.isFullyInitialized()||Ae.isCompleteForPath(c))return Ue(h,l,c,Ae.getNode().getChild(c),A,L,ce,G);if(wn(c)){let Be=new Nr(null);return Ae.getNode().forEachChild(ai,(Dt,Et)=>{Be=Be.set(new er(Dt),Et)}),rr(h,l,c,Be,A,L,ce,G)}return l}{let Be=new Nr(null);return _.foreach((Dt,Et)=>{const Bt=en(c,Dt);Ae.isCompleteForPath(Bt)&&(Be=Be.set(Dt,Ae.getNode().getChild(Bt)))}),rr(h,l,c,Be,A,L,ce,G)}}(h,l,Be.path,Be.affectedTree,_,A,L)}else{if(c.type!==ui.LISTEN_COMPLETE)throw(0,Z.g5)("Unknown operation type: "+c.type);G=function Os(h,l,c,_,A){const L=l.serverCache;return Te(h,li(l,L.getNode(),L.isFullyInitialized()||wn(c),L.isFiltered()),c,_,R,A)}(h,l,c.path,_,L)}const Ae=L.getChanges();return function X(h,l,c){const _=l.eventCache;if(_.isFullyInitialized()){const A=_.getNode().isLeafNode()||_.getNode().isEmpty(),L=Na(h);(c.length>0||!h.eventCache.isFullyInitialized()||A&&!_.getNode().equals(L)||!_.getNode().getPriority().equals(L.getPriority()))&&c.push(Hi(Na(l)))}}(l,G,Ae),{viewCache:G,changes:Ae}}(h.processor_,A,l,c,_);return function V(h,l){(0,Z.hu)(l.eventCache.getNode().isIndexed(h.filter.getIndex()),"Event snap not indexed"),(0,Z.hu)(l.serverCache.getNode().isIndexed(h.filter.getIndex()),"Server snap not indexed")}(h.processor_,L.viewCache),(0,Z.hu)(L.viewCache.serverCache.isFullyInitialized()||!A.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),h.viewCache_=L.viewCache,wr(h,L.changes,L.viewCache.eventCache.getNode(),null)}function wr(h,l,c,_){return function Qu(h,l,c,_){const A=[],L=[];return l.forEach(G=>{"child_changed"===G.type&&h.index_.indexedValueChanged(G.oldSnap,G.snapshotNode)&&L.push(function so(h,l){return{type:"child_moved",snapshotNode:l,childName:h}}(G.childName,G.snapshotNode))}),ko(h,A,"child_removed",l,_,c),ko(h,A,"child_added",l,_,c),ko(h,A,"child_moved",L,_,c),ko(h,A,"child_changed",l,_,c),ko(h,A,"value",l,_,c),A}(h.eventGenerator_,l,c,_?[_]:h.eventRegistrations_)}let Va,Ys;class Ql{constructor(){this.views=new Map}}function pa(h,l,c,_){const A=l.source.queryId;if(null!==A){const L=h.views.get(A);return(0,Z.hu)(null!=L,"SyncTree gave us an op for an invalid query."),Yl(L,l,c,_)}{let L=[];for(const G of h.views.values())L=L.concat(Yl(G,l,c,_));return L}}function Zs(h,l,c,_,A){const G=h.views.get(l._queryIdentifier);if(!G){let ce=ta(c,A?_:null),Ae=!1;ce?Ae=!0:_ instanceof J?(ce=Zl(c,_),Ae=!1):(ce=J.EMPTY_NODE,Ae=!1);const Be=xi(new zs(ce,Ae,!1),new zs(_,A,!1));return new Ua(l,Be)}return G}function ji(h){const l=[];for(const c of h.views.values())c.query._queryParams.loadsAllData()||l.push(c);return l}function _s(h,l){let c=null;for(const _ of h.views.values())c=c||ks(_,l);return c}function Ba(h,l){return l._queryParams.loadsAllData()?Ni(h):h.views.get(l._queryIdentifier)}function ja(h,l){return null!=Ba(h,l)}function lo(h){return null!=Ni(h)}function Ni(h){for(const l of h.views.values())if(l.query._queryParams.loadsAllData())return l;return null}let ws=1;class Mu{constructor(l){this.listenProvider_=l,this.syncPointTree_=new Nr(null),this.pendingWriteTree_=function ha(){return{visibleWrites:Wi.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Ml(h,l,c,_,A){return function Lo(h,l,c,_,A){(0,Z.hu)(_>h.lastWriteId,"Stacking an older write on top of newer ones"),void 0===A&&(A=!0),h.allWrites.push({path:l,snap:c,writeId:_,visible:A}),A&&(h.visibleWrites=uo(h.visibleWrites,l,c)),h.lastWriteId=_}(h.pendingWriteTree_,l,c,_,A),A?$a(h,new is({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,c)):[]}function Oi(h,l,c=!1){const _=function bc(h,l){for(let c=0;c<h.allWrites.length;c++){const _=h.allWrites[c];if(_.writeId===l)return _}return null}(h.pendingWriteTree_,l);if(function on(h,l){const c=h.allWrites.findIndex(ce=>ce.writeId===l);(0,Z.hu)(c>=0,"removeWrite called with nonexistent writeId.");const _=h.allWrites[c];h.allWrites.splice(c,1);let A=_.visible,L=!1,G=h.allWrites.length-1;for(;A&&G>=0;){const ce=h.allWrites[G];ce.visible&&(G>=c&&Vi(ce,_.path)?A=!1:oi(_.path,ce.path)&&(L=!0)),G--}return!!A&&(L?(function qs(h){h.visibleWrites=In(h.allWrites,Ju,$n()),h.lastWriteId=h.allWrites.length>0?h.allWrites[h.allWrites.length-1].writeId:-1}(h),!0):(_.snap?h.visibleWrites=uu(h.visibleWrites,_.path):Ce(_.children,Ae=>{h.visibleWrites=uu(h.visibleWrites,en(_.path,Ae))}),!0))}(h.pendingWriteTree_,l)){let L=new Nr(null);return null!=_.snap?L=L.set($n(),!0):Ce(_.children,G=>{L=L.set(new er(G),!0)}),$a(h,new Jo(_.path,L,c))}return[]}function fu(h,l,c){return $a(h,new is({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,c))}function Ls(h,l,c,_){const A=l._path,L=h.syncPointTree_.get(A);let G=[];if(L&&("default"===l._queryIdentifier||ja(L,l))){const ce=function Fs(h,l,c,_){const A=l._queryIdentifier,L=[];let G=[];const ce=lo(h);if("default"===A)for(const[Ae,Be]of h.views.entries())G=G.concat(Pi(Be,c,_)),Xu(Be)&&(h.views.delete(Ae),Be.query._queryParams.loadsAllData()||L.push(Be.query));else{const Ae=h.views.get(A);Ae&&(G=G.concat(Pi(Ae,c,_)),Xu(Ae)&&(h.views.delete(A),Ae.query._queryParams.loadsAllData()||L.push(Ae.query)))}return ce&&!lo(h)&&L.push(new(function Jl(){return(0,Z.hu)(Va,"Reference.ts has not been loaded"),Va}())(l._repo,l._path)),{removed:L,events:G}}(L,l,c,_);(function sd(h){return 0===h.views.size})(L)&&(h.syncPointTree_=h.syncPointTree_.remove(A));const Ae=ce.removed;G=ce.events;const Be=-1!==Ae.findIndex(Et=>Et._queryParams.loadsAllData()),Dt=h.syncPointTree_.findOnPath(A,(Et,Bt)=>lo(Bt));if(Be&&!Dt){const Et=h.syncPointTree_.subtree(A);if(!Et.isEmpty()){const Bt=function Dc(h){return h.fold((l,c,_)=>{if(c&&lo(c))return[Ni(c)];{let A=[];return c&&(A=ji(c)),Ce(_,(L,G)=>{A=A.concat(G)}),A}})}(Et);for(let Mn=0;Mn<Bt.length;++Mn){const qn=Bt[Mn],Or=qn.query,Ki=ra(h,qn);h.listenProvider_.startListening(Wa(Or),ma(h,Or),Ki.hashFn,Ki.onComplete)}}}!Dt&&Ae.length>0&&!_&&(Be?h.listenProvider_.stopListening(Wa(l),null):Ae.forEach(Et=>{const Bt=h.queryToTagMap.get(ia(Et));h.listenProvider_.stopListening(Wa(Et),Bt)})),function Ga(h,l){for(let c=0;c<l.length;++c){const _=l[c];if(!_._queryParams.loadsAllData()){const A=ia(_),L=h.queryToTagMap.get(A);h.queryToTagMap.delete(A),h.tagToQueryMap.delete(L)}}}(h,Ae)}return G}function ec(h,l,c){const _=l._path;let A=null,L=!1;h.syncPointTree_.foreachOnPath(_,(Et,Bt)=>{const Mn=vr(Et,_);A=A||_s(Bt,Mn),L=L||lo(Bt)});let ce,G=h.syncPointTree_.get(_);G?(L=L||lo(G),A=A||_s(G,$n())):(G=new Ql,h.syncPointTree_=h.syncPointTree_.set(_,G)),null!=A?ce=!0:(ce=!1,A=J.EMPTY_NODE,h.syncPointTree_.subtree(_).foreachChild((Bt,Mn)=>{const qn=_s(Mn,$n());qn&&(A=A.updateImmediateChild(Bt,qn))}));const Ae=ja(G,l);if(!Ae&&!l._queryParams.loadsAllData()){const Et=ia(l);(0,Z.hu)(!h.queryToTagMap.has(Et),"View does not exist, but we have a tag");const Bt=function Pu(){return ws++}();h.queryToTagMap.set(Et,Bt),h.tagToQueryMap.set(Bt,Et)}let Dt=function Bi(h,l,c,_,A,L){const G=Zs(h,l,_,A,L);return h.views.has(l._queryIdentifier)||h.views.set(l._queryIdentifier,G),function Gi(h,l){h.eventRegistrations_.push(l)}(G,c),function na(h,l){const c=h.viewCache_.eventCache,_=[];return c.getNode().isLeafNode()||c.getNode().forEachChild(xr,(L,G)=>{_.push(Gn(L,G))}),c.isFullyInitialized()&&_.push(Hi(c.getNode())),wr(h,_,c.getNode(),l)}(G,c)}(G,l,c,Ns(h.pendingWriteTree_,_),A,ce);if(!Ae&&!L){const Et=Ba(G,l);Dt=Dt.concat(function od(h,l,c){const _=l._path,A=ma(h,l),L=ra(h,c),G=h.listenProvider_.startListening(Wa(l),A,L.hashFn,L.onComplete),ce=h.syncPointTree_.subtree(_);if(A)(0,Z.hu)(!lo(ce.value),"If we're adding a query, it shouldn't be shadowed");else{const Ae=ce.fold((Be,Dt,Et)=>{if(!wn(Be)&&Dt&&lo(Dt))return[Ni(Dt).query];{let Bt=[];return Dt&&(Bt=Bt.concat(ji(Dt).map(Mn=>Mn.query))),Ce(Et,(Mn,qn)=>{Bt=Bt.concat(qn)}),Bt}});for(let Be=0;Be<Ae.length;++Be){const Dt=Ae[Be];h.listenProvider_.stopListening(Wa(Dt),ma(h,Dt))}}return G}(h,l,Et))}return Dt}function pu(h,l,c){const A=h.pendingWriteTree_,L=h.syncPointTree_.findOnPath(l,(G,ce)=>{const Be=_s(ce,vr(G,l));if(Be)return Be});return Xn(A,l,L,c,!0)}function $a(h,l){return Ru(l,h.syncPointTree_,null,Ns(h.pendingWriteTree_,$n()))}function Ru(h,l,c,_){if(wn(h.path))return Rl(h,l,c,_);{const A=l.get($n());null==c&&null!=A&&(c=_s(A,$n()));let L=[];const G=Ln(h.path),ce=h.operationForChild(G),Ae=l.children.get(G);if(Ae&&ce){const Be=c?c.getImmediateChild(G):null,Dt=Io(_,G);L=L.concat(Ru(ce,Ae,Be,Dt))}return A&&(L=L.concat(pa(A,h,_,c))),L}}function Rl(h,l,c,_){const A=l.get($n());null==c&&null!=A&&(c=_s(A,$n()));let L=[];return l.children.inorderTraversal((G,ce)=>{const Ae=c?c.getImmediateChild(G):null,Be=Io(_,G),Dt=h.operationForChild(G);Dt&&(L=L.concat(Rl(Dt,ce,Ae,Be)))}),A&&(L=L.concat(pa(A,h,_,c))),L}function ra(h,l){const c=l.query,_=ma(h,c);return{hashFn:()=>(function ms(h){return h.viewCache_.serverCache.getNode()}(l)||J.EMPTY_NODE).hash(),onComplete:A=>{if("ok"===A)return _?function tl(h,l,c){const _=Qs(h,c);if(_){const A=Ha(_),L=A.path,G=A.queryId,ce=vr(L,l);return mi(h,L,new Gs(Qo(G),ce))}return[]}(h,c._path,_):function Is(h,l){return $a(h,new Gs({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l))}(h,c._path);{const L=function sn(h,l){let c="Unknown Error";"too_big"===h?c="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===h?c="Client doesn't have permission to access the desired data.":"unavailable"===h&&(c="The service is unavailable");const _=new Error(h+" at "+l._path.toString()+": "+c);return _.code=h.toUpperCase(),_}(A,c);return Ls(h,c,null,L)}}}}function ma(h,l){const c=ia(l);return h.queryToTagMap.get(c)}function ia(h){return h._path.toString()+"$"+h._queryIdentifier}function Qs(h,l){return h.tagToQueryMap.get(l)}function Ha(h){const l=h.indexOf("$");return(0,Z.hu)(-1!==l&&l<h.length-1,"Bad queryKey."),{queryId:h.substr(l+1),path:new er(h.substr(0,l))}}function mi(h,l,c){const _=h.syncPointTree_.get(l);return(0,Z.hu)(_,"Missing sync point for query tag that we're tracking"),pa(_,c,Ns(h.pendingWriteTree_,l),null)}function Wa(h){return h._queryParams.loadsAllData()&&!h._queryParams.isDefault()?new(function hu(){return(0,Z.hu)(Ys,"Reference.ts has not been loaded"),Ys}())(h._repo,h._path):h}class sa{constructor(l){this.node_=l}getImmediateChild(l){const c=this.node_.getImmediateChild(l);return new sa(c)}node(){return this.node_}}class Nu{constructor(l,c){this.syncTree_=l,this.path_=c}getImmediateChild(l){const c=en(this.path_,l);return new Nu(this.syncTree_,c)}node(){return pu(this.syncTree_,this.path_)}}const ci=function(h,l,c){return h&&"object"==typeof h?((0,Z.hu)(".sv"in h,"Unexpected leaf node or priority contents"),"string"==typeof h[".sv"]?_a(h[".sv"],l,c):"object"==typeof h[".sv"]?ud(h[".sv"],l):void(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2))):h},_a=function(h,l,c){if("timestamp"===h)return c.timestamp;(0,Z.hu)(!1,"Unexpected server value: "+h)},ud=function(h,l,c){h.hasOwnProperty("increment")||(0,Z.hu)(!1,"Unexpected server value: "+JSON.stringify(h,null,2));const _=h.increment;"number"!=typeof _&&(0,Z.hu)(!1,"Unexpected increment value: "+_);const A=l.node();if((0,Z.hu)(null!=A,"Expected ChildrenNode.EMPTY_NODE for nulls"),!A.isLeafNode())return _;const G=A.getValue();return"number"!=typeof G?_:G+_},ya=function(h,l,c,_){return Cs(l,new Nu(c,h),_)},Uo=function(h,l,c){return Cs(h,new sa(l),c)};function Cs(h,l,c){const _=h.getPriority().val(),A=ci(_,l.getImmediateChild(".priority"),c);let L;if(h.isLeafNode()){const G=h,ce=ci(G.getValue(),l,c);return ce!==G.getValue()||A!==G.getPriority().val()?new ts(ce,gt(A)):h}{const G=h;return L=G,A!==G.getPriority().val()&&(L=L.updatePriority(new ts(A))),G.forEachChild(xr,(ce,Ae)=>{const Be=Cs(Ae,l.getImmediateChild(ce),c);Be!==Ae&&(L=L.updateImmediateChild(ce,Be))}),L}}class gu{constructor(l="",c=null,_={children:{},childCount:0}){this.name=l,this.parent=c,this.node=_}}function Vo(h,l){let c=l instanceof er?l:new er(l),_=h,A=Ln(c);for(;null!==A;){const L=(0,Z.DV)(_.node.children,A)||{children:{},childCount:0};_=new gu(A,_,L),c=Oe(c),A=Ln(c)}return _}function ho(h){return h.node.value}function Bo(h,l){h.node.value=l,za(h)}function Ou(h){return h.node.childCount>0}function ku(h,l){Ce(h.node.children,(c,_)=>{l(new gu(c,h,_))})}function Ea(h,l,c,_){c&&!_&&l(h),ku(h,A=>{Ea(A,l,!0,_)}),c&&_&&l(h)}function wa(h){return new er(null===h.parent?h.name:wa(h.parent)+"/"+h.name)}function za(h){null!==h.parent&&function Ia(h,l,c){const _=function va(h){return void 0===ho(h)&&!Ou(h)}(c),A=(0,Z.r3)(h.node.children,l);_&&A?(delete h.node.children[l],h.node.childCount--,za(h)):!_&&!A&&(h.node.children[l]=c.node,h.node.childCount++,za(h))}(h.parent,h.name,h)}const Fu=/[\[\].#$\/\u0000-\u001F\u007F]/,Ka=/[\[\].#$\u0000-\u001F\u007F]/,Ca=10485760,Lu=function(h){return"string"==typeof h&&0!==h.length&&!Fu.test(h)},ld=function(h){return"string"==typeof h&&0!==h.length&&!Ka.test(h)},mu=function(h){return null===h||"string"==typeof h||"number"==typeof h&&!it(h)||h&&"object"==typeof h&&(0,Z.r3)(h,".sv")},oa=function(h,l,c,_){_&&void 0===l||qa((0,Z.gK)(h,"value"),l,c)},qa=function(h,l,c){const _=c instanceof er?new vi(c,h):c;if(void 0===l)throw new Error(h+"contains undefined "+fi(_));if("function"==typeof l)throw new Error(h+"contains a function "+fi(_)+" with contents = "+l.toString());if(it(l))throw new Error(h+"contains "+l.toString()+" "+fi(_));if("string"==typeof l&&l.length>Ca/3&&(0,Z.ug)(l)>Ca)throw new Error(h+"contains a string greater than "+Ca+" utf8 bytes "+fi(_)+" ('"+l.substring(0,50)+"...')");if(l&&"object"==typeof l){let A=!1,L=!1;if(Ce(l,(G,ce)=>{if(".value"===G)A=!0;else if(".priority"!==G&&".sv"!==G&&(L=!0,!Lu(G)))throw new Error(h+" contains an invalid key ("+G+") "+fi(_)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ls(h,l){h.parts_.length>0&&(h.byteLength_+=1),h.parts_.push(l),h.byteLength_+=(0,Z.ug)(l),xa(h)})(_,G),qa(h,ce,_),function ni(h){const l=h.parts_.pop();h.byteLength_-=(0,Z.ug)(l),h.parts_.length>0&&(h.byteLength_-=1)}(_)}),A&&L)throw new Error(h+' contains ".value" child '+fi(_)+" in addition to actual children.")}},dd=function(h,l,c,_){if(_&&void 0===l)return;const A=(0,Z.gK)(h,"values");if(!l||"object"!=typeof l||Array.isArray(l))throw new Error(A+" must be an object containing the children to replace.");const L=[];Ce(l,(G,ce)=>{const Ae=new er(G);if(qa(A,ce,en(c,Ae)),".priority"===Le(Ae)&&!mu(ce))throw new Error(A+"contains an invalid value for '"+Ae.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");L.push(Ae)}),function(h,l){let c,_;for(c=0;c<l.length;c++){_=l[c];const L=kt(_);for(let G=0;G<L.length;G++)if((".priority"!==L[G]||G!==L.length-1)&&!Lu(L[G]))throw new Error(h+"contains an invalid key ("+L[G]+") in path "+_.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}l.sort(Er);let A=null;for(c=0;c<l.length;c++){if(_=l[c],null!==A&&oi(A,_))throw new Error(h+"contains a path "+A.toString()+" that is ancestor of another path "+_.toString());A=_}}(A,L)},Vu=function(h,l,c){if(!c||void 0!==l){if(it(l))throw new Error((0,Z.gK)(h,"priority")+"is "+l.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!mu(l))throw new Error((0,Z.gK)(h,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},Co=function(h,l,c,_){if(!(_&&void 0===c||Lu(c)))throw new Error((0,Z.gK)(h,l)+'was an invalid key = "'+c+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},Us=function(h,l,c,_){if(!(_&&void 0===c||ld(c)))throw new Error((0,Z.gK)(h,l)+'was an invalid path = "'+c+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},ss=function(h,l){if(".info"===Ln(l))throw new Error(h+" failed = Can't modify data under /.info/")},Ac=function(h,l){const c=l.path.toString();if("string"!=typeof l.repoInfo.host||0===l.repoInfo.host.length||!Lu(l.repoInfo.namespace)&&"localhost"!==l.repoInfo.host.split(":")[0]||0!==c.length&&!function(h){return h&&(h=h.replace(/^\/*\.info(\/|$)/,"/")),ld(h)}(c))throw new Error((0,Z.gK)(h,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class Za{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function ba(h,l){let c=null;for(let _=0;_<l.length;_++){const A=l[_],L=A.getPath();null!==c&&!Xr(L,c.path)&&(h.eventLists_.push(c),c=null),null===c&&(c={events:[],path:L}),c.events.push(A)}c&&h.eventLists_.push(c)}function nl(h,l,c){ba(h,c),tc(h,_=>Xr(_,l))}function os(h,l,c){ba(h,c),tc(h,_=>oi(_,l)||oi(l,_))}function tc(h,l){h.recursionDepth_++;let c=!0;for(let _=0;_<h.eventLists_.length;_++){const A=h.eventLists_[_];A&&(l(A.path)?(Sc(h.eventLists_[_]),h.eventLists_[_]=null):c=!1)}c&&(h.eventLists_=[]),h.recursionDepth_--}function Sc(h){for(let l=0;l<h.events.length;l++){const c=h.events[l];if(null!==c){h.events[l]=null;const _=c.getEventRunner();Mt&&rt("event: "+c.toString()),gn(_)}}}const $i="repo_interrupt";class rl{constructor(l,c,_,A){this.repoInfo_=l,this.forceRestClient_=c,this.authTokenProvider_=_,this.appCheckProvider_=A,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new Za,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Es(),this.transactionQueueTree_=new gu,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function il(h){const c=h.infoData_.getNode(new er(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+c}function jo(h){return function(h){return(h=h||{}).timestamp=h.timestamp||(new Date).getTime(),h}({timestamp:il(h)})}function Ya(h,l,c,_,A){h.dataUpdateCount++;const L=new er(l);c=h.interceptServerDataCallback_?h.interceptServerDataCallback_(l,c):c;let G=[];if(A)if(_){const Ae=(0,Z.UI)(c,Be=>gt(Be));G=function ga(h,l,c,_){const A=Qs(h,_);if(A){const L=Ha(A),G=L.path,ce=L.queryId,Ae=vr(G,l),Be=Nr.fromObject(c);return mi(h,G,new Yi(Qo(ce),Ae,Be))}return[]}(h.serverSyncTree_,L,Ae,A)}else{const Ae=gt(c);G=function Xl(h,l,c,_){const A=Qs(h,_);if(null!=A){const L=Ha(A),G=L.path,ce=L.queryId,Ae=vr(G,l);return mi(h,G,new is(Qo(ce),Ae,c))}return[]}(h.serverSyncTree_,L,Ae,A)}else if(_){const Ae=(0,Z.UI)(c,Be=>gt(Be));G=function si(h,l,c){const _=Nr.fromObject(c);return $a(h,new Yi({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},l,_))}(h.serverSyncTree_,L,Ae)}else{const Ae=gt(c);G=fu(h.serverSyncTree_,L,Ae)}let ce=L;G.length>0&&(ce=$o(h,L)),os(h.eventQueue_,ce,G)}function xc(h,l){Qa(h,"connected",l),!1===l&&function al(h){Ft(h,"onDisconnectEvents");const l=jo(h),c=Es();da(h.onDisconnect_,$n(),(A,L)=>{const G=ya(A,L,h.serverSyncTree_,l);pi(c,A,G)});let _=[];da(c,$n(),(A,L)=>{_=_.concat(fu(h.serverSyncTree_,A,L));const G=ll(h,A);$o(h,G)}),h.onDisconnect_=Es(),os(h.eventQueue_,$n(),_)}(h)}function Qa(h,l,c){const _=new er("/.info/"+l),A=gt(c);h.infoData_.updateSnapshot(_,A);const L=fu(h.infoSyncTree_,_,A);os(h.eventQueue_,_,L)}function _u(h){return h.nextWriteId_++}function rc(h,l,c,_,A){Ft(h,"set",{path:l.toString(),value:c,priority:_});const L=jo(h),G=gt(c,_),ce=pu(h.serverSyncTree_,l),Ae=Uo(G,ce,L),Be=_u(h),Dt=Ml(h.serverSyncTree_,l,Ae,Be,!0);ba(h.eventQueue_,Dt),h.server_.put(l.toString(),G.val(!0),(Bt,Mn)=>{const qn="ok"===Bt;qn||Lt("set at "+l+" failed: "+Bt);const Or=Oi(h.serverSyncTree_,Be,!qn);os(h.eventQueue_,l,Or),ln(0,A,Bt,Mn)});const Et=ll(h,l);$o(h,Et),os(h.eventQueue_,Et,[])}function hd(h,l,c){h.server_.onDisconnectCancel(l.toString(),(_,A)=>{"ok"===_&&Eo(h.onDisconnect_,l),ln(0,c,_,A)})}function D(h,l,c,_){const A=gt(c);h.server_.onDisconnectPut(l.toString(),A.val(!0),(L,G)=>{"ok"===L&&pi(h.onDisconnect_,l,A),ln(0,_,L,G)})}function ee(h,l,c){let _;_=".info"===Ln(l._path)?Ls(h.infoSyncTree_,l,c):Ls(h.serverSyncTree_,l,c),nl(h.eventQueue_,l._path,_)}function pe(h){h.persistentConnection_&&h.persistentConnection_.interrupt($i)}function Ft(h,...l){let c="";h.persistentConnection_&&(c=h.persistentConnection_.id+":"),rt(c,...l)}function ln(h,l,c,_){l&&gn(()=>{if("ok"===c)l(null);else{const A=(c||"error").toUpperCase();let L=A;_&&(L+=": "+_);const G=new Error(L);G.code=A,l(G)}})}function fr(h,l,c){return pu(h.serverSyncTree_,l,c)||J.EMPTY_NODE}function hi(h,l=h.transactionQueueTree_){if(l||Vr(h,l),ho(l)){const c=ul(h,l);(0,Z.hu)(c.length>0,"Sending zero length transaction queue"),c.every(A=>0===A.status)&&function Qi(h,l,c){const _=c.map(Be=>Be.currentWriteId),A=fr(h,l,_);let L=A;const G=A.hash();for(let Be=0;Be<c.length;Be++){const Dt=c[Be];(0,Z.hu)(0===Dt.status,"tryToSendTransactionQueue_: items in queue should all be run."),Dt.status=1,Dt.retryCount++;const Et=vr(l,Dt.path);L=L.updateChild(Et,Dt.currentOutputSnapshotRaw)}const ce=L.val(!0),Ae=l;h.server_.put(Ae.toString(),ce,Be=>{Ft(h,"transaction put response",{path:Ae.toString(),status:Be});let Dt=[];if("ok"===Be){const Et=[];for(let Bt=0;Bt<c.length;Bt++)c[Bt].status=2,Dt=Dt.concat(Oi(h.serverSyncTree_,c[Bt].currentWriteId)),c[Bt].onComplete&&Et.push(()=>c[Bt].onComplete(null,!0,c[Bt].currentOutputSnapshotResolved)),c[Bt].unwatcher();Vr(h,Vo(h.transactionQueueTree_,l)),hi(h,h.transactionQueueTree_),os(h.eventQueue_,l,Dt);for(let Bt=0;Bt<Et.length;Bt++)gn(Et[Bt])}else{if("datastale"===Be)for(let Et=0;Et<c.length;Et++)c[Et].status=3===c[Et].status?4:0;else{Lt("transaction at "+Ae.toString()+" failed: "+Be);for(let Et=0;Et<c.length;Et++)c[Et].status=4,c[Et].abortReason=Be}$o(h,l)}},G)}(h,wa(l),c)}else Ou(l)&&ku(l,c=>{hi(h,c)})}function $o(h,l){const c=Ja(h,l),_=wa(c);return function yu(h,l,c){if(0===l.length)return;const _=[];let A=[];const G=l.filter(ce=>0===ce.status).map(ce=>ce.currentWriteId);for(let ce=0;ce<l.length;ce++){const Ae=l[ce],Be=vr(c,Ae.path);let Et,Dt=!1;if((0,Z.hu)(null!==Be,"rerunTransactionsUnderNode_: relativePath should not be null."),4===Ae.status)Dt=!0,Et=Ae.abortReason,A=A.concat(Oi(h.serverSyncTree_,Ae.currentWriteId,!0));else if(0===Ae.status)if(Ae.retryCount>=25)Dt=!0,Et="maxretry",A=A.concat(Oi(h.serverSyncTree_,Ae.currentWriteId,!0));else{const Bt=fr(h,Ae.path,G);Ae.currentInputSnapshot=Bt;const Mn=l[ce].update(Bt.val());if(void 0!==Mn){qa("transaction failed: Data returned ",Mn,Ae.path);let qn=gt(Mn);"object"==typeof Mn&&null!=Mn&&(0,Z.r3)(Mn,".priority")||(qn=qn.updatePriority(Bt.getPriority()));const Ki=Ae.currentWriteId,zu=jo(h),Vl=Uo(qn,Bt,zu);Ae.currentOutputSnapshotRaw=qn,Ae.currentOutputSnapshotResolved=Vl,Ae.currentWriteId=_u(h),G.splice(G.indexOf(Ki),1),A=A.concat(Ml(h.serverSyncTree_,Ae.path,Vl,Ae.currentWriteId,Ae.applyLocally)),A=A.concat(Oi(h.serverSyncTree_,Ki,!0))}else Dt=!0,Et="nodata",A=A.concat(Oi(h.serverSyncTree_,Ae.currentWriteId,!0))}os(h.eventQueue_,c,A),A=[],Dt&&(l[ce].status=2,setTimeout(l[ce].unwatcher,Math.floor(0)),l[ce].onComplete&&_.push("nodata"===Et?()=>l[ce].onComplete(null,!1,l[ce].currentInputSnapshot):()=>l[ce].onComplete(new Error(Et),!1,null)))}Vr(h,h.transactionQueueTree_);for(let ce=0;ce<_.length;ce++)gn(_[ce]);hi(h,h.transactionQueueTree_)}(h,ul(h,c),_),_}function Ja(h,l){let c,_=h.transactionQueueTree_;for(c=Ln(l);null!==c&&void 0===ho(_);)_=Vo(_,c),c=Ln(l=Oe(l));return _}function ul(h,l){const c=[];return fd(h,l,c),c.sort((_,A)=>_.order-A.order),c}function fd(h,l,c){const _=ho(l);if(_)for(let A=0;A<_.length;A++)c.push(_[A]);ku(l,A=>{fd(h,A,c)})}function Vr(h,l){const c=ho(l);if(c){let _=0;for(let A=0;A<c.length;A++)2!==c[A].status&&(c[_]=c[A],_++);c.length=_,Bo(l,c.length>0?c:void 0)}ku(l,_=>{Vr(h,_)})}function ll(h,l){const c=wa(Ja(h,l)),_=Vo(h.transactionQueueTree_,l);return function bs(h,l,c){let _=c?h:h.parent;for(;null!==_;){if(l(_))return!0;_=_.parent}}(_,A=>{ju(h,A)}),ju(h,_),Ea(_,A=>{ju(h,A)}),c}function ju(h,l){const c=ho(l);if(c){const _=[];let A=[],L=-1;for(let G=0;G<c.length;G++)3===c[G].status||(1===c[G].status?((0,Z.hu)(L===G-1,"All SENT items should be at beginning of queue."),L=G,c[G].status=3,c[G].abortReason="set"):((0,Z.hu)(0===c[G].status,"Unexpected transaction status in abort"),c[G].unwatcher(),A=A.concat(Oi(h.serverSyncTree_,c[G].currentWriteId,!0)),c[G].onComplete&&_.push(c[G].onComplete.bind(null,new Error("set"),!1,null))));-1===L?Bo(l,void 0):c.length=L+1,os(h.eventQueue_,wa(l),A);for(let G=0;G<_.length;G++)gn(_[G])}}const eu=function(h,l){const c=ic(h),_=c.namespace;return"firebase.com"===c.domain&&fe(c.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!_||"undefined"===_)&&"localhost"!==c.domain&&fe("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),c.secure||"undefined"!=typeof window&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Lt("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Ot(c.host,c.secure,_,l,"ws"===c.scheme||"wss"===c.scheme,"",_!==c.subdomain),path:new er(c.pathString)}},ic=function(h){let l="",c="",_="",A="",L="",G=!0,ce="https",Ae=443;if("string"==typeof h){let Be=h.indexOf("//");Be>=0&&(ce=h.substring(0,Be-1),h=h.substring(Be+2));let Dt=h.indexOf("/");-1===Dt&&(Dt=h.length);let Et=h.indexOf("?");-1===Et&&(Et=h.length),l=h.substring(0,Math.min(Dt,Et)),Dt<Et&&(A=function cl(h){let l="";const c=h.split("/");for(let _=0;_<c.length;_++)if(c[_].length>0){let A=c[_];try{A=decodeURIComponent(A.replace(/\+/g," "))}catch(L){}l+="/"+A}return l}(h.substring(Dt,Et)));const Bt=function Xa(h){const l={};"?"===h.charAt(0)&&(h=h.substring(1));for(const c of h.split("&")){if(0===c.length)continue;const _=c.split("=");2===_.length?l[decodeURIComponent(_[0])]=decodeURIComponent(_[1]):Lt(`Invalid query segment '${c}' in query '${h}'`)}return l}(h.substring(Math.min(h.length,Et)));Be=l.indexOf(":"),Be>=0?(G="https"===ce||"wss"===ce,Ae=parseInt(l.substring(Be+1),10)):Be=l.length;const Mn=l.slice(0,Be);if("localhost"===Mn.toLowerCase())c="localhost";else if(Mn.split(".").length<=2)c=Mn;else{const qn=l.indexOf(".");_=l.substring(0,qn).toLowerCase(),c=l.substring(qn+1),L=_}"ns"in Bt&&(L=Bt.ns)}return{host:l,port:Ae,domain:c,subdomain:_,secure:G,scheme:ce,pathString:A,namespace:L}};class tu{constructor(l,c,_,A){this.eventType=l,this.eventRegistration=c,this.snapshot=_,this.prevName=A}getPath(){const l=this.snapshot.ref;return"value"===this.eventType?l._path:l.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,Z.Pz)(this.snapshot.exportVal())}}class _i{constructor(l,c,_){this.eventRegistration=l,this.error=c,this.path=_}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class Nl{constructor(l,c){this.snapshotCallback=l,this.cancelCallback=c}onValue(l,c){this.snapshotCallback.call(null,l,c)}onCancel(l){return(0,Z.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,l)}get hasCancelCallback(){return!!this.cancelCallback}matches(l){return this.snapshotCallback===l.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===l.snapshotCallback.userCallback&&this.snapshotCallback.context===l.snapshotCallback.context}}class sc{constructor(l,c){this._repo=l,this._path=c}cancel(){const l=new Z.BH;return hd(this._repo,this._path,l.wrapCallback(()=>{})),l.promise}remove(){ss("OnDisconnect.remove",this._path);const l=new Z.BH;return D(this._repo,this._path,null,l.wrapCallback(()=>{})),l.promise}set(l){ss("OnDisconnect.set",this._path),oa("OnDisconnect.set",l,this._path,!1);const c=new Z.BH;return D(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}setWithPriority(l,c){ss("OnDisconnect.setWithPriority",this._path),oa("OnDisconnect.setWithPriority",l,this._path,!1),Vu("OnDisconnect.setWithPriority",c,!1);const _=new Z.BH;return function g(h,l,c,_,A){const L=gt(c,_);h.server_.onDisconnectPut(l.toString(),L.val(!0),(G,ce)=>{"ok"===G&&pi(h.onDisconnect_,l,L),ln(0,A,G,ce)})}(this._repo,this._path,l,c,_.wrapCallback(()=>{})),_.promise}update(l){ss("OnDisconnect.update",this._path),dd("OnDisconnect.update",l,this._path,!1);const c=new Z.BH;return function y(h,l,c,_){if((0,Z.xb)(c))return rt("onDisconnect().update() called with empty data.  Don't do anything."),void ln(0,_,"ok",void 0);h.server_.onDisconnectMerge(l.toString(),c,(A,L)=>{"ok"===A&&Ce(c,(G,ce)=>{const Ae=gt(ce);pi(h.onDisconnect_,en(l,G),Ae)}),ln(0,_,A,L)})}(this._repo,this._path,l,c.wrapCallback(()=>{})),c.promise}}class $r{constructor(l,c,_,A){this._repo=l,this._path=c,this._queryParams=_,this._orderByCalled=A}get key(){return wn(this._path)?null:Le(this._path)}get ref(){return new Vs(this._repo,this._path)}get _queryIdentifier(){const l=Yu(this._queryParams),c=ut(l);return"{}"===c?"default":c}get _queryObject(){return Yu(this._queryParams)}isEqual(l){if(!((l=(0,Z.m9)(l))instanceof $r))return!1;const c=this._repo===l._repo,_=Xr(this._path,l._path);return c&&_&&this._queryIdentifier===l._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function _t(h){let l="";for(let c=h.pieceNum_;c<h.pieces_.length;c++)""!==h.pieces_[c]&&(l+="/"+encodeURIComponent(String(h.pieces_[c])));return l||"/"}(this._path)}}function Mc(h,l){if(!0===h._orderByCalled)throw new Error(l+": You can't combine multiple orderBy calls.")}function $u(h){let l=null,c=null;if(h.hasStart()&&(l=h.getIndexStartValue()),h.hasEnd()&&(c=h.getIndexEndValue()),h.getIndex()===ai){const _="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",A="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(h.hasStart()){if(h.getIndexStartName()!==We)throw new Error(_);if("string"!=typeof l)throw new Error(A)}if(h.hasEnd()){if(h.getIndexEndName()!==Qe)throw new Error(_);if("string"!=typeof c)throw new Error(A)}}else if(h.getIndex()===xr){if(null!=l&&!mu(l)||null!=c&&!mu(c))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,Z.hu)(h.getIndex()instanceof Vt||h.getIndex()===kr,"unknown index type."),null!=l&&"object"==typeof l||null!=c&&"object"==typeof c)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function Ol(h){if(h.hasStart()&&h.hasEnd()&&h.hasLimit()&&!h.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Vs extends $r{constructor(l,c){super(l,c,new F,!1)}get parent(){const l=zt(this._path);return null===l?null:new Vs(this._repo,l)}get root(){let l=this;for(;null!==l.parent;)l=l.parent;return l}}class Hu{constructor(l,c,_){this._node=l,this.ref=c,this._index=_}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(l){const c=new er(l),_=vu(this.ref,l);return new Hu(this._node.getChild(c),_,xr)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(l){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(_,A)=>l(new Hu(A,vu(this.ref,_),xr)))}hasChild(l){const c=new er(l);return!this._node.getChild(c).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function pd(h,l){return(h=(0,Z.m9)(h))._checkNotDeleted("ref"),void 0!==l?vu(h._root,l):h._root}function Ts(h,l){(h=(0,Z.m9)(h))._checkNotDeleted("refFromURL");const c=eu(l,h._repo.repoInfo_.nodeAdmin);Ac("refFromURL",c);const _=c.repoInfo;return!h._repo.repoInfo_.isCustomHost()&&_.host!==h._repo.repoInfo_.host&&fe("refFromURL: Host name does not match the current database: (found "+_.host+" but expected "+h._repo.repoInfo_.host+")"),pd(h,c.path.toString())}function vu(h,l){return null===Ln((h=(0,Z.m9)(h))._path)?(c=l,c&&(c=c.replace(/^\/*\.info(\/|$)/,"/")),Us("child","path",c,!1)):Us("child","path",l,!1),new Vs(h._repo,en(h._path,l));var c}function oc(h,l){h=(0,Z.m9)(h),ss("push",h._path),oa("push",l,h._path,!0);const c=il(h._repo),_=Ur(c),A=vu(h,_),L=vu(h,_);let G;return G=null!=l?wu(L,l).then(()=>L):Promise.resolve(L),A.then=G.then.bind(G),A.catch=G.then.bind(G,void 0),A}function Eu(h){return ss("remove",h._path),wu(h,null)}function wu(h,l){h=(0,Z.m9)(h),ss("set",h._path),oa("set",l,h._path,!1);const c=new Z.BH;return rc(h._repo,h._path,l,null,c.wrapCallback(()=>{})),c.promise}function Ds(h,l){h=(0,Z.m9)(h),ss("setPriority",h._path),Vu("setPriority",l,!1);const c=new Z.BH;return rc(h._repo,en(h._path,".priority"),l,null,c.wrapCallback(()=>{})),c.promise}function Wu(h,l,c){if(ss("setWithPriority",h._path),oa("setWithPriority",l,h._path,!1),Vu("setWithPriority",c,!1),".length"===h.key||".keys"===h.key)throw"setWithPriority failed: "+h.key+" is a read-only object.";const _=new Z.BH;return rc(h._repo,h._path,l,c,_.wrapCallback(()=>{})),_.promise}function gd(h,l){dd("update",l,h._path,!1);const c=new Z.BH;return function ol(h,l,c,_){Ft(h,"update",{path:l.toString(),value:c});let A=!0;const L=jo(h),G={};if(Ce(c,(ce,Ae)=>{A=!1,G[ce]=ya(en(l,ce),gt(Ae),h.serverSyncTree_,L)}),A)rt("update() called with empty data.  Don't do anything."),ln(0,_,"ok",void 0);else{const ce=_u(h),Ae=function Tc(h,l,c,_){!function ka(h,l,c,_){(0,Z.hu)(_>h.lastWriteId,"Stacking an older merge on top of newer ones"),h.allWrites.push({path:l,children:c,writeId:_,visible:!0}),h.visibleWrites=Fo(h.visibleWrites,l,c),h.lastWriteId=_}(h.pendingWriteTree_,l,c,_);const A=Nr.fromObject(c);return $a(h,new Yi({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},l,A))}(h.serverSyncTree_,l,G,ce);ba(h.eventQueue_,Ae),h.server_.merge(l.toString(),c,(Be,Dt)=>{const Et="ok"===Be;Et||Lt("update at "+l+" failed: "+Be);const Bt=Oi(h.serverSyncTree_,ce,!Et),Mn=Bt.length>0?$o(h,l):l;os(h.eventQueue_,Mn,Bt),ln(0,_,Be,Dt)}),Ce(c,Be=>{const Dt=ll(h,en(l,Be));$o(h,Dt)}),os(h.eventQueue_,l,[])}}(h._repo,h._path,l,c.wrapCallback(()=>{})),c.promise}function dl(h){return function nc(h,l){const c=function co(h,l){const c=l._path;let _=null;h.syncPointTree_.foreachOnPath(c,(Be,Dt)=>{const Et=vr(Be,c);_=_||_s(Dt,Et)});let A=h.syncPointTree_.get(c);A?_=_||_s(A,$n()):(A=new Ql,h.syncPointTree_=h.syncPointTree_.set(c,A));const L=null!=_,G=L?new zs(_,!0,!1):null;return function Fr(h){return Na(h.viewCache_)}(Zs(A,l,Ns(h.pendingWriteTree_,l._path),L?G.getNode():J.EMPTY_NODE,L))}(h.serverSyncTree_,l);return null!=c?Promise.resolve(c):h.server_.get(l).then(_=>{const A=gt(_).withIndex(l._queryParams.getIndex()),L=fu(h.serverSyncTree_,l._path,A);return nl(h.eventQueue_,l._path,L),Promise.resolve(A)},_=>(Ft(h,"get for query "+(0,Z.Pz)(l)+" failed: "+_),Promise.reject(new Error(_))))}((h=(0,Z.m9)(h))._repo,h).then(l=>new Hu(l,new Vs(h._repo,h._path),h._queryParams.getIndex()))}class ki{constructor(l){this.callbackContext=l}respondsTo(l){return"value"===l}createEvent(l,c){const _=c._queryParams.getIndex();return new tu("value",this,new Hu(l.snapshotNode,new Vs(c._repo,c._path),_))}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,null)}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new _i(this,l,c):null}matches(l){return l instanceof ki&&(!l.callbackContext||!this.callbackContext||l.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class zi{constructor(l,c){this.eventType=l,this.callbackContext=c}respondsTo(l){let c="children_added"===l?"child_added":l;return c="children_removed"===c?"child_removed":c,this.eventType===c}createCancelEvent(l,c){return this.callbackContext.hasCancelCallback?new _i(this,l,c):null}createEvent(l,c){(0,Z.hu)(null!=l.childName,"Child events should have a childName.");const _=vu(new Vs(c._repo,c._path),l.childName),A=c._queryParams.getIndex();return new tu(l.type,this,new Hu(l.snapshotNode,_,A),l.prevName)}getEventRunner(l){return"cancel"===l.getEventType()?()=>this.callbackContext.onCancel(l.error):()=>this.callbackContext.onValue(l.snapshot,l.prevName)}matches(l){return l instanceof zi&&this.eventType===l.eventType&&(!this.callbackContext||!l.callbackContext||this.callbackContext.matches(l.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function hl(h,l,c,_,A){let L;if("object"==typeof _&&(L=void 0,A=_),"function"==typeof _&&(L=_),A&&A.onlyOnce){const Ae=c,Be=(Dt,Et)=>{ee(h._repo,h,ce),Ae(Dt,Et)};Be.userCallback=c.userCallback,Be.context=c.context,c=Be}const G=new Nl(c,L||void 0),ce="value"===l?new ki(G):new zi(l,G);return function M(h,l,c){let _;_=".info"===Ln(l._path)?ec(h.infoSyncTree_,l,c):ec(h.serverSyncTree_,l,c),nl(h.eventQueue_,l._path,_)}(h._repo,h,ce),()=>ee(h._repo,h,ce)}function kl(h,l,c,_){return hl(h,"value",l,c,_)}function md(h,l,c,_){return hl(h,"child_added",l,c,_)}function Bd(h,l,c,_){return hl(h,"child_changed",l,c,_)}function jd(h,l,c,_){return hl(h,"child_moved",l,c,_)}function _d(h,l,c,_){return hl(h,"child_removed",l,c,_)}function ac(h,l,c){let _=null;const A=c?new Nl(c):null;"value"===l?_=new ki(A):l&&(_=new zi(l,A)),ee(h._repo,h,_)}class Ho{}class uc extends Ho{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){oa("endAt",this._value,l._path,!0);const c=Ai(l._queryParams,this._value,this._key);if(Ol(c),$u(c),l._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $r(l._repo,l._path,c,l._orderByCalled)}}function yd(h,l){return Co("endAt","key",l,!0),new uc(h,l)}class Ta extends Ho{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){oa("endBefore",this._value,l._path,!1);const c=function rs(h,l,c){let _,A;return h.index_===ai?("string"==typeof l&&(l=fs(l)),A=Ai(h,l,c)):(_=null==c?We:fs(c),A=Ai(h,l,_)),A.endBeforeSet_=!0,A}(l._queryParams,this._value,this._key);if(Ol(c),$u(c),l._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new $r(l._repo,l._path,c,l._orderByCalled)}}function fl(h,l){return Co("endBefore","key",l,!0),new Ta(h,l)}class bo extends Ho{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){oa("startAt",this._value,l._path,!0);const c=tr(l._queryParams,this._value,this._key);if(Ol(c),$u(c),l._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new $r(l._repo,l._path,c,l._orderByCalled)}}function vd(h=null,l){return Co("startAt","key",l,!0),new bo(h,l)}class Rc extends Ho{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){oa("startAfter",this._value,l._path,!1);const c=function ns(h,l,c){let _;if(h.index_===ai)"string"==typeof l&&(l=zr(l)),_=tr(h,l,c);else{let A;A=null==c?Qe:zr(c),_=tr(h,l,A)}return _.startAfterSet_=!0,_}(l._queryParams,this._value,this._key);if(Ol(c),$u(c),l._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new $r(l._repo,l._path,c,l._orderByCalled)}}function Ih(h,l){return Co("startAfter","key",l,!0),new Rc(h,l)}class lc extends Ho{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new $r(l._repo,l._path,function tt(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="l",c}(l._queryParams,this._limit),l._orderByCalled)}}function As(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new lc(h)}class Ch extends Ho{constructor(l){super(),this._limit=l}_apply(l){if(l._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new $r(l._repo,l._path,function Sn(h,l){const c=h.copy();return c.limitSet_=!0,c.limit_=l,c.viewFrom_="r",c}(l._queryParams,this._limit),l._orderByCalled)}}function $d(h){if("number"!=typeof h||Math.floor(h)!==h||h<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new Ch(h)}class Da extends Ho{constructor(l){super(),this._path=l}_apply(l){Mc(l,"orderByChild");const c=new er(this._path);if(wn(c))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const _=new Vt(c),A=oo(l._queryParams,_);return $u(A),new $r(l._repo,l._path,A,!0)}}function Hd(h){if("$key"===h)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===h)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===h)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return Us("orderByChild","path",h,!1),new Da(h)}class cc extends Ho{_apply(l){Mc(l,"orderByKey");const c=oo(l._queryParams,ai);return $u(c),new $r(l._repo,l._path,c,!0)}}function Wd(){return new cc}class Aa extends Ho{_apply(l){Mc(l,"orderByPriority");const c=oo(l._queryParams,xr);return $u(c),new $r(l._repo,l._path,c,!0)}}function Ed(){return new Aa}class Gd extends Ho{_apply(l){Mc(l,"orderByValue");const c=oo(l._queryParams,kr);return $u(c),new $r(l._repo,l._path,c,!0)}}function zd(){return new Gd}class bh extends Ho{constructor(l,c){super(),this._value=l,this._key=c}_apply(l){if(oa("equalTo",this._value,l._path,!1),l._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(l._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new uc(this._value,this._key)._apply(new bo(this._value,this._key)._apply(l))}}function Kd(h,l){return Co("equalTo","key",l,!0),new bh(h,l)}function qd(h,...l){let c=(0,Z.m9)(h);for(const _ of l)c=_._apply(c);return c}(function vn(h){(0,Z.hu)(!Va,"__referenceConstructor has already been defined"),Va=h})(Vs),function el(h){(0,Z.hu)(!Ys,"__referenceConstructor has already been defined"),Ys=h}(Vs);const aa={};function dc(h,l,c,_,A){let L=_||h.options.databaseURL;void 0===L&&(h.options.projectId||fe("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),rt("Using default host for project ",h.options.projectId),L=`${h.options.projectId}-default-rtdb.firebaseio.com`);let Ae,Be,G=eu(L,A),ce=G.repoInfo;"undefined"!=typeof process&&(Be=process.env.FIREBASE_DATABASE_EMULATOR_HOST),Be?(Ae=!0,L=`http://${Be}?ns=${ce.namespace}`,G=eu(L,A),ce=G.repoInfo):Ae=!G.repoInfo.secure;const Dt=A&&Ae?new xn(xn.OWNER):new zn(h.name,h.options,l);Ac("Invalid Firebase Database URL",G),wn(G.path)||fe("Database URL must point to the root of a Firebase Database (not including a child path).");const Et=function nu(h,l,c,_){let A=aa[l.name];A||(A={},aa[l.name]=A);let L=A[h.toURLString()];return L&&fe("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),L=new rl(h,false,c,_),A[h.toURLString()]=L,L}(ce,h,Dt,new Qn(h.name,c));return new Nc(Et,h)}class Nc{constructor(l,c){this._repoInternal=l,this.app=c,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function Vd(h,l,c){if(h.stats_=Ar(h.repoInfo_),h.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)h.server_=new Ma(h.repoInfo_,(_,A,L,G)=>{Ya(h,_,A,L,G)},h.authTokenProvider_,h.appCheckProvider_),setTimeout(()=>xc(h,!0),0);else{if(null!=c){if("object"!=typeof c)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,Z.Pz)(c)}catch(_){throw new Error("Invalid authOverride provided: "+_)}}h.persistentConnection_=new di(h.repoInfo_,l,(_,A,L,G)=>{Ya(h,_,A,L,G)},_=>{xc(h,_)},_=>{!function sl(h,l){Ce(l,(c,_)=>{Qa(h,c,_)})}(h,_)},h.authTokenProvider_,h.appCheckProvider_,c),h.server_=h.persistentConnection_}h.authTokenProvider_.addTokenChangeListener(_=>{h.server_.refreshAuthToken(_)}),h.appCheckProvider_.addTokenChangeListener(_=>{h.server_.refreshAppCheckToken(_.token)}),h.statsReporter_=function Jn(h,l){const c=h.toString();return Bn[c]||(Bn[c]=l()),Bn[c]}(h.repoInfo_,()=>new Si(h.stats_,h.server_)),h.infoData_=new Ra,h.infoSyncTree_=new Mu({startListening:(_,A,L,G)=>{let ce=[];const Ae=h.infoData_.getNode(_._path);return Ae.isEmpty()||(ce=fu(h.infoSyncTree_,_._path,Ae),setTimeout(()=>{G("ok")},0)),ce},stopListening:()=>{}}),Qa(h,"connected",!1),h.serverSyncTree_=new Mu({startListening:(_,A,L,G)=>(h.server_.listen(_,L,A,(ce,Ae)=>{const Be=G(ce,Ae);os(h.eventQueue_,_._path,Be)}),[]),stopListening:(_,A)=>{h.server_.unlisten(_,A)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Vs(this._repo,$n())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function af(h,l){const c=aa[l];(!c||c[h.key]!==h)&&fe(`Database ${l}(${h.repoInfo_}) has already been deleted.`),pe(h),delete c[h.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(l){null===this._rootInternal&&fe("Cannot call "+l+" on a deleted database.")}}function fo(h=(0,T.getApp)(),l){return(0,T._getProvider)(h,"database").getImmediate({identifier:l})}function Ll(h,l,c,_={}){(h=(0,Z.m9)(h))._checkNotDeleted("useEmulator"),h._instanceStarted&&fe("Cannot call useEmulator() after instance has already been initialized.");const A=h._repoInternal;let L;if(A.repoInfo_.nodeAdmin)_.mockUserToken&&fe('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),L=new xn(xn.OWNER);else if(_.mockUserToken){const G="string"==typeof _.mockUserToken?_.mockUserToken:(0,Z.Sg)(_.mockUserToken,h.app.options.projectId);L=new xn(G)}!function Gu(h,l,c,_){h.repoInfo_=new Ot(`${l}:${c}`,!1,h.repoInfo_.namespace,h.repoInfo_.webSocketOnly,h.repoInfo_.nodeAdmin,h.repoInfo_.persistenceKey,h.repoInfo_.includeNamespaceInQueryParams),_&&(h.authTokenProvider_=_)}(A,l,c,L)}function hc(h){(h=(0,Z.m9)(h))._checkNotDeleted("goOffline"),pe(h._repo)}function pl(h){(h=(0,Z.m9)(h))._checkNotDeleted("goOnline"),function ct(h){h.persistentConnection_&&h.persistentConnection_.resume($i)}(h._repo)}function wd(h,l){st(h,l)}const gl={".sv":"timestamp"};function ua(){return gl}function Zd(h){return{".sv":{increment:h}}}class Sa{constructor(l,c){this.committed=l,this.snapshot=c}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}function ru(h,l,c){var _;if(h=(0,Z.m9)(h),ss("Reference.transaction",h._path),".length"===h.key||".keys"===h.key)throw"Reference.transaction failed: "+h.key+" is a read-only object.";const A=null===(_=null==c?void 0:c.applyLocally)||void 0===_||_,L=new Z.BH,ce=kl(h,()=>{});return function ir(h,l,c,_,A,L){Ft(h,"transaction on "+l);const G={path:l,update:c,onComplete:_,status:null,order:Ct(),applyLocally:L,retryCount:0,unwatcher:A,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},ce=fr(h,l,void 0);G.currentInputSnapshot=ce;const Ae=G.update(ce.val());if(void 0===Ae)G.unwatcher(),G.currentOutputSnapshotRaw=null,G.currentOutputSnapshotResolved=null,G.onComplete&&G.onComplete(null,!1,G.currentInputSnapshot);else{qa("transaction failed: Data returned ",Ae,G.path),G.status=0;const Be=Vo(h.transactionQueueTree_,l),Dt=ho(Be)||[];let Et;Dt.push(G),Bo(Be,Dt),"object"==typeof Ae&&null!==Ae&&(0,Z.r3)(Ae,".priority")?(Et=(0,Z.DV)(Ae,".priority"),(0,Z.hu)(mu(Et),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):Et=(pu(h.serverSyncTree_,l)||J.EMPTY_NODE).getPriority().val();const Bt=jo(h),Mn=gt(Ae,Et),qn=Uo(Mn,ce,Bt);G.currentOutputSnapshotRaw=Mn,G.currentOutputSnapshotResolved=qn,G.currentWriteId=_u(h);const Or=Ml(h.serverSyncTree_,l,qn,G.currentWriteId,G.applyLocally);os(h.eventQueue_,l,Or),hi(h,h.transactionQueueTree_)}}(h._repo,h._path,l,(Ae,Be,Dt)=>{let Et=null;Ae?L.reject(Ae):(Et=new Hu(Dt,new Vs(h._repo,h._path),xr),L.resolve(new Sa(Be,Et)))},ce,A),L.promise}di.prototype.simpleListen=function(h,l){this.sendRequest("q",{p:h},l)},di.prototype.echo=function(h,l){this.sendRequest("echo",{d:h},l)},function Nt(h){He(T.SDK_VERSION),(0,T._registerComponent)(new P.wA("database",(l,{instanceIdentifier:c})=>dc(l.getProvider("app").getImmediate(),l.getProvider("auth-internal"),l.getProvider("app-check-internal"),c),"PUBLIC").setMultipleInstances(!0)),(0,T.registerVersion)(Se,"0.12.7",h),(0,T.registerVersion)(Se,"0.12.7","esm2017")}()},5525:(rn,et,N)=>{N.d(et,{u7:()=>Qf,Jj:()=>Wl,IX:()=>gh,my:()=>xs,xU:()=>ed,Lz:()=>Hl,WA:()=>Jt,F8:()=>dg,$q:()=>_h,W:()=>td,EK:()=>W,PU:()=>Jf,l7:()=>na,Ky:()=>vn,Xb:()=>rr,Cf:()=>Qr,K9:()=>ql,Me:()=>Os,yq:()=>qs,Wi:()=>ug,ET:()=>K_,Ab:()=>Wm,vr:()=>Z_,Fc:()=>P_,hJ:()=>D_,B$:()=>qy,at:()=>Ky,oe:()=>z_,AK:()=>Hm,TF:()=>k_,JU:()=>A_,ST:()=>R_,fH:()=>Em,Ix:()=>O_,Wu:()=>vh,Lx:()=>km,qY:()=>Bs,GL:()=>Eh,QT:()=>H_,kl:()=>zl,Xk:()=>Al,PL:()=>Sl,UQ:()=>Bm,zN:()=>jm,ad:()=>M_,nP:()=>Gm,b9:()=>Pm,vh:()=>j_,Pb:()=>L_,L$:()=>Im,cf:()=>wg,sc:()=>tf,Xo:()=>B_,IO:()=>Yy,iE:()=>_m,Eo:()=>Zy,i3:()=>$m,Bt:()=>ep,pl:()=>W_,Ub:()=>bc,qK:()=>Mm,TQ:()=>$_,e0:()=>Om,r7:()=>G_,Mx:()=>N_,ar:()=>V_});var he,f=N(5861),T=N(9681),P=N(4859),Z=N(1877),we=N(2090),Se="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},Pe={},He=He||{},ae=Se||self;function ve(){}function De(i){var e=typeof i;return"array"==(e="object"!=e?e:i?Array.isArray(i)?"array":e:"null")||"object"==e&&"number"==typeof i.length}function ot(i){var e=typeof i;return"object"==e&&null!=i||"function"==e}var dt="closure_uid_"+(1e9*Math.random()>>>0),Ct=0;function be(i,e,n){return i.call.apply(i.bind,arguments)}function mt(i,e,n){if(!i)throw Error();if(2<arguments.length){var o=Array.prototype.slice.call(arguments,2);return function(){var u=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(u,o),i.apply(e,u)}}return function(){return i.apply(e,arguments)}}function Mt(i,e,n){return(Mt=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?be:mt).apply(null,arguments)}function Pt(i,e){var n=Array.prototype.slice.call(arguments,1);return function(){var o=n.slice();return o.push.apply(o,arguments),i.apply(this,o)}}function st(i,e){function n(){}n.prototype=e.prototype,i.Z=e.prototype,i.prototype=new n,i.prototype.constructor=i,i.Vb=function(o,u,m){for(var I=Array(arguments.length-2),O=2;O<arguments.length;O++)I[O-2]=arguments[O];return e.prototype[u].apply(o,I)}}function rt(){this.s=this.s,this.o=this.o}var ke={};rt.prototype.s=!1,rt.prototype.na=function(){if(!this.s&&(this.s=!0,this.M(),0)){var i=function at(i){return Object.prototype.hasOwnProperty.call(i,dt)&&i[dt]||(i[dt]=++Ct)}(this);delete ke[i]}},rt.prototype.M=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const fe=Array.prototype.indexOf?function(i,e){return Array.prototype.indexOf.call(i,e,void 0)}:function(i,e){if("string"==typeof i)return"string"!=typeof e||1!=e.length?-1:i.indexOf(e,0);for(let n=0;n<i.length;n++)if(n in i&&i[n]===e)return n;return-1},Lt=Array.prototype.forEach?function(i,e,n){Array.prototype.forEach.call(i,e,n)}:function(i,e,n){const o=i.length,u="string"==typeof i?i.split(""):i;for(let m=0;m<o;m++)m in u&&e.call(n,u[m],m,i)};function it(i){return Array.prototype.concat.apply([],arguments)}function xe(i){const e=i.length;if(0<e){const n=Array(e);for(let o=0;o<e;o++)n[o]=i[o];return n}return[]}function We(i){return/^[\s\xa0]*$/.test(i)}var Wt,Qe=String.prototype.trim?function(i){return i.trim()}:function(i){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(i)[1]};function Ne(i,e){return-1!=i.indexOf(e)}function dn(i,e){return i<e?-1:i>e?1:0}e:{var ut=ae.navigator;if(ut){var nt=ut.userAgent;if(nt){Wt=nt;break e}}Wt=""}function Ce(i,e,n){for(const o in i)e.call(n,i[o],o,i)}function $t(i){const e={};for(const n in i)e[n]=i[n];return e}var an="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function Rn(i,e){let n,o;for(let u=1;u<arguments.length;u++){for(n in o=arguments[u],o)i[n]=o[n];for(let m=0;m<an.length;m++)n=an[m],Object.prototype.hasOwnProperty.call(o,n)&&(i[n]=o[n])}}function sn(i){return sn[" "](i),i}sn[" "]=ve;var zn,i,St=Ne(Wt,"Opera"),Yt=Ne(Wt,"Trident")||Ne(Wt,"MSIE"),Kt=Ne(Wt,"Edge"),gn=Kt||Yt,Cn=Ne(Wt,"Gecko")&&!(Ne(Wt.toLowerCase(),"webkit")&&!Ne(Wt,"Edge"))&&!(Ne(Wt,"Trident")||Ne(Wt,"MSIE"))&&!Ne(Wt,"Edge"),Pn=Ne(Wt.toLowerCase(),"webkit")&&!Ne(Wt,"Edge");function Qn(){var i=ae.document;return i?i.documentMode:void 0}e:{var xn="",sr=(i=Wt,Cn?/rv:([^\);]+)(\)|;)/.exec(i):Kt?/Edge\/([\d\.]+)/.exec(i):Yt?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(i):Pn?/WebKit\/(\S+)/.exec(i):St?/(?:Version)[ \/]?(\S+)/.exec(i):void 0);if(sr&&(xn=sr?sr[1]:""),Yt){var wt=Qn();if(null!=wt&&wt>parseFloat(xn)){zn=String(wt);break e}}zn=xn}var Xe={};var Nn=ae.document&&Yt&&(Qn()||parseInt(zn,10))||void 0,Vn=function(){if(!ae.addEventListener||!Object.defineProperty)return!1;var i=!1,e=Object.defineProperty({},"passive",{get:function(){i=!0}});try{ae.addEventListener("test",ve,e),ae.removeEventListener("test",ve,e)}catch(n){}return i}();function Dn(i,e){this.type=i,this.g=this.target=e,this.defaultPrevented=!1}function Hn(i,e){if(Dn.call(this,i?i.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,i){var n=this.type=i.type,o=i.changedTouches&&i.changedTouches.length?i.changedTouches[0]:null;if(this.target=i.target||i.srcElement,this.g=e,e=i.relatedTarget){if(Cn){e:{try{sn(e.nodeName);var u=!0;break e}catch(m){}u=!1}u||(e=null)}}else"mouseover"==n?e=i.fromElement:"mouseout"==n&&(e=i.toElement);this.relatedTarget=e,o?(this.clientX=void 0!==o.clientX?o.clientX:o.pageX,this.clientY=void 0!==o.clientY?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0):(this.clientX=void 0!==i.clientX?i.clientX:i.pageX,this.clientY=void 0!==i.clientY?i.clientY:i.pageY,this.screenX=i.screenX||0,this.screenY=i.screenY||0),this.button=i.button,this.key=i.key||"",this.ctrlKey=i.ctrlKey,this.altKey=i.altKey,this.shiftKey=i.shiftKey,this.metaKey=i.metaKey,this.pointerId=i.pointerId||0,this.pointerType="string"==typeof i.pointerType?i.pointerType:Kn[i.pointerType]||"",this.state=i.state,this.i=i,i.defaultPrevented&&Hn.Z.h.call(this)}}Dn.prototype.h=function(){this.defaultPrevented=!0},st(Hn,Dn);var Kn={2:"touch",3:"pen",4:"mouse"};Hn.prototype.h=function(){Hn.Z.h.call(this);var i=this.i;i.preventDefault?i.preventDefault():i.returnValue=!1};var Ot="closure_listenable_"+(1e6*Math.random()|0),hn=0;function Gt(i,e,n,o,u){this.listener=i,this.proxy=null,this.src=e,this.type=n,this.capture=!!o,this.ia=u,this.key=++hn,this.ca=this.fa=!1}function hr(i){i.ca=!0,i.listener=null,i.proxy=null,i.src=null,i.ia=null}function Tr(i){this.src=i,this.g={},this.h=0}function Bn(i,e){var n=e.type;if(n in i.g){var m,o=i.g[n],u=fe(o,e);(m=0<=u)&&Array.prototype.splice.call(o,u,1),m&&(hr(e),0==i.g[n].length&&(delete i.g[n],i.h--))}}function Ar(i,e,n,o){for(var u=0;u<i.length;++u){var m=i[u];if(!m.ca&&m.listener==e&&m.capture==!!n&&m.ia==o)return u}return-1}Tr.prototype.add=function(i,e,n,o,u){var m=i.toString();(i=this.g[m])||(i=this.g[m]=[],this.h++);var I=Ar(i,e,o,u);return-1<I?(e=i[I],n||(e.fa=!1)):((e=new Gt(e,this.src,m,!!o,u)).fa=n,i.push(e)),e};var Jn="closure_lm_"+(1e6*Math.random()|0),Fn={};function Ye(i,e,n,o,u){if(o&&o.once)return $(i,e,n,o,u);if(Array.isArray(e)){for(var m=0;m<e.length;m++)Ye(i,e[m],n,o,u);return null}return n=oe(n),i&&i[Ot]?i.N(e,n,ot(o)?!!o.capture:!!o,u):Fe(i,e,n,!1,o,u)}function Fe(i,e,n,o,u,m){if(!e)throw Error("Invalid event type");var I=ot(u)?!!u.capture:!!u,O=Ge(i);if(O||(i[Jn]=O=new Tr(i)),(n=O.add(e,n,o,I,m)).proxy)return n;if(o=function ue(){var e=Me;return function i(n){return e.call(i.src,i.listener,n)}}(),n.proxy=o,o.src=i,o.listener=n,i.addEventListener)Vn||(u=I),void 0===u&&(u=!1),i.addEventListener(e.toString(),o,u);else if(i.attachEvent)i.attachEvent(de(e.toString()),o);else{if(!i.addListener||!i.removeListener)throw Error("addEventListener and attachEvent are unavailable.");i.addListener(o)}return n}function $(i,e,n,o,u){if(Array.isArray(e)){for(var m=0;m<e.length;m++)$(i,e[m],n,o,u);return null}return n=oe(n),i&&i[Ot]?i.O(e,n,ot(o)?!!o.capture:!!o,u):Fe(i,e,n,!0,o,u)}function z(i,e,n,o,u){if(Array.isArray(e))for(var m=0;m<e.length;m++)z(i,e[m],n,o,u);else o=ot(o)?!!o.capture:!!o,n=oe(n),i&&i[Ot]?(i=i.i,(e=String(e).toString())in i.g&&-1<(n=Ar(m=i.g[e],n,o,u))&&(hr(m[n]),Array.prototype.splice.call(m,n,1),0==m.length&&(delete i.g[e],i.h--))):i&&(i=Ge(i))&&(e=i.g[e.toString()],i=-1,e&&(i=Ar(e,n,o,u)),(n=-1<i?e[i]:null)&&me(n))}function me(i){if("number"!=typeof i&&i&&!i.ca){var e=i.src;if(e&&e[Ot])Bn(e.i,i);else{var n=i.type,o=i.proxy;e.removeEventListener?e.removeEventListener(n,o,i.capture):e.detachEvent?e.detachEvent(de(n),o):e.addListener&&e.removeListener&&e.removeListener(o),(n=Ge(e))?(Bn(n,i),0==n.h&&(n.src=null,e[Jn]=null)):hr(i)}}}function de(i){return i in Fn?Fn[i]:Fn[i]="on"+i}function Me(i,e){if(i.ca)i=!0;else{e=new Hn(e,this);var n=i.listener,o=i.ia||i.src;i.fa&&me(i),i=n.call(o,e)}return i}function Ge(i){return(i=i[Jn])instanceof Tr?i:null}var le="__closure_events_fn_"+(1e9*Math.random()>>>0);function oe(i){return"function"==typeof i?i:(i[le]||(i[le]=function(e){return i.handleEvent(e)}),i[le])}function Ee(){rt.call(this),this.i=new Tr(this),this.P=this,this.I=null}function qe(i,e){var n,o=i.I;if(o)for(n=[];o;o=o.I)n.push(o);if(i=i.P,o=e.type||e,"string"==typeof e)e=new Dn(e,i);else if(e instanceof Dn)e.target=e.target||i;else{var u=e;Rn(e=new Dn(o,i),u)}if(u=!0,n)for(var m=n.length-1;0<=m;m--){var I=e.g=n[m];u=se(I,o,!0,e)&&u}if(u=se(I=e.g=i,o,!0,e)&&u,u=se(I,o,!1,e)&&u,n)for(m=0;m<n.length;m++)u=se(I=e.g=n[m],o,!1,e)&&u}function se(i,e,n,o){if(!(e=i.i.g[String(e)]))return!0;e=e.concat();for(var u=!0,m=0;m<e.length;++m){var I=e[m];if(I&&!I.ca&&I.capture==n){var O=I.listener,Q=I.ia||I.src;I.fa&&Bn(i.i,I),u=!1!==O.call(Q,o)&&u}}return u&&!o.defaultPrevented}st(Ee,rt),Ee.prototype[Ot]=!0,Ee.prototype.removeEventListener=function(i,e,n,o){z(this,i,e,n,o)},Ee.prototype.M=function(){if(Ee.Z.M.call(this),this.i){var e,i=this.i;for(e in i.g){for(var n=i.g[e],o=0;o<n.length;o++)hr(n[o]);delete i.g[e],i.h--}}this.I=null},Ee.prototype.N=function(i,e,n,o){return this.i.add(String(i),e,!1,n,o)},Ee.prototype.O=function(i,e,n,o){return this.i.add(String(i),e,!0,n,o)};var ge=ae.JSON.stringify;function ye(){var i=or;let e=null;return i.g&&(e=i.g,i.g=i.g.next,i.g||(i.h=null),e.next=null),e}var On,yt=new class{constructor(i,e){this.i=i,this.j=e,this.h=0,this.g=null}get(){let i;return 0<this.h?(this.h--,i=this.g,this.g=i.next,i.next=null):i=this.i(),i}}(()=>new Qt,i=>i.reset());class Qt{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function bn(i){ae.setTimeout(()=>{throw i},0)}function fn(i,e){On||function mr(){var i=ae.Promise.resolve(void 0);On=function(){i.then($e)}}(),Rr||(On(),Rr=!0),or.add(i,e)}var Rr=!1,or=new class lt{constructor(){this.h=this.g=null}add(e,n){const o=yt.get();o.set(e,n),this.h?this.h.next=o:this.g=o,this.h=o}};function $e(){for(var i;i=ye();){try{i.h.call(i.g)}catch(n){bn(n)}var e=yt;e.j(i),100>e.h&&(e.h++,i.next=e.g,e.g=i)}Rr=!1}function pt(i,e){Ee.call(this),this.h=i||1,this.g=e||ae,this.j=Mt(this.kb,this),this.l=Date.now()}function Ht(i){i.da=!1,i.S&&(i.g.clearTimeout(i.S),i.S=null)}function _n(i,e,n){if("function"==typeof i)n&&(i=Mt(i,n));else{if(!i||"function"!=typeof i.handleEvent)throw Error("Invalid listener argument");i=Mt(i.handleEvent,i)}return 2147483647<Number(e)?-1:ae.setTimeout(i,e||0)}function Ut(i){i.g=_n(()=>{i.g=null,i.i&&(i.i=!1,Ut(i))},i.j);const e=i.h;i.h=null,i.m.apply(null,e)}st(pt,Ee),(he=pt.prototype).da=!1,he.S=null,he.kb=function(){if(this.da){var i=Date.now()-this.l;0<i&&i<.8*this.h?this.S=this.g.setTimeout(this.j,this.h-i):(this.S&&(this.g.clearTimeout(this.S),this.S=null),qe(this,"tick"),this.da&&(Ht(this),this.start()))}},he.start=function(){this.da=!0,this.S||(this.S=this.g.setTimeout(this.j,this.h),this.l=Date.now())},he.M=function(){pt.Z.M.call(this),Ht(this),delete this.g};class _e extends rt{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:Ut(this)}M(){super.M(),this.g&&(ae.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(i){rt.call(this),this.h=i,this.g={}}st(Je,rt);var xt=[];function mn(i,e,n,o){Array.isArray(n)||(n&&(xt[0]=n.toString()),n=xt);for(var u=0;u<n.length;u++){var m=Ye(e,n[u],o||i.handleEvent,!1,i.h||i);if(!m)break;i.g[m.key]=m}}function yr(i){Ce(i.g,function(e,n){this.g.hasOwnProperty(n)&&me(e)},i),i.g={}}function Wn(){this.g=!0}function jr(i,e,n,o){i.info(function(){return"XMLHTTP TEXT ("+e+"): "+function nr(i,e){if(!i.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(i=0;i<n.length;i++)if(Array.isArray(n[i])){var o=n[i];if(!(2>o.length)){var u=o[1];if(Array.isArray(u)&&!(1>u.length)){var m=u[0];if("noop"!=m&&"stop"!=m&&"close"!=m)for(var I=1;I<u.length;I++)u[I]=""}}}return ge(n)}catch(O){return e}}(i,n)+(o?" "+o:"")})}Je.prototype.M=function(){Je.Z.M.call(this),yr(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},Wn.prototype.Aa=function(){this.g=!1},Wn.prototype.info=function(){};var yi={},qi=null;function ys(){return qi=qi||new Ee}function er(i){Dn.call(this,yi.Ma,i)}function $n(i){const e=ys();qe(e,new er(e,i))}function Ln(i,e){Dn.call(this,yi.STAT_EVENT,i),this.stat=e}function _r(i){const e=ys();qe(e,new Ln(e,i))}function Oe(i,e){Dn.call(this,yi.Na,i),this.size=e}function Le(i,e){if("function"!=typeof i)throw Error("Fn must not be null and must be a function");return ae.setTimeout(function(){i()},e)}yi.Ma="serverreachability",st(er,Dn),yi.STAT_EVENT="statevent",st(Ln,Dn),yi.Na="timingevent",st(Oe,Dn);var _t={NO_ERROR:0,lb:1,yb:2,xb:3,sb:4,wb:5,zb:6,Ja:7,TIMEOUT:8,Cb:9},kt={qb:"complete",Mb:"success",Ka:"error",Ja:"abort",Eb:"ready",Fb:"readystatechange",TIMEOUT:"timeout",Ab:"incrementaldata",Db:"progress",tb:"downloadprogress",Ub:"uploadprogress"};function zt(){}function wn(){}zt.prototype.h=null;var oi,vr={OPEN:"a",pb:"b",Ka:"c",Bb:"d"};function Er(){Dn.call(this,"d")}function Xr(){Dn.call(this,"c")}function vi(){}function ls(i,e,n,o){this.l=i,this.j=e,this.m=n,this.X=o||1,this.V=new Je(this),this.P=xa,this.W=new pt(i=gn?125:void 0),this.H=null,this.i=!1,this.s=this.A=this.v=this.K=this.F=this.Y=this.B=null,this.D=[],this.g=null,this.C=0,this.o=this.u=null,this.N=-1,this.I=!1,this.O=0,this.L=null,this.aa=this.J=this.$=this.U=!1,this.h=new ni}function ni(){this.i=null,this.g="",this.h=!1}st(Er,Dn),st(Xr,Dn),st(vi,zt),vi.prototype.g=function(){return new XMLHttpRequest},vi.prototype.i=function(){return{}},oi=new vi;var xa=45e3,fi={},So={};function Ji(i,e,n){i.K=1,i.v=ts(bi(e)),i.s=n,i.U=!0,_o(i,null)}function _o(i,e){i.F=Date.now(),Ro(i),i.A=bi(i.v);var n=i.A,o=i.X;Array.isArray(o)||(o=[String(o)]),j(n.h,"t",o),i.C=0,n=i.l.H,i.h=new ni,i.g=Ks(i.l,n?e:null,!i.s),0<i.O&&(i.L=new _e(Mt(i.Ia,i,i.g),i.O)),mn(i.V,i.g,"readystatechange",i.gb),e=i.H?$t(i.H):{},i.s?(i.u||(i.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",i.g.ea(i.A,i.u,i.s,e)):(i.u="GET",i.g.ea(i.A,i.u,null,e)),$n(1),function kn(i,e,n,o,u,m){i.info(function(){if(i.g)if(m)for(var I="",O=m.split("&"),Q=0;Q<O.length;Q++){var ne=O[Q].split("=");if(1<ne.length){var Re=ne[0];ne=ne[1];var Ze=Re.split("_");I=2<=Ze.length&&"type"==Ze[1]?I+(Re+"=")+ne+"&":I+(Re+"=redacted&")}}else I=null;else I=m;return"XMLHTTP REQ ("+o+") [attempt "+u+"]: "+e+"\n"+n+"\n"+I})}(i.j,i.u,i.A,i.m,i.X,i.s)}function xo(i){return!!i.g&&"GET"==i.u&&2!=i.K&&i.l.Ba}function zo(i,e,n){let u,o=!0;for(;!i.I&&i.C<n.length;){if(u=Mo(i,n),u==So){4==e&&(i.o=4,_r(14),o=!1),jr(i.j,i.m,null,"[Incomplete Response]");break}if(u==fi){i.o=4,_r(15),jr(i.j,i.m,n,"[Invalid Chunk]"),o=!1;break}jr(i.j,i.m,u,null),ro(i,u)}xo(i)&&u!=So&&u!=fi&&(i.h.g="",i.C=0),4!=e||0!=n.length||i.h.h||(i.o=1,_r(16),o=!1),i.i=i.i&&o,o?0<n.length&&!i.aa&&(i.aa=!0,(e=i.l).g==i&&e.$&&!e.L&&(e.h.info("Great, no buffering proxy detected. Bytes received: "+n.length),Yi(e),e.L=!0,_r(11))):(jr(i.j,i.m,n,"[Invalid Chunked Response]"),cr(i),di(i))}function Mo(i,e){var n=i.C,o=e.indexOf("\n",n);return-1==o?So:(n=Number(e.substring(n,o)),isNaN(n)?fi:(o+=1)+n>e.length?So:(e=e.substr(o,n),i.C=o+n,e))}function Ro(i){i.Y=Date.now()+i.P,ca(i,i.P)}function ca(i,e){if(null!=i.B)throw Error("WatchDog timer not null");i.B=Le(Mt(i.eb,i),e)}function Xi(i){i.B&&(ae.clearTimeout(i.B),i.B=null)}function di(i){0==i.l.G||i.I||Qu(i.l,i)}function cr(i){Xi(i);var e=i.L;e&&"function"==typeof e.na&&e.na(),i.L=null,Ht(i.W),yr(i.V),i.g&&(e=i.g,i.g=null,e.abort(),e.na())}function ro(i,e){try{var n=i.l;if(0!=n.G&&(n.g==i||lr(n.i,i)))if(n.I=i.N,!i.J&&lr(n.i,i)&&3==n.G){try{var o=n.Ca.g.parse(e)}catch(ne){o=null}if(Array.isArray(o)&&3==o.length){var u=o;if(0==u[0])e:if(n.u)n.ta=u[1],0<n.ta-n.U&&37500>u[2]&&n.N&&0==n.A&&!n.v&&(n.v=Le(Mt(n.ab,n),6e3));else{if(n.g){if(!(n.g.F+3e3<i.F))break e;wo(n),Zo(n)}is(n),_r(18)}if(1>=Sr(n.i)&&n.ka){try{n.ka()}catch(ne){}n.ka=void 0}}else Xo(n,11)}else if((i.J||n.g==i)&&wo(n),!We(e))for(u=n.Ca.g.parse(e),e=0;e<u.length;e++){let ne=u[e];if(n.U=ne[0],ne=ne[1],2==n.G)if("c"==ne[0]){n.J=ne[1],n.la=ne[2];const Re=ne[3];null!=Re&&(n.ma=Re,n.h.info("VER="+n.ma));const Ze=ne[4];null!=Ze&&(n.za=Ze,n.h.info("SVER="+n.za));const Tt=ne[5];null!=Tt&&"number"==typeof Tt&&0<Tt&&(n.K=o=1.5*Tt,n.h.info("backChannelRequestTimeoutMs_="+o)),o=n;const Zt=i.g;if(Zt){const tn=Zt.g?Zt.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(tn){var m=o.i;!m.g&&(Ne(tn,"spdy")||Ne(tn,"quic")||Ne(tn,"h2"))&&(m.j=m.l,m.g=new Set,m.h&&(Cr(m,m.h),m.h=null))}if(o.D){const Zn=Zt.g?Zt.g.getResponseHeader("X-HTTP-Session-Id"):null;Zn&&(o.sa=Zn,Lr(o.F,o.D,Zn))}}n.G=3,n.j&&n.j.xa(),n.$&&(n.O=Date.now()-i.F,n.h.info("Handshake RTT: "+n.O+"ms"));var I=i;if((o=n).oa=xi(o,o.H?o.la:null,o.W),I.J){ti(o.i,I);var O=I,Q=o.K;Q&&O.setTimeout(Q),O.B&&(Xi(O),Ro(O)),o.g=I}else Gs(o);0<n.l.length&&ui(n)}else"stop"!=ne[0]&&"close"!=ne[0]||Xo(n,7);else 3==n.G&&("stop"==ne[0]||"close"==ne[0]?"stop"==ne[0]?Xo(n,7):Du(n):"noop"!=ne[0]&&n.j&&n.j.wa(ne),n.A=0)}$n(4)}catch(ne){}}function $s(i,e){if(i.forEach&&"function"==typeof i.forEach)i.forEach(e,void 0);else if(De(i)||"string"==typeof i)Lt(i,e,void 0);else{if(i.T&&"function"==typeof i.T)var n=i.T();else if(i.R&&"function"==typeof i.R)n=void 0;else if(De(i)||"string"==typeof i){n=[];for(var o=i.length,u=0;u<o;u++)n.push(u)}else for(u in n=[],o=0,i)n[o++]=u;o=function es(i){if(i.R&&"function"==typeof i.R)return i.R();if("string"==typeof i)return i.split("");if(De(i)){for(var e=[],n=i.length,o=0;o<n;o++)e.push(i[o]);return e}for(o in e=[],n=0,i)e[n++]=i[o];return e}(i),u=o.length;for(var m=0;m<u;m++)e.call(void 0,o[m],n&&n[m],i)}}function ai(i,e){this.h={},this.g=[],this.i=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var o=0;o<n;o+=2)this.set(arguments[o],arguments[o+1])}else if(i)if(i instanceof ai)for(n=i.T(),o=0;o<n.length;o++)this.set(n[o],i.get(n[o]));else for(o in i)this.set(o,i[o])}function Ii(i){if(i.i!=i.g.length){for(var e=0,n=0;e<i.g.length;){var o=i.g[e];ei(i.h,o)&&(i.g[n++]=o),e++}i.g.length=n}if(i.i!=i.g.length){var u={};for(n=e=0;e<i.g.length;)ei(u,o=i.g[e])||(i.g[n++]=o,u[o]=1),e++;i.g.length=n}}function ei(i,e){return Object.prototype.hasOwnProperty.call(i,e)}(he=ls.prototype).setTimeout=function(i){this.P=i},he.gb=function(i){i=i.target;const e=this.L;e&&3==Es(i)?e.l():this.Ia(i)},he.Ia=function(i){try{if(i==this.g)e:{const Re=Es(this.g);var e=this.g.Da();const Ze=this.g.ba();if(!(3>Re)&&(3!=Re||gn||this.g&&(this.h.h||this.g.ga()||pi(this.g)))){this.I||4!=Re||7==e||$n(8==e||0>=Ze?3:2),Xi(this);var n=this.g.ba();this.N=n;t:if(xo(this)){var o=pi(this.g);i="";var u=o.length,m=4==Es(this.g);if(!this.h.i){if("undefined"==typeof TextDecoder){cr(this),di(this);var I="";break t}this.h.i=new ae.TextDecoder}for(e=0;e<u;e++)this.h.h=!0,i+=this.h.i.decode(o[e],{stream:m&&e==u-1});o.splice(0,u),this.h.g+=i,this.C=0,I=this.h.g}else I=this.g.ga();if(this.i=200==n,function ur(i,e,n,o,u,m,I){i.info(function(){return"XMLHTTP RESP ("+o+") [ attempt "+u+"]: "+e+"\n"+n+"\n"+m+" "+I})}(this.j,this.u,this.A,this.m,this.X,Re,n),this.i){if(this.$&&!this.J){t:{if(this.g){var O,Q=this.g;if((O=Q.g?Q.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!We(O)){var ne=O;break t}}ne=null}if(!(n=ne)){this.i=!1,this.o=3,_r(12),cr(this),di(this);break e}jr(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.J=!0,ro(this,n)}this.U?(zo(this,Re,I),gn&&this.i&&3==Re&&(mn(this.V,this.W,"tick",this.fb),this.W.start())):(jr(this.j,this.m,I,null),ro(this,I)),4==Re&&cr(this),this.i&&!this.I&&(4==Re?Qu(this.l,this):(this.i=!1,Ro(this)))}else 400==n&&0<I.indexOf("Unknown SID")?(this.o=3,_r(12)):(this.o=0,_r(13)),cr(this),di(this)}}}catch(Re){}},he.fb=function(){if(this.g){var i=Es(this.g),e=this.g.ga();this.C<e.length&&(Xi(this),zo(this,i,e),this.i&&4!=i&&Ro(this))}},he.cancel=function(){this.I=!0,cr(this)},he.eb=function(){this.B=null;const i=Date.now();0<=i-this.Y?(function Wr(i,e){i.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.K&&($n(3),_r(17)),cr(this),this.o=2,di(this)):ca(this,this.Y-i)},(he=ai.prototype).R=function(){Ii(this);for(var i=[],e=0;e<this.g.length;e++)i.push(this.h[this.g[e]]);return i},he.T=function(){return Ii(this),this.g.concat()},he.get=function(i,e){return ei(this.h,i)?this.h[i]:e},he.set=function(i,e){ei(this.h,i)||(this.i++,this.g.push(i)),this.h[i]=e},he.forEach=function(i,e){for(var n=this.T(),o=0;o<n.length;o++){var u=n[o],m=this.get(u);i.call(e,m,u,this)}};var Ci=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function cs(i,e){if(this.i=this.s=this.j="",this.m=null,this.o=this.l="",this.g=!1,i instanceof cs){this.g=void 0!==e?e:i.g,Hs(this,i.j),this.s=i.s,Ti(this,i.i),yo(this,i.m),this.l=i.l,e=i.h;var n=new hs;n.i=e.i,e.g&&(n.g=new ai(e.g),n.h=e.h),Di(this,n),this.o=i.o}else i&&(n=String(i).match(Ci))?(this.g=!!e,Hs(this,n[1]||"",!0),this.s=ds(n[2]||""),Ti(this,n[3]||"",!0),yo(this,n[4]),this.l=ds(n[5]||"",!0),Di(this,n[6]||"",!0),this.o=ds(n[7]||"")):(this.g=!!e,this.h=new hs(null,this.g))}function bi(i){return new cs(i)}function Hs(i,e,n){i.j=n?ds(e,!0):e,i.j&&(i.j=i.j.replace(/:$/,""))}function Ti(i,e,n){i.i=n?ds(e,!0):e}function yo(i,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);i.m=e}else i.m=null}function Di(i,e,n){e instanceof hs?(i.h=e,function je(i,e){e&&!i.j&&(Ir(i),i.i=null,i.g.forEach(function(n,o){var u=o.toLowerCase();o!=u&&(B(this,o),j(this,u,n))},i)),i.j=e}(i.h,i.g)):(n||(e=Rs(e,Zi)),i.h=new hs(e,i.g))}function Lr(i,e,n){i.h.set(e,n)}function ts(i){return Lr(i,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),i}function ds(i,e){return i?e?decodeURI(i.replace(/%25/g,"%2525")):decodeURIComponent(i):""}function Rs(i,e,n){return"string"==typeof i?(i=encodeURI(i).replace(e,vo),n&&(i=i.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),i):null}function vo(i){return"%"+((i=i.charCodeAt(0))>>4&15).toString(16)+(15&i).toString(16)}cs.prototype.toString=function(){var i=[],e=this.j;e&&i.push(Rs(e,xr,!0),":");var n=this.i;return(n||"file"==e)&&(i.push("//"),(e=this.s)&&i.push(Rs(e,xr,!0),"@"),i.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.m)&&i.push(":",String(n))),(n=this.l)&&(this.i&&"/"!=n.charAt(0)&&i.push("/"),i.push(Rs(n,"/"==n.charAt(0)?Po:Ko,!0))),(n=this.h.toString())&&i.push("?",n),(n=this.o)&&i.push("#",Rs(n,Ws)),i.join("")};var xr=/[#\/\?@]/g,Ko=/[#\?:]/g,Po=/[#\?]/g,Zi=/[#\?@]/g,Ws=/#/g;function hs(i,e){this.h=this.g=null,this.i=i||null,this.j=!!e}function Ir(i){i.g||(i.g=new ai,i.h=0,i.i&&function Ei(i,e){if(i){i=i.split("&");for(var n=0;n<i.length;n++){var o=i[n].indexOf("="),u=null;if(0<=o){var m=i[n].substring(0,o);u=i[n].substring(o+1)}else m=i[n];e(m,u?decodeURIComponent(u.replace(/\+/g," ")):"")}}}(i.i,function(e,n){i.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function B(i,e){Ir(i),e=ie(i,e),ei(i.g.h,e)&&(i.i=null,i.h-=i.g.get(e).length,ei((i=i.g).h,e)&&(delete i.h[e],i.i--,i.g.length>2*i.i&&Ii(i)))}function J(i,e){return Ir(i),e=ie(i,e),ei(i.g.h,e)}function j(i,e,n){B(i,e),0<n.length&&(i.i=null,i.g.set(ie(i,e),xe(n)),i.h+=n.length)}function ie(i,e){return e=String(e),i.j&&(e=e.toLowerCase()),e}function Vt(i){this.l=i||Un,i=ae.PerformanceNavigationTiming?0<(i=ae.performance.getEntriesByType("navigation")).length&&("hq"==i[0].nextHopProtocol||"h2"==i[0].nextHopProtocol):!!(ae.g&&ae.g.Ea&&ae.g.Ea()&&ae.g.Ea().Zb),this.j=i?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(he=hs.prototype).add=function(i,e){Ir(this),this.i=null,i=ie(this,i);var n=this.g.get(i);return n||this.g.set(i,n=[]),n.push(e),this.h+=1,this},he.forEach=function(i,e){Ir(this),this.g.forEach(function(n,o){Lt(n,function(u){i.call(e,u,o,this)},this)},this)},he.T=function(){Ir(this);for(var i=this.g.R(),e=this.g.T(),n=[],o=0;o<e.length;o++)for(var u=i[o],m=0;m<u.length;m++)n.push(e[o]);return n},he.R=function(i){Ir(this);var e=[];if("string"==typeof i)J(this,i)&&(e=it(e,this.g.get(ie(this,i))));else{i=this.g.R();for(var n=0;n<i.length;n++)e=it(e,i[n])}return e},he.set=function(i,e){return Ir(this),this.i=null,J(this,i=ie(this,i))&&(this.h-=this.g.get(i).length),this.g.set(i,[e]),this.h+=1,this},he.get=function(i,e){return i&&0<(i=this.R(i)).length?String(i[0]):e},he.toString=function(){if(this.i)return this.i;if(!this.g)return"";for(var i=[],e=this.g.T(),n=0;n<e.length;n++){var o=e[n],u=encodeURIComponent(String(o));o=this.R(o);for(var m=0;m<o.length;m++){var I=u;""!==o[m]&&(I+="="+encodeURIComponent(String(o[m]))),i.push(I)}}return this.i=i.join("&")};var Un=10;function kr(i){return!!i.h||!!i.g&&i.g.size>=i.j}function Sr(i){return i.h?1:i.g?i.g.size:0}function lr(i,e){return i.h?i.h==e:!!i.g&&i.g.has(e)}function Cr(i,e){i.g?i.g.add(e):i.h=e}function ti(i,e){i.h&&i.h==e?i.h=null:i.g&&i.g.has(e)&&i.g.delete(e)}function Ur(i){if(null!=i.h)return i.i.concat(i.h.D);if(null!=i.g&&0!==i.g.size){let e=i.i;for(const n of i.g.values())e=e.concat(n.D);return e}return xe(i.i)}function zr(){}function fs(){this.g=new zr}function Hi(i,e,n){const o=n||"";try{$s(i,function(u,m){let I=u;ot(u)&&(I=ge(u)),e.push(o+m+"="+encodeURIComponent(I))})}catch(u){throw e.push(o+"type="+encodeURIComponent("_badmap")),u}}function Ui(i,e,n,o,u){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,u(o)}catch(m){}}function Ps(i){this.l=i.$b||null,this.j=i.ib||!1}function so(i,e){Ee.call(this),this.D=i,this.u=e,this.m=void 0,this.readyState=qo,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}Vt.prototype.cancel=function(){if(this.i=Ur(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const i of this.g.values())i.cancel();this.g.clear()}},zr.prototype.stringify=function(i){return ae.JSON.stringify(i,void 0)},zr.prototype.parse=function(i){return ae.JSON.parse(i,void 0)},st(Ps,zt),Ps.prototype.g=function(){return new so(this.l,this.j)},Ps.prototype.i=function(i){return function(){return i}}({}),st(so,Ee);var qo=0;function H(i){i.j.read().then(i.Sa.bind(i)).catch(i.ha.bind(i))}function U(i){i.readyState=4,i.l=null,i.j=null,i.A=null,F(i)}function F(i){i.onreadystatechange&&i.onreadystatechange.call(i)}(he=so.prototype).open=function(i,e){if(this.readyState!=qo)throw this.abort(),Error("Error reopening a connection");this.C=i,this.B=e,this.readyState=1,F(this)},he.send=function(i){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};i&&(e.body=i),(this.D||ae).fetch(new Request(this.B,e)).then(this.Va.bind(this),this.ha.bind(this))},he.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted."),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,U(this)),this.readyState=qo},he.Va=function(i){if(this.g&&(this.l=i,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=i.headers,this.readyState=2,F(this)),this.g&&(this.readyState=3,F(this),this.g)))if("arraybuffer"===this.responseType)i.arrayBuffer().then(this.Ta.bind(this),this.ha.bind(this));else if(void 0!==ae.ReadableStream&&"body"in i){if(this.j=i.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;H(this)}else i.text().then(this.Ua.bind(this),this.ha.bind(this))},he.Sa=function(i){if(this.g){if(this.u&&i.value)this.response.push(i.value);else if(!this.u){var e=i.value?i.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!i.done}))&&(this.response=this.responseText+=e)}i.done?U(this):F(this),3==this.readyState&&H(this)}},he.Ua=function(i){this.g&&(this.response=this.responseText=i,U(this))},he.Ta=function(i){this.g&&(this.response=i,U(this))},he.ha=function(){this.g&&U(this)},he.setRequestHeader=function(i,e){this.v.append(i,e)},he.getResponseHeader=function(i){return this.h&&this.h.get(i.toLowerCase())||""},he.getAllResponseHeaders=function(){if(!this.h)return"";const i=[],e=this.h.entries();for(var n=e.next();!n.done;)i.push((n=n.value)[0]+": "+n[1]),n=e.next();return i.join("\r\n")},Object.defineProperty(so.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(i){this.m=i?"include":"same-origin"}});var q=ae.JSON.parse;function tt(i){Ee.call(this),this.headers=new ai,this.u=i||null,this.h=!1,this.C=this.g=null,this.H="",this.m=0,this.j="",this.l=this.F=this.v=this.D=!1,this.B=0,this.A=null,this.J=Sn,this.K=this.L=!1}st(tt,Ee);var Sn="",tr=/^https?$/i,ns=["POST","PUT"];function rs(i){return"content-type"==i.toLowerCase()}function oo(i,e){i.h=!1,i.g&&(i.l=!0,i.g.abort(),i.l=!1),i.j=e,i.m=5,vs(i),Ma(i)}function vs(i){i.D||(i.D=!0,qe(i,"complete"),qe(i,"error"))}function Yu(i){if(i.h&&void 0!==He&&(!i.C[1]||4!=Es(i)||2!=i.ba()))if(i.v&&4==Es(i))_n(i.Fa,0,i);else if(qe(i,"readystatechange"),4==Es(i)){i.h=!1;try{const O=i.ba();e:switch(O){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var o;if(o=0===O){var u=String(i.H).match(Ci)[1]||null;if(!u&&ae.self&&ae.self.location){var m=ae.self.location.protocol;u=m.substr(0,m.length-1)}o=!tr.test(u?u.toLowerCase():"")}n=o}if(n)qe(i,"complete"),qe(i,"success");else{i.m=6;try{var I=2<Es(i)?i.g.statusText:""}catch(Q){I=""}i.j=I+" ["+i.ba()+"]",vs(i)}}finally{Ma(i)}}}function Ma(i,e){if(i.g){Ra(i);const n=i.g,o=i.C[0]?ve:null;i.g=null,i.C=null,e||qe(i,"ready");try{n.onreadystatechange=o}catch(u){}}}function Ra(i){i.g&&i.K&&(i.g.ontimeout=null),i.A&&(ae.clearTimeout(i.A),i.A=null)}function Es(i){return i.g?i.g.readyState:0}function pi(i){try{if(!i.g)return null;if("response"in i.g)return i.g.response;switch(i.J){case Sn:case"text":return i.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in i.g)return i.g.mozResponseArrayBuffer}return null}catch(e){return null}}function da(i,e,n){e:{for(o in n){var o=!1;break e}o=!0}o||(n=function Eo(i){let e="";return Ce(i,function(n,o){e+=o,e+=":",e+=n,e+="\r\n"}),e}(n),"string"==typeof i?null!=n&&encodeURIComponent(String(n)):Lr(i,e,n))}function No(i,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[i]||e}function ao(i){this.za=0,this.l=[],this.h=new Wn,this.la=this.oa=this.F=this.W=this.g=this.sa=this.D=this.aa=this.o=this.P=this.s=null,this.Za=this.V=0,this.Xa=No("failFast",!1,i),this.N=this.v=this.u=this.m=this.j=null,this.X=!0,this.I=this.ta=this.U=-1,this.Y=this.A=this.C=0,this.Pa=No("baseRetryDelayMs",5e3,i),this.$a=No("retryDelaySeedMs",1e4,i),this.Ya=No("forwardChannelMaxRetries",2,i),this.ra=No("forwardChannelRequestTimeoutMs",2e4,i),this.qa=i&&i.xmlHttpFactory||void 0,this.Ba=i&&i.Yb||!1,this.K=void 0,this.H=i&&i.supportsCrossDomainXhr||!1,this.J="",this.i=new Vt(i&&i.concurrentRequestLimit),this.Ca=new fs,this.ja=i&&i.fastHandshake||!1,this.Ra=i&&i.Wb||!1,i&&i.Aa&&this.h.Aa(),i&&i.forceLongPolling&&(this.X=!1),this.$=!this.ja&&this.X&&i&&i.detectBufferingProxy||!1,this.ka=void 0,this.O=0,this.L=!1,this.B=null,this.Wa=!i||!1!==i.Xb}function Du(i){if(Yo(i),3==i.G){var e=i.V++,n=bi(i.F);Lr(n,"SID",i.J),Lr(n,"RID",e),Lr(n,"TYPE","terminate"),Qo(i,n),(e=new ls(i,i.h,e,void 0)).K=2,e.v=ts(bi(n)),n=!1,ae.navigator&&ae.navigator.sendBeacon&&(n=ae.navigator.sendBeacon(e.v.toString(),"")),!n&&ae.Image&&((new Image).src=e.v,n=!0),n||(e.g=Ks(e.l,null),e.g.ea(e.v)),e.F=Date.now(),Ro(e)}Au(i)}function Zo(i){i.g&&(Yi(i),i.g.cancel(),i.g=null)}function Yo(i){Zo(i),i.u&&(ae.clearTimeout(i.u),i.u=null),wo(i),i.i.cancel(),i.m&&("number"==typeof i.m&&ae.clearTimeout(i.m),i.m=null)}function Si(i,e){i.l.push(new class{constructor(i,e){this.h=i,this.g=e}}(i.Za++,e)),3==i.G&&ui(i)}function ui(i){kr(i.i)||i.m||(i.m=!0,fn(i.Ha,i),i.C=0)}function Pa(i,e){var n;n=e?e.m:i.V++;const o=bi(i.F);Lr(o,"SID",i.J),Lr(o,"RID",n),Lr(o,"AID",i.U),Qo(i,o),i.o&&i.s&&da(o,i.o,i.s),n=new ls(i,i.h,n,i.C+1),null===i.o&&(n.H=i.s),e&&(i.l=e.D.concat(i.l)),e=Jo(i,n,1e3),n.setTimeout(Math.round(.5*i.ra)+Math.round(.5*i.ra*Math.random())),Cr(i.i,n),Ji(n,o,e)}function Qo(i,e){i.j&&$s({},function(n,o){Lr(e,o,n)})}function Jo(i,e,n){n=Math.min(i.l.length,n);var o=i.j?Mt(i.j.Oa,i.j,i):null;e:{var u=i.l;let m=-1;for(;;){const I=["count="+n];-1==m?0<n?(m=u[0].h,I.push("ofs="+m)):m=0:I.push("ofs="+m);let O=!0;for(let Q=0;Q<n;Q++){let ne=u[Q].h;const Re=u[Q].g;if(ne-=m,0>ne)m=Math.max(0,u[Q].h-100),O=!1;else try{Hi(Re,I,"req"+ne+"_")}catch(Ze){o&&o(Re)}}if(O){o=I.join("&");break e}}}return i=i.l.splice(0,n),e.D=i,o}function Gs(i){i.g||i.u||(i.Y=1,fn(i.Ga,i),i.A=0)}function is(i){return!(i.g||i.u||3<=i.A||(i.Y++,i.u=Le(Mt(i.Ga,i),ko(i,i.A)),i.A++,0))}function Yi(i){null!=i.B&&(ae.clearTimeout(i.B),i.B=null)}function zs(i){i.g=new ls(i,i.h,"rpc",i.Y),null===i.o&&(i.g.H=i.s),i.g.O=0;var e=bi(i.oa);Lr(e,"RID","rpc"),Lr(e,"SID",i.J),Lr(e,"CI",i.N?"0":"1"),Lr(e,"AID",i.U),Qo(i,e),Lr(e,"TYPE","xmlhttp"),i.o&&i.s&&da(e,i.o,i.s),i.K&&i.g.setTimeout(i.K);var n=i.g;i=i.la,n.K=1,n.v=ts(bi(e)),n.s=null,n.U=!0,_o(n,i)}function wo(i){null!=i.v&&(ae.clearTimeout(i.v),i.v=null)}function Qu(i,e){var n=null;if(i.g==e){wo(i),Yi(i),i.g=null;var o=2}else{if(!lr(i.i,e))return;n=e.D,ti(i.i,e),o=1}if(i.I=e.N,0!=i.G)if(e.i)if(1==o){n=e.s?e.s.length:0,e=Date.now()-e.F;var u=i.C;qe(o=ys(),new Oe(o,n,e,u)),ui(i)}else Gs(i);else if(3==(u=e.o)||0==u&&0<i.I||!(1==o&&function Oo(i,e){return!(Sr(i.i)>=i.i.j-(i.m?1:0)||(i.m?(i.l=e.D.concat(i.l),0):1==i.G||2==i.G||i.C>=(i.Xa?0:i.Ya)||(i.m=Le(Mt(i.Ha,i,e),ko(i,i.C)),i.C++,0)))}(i,e)||2==o&&is(i)))switch(n&&0<n.length&&(e=i.i,e.i=e.i.concat(n)),u){case 1:Xo(i,5);break;case 4:Xo(i,10);break;case 3:Xo(i,6);break;default:Xo(i,2)}}function ko(i,e){let n=i.Pa+Math.floor(Math.random()*i.$a);return i.j||(n*=2),n*e}function Xo(i,e){if(i.h.info("Error code "+e),2==e){var n=null;i.j&&(n=null);var o=Mt(i.jb,i);n||(n=new cs("//www.google.com/images/cleardot.gif"),ae.location&&"http"==ae.location.protocol||Hs(n,"https"),ts(n)),function Gn(i,e){const n=new Wn;if(ae.Image){const o=new Image;o.onload=Pt(Ui,n,o,"TestLoadImage: loaded",!0,e),o.onerror=Pt(Ui,n,o,"TestLoadImage: error",!1,e),o.onabort=Pt(Ui,n,o,"TestLoadImage: abort",!1,e),o.ontimeout=Pt(Ui,n,o,"TestLoadImage: timeout",!1,e),ae.setTimeout(function(){o.ontimeout&&o.ontimeout()},1e4),o.src=i}else e(!1)}(n.toString(),o)}else _r(2);i.G=0,i.j&&i.j.va(e),Au(i),Yo(i)}function Au(i){i.G=0,i.I=-1,i.j&&((0!=Ur(i.i).length||0!=i.l.length)&&(i.i.i.length=0,xe(i.l),i.l.length=0),i.j.ua())}function xi(i,e,n){let o=function io(i){return i instanceof cs?bi(i):new cs(i,void 0)}(n);if(""!=o.i)e&&Ti(o,e+"."+o.i),yo(o,o.m);else{const u=ae.location;o=function Gr(i,e,n,o){var u=new cs(null,void 0);return i&&Hs(u,i),e&&Ti(u,e),n&&yo(u,n),o&&(u.l=o),u}(u.protocol,e?e+"."+u.hostname:u.hostname,+u.port,n)}return i.aa&&Ce(i.aa,function(u,m){Lr(o,m,u)}),n=i.sa,(e=i.D)&&n&&Lr(o,e,n),Lr(o,"VER",i.ma),Qo(i,o),o}function Ks(i,e,n){if(e&&!i.H)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new tt(n&&i.Ba&&!i.qa?new Ps({ib:!0}):i.qa)).L=i.H,e}function li(){}function Na(){if(Yt&&!(10<=Number(Nn)))throw Error("Environmental error: no available transport.")}function Mi(i,e){Ee.call(this),this.g=new ao(e),this.l=i,this.h=e&&e.messageUrlParams||null,i=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(i?i["X-Client-Protocol"]="webchannel":i={"X-Client-Protocol":"webchannel"}),this.g.s=i,i=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(i?i["X-WebChannel-Content-Type"]=e.messageContentType:i={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.ya&&(i?i["X-WebChannel-Client-Profile"]=e.ya:i={"X-WebChannel-Client-Profile":e.ya}),this.g.P=i,(i=e&&e.httpHeadersOverwriteParam)&&!We(i)&&(this.g.o=i),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!We(e)&&(this.g.D=e,null!==(i=this.h)&&e in i&&e in(i=this.h)&&delete i[e]),this.j=new Nr(this)}function Oa(i){Er.call(this);var e=i.__sm__;if(e){e:{for(const n in e){i=n;break e}i=void 0}(this.i=i)&&(i=this.i,e=null!==e&&i in e?e[i]:void 0),this.data=e}else this.data=i}function Kl(){Xr.call(this),this.status=1}function Nr(i){this.g=i}(he=tt.prototype).ea=function(i,e,n,o){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.H+"; newUri="+i);e=e?e.toUpperCase():"GET",this.H=i,this.j="",this.m=0,this.D=!1,this.h=!0,this.g=this.u?this.u.g():oi.g(),this.C=function en(i){return i.h||(i.h=i.i())}(this.u?this.u:oi),this.g.onreadystatechange=Mt(this.Fa,this);try{this.F=!0,this.g.open(e,String(i),!0),this.F=!1}catch(m){return void oo(this,m)}i=n||"";const u=new ai(this.headers);o&&$s(o,function(m,I){u.set(I,m)}),o=function Ke(i){e:{var e=rs;const n=i.length,o="string"==typeof i?i.split(""):i;for(let u=0;u<n;u++)if(u in o&&e.call(void 0,o[u],u,i)){e=u;break e}e=-1}return 0>e?null:"string"==typeof i?i.charAt(e):i[e]}(u.T()),n=ae.FormData&&i instanceof ae.FormData,!(0<=fe(ns,e))||o||n||u.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),u.forEach(function(m,I){this.g.setRequestHeader(I,m)},this),this.J&&(this.g.responseType=this.J),"withCredentials"in this.g&&this.g.withCredentials!==this.L&&(this.g.withCredentials=this.L);try{Ra(this),0<this.B&&((this.K=function Ai(i){return Yt&&function It(){return function un(i){var e=Xe;return Object.prototype.hasOwnProperty.call(e,9)?e[9]:e[9]=i(9)}(function(){let i=0;const e=Qe(String(zn)).split("."),n=Qe("9").split("."),o=Math.max(e.length,n.length);for(let I=0;0==i&&I<o;I++){var u=e[I]||"",m=n[I]||"";do{if(u=/(\d*)(\D*)(.*)/.exec(u)||["","","",""],m=/(\d*)(\D*)(.*)/.exec(m)||["","","",""],0==u[0].length&&0==m[0].length)break;i=dn(0==u[1].length?0:parseInt(u[1],10),0==m[1].length?0:parseInt(m[1],10))||dn(0==u[2].length,0==m[2].length)||dn(u[2],m[2]),u=u[3],m=m[3]}while(0==i)}return 0<=i})}()&&"number"==typeof i.timeout&&void 0!==i.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Mt(this.pa,this)):this.A=_n(this.pa,this.B,this)),this.v=!0,this.g.send(i),this.v=!1}catch(m){oo(this,m)}},he.pa=function(){void 0!==He&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,qe(this,"timeout"),this.abort(8))},he.abort=function(i){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=i||7,qe(this,"complete"),qe(this,"abort"),Ma(this))},he.M=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Ma(this,!0)),tt.Z.M.call(this)},he.Fa=function(){this.s||(this.F||this.v||this.l?Yu(this):this.cb())},he.cb=function(){Yu(this)},he.ba=function(){try{return 2<Es(this)?this.g.status:-1}catch(i){return-1}},he.ga=function(){try{return this.g?this.g.responseText:""}catch(i){return""}},he.Qa=function(i){if(this.g){var e=this.g.responseText;return i&&0==e.indexOf(i)&&(e=e.substring(i.length)),q(e)}},he.Da=function(){return this.m},he.La=function(){return"string"==typeof this.j?this.j:String(this.j)},(he=ao.prototype).ma=8,he.G=1,he.hb=function(i){try{this.h.info("Origin Trials invoked: "+i)}catch(e){}},he.Ha=function(i){if(this.m)if(this.m=null,1==this.G){if(!i){this.V=Math.floor(1e5*Math.random()),i=this.V++;const u=new ls(this,this.h,i,void 0);let m=this.s;if(this.P&&(m?(m=$t(m),Rn(m,this.P)):m=this.P),null===this.o&&(u.H=m),this.ja)e:{for(var e=0,n=0;n<this.l.length;n++){var o=this.l[n];if(void 0===(o="__data__"in o.g&&"string"==typeof(o=o.g.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=n;break e}if(4096===e||n===this.l.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Jo(this,u,e),Lr(n=bi(this.F),"RID",i),Lr(n,"CVER",22),this.D&&Lr(n,"X-HTTP-Session-Id",this.D),Qo(this,n),this.o&&m&&da(n,this.o,m),Cr(this.i,u),this.Ra&&Lr(n,"TYPE","init"),this.ja?(Lr(n,"$req",e),Lr(n,"SID","null"),u.$=!0,Ji(u,n,null)):Ji(u,n,e),this.G=2}}else 3==this.G&&(i?Pa(this,i):0==this.l.length||kr(this.i)||Pa(this))},he.Ga=function(){if(this.u=null,zs(this),this.$&&!(this.L||null==this.g||0>=this.O)){var i=2*this.O;this.h.info("BP detection timer enabled: "+i),this.B=Le(Mt(this.bb,this),i)}},he.bb=function(){this.B&&(this.B=null,this.h.info("BP detection timeout reached."),this.h.info("Buffering proxy detected and switch to long-polling!"),this.N=!1,this.L=!0,_r(10),Zo(this),zs(this))},he.ab=function(){null!=this.v&&(this.v=null,Zo(this),is(this),_r(19))},he.jb=function(i){i?(this.h.info("Successfully pinged google.com"),_r(2)):(this.h.info("Failed to ping google.com"),_r(1))},(he=li.prototype).xa=function(){},he.wa=function(){},he.va=function(){},he.ua=function(){},he.Oa=function(){},Na.prototype.g=function(i,e){return new Mi(i,e)},st(Mi,Ee),Mi.prototype.m=function(){this.g.j=this.j,this.A&&(this.g.H=!0);var i=this.g,e=this.l,n=this.h||void 0;i.Wa&&(i.h.info("Origin Trials enabled."),fn(Mt(i.hb,i,e))),_r(0),i.W=e,i.aa=n||{},i.N=i.X,i.F=xi(i,null,i.W),ui(i)},Mi.prototype.close=function(){Du(this.g)},Mi.prototype.u=function(i){if("string"==typeof i){var e={};e.__data__=i,Si(this.g,e)}else this.v?((e={}).__data__=ge(i),Si(this.g,e)):Si(this.g,i)},Mi.prototype.M=function(){this.g.j=null,delete this.j,Du(this.g),delete this.g,Mi.Z.M.call(this)},st(Oa,Er),st(Kl,Xr),st(Nr,li),Nr.prototype.xa=function(){qe(this.g,"a")},Nr.prototype.wa=function(i){qe(this.g,new Oa(i))},Nr.prototype.va=function(i){qe(this.g,new Kl(i))},Nr.prototype.ua=function(){qe(this.g,"b")},Na.prototype.createWebChannel=Na.prototype.g,Mi.prototype.send=Mi.prototype.u,Mi.prototype.open=Mi.prototype.m,Mi.prototype.close=Mi.prototype.close,_t.NO_ERROR=0,_t.TIMEOUT=8,_t.HTTP_ERROR=6,kt.COMPLETE="complete",wn.EventType=vr,vr.OPEN="a",vr.CLOSE="b",vr.ERROR="c",vr.MESSAGE="d",Ee.prototype.listen=Ee.prototype.N,tt.prototype.listenOnce=tt.prototype.O,tt.prototype.getLastError=tt.prototype.La,tt.prototype.getLastErrorCode=tt.prototype.Da,tt.prototype.getStatus=tt.prototype.ba,tt.prototype.getResponseJson=tt.prototype.Qa,tt.prototype.getResponseText=tt.prototype.ga,tt.prototype.send=tt.prototype.ea;var Wi=Pe.createWebChannelTransport=function(){return new Na},uo=Pe.getStatEventTarget=function(){return ys()},Fo=Pe.ErrorCode=_t,uu=Pe.EventType=kt,lu=Pe.Event=yi,gi=Pe.Stat={rb:0,ub:1,vb:2,Ob:3,Tb:4,Qb:5,Rb:6,Pb:7,Nb:8,Sb:9,PROXY:10,NOPROXY:11,Lb:12,Hb:13,Ib:14,Gb:15,Jb:16,Kb:17,nb:18,mb:19,ob:20},Su=Pe.FetchXmlHttpFactory=Ps,Ri=Pe.WebChannel=wn,ea=Pe.XhrIo=tt;const ps="@firebase/firestore";class ri{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}ri.UNAUTHENTICATED=new ri(null),ri.GOOGLE_CREDENTIALS=new ri("google-credentials-uid"),ri.FIRST_PARTY=new ri("first-party-uid"),ri.MOCK_USER=new ri("mock-user");let Ns="9.6.10";const Lo=new Z.Yd("@firebase/firestore");function ka(){return Lo.logLevel}function bc(i){Lo.setLogLevel(i)}function on(i,...e){if(Lo.logLevel<=Z.in.DEBUG){const n=e.map(Ju);Lo.debug(`Firestore (${Ns}): ${i}`,...n)}}function Vi(i,...e){if(Lo.logLevel<=Z.in.ERROR){const n=e.map(Ju);Lo.error(`Firestore (${Ns}): ${i}`,...n)}}function qs(i,...e){if(Lo.logLevel<=Z.in.WARN){const n=e.map(Ju);Lo.warn(`Firestore (${Ns}): ${i}`,...n)}}function Ju(i){if("string"==typeof i)return i;try{return JSON.stringify(i)}catch(n){return i}}function In(i="Unexpected state"){const e=`FIRESTORE (${Ns}) INTERNAL ASSERTION FAILED: `+i;throw Vi(e),new Error(e)}function Xn(i,e){i||In()}function ql(i,e){i||In()}function nn(i,e){return i}const bt={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Jt extends we.ZR{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class ii{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}class ha{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class ta{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(ri.UNAUTHENTICATED))}shutdown(){}}class Zl{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class Fa{constructor(e){this.t=e,this.currentUser=ri.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){var o=this;let u=this.i;const m=ne=>this.i!==u?(u=this.i,n(ne)):Promise.resolve();let I=new ii;this.o=()=>{this.i++,this.currentUser=this.u(),I.resolve(),I=new ii,e.enqueueRetryable(()=>m(this.currentUser))};const O=()=>{const ne=I;e.enqueueRetryable((0,f.Z)(function*(){yield ne.promise,yield m(o.currentUser)}))},Q=ne=>{on("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=ne,this.auth.addAuthTokenListener(this.o),O()};this.t.onInit(ne=>Q(ne)),setTimeout(()=>{if(!this.auth){const ne=this.t.getImmediate({optional:!0});ne?Q(ne):(on("FirebaseAuthCredentialsProvider","Auth not yet detected"),I.resolve(),I=new ii)}},0),O()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(o=>this.i!==e?(on("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):o?(Xn("string"==typeof o.accessToken),new ha(o.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Xn(null===e||"string"==typeof e),new ri(e)}}class cu{constructor(e,n,o){this.type="FirstParty",this.user=ri.FIRST_PARTY,this.headers=new Map,this.headers.set("X-Goog-AuthUser",n);const u=e.auth.getAuthHeaderValueForFirstParty([]);u&&this.headers.set("Authorization",u),o&&this.headers.set("X-Goog-Iam-Authorization-Token",o)}}class La{constructor(e,n,o){this.h=e,this.l=n,this.m=o}getToken(){return Promise.resolve(new cu(this.h,this.l,this.m))}start(e,n){e.enqueueRetryable(()=>n(ri.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class du{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Io{constructor(e){this.g=e,this.forceRefresh=!1,this.appCheck=null,this.p=null}start(e,n){const o=m=>{null!=m.error&&on("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${m.error.message}`);const I=m.token!==this.p;return this.p=m.token,on("FirebaseAppCheckTokenProvider",`Received ${I?"new":"existing"} token.`),I?n(m.token):Promise.resolve()};this.o=m=>{e.enqueueRetryable(()=>o(m))};const u=m=>{on("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=m,this.appCheck.addTokenListener(this.o)};this.g.onInit(m=>u(m)),setTimeout(()=>{if(!this.appCheck){const m=this.g.getImmediate({optional:!0});m?u(m):on("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Xn("string"==typeof n.token),this.p=n.token,new du(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}class gs{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=o=>this.I(o),this.T=o=>n.writeSequenceNumber(o))}I(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.T&&this.T(e),e}}function xu(i){const e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(i);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(let o=0;o<i;o++)n[o]=Math.floor(256*Math.random());return n}gs.A=-1;class R{static R(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let o="";for(;o.length<20;){const u=xu(40);for(let m=0;m<u.length;++m)o.length<20&&u[m]<n&&(o+=e.charAt(u[m]%e.length))}return o}}function b(i,e){return i<e?-1:i>e?1:0}function C(i,e,n){return i.length===e.length&&i.every((o,u)=>n(o,e[u]))}function V(i){return i+"\0"}class W{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new Jt(bt.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return W.fromMillis(Date.now())}static fromDate(e){return W.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),o=Math.floor(1e6*(e-1e3*n));return new W(n,o)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?b(this.nanoseconds,e.nanoseconds):b(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class X{constructor(e){this.timestamp=e}static fromTimestamp(e){return new X(e)}static min(){return new X(new W(0,0))}static max(){return new X(new W(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}function Te(i){let e=0;for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e++;return e}function Ue(i,e){for(const n in i)Object.prototype.hasOwnProperty.call(i,n)&&e(n,i[n])}function At(i){for(const e in i)if(Object.prototype.hasOwnProperty.call(i,e))return!1;return!0}class En{constructor(e,n,o){void 0===n?n=0:n>e.length&&In(),void 0===o?o=e.length-n:o>e.length-n&&In(),this.segments=e,this.offset=n,this.len=o}get length(){return this.len}isEqual(e){return 0===En.comparator(this,e)}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof En?e.forEach(o=>{n.push(o)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,o=this.limit();n<o;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const o=Math.min(e.length,n.length);for(let u=0;u<o;u++){const m=e.get(u),I=n.get(u);if(m<I)return-1;if(m>I)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Tn extends En{construct(e,n,o){return new Tn(e,n,o)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const o of e){if(o.indexOf("//")>=0)throw new Jt(bt.INVALID_ARGUMENT,`Invalid segment (${o}). Paths must not contain // in them.`);n.push(...o.split("/").filter(u=>u.length>0))}return new Tn(n)}static emptyPath(){return new Tn([])}}const jn=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class rr extends En{construct(e,n,o){return new rr(e,n,o)}static isValidIdentifier(e){return jn.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),rr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new rr(["__name__"])}static fromServerFormat(e){const n=[];let o="",u=0;const m=()=>{if(0===o.length)throw new Jt(bt.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(o),o=""};let I=!1;for(;u<e.length;){const O=e[u];if("\\"===O){if(u+1===e.length)throw new Jt(bt.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const Q=e[u+1];if("\\"!==Q&&"."!==Q&&"`"!==Q)throw new Jt(bt.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);o+=Q,u+=2}else"`"===O?(I=!I,u++):"."!==O||I?(o+=O,u++):(m(),u++)}if(m(),I)throw new Jt(bt.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new rr(n)}static emptyPath(){return new rr([])}}class Dr{constructor(e){this.fields=e,e.sort(rr.comparator)}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return C(this.fields,e.fields,(n,o)=>n.isEqual(o))}}function Os(){return"undefined"!=typeof atob}class Kr{constructor(e){this.binaryString=e}static fromBase64String(e){const n=atob(e);return new Kr(n)}static fromUint8Array(e){const n=function(o){let u="";for(let m=0;m<o.length;++m)u+=String.fromCharCode(o[m]);return u}(e);return new Kr(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const n=new Uint8Array(e.length);for(let o=0;o<e.length;o++)n[o]=e.charCodeAt(o);return n}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return b(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Kr.EMPTY_BYTE_STRING=new Kr("");const Ua=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ms(i){if(Xn(!!i),"string"==typeof i){let e=0;const n=Ua.exec(i);if(Xn(!!n),n[1]){let u=n[1];u=(u+"000000000").substr(0,9),e=Number(u)}const o=new Date(i);return{seconds:Math.floor(o.getTime()/1e3),nanos:e}}return{seconds:Fr(i.seconds),nanos:Fr(i.nanos)}}function Fr(i){return"number"==typeof i?i:"string"==typeof i?Number(i):0}function ks(i){return"string"==typeof i?Kr.fromBase64String(i):Kr.fromUint8Array(i)}function Xu(i){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==i?void 0:i.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function Gi(i){const e=i.mapValue.fields.__previous_value__;return Xu(e)?Gi(e):e}function Pi(i){const e=ms(i.mapValue.fields.__local_write_time__.timestampValue);return new W(e.seconds,e.nanos)}class Yl{constructor(e,n,o,u,m,I,O,Q){this.databaseId=e,this.appId=n,this.persistenceKey=o,this.host=u,this.ssl=m,this.forceLongPolling=I,this.autoDetectLongPolling=O,this.useFetchStreams=Q}}class na{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new na("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof na&&e.projectId===this.projectId&&e.database===this.database}}function wr(i){return null==i}function Va(i){return 0===i&&1/i==-1/0}function Ql(i){return"number"==typeof i&&Number.isInteger(i)&&!Va(i)&&i<=Number.MAX_SAFE_INTEGER&&i>=Number.MIN_SAFE_INTEGER}class vn{constructor(e){this.path=e}static fromPath(e){return new vn(Tn.fromString(e))}static fromName(e){return new vn(Tn.fromString(e).popFirst(5))}static empty(){return new vn(Tn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===Tn.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,n){return Tn.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new vn(new Tn(e.slice()))}}const Jl={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},sd={nullValue:"NULL_VALUE"};function pa(i){return"nullValue"in i?0:"booleanValue"in i?1:"integerValue"in i||"doubleValue"in i?2:"timestampValue"in i?3:"stringValue"in i?5:"bytesValue"in i?6:"referenceValue"in i?7:"geoPointValue"in i?8:"arrayValue"in i?9:"mapValue"in i?Xu(i)?4:Mu(i)?9:10:In()}function Zs(i,e){if(i===e)return!0;const n=pa(i);if(n!==pa(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return i.booleanValue===e.booleanValue;case 4:return Pi(i).isEqual(Pi(e));case 3:return function(o,u){if("string"==typeof o.timestampValue&&"string"==typeof u.timestampValue&&o.timestampValue.length===u.timestampValue.length)return o.timestampValue===u.timestampValue;const m=ms(o.timestampValue),I=ms(u.timestampValue);return m.seconds===I.seconds&&m.nanos===I.nanos}(i,e);case 5:return i.stringValue===e.stringValue;case 6:return u=e,ks(i.bytesValue).isEqual(ks(u.bytesValue));case 7:return i.referenceValue===e.referenceValue;case 8:return function(o,u){return Fr(o.geoPointValue.latitude)===Fr(u.geoPointValue.latitude)&&Fr(o.geoPointValue.longitude)===Fr(u.geoPointValue.longitude)}(i,e);case 2:return function(o,u){if("integerValue"in o&&"integerValue"in u)return Fr(o.integerValue)===Fr(u.integerValue);if("doubleValue"in o&&"doubleValue"in u){const m=Fr(o.doubleValue),I=Fr(u.doubleValue);return m===I?Va(m)===Va(I):isNaN(m)&&isNaN(I)}return!1}(i,e);case 9:return C(i.arrayValue.values||[],e.arrayValue.values||[],Zs);case 10:return function(o,u){const m=o.mapValue.fields||{},I=u.mapValue.fields||{};if(Te(m)!==Te(I))return!1;for(const O in m)if(m.hasOwnProperty(O)&&(void 0===I[O]||!Zs(m[O],I[O])))return!1;return!0}(i,e);default:return In()}var u}function Bi(i,e){return void 0!==(i.values||[]).find(n=>Zs(n,e))}function Fs(i,e){if(i===e)return 0;const n=pa(i),o=pa(e);if(n!==o)return b(n,o);switch(n){case 0:case 9007199254740991:return 0;case 1:return b(i.booleanValue,e.booleanValue);case 2:return function(u,m){const I=Fr(u.integerValue||u.doubleValue),O=Fr(m.integerValue||m.doubleValue);return I<O?-1:I>O?1:I===O?0:isNaN(I)?isNaN(O)?0:-1:1}(i,e);case 3:return ji(i.timestampValue,e.timestampValue);case 4:return ji(Pi(i),Pi(e));case 5:return b(i.stringValue,e.stringValue);case 6:return function(u,m){const I=ks(u),O=ks(m);return I.compareTo(O)}(i.bytesValue,e.bytesValue);case 7:return function(u,m){const I=u.split("/"),O=m.split("/");for(let Q=0;Q<I.length&&Q<O.length;Q++){const ne=b(I[Q],O[Q]);if(0!==ne)return ne}return b(I.length,O.length)}(i.referenceValue,e.referenceValue);case 8:return function(u,m){const I=b(Fr(u.latitude),Fr(m.latitude));return 0!==I?I:b(Fr(u.longitude),Fr(m.longitude))}(i.geoPointValue,e.geoPointValue);case 9:return function(u,m){const I=u.values||[],O=m.values||[];for(let Q=0;Q<I.length&&Q<O.length;++Q){const ne=Fs(I[Q],O[Q]);if(ne)return ne}return b(I.length,O.length)}(i.arrayValue,e.arrayValue);case 10:return function(u,m){const I=u.fields||{},O=Object.keys(I),Q=m.fields||{},ne=Object.keys(Q);O.sort(),ne.sort();for(let Re=0;Re<O.length&&Re<ne.length;++Re){const Ze=b(O[Re],ne[Re]);if(0!==Ze)return Ze;const Tt=Fs(I[O[Re]],Q[ne[Re]]);if(0!==Tt)return Tt}return b(O.length,ne.length)}(i.mapValue,e.mapValue);default:throw In()}}function ji(i,e){if("string"==typeof i&&"string"==typeof e&&i.length===e.length)return b(i,e);const n=ms(i),o=ms(e),u=b(n.seconds,o.seconds);return 0!==u?u:b(n.nanos,o.nanos)}function _s(i){return Ba(i)}function Ba(i){return"nullValue"in i?"null":"booleanValue"in i?""+i.booleanValue:"integerValue"in i?""+i.integerValue:"doubleValue"in i?""+i.doubleValue:"timestampValue"in i?function(o){const u=ms(o);return`time(${u.seconds},${u.nanos})`}(i.timestampValue):"stringValue"in i?i.stringValue:"bytesValue"in i?ks(i.bytesValue).toBase64():"referenceValue"in i?vn.fromName(i.referenceValue).toString():"geoPointValue"in i?`geo(${(e=i.geoPointValue).latitude},${e.longitude})`:"arrayValue"in i?function(o){let u="[",m=!0;for(const I of o.values||[])m?m=!1:u+=",",u+=Ba(I);return u+"]"}(i.arrayValue):"mapValue"in i?function(o){const u=Object.keys(o.fields||{}).sort();let m="{",I=!0;for(const O of u)I?I=!1:m+=",",m+=`${O}:${Ba(o.fields[O])}`;return m+"}"}(i.mapValue):In();var e}function ja(i,e){return{referenceValue:`projects/${i.projectId}/databases/${i.database}/documents/${e.path.canonicalString()}`}}function lo(i){return!!i&&"integerValue"in i}function Ni(i){return!!i&&"arrayValue"in i}function Ys(i){return!!i&&"nullValue"in i}function el(i){return!!i&&"doubleValue"in i&&isNaN(Number(i.doubleValue))}function hu(i){return!!i&&"mapValue"in i}function ws(i){if(i.geoPointValue)return{geoPointValue:Object.assign({},i.geoPointValue)};if(i.timestampValue&&"object"==typeof i.timestampValue)return{timestampValue:Object.assign({},i.timestampValue)};if(i.mapValue){const e={mapValue:{fields:{}}};return Ue(i.mapValue.fields,(n,o)=>e.mapValue.fields[n]=ws(o)),e}if(i.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(i.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=ws(i.arrayValue.values[n]);return e}return Object.assign({},i)}function Mu(i){return"__max__"===(((i.mapValue||{}).fields||{}).__type__||{}).stringValue}function Ml(i,e){return void 0===i?e:void 0===e||Fs(i,e)>0?i:e}function Tc(i,e){return void 0===i?e:void 0===e||Fs(i,e)<0?i:e}class Oi{constructor(e){this.value=e}static empty(){return new Oi({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let o=0;o<e.length-1;++o)if(n=(n.mapValue.fields||{})[e.get(o)],!hu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=ws(n)}setAll(e){let n=rr.emptyPath(),o={},u=[];e.forEach((I,O)=>{if(!n.isImmediateParentOf(O)){const Q=this.getFieldsMap(n);this.applyChanges(Q,o,u),o={},u=[],n=O.popLast()}I?o[O.lastSegment()]=ws(I):u.push(O.lastSegment())});const m=this.getFieldsMap(n);this.applyChanges(m,o,u)}delete(e){const n=this.field(e.popLast());hu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return Zs(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let o=0;o<e.length;++o){let u=n.mapValue.fields[e.get(o)];hu(u)&&u.mapValue.fields||(u={mapValue:{fields:{}}},n.mapValue.fields[e.get(o)]=u),n=u}return n.mapValue.fields}applyChanges(e,n,o){Ue(n,(u,m)=>e[u]=m);for(const u of o)delete e[u]}clone(){return new Oi(ws(this.value))}}function fu(i){const e=[];return Ue(i.fields,(n,o)=>{const u=new rr([n]);if(hu(o)){const m=fu(o.mapValue).fields;if(0===m.length)e.push(u);else for(const I of m)e.push(u.child(I))}else e.push(u)}),new Dr(e)}class si{constructor(e,n,o,u,m,I){this.key=e,this.documentType=n,this.version=o,this.readTime=u,this.data=m,this.documentState=I}static newInvalidDocument(e){return new si(e,0,X.min(),X.min(),Oi.empty(),0)}static newFoundDocument(e,n,o){return new si(e,1,n,X.min(),o,0)}static newNoDocument(e,n){return new si(e,2,n,X.min(),Oi.empty(),0)}static newUnknownDocument(e,n){return new si(e,3,n,X.min(),Oi.empty(),2)}convertToFoundDocument(e,n){return this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Oi.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Oi.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof si&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new si(this.key,this.documentType,this.version,this.readTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class Is{constructor(e,n,o,u){this.indexId=e,this.collectionGroup=n,this.fields=o,this.indexState=u}}function tl(i){return i.fields.find(e=>2===e.kind)}function Ls(i){return i.fields.filter(e=>2!==e.kind)}Is.UNKNOWN_ID=-1;class Xl{constructor(e,n){this.fieldPath=e,this.kind=n}}class ga{constructor(e,n){this.sequenceNumber=e,this.offset=n}static empty(){return new ga(0,co.min())}}function ec(i,e){const n=i.toTimestamp().seconds,o=i.toTimestamp().nanoseconds+1,u=X.fromTimestamp(1e9===o?new W(n+1,0):new W(n,o));return new co(u,vn.empty(),e)}function pu(i){return new co(i.readTime,i.key,-1)}class co{constructor(e,n,o){this.readTime=e,this.documentKey=n,this.largestBatchId=o}static min(){return new co(X.min(),vn.empty(),-1)}static max(){return new co(X.max(),vn.empty(),-1)}}function $a(i,e){let n=i.readTime.compareTo(e.readTime);return 0!==n?n:(n=vn.comparator(i.documentKey,e.documentKey),0!==n?n:b(i.largestBatchId,e.largestBatchId))}class Ru{constructor(e,n=null,o=[],u=[],m=null,I=null,O=null){this.path=e,this.collectionGroup=n,this.orderBy=o,this.filters=u,this.limit=m,this.startAt=I,this.endAt=O,this.P=null}}function Rl(i,e=null,n=[],o=[],u=null,m=null,I=null){return new Ru(i,e,n,o,u,m,I)}function ra(i){const e=nn(i);if(null===e.P){let n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(o=>{return(u=o).field.canonicalString()+u.op.toString()+_s(u.value);var u}).join(","),n+="|ob:",n+=e.orderBy.map(o=>{return(u=o).field.canonicalString()+u.dir;var u}).join(","),wr(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(o=>_s(o)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(o=>_s(o)).join(",")),e.P=n}return e.P}function ia(i,e){if(i.limit!==e.limit||i.orderBy.length!==e.orderBy.length)return!1;for(let u=0;u<i.orderBy.length;u++)if(!ud(i.orderBy[u],e.orderBy[u]))return!1;if(i.filters.length!==e.filters.length)return!1;for(let u=0;u<i.filters.length;u++)if((n=i.filters[u]).op!==(o=e.filters[u]).op||!n.field.isEqual(o.field)||!Zs(n.value,o.value))return!1;var n,o;return i.collectionGroup===e.collectionGroup&&!!i.path.isEqual(e.path)&&!!Uo(i.startAt,e.startAt)&&Uo(i.endAt,e.endAt)}function Qs(i){return vn.isDocumentKey(i.path)&&null===i.collectionGroup&&0===i.filters.length}function Ha(i,e){return i.filters.filter(n=>n instanceof mi&&n.field.isEqual(e))}class mi extends class{}{constructor(e,n,o){super(),this.field=e,this.op=n,this.value=o}static create(e,n,o){return e.isKeyField()?"in"===n||"not-in"===n?this.V(e,n,o):new Dc(e,n,o):"array-contains"===n?new od(e,o):"in"===n?new sa(e,o):"not-in"===n?new Nu(e,o):"array-contains-any"===n?new ad(e,o):new mi(e,n,o)}static V(e,n,o){return"in"===n?new Wa(e,o):new Ga(e,o)}matches(e){const n=e.data.field(this.field);return"!="===this.op?null!==n&&this.v(Fs(n,this.value)):null!==n&&pa(this.value)===pa(n)&&this.v(Fs(n,this.value))}v(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return In()}}S(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}}class Dc extends mi{constructor(e,n,o){super(e,n,o),this.key=vn.fromName(o.referenceValue)}matches(e){const n=vn.comparator(e.key,this.key);return this.v(n)}}class Wa extends mi{constructor(e,n){super(e,"in",n),this.keys=Pu(0,n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class Ga extends mi{constructor(e,n){super(e,"not-in",n),this.keys=Pu(0,n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function Pu(i,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(o=>vn.fromName(o.referenceValue))}class od extends mi{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ni(n)&&Bi(n.arrayValue,this.value)}}class sa extends mi{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return null!==n&&Bi(this.value.arrayValue,n)}}class Nu extends mi{constructor(e,n){super(e,"not-in",n)}matches(e){if(Bi(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return null!==n&&!Bi(this.value.arrayValue,n)}}class ad extends mi{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ni(n)||!n.arrayValue.values)&&n.arrayValue.values.some(o=>Bi(this.value.arrayValue,o))}}class ci{constructor(e,n){this.position=e,this.inclusive=n}}class _a{constructor(e,n="asc"){this.field=e,this.dir=n}}function ud(i,e){return i.dir===e.dir&&i.field.isEqual(e.field)}function ya(i,e,n){let o=0;for(let u=0;u<i.position.length;u++){const m=e[u],I=i.position[u];if(o=m.field.isKeyField()?vn.comparator(vn.fromName(I.referenceValue),n.key):Fs(I,n.data.field(m.field)),"desc"===m.dir&&(o*=-1),0!==o)break}return o}function Uo(i,e){if(null===i)return null===e;if(null===e||i.inclusive!==e.inclusive||i.position.length!==e.position.length)return!1;for(let n=0;n<i.position.length;n++)if(!Zs(i.position[n],e.position[n]))return!1;return!0}class Cs{constructor(e,n=null,o=[],u=[],m=null,I="F",O=null,Q=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=o,this.filters=u,this.limit=m,this.limitType=I,this.startAt=O,this.endAt=Q,this.D=null,this.C=null}}function gu(i,e,n,o,u,m,I,O){return new Cs(i,e,n,o,u,m,I,O)}function Vo(i){return new Cs(i)}function ho(i){return!wr(i.limit)&&"F"===i.limitType}function Bo(i){return!wr(i.limit)&&"L"===i.limitType}function Ou(i){return i.explicitOrderBy.length>0?i.explicitOrderBy[0].field:null}function va(i){for(const e of i.filters)if(e.S())return e.field;return null}function ku(i){return null!==i.collectionGroup}function Ea(i){const e=nn(i);if(null===e.D){e.D=[];const n=va(e),o=Ou(e);if(null!==n&&null===o)n.isKeyField()||e.D.push(new _a(n)),e.D.push(new _a(rr.keyField(),"asc"));else{let u=!1;for(const m of e.explicitOrderBy)e.D.push(m),m.field.isKeyField()&&(u=!0);if(!u){const m=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.D.push(new _a(rr.keyField(),m))}}}return e.D}function bs(i){const e=nn(i);if(!e.C)if("F"===e.limitType)e.C=Rl(e.path,e.collectionGroup,Ea(e),e.filters,e.limit,e.startAt,e.endAt);else{const n=[];for(const m of Ea(e))n.push(new _a(m.field,"desc"===m.dir?"asc":"desc"));const o=e.endAt?new ci(e.endAt.position,!e.endAt.inclusive):null,u=e.startAt?new ci(e.startAt.position,!e.startAt.inclusive):null;e.C=Rl(e.path,e.collectionGroup,n,e.filters,e.limit,o,u)}return e.C}function wa(i,e,n){return new Cs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),e,n,i.startAt,i.endAt)}function za(i,e){return ia(bs(i),bs(e))&&i.limitType===e.limitType}function Ia(i){return`${ra(bs(i))}|lt:${i.limitType}`}function Fu(i){return`Query(target=${function ma(i){let e=i.path.canonicalString();return null!==i.collectionGroup&&(e+=" collectionGroup="+i.collectionGroup),i.filters.length>0&&(e+=`, filters: [${i.filters.map(n=>{return`${(o=n).field.canonicalString()} ${o.op} ${_s(o.value)}`;var o}).join(", ")}]`),wr(i.limit)||(e+=", limit: "+i.limit),i.orderBy.length>0&&(e+=`, orderBy: [${i.orderBy.map(n=>{return`${(o=n).field.canonicalString()} (${o.dir})`;var o}).join(", ")}]`),i.startAt&&(e+=", startAt: ",e+=i.startAt.inclusive?"b:":"a:",e+=i.startAt.position.map(n=>_s(n)).join(",")),i.endAt&&(e+=", endAt: ",e+=i.endAt.inclusive?"a:":"b:",e+=i.endAt.position.map(n=>_s(n)).join(",")),`Target(${e})`}(bs(i))}; limitType=${i.limitType})`}function Ka(i,e){return e.isFoundDocument()&&function(n,o){const u=o.key.path;return null!==n.collectionGroup?o.key.hasCollectionId(n.collectionGroup)&&n.path.isPrefixOf(u):vn.isDocumentKey(n.path)?n.path.isEqual(u):n.path.isImmediateParentOf(u)}(i,e)&&function(n,o){for(const u of n.explicitOrderBy)if(!u.field.isKeyField()&&null===o.data.field(u.field))return!1;return!0}(i,e)&&function(n,o){for(const u of n.filters)if(!u.matches(o))return!1;return!0}(i,e)&&(o=e,!((n=i).startAt&&!function(u,m,I){const O=ya(u,m,I);return u.inclusive?O<=0:O<0}(n.startAt,Ea(n),o)||n.endAt&&!function(u,m,I){const O=ya(u,m,I);return u.inclusive?O>=0:O>0}(n.endAt,Ea(n),o)));var n,o}function Ca(i){return i.collectionGroup||(i.path.length%2==1?i.path.lastSegment():i.path.get(i.path.length-2))}function Lu(i){return(e,n)=>{let o=!1;for(const u of Ea(i)){const m=ld(u,e,n);if(0!==m)return m;o=o||u.field.isKeyField()}return 0}}function ld(i,e,n){const o=i.field.isKeyField()?vn.comparator(e.key,n.key):function(u,m,I){const O=m.data.field(u),Q=I.data.field(u);return null!==O&&null!==Q?Fs(O,Q):In()}(i.field,e,n);switch(i.dir){case"asc":return o;case"desc":return-1*o;default:return In()}}function Uu(i,e){if(i.N){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Va(e)?"-0":e}}function mu(i){return{integerValue:""+i}}function oa(i,e){return Ql(e)?mu(e):Uu(i,e)}class qa{constructor(){this._=void 0}}function cd(i,e,n){return i instanceof Co?function(o,u){const m={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:o.seconds,nanos:o.nanoseconds}}}};return u&&(m.fields.__previous_value__=u),{mapValue:m}}(n,e):i instanceof Us?Bu(i,e):i instanceof ss?Ac(i,e):function(o,u){const m=Vu(o,u),I=ba(m)+ba(o.k);return lo(m)&&lo(o.k)?mu(I):Uu(o.M,I)}(i,e)}function dd(i,e,n){return i instanceof Us?Bu(i,e):i instanceof ss?Ac(i,e):n}function Vu(i,e){return i instanceof Za?lo(n=e)||(o=n)&&"doubleValue"in o?e:{integerValue:0}:null;var o,n}class Co extends qa{}class Us extends qa{constructor(e){super(),this.elements=e}}function Bu(i,e){const n=nl(e);for(const o of i.elements)n.some(u=>Zs(u,o))||n.push(o);return{arrayValue:{values:n}}}class ss extends qa{constructor(e){super(),this.elements=e}}function Ac(i,e){let n=nl(e);for(const o of i.elements)n=n.filter(u=>!Zs(u,o));return{arrayValue:{values:n}}}class Za extends qa{constructor(e,n){super(),this.M=e,this.k=n}}function ba(i){return Fr(i.integerValue||i.doubleValue)}function nl(i){return Ni(i)&&i.arrayValue.values?i.arrayValue.values.slice():[]}class os{constructor(e,n){this.field=e,this.transform=n}}class Sc{constructor(e,n){this.version=e,this.transformResults=n}}class $i{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new $i}static exists(e){return new $i(void 0,e)}static updateTime(e){return new $i(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Pl(i,e){return void 0!==i.updateTime?e.isFoundDocument()&&e.version.isEqual(i.updateTime):void 0===i.exists||i.exists===e.isFoundDocument()}class rl{}function Vd(i,e,n){i instanceof sl?function(o,u,m){const I=o.value.clone(),O=nc(o.fieldTransforms,u,m.transformResults);I.setAll(O),u.convertToFoundDocument(m.version,I).setHasCommittedMutations()}(i,e,n):i instanceof Qa?function(o,u,m){if(!Pl(o.precondition,u))return void u.convertToUnknownDocument(m.version);const I=nc(o.fieldTransforms,u,m.transformResults),O=u.data;O.setAll(_u(o)),O.setAll(I),u.convertToFoundDocument(m.version,O).setHasCommittedMutations()}(i,e,n):e.convertToNoDocument(n.version).setHasCommittedMutations()}function il(i,e,n){var u;i instanceof sl?function(o,u,m){if(!Pl(o.precondition,u))return;const I=o.value.clone(),O=rc(o.fieldTransforms,m,u);I.setAll(O),u.convertToFoundDocument(xc(u),I).setHasLocalMutations()}(i,e,n):i instanceof Qa?function(o,u,m){if(!Pl(o.precondition,u))return;const I=rc(o.fieldTransforms,m,u),O=u.data;O.setAll(_u(o)),O.setAll(I),u.convertToFoundDocument(xc(u),O).setHasLocalMutations()}(i,e,n):Pl(i.precondition,u=e)&&u.convertToNoDocument(X.min())}function jo(i,e){let n=null;for(const o of i.fieldTransforms){const u=e.data.field(o.field),m=Vu(o.transform,u||null);null!=m&&(null==n&&(n=Oi.empty()),n.set(o.field,m))}return n||null}function Ya(i,e){return i.type===e.type&&!!i.key.isEqual(e.key)&&!!i.precondition.isEqual(e.precondition)&&(o=e.fieldTransforms,!!(void 0===(n=i.fieldTransforms)&&void 0===o||n&&o&&C(n,o,(u,m)=>function tc(i,e){return i.field.isEqual(e.field)&&(o=e.transform,(n=i.transform)instanceof Us&&o instanceof Us||n instanceof ss&&o instanceof ss?C(n.elements,o.elements,Zs):n instanceof Za&&o instanceof Za?Zs(n.k,o.k):n instanceof Co&&o instanceof Co);var n,o}(u,m))))&&(0===i.type?i.value.isEqual(e.value):1!==i.type||i.data.isEqual(e.data)&&i.fieldMask.isEqual(e.fieldMask));var n,o}function xc(i){return i.isFoundDocument()?i.version:X.min()}class sl extends rl{constructor(e,n,o,u=[]){super(),this.key=e,this.value=n,this.precondition=o,this.fieldTransforms=u,this.type=0}}class Qa extends rl{constructor(e,n,o,u,m=[]){super(),this.key=e,this.data=n,this.fieldMask=o,this.precondition=u,this.fieldTransforms=m,this.type=1}}function _u(i){const e=new Map;return i.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const o=i.data.field(n);e.set(n,o)}}),e}function nc(i,e,n){const o=new Map;Xn(i.length===n.length);for(let u=0;u<n.length;u++){const m=i[u],I=m.transform,O=e.data.field(m.field);o.set(m.field,dd(I,O,n[u]))}return o}function rc(i,e,n){const o=new Map;for(const u of i){const m=u.transform,I=n.data.field(u.field);o.set(u.field,cd(m,I,e))}return o}class ol extends rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}}class al extends rl{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}}class hd{constructor(e){this.count=e}}var D,g;function y(i){switch(i){default:return In();case bt.CANCELLED:case bt.UNKNOWN:case bt.DEADLINE_EXCEEDED:case bt.RESOURCE_EXHAUSTED:case bt.INTERNAL:case bt.UNAVAILABLE:case bt.UNAUTHENTICATED:return!1;case bt.INVALID_ARGUMENT:case bt.NOT_FOUND:case bt.ALREADY_EXISTS:case bt.PERMISSION_DENIED:case bt.FAILED_PRECONDITION:case bt.ABORTED:case bt.OUT_OF_RANGE:case bt.UNIMPLEMENTED:case bt.DATA_LOSS:return!0}}function M(i){if(void 0===i)return Vi("GRPC error has no .code"),bt.UNKNOWN;switch(i){case D.OK:return bt.OK;case D.CANCELLED:return bt.CANCELLED;case D.UNKNOWN:return bt.UNKNOWN;case D.DEADLINE_EXCEEDED:return bt.DEADLINE_EXCEEDED;case D.RESOURCE_EXHAUSTED:return bt.RESOURCE_EXHAUSTED;case D.INTERNAL:return bt.INTERNAL;case D.UNAVAILABLE:return bt.UNAVAILABLE;case D.UNAUTHENTICATED:return bt.UNAUTHENTICATED;case D.INVALID_ARGUMENT:return bt.INVALID_ARGUMENT;case D.NOT_FOUND:return bt.NOT_FOUND;case D.ALREADY_EXISTS:return bt.ALREADY_EXISTS;case D.PERMISSION_DENIED:return bt.PERMISSION_DENIED;case D.FAILED_PRECONDITION:return bt.FAILED_PRECONDITION;case D.ABORTED:return bt.ABORTED;case D.OUT_OF_RANGE:return bt.OUT_OF_RANGE;case D.UNIMPLEMENTED:return bt.UNIMPLEMENTED;case D.DATA_LOSS:return bt.DATA_LOSS;default:return In()}}(g=D||(D={}))[g.OK=0]="OK",g[g.CANCELLED=1]="CANCELLED",g[g.UNKNOWN=2]="UNKNOWN",g[g.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",g[g.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",g[g.NOT_FOUND=5]="NOT_FOUND",g[g.ALREADY_EXISTS=6]="ALREADY_EXISTS",g[g.PERMISSION_DENIED=7]="PERMISSION_DENIED",g[g.UNAUTHENTICATED=16]="UNAUTHENTICATED",g[g.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",g[g.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",g[g.ABORTED=10]="ABORTED",g[g.OUT_OF_RANGE=11]="OUT_OF_RANGE",g[g.UNIMPLEMENTED=12]="UNIMPLEMENTED",g[g.INTERNAL=13]="INTERNAL",g[g.UNAVAILABLE=14]="UNAVAILABLE",g[g.DATA_LOSS=15]="DATA_LOSS";class ee{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0!==o)for(const[u,m]of o)if(this.equalsFn(u,e))return m}has(e){return void 0!==this.get(e)}set(e,n){const o=this.mapKeyFn(e),u=this.inner[o];if(void 0===u)return this.inner[o]=[[e,n]],void this.innerSize++;for(let m=0;m<u.length;m++)if(this.equalsFn(u[m][0],e))return void(u[m]=[e,n]);u.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),o=this.inner[n];if(void 0===o)return!1;for(let u=0;u<o.length;u++)if(this.equalsFn(o[u][0],e))return 1===o.length?delete this.inner[n]:o.splice(u,1),this.innerSize--,!0;return!1}forEach(e){Ue(this.inner,(n,o)=>{for(const[u,m]of o)e(u,m)})}isEmpty(){return At(this.inner)}size(){return this.innerSize}}class pe{constructor(e,n){this.comparator=e,this.root=n||Ft.EMPTY}insert(e,n){return new pe(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Ft.BLACK,null,null))}remove(e){return new pe(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Ft.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const o=this.comparator(e,n.key);if(0===o)return n.value;o<0?n=n.left:o>0&&(n=n.right)}return null}indexOf(e){let n=0,o=this.root;for(;!o.isEmpty();){const u=this.comparator(e,o.key);if(0===u)return n+o.left.size;u<0?o=o.left:(n+=o.left.size+1,o=o.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,o)=>(e(n,o),!1))}toString(){const e=[];return this.inorderTraversal((n,o)=>(e.push(`${n}:${o}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new ct(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new ct(this.root,e,this.comparator,!1)}getReverseIterator(){return new ct(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new ct(this.root,e,this.comparator,!0)}}class ct{constructor(e,n,o,u){this.isReverse=u,this.nodeStack=[];let m=1;for(;!e.isEmpty();)if(m=n?o(e.key,n):1,n&&u&&(m*=-1),m<0)e=this.isReverse?e.left:e.right;else{if(0===m){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Ft{constructor(e,n,o,u,m){this.key=e,this.value=n,this.color=null!=o?o:Ft.RED,this.left=null!=u?u:Ft.EMPTY,this.right=null!=m?m:Ft.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,o,u,m){return new Ft(null!=e?e:this.key,null!=n?n:this.value,null!=o?o:this.color,null!=u?u:this.left,null!=m?m:this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,o){let u=this;const m=o(e,u.key);return u=m<0?u.copy(null,null,null,u.left.insert(e,n,o),null):0===m?u.copy(null,n,null,null,null):u.copy(null,null,null,null,u.right.insert(e,n,o)),u.fixUp()}removeMin(){if(this.left.isEmpty())return Ft.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let o,u=this;if(n(e,u.key)<0)u.left.isEmpty()||u.left.isRed()||u.left.left.isRed()||(u=u.moveRedLeft()),u=u.copy(null,null,null,u.left.remove(e,n),null);else{if(u.left.isRed()&&(u=u.rotateRight()),u.right.isEmpty()||u.right.isRed()||u.right.left.isRed()||(u=u.moveRedRight()),0===n(e,u.key)){if(u.right.isEmpty())return Ft.EMPTY;o=u.right.min(),u=u.copy(o.key,o.value,null,null,u.right.removeMin())}u=u.copy(null,null,null,null,u.right.remove(e,n))}return u.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Ft.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Ft.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw In();const e=this.left.check();if(e!==this.right.check())throw In();return e+(this.isRed()?0:1)}}Ft.EMPTY=null,Ft.RED=!0,Ft.BLACK=!1,Ft.EMPTY=new class{constructor(){this.size=0}get key(){throw In()}get value(){throw In()}get color(){throw In()}get left(){throw In()}get right(){throw In()}copy(i,e,n,o,u){return this}insert(i,e,n){return new Ft(i,e)}remove(i,e){return this}isEmpty(){return!0}inorderTraversal(i){return!1}reverseTraversal(i){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class ln{constructor(e){this.comparator=e,this.data=new pe(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,o)=>(e(n),!1))}forEachInRange(e,n){const o=this.data.getIteratorFrom(e[0]);for(;o.hasNext();){const u=o.getNext();if(this.comparator(u.key,e[1])>=0)return;n(u.key)}}forEachWhile(e,n){let o;for(o=void 0!==n?this.data.getIteratorFrom(n):this.data.getIterator();o.hasNext();)if(!e(o.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new ir(this.data.getIterator())}getIteratorFrom(e){return new ir(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(o=>{n=n.add(o)}),n}isEqual(e){if(!(e instanceof ln)||this.size!==e.size)return!1;const n=this.data.getIterator(),o=e.data.getIterator();for(;n.hasNext();){const u=n.getNext().key,m=o.getNext().key;if(0!==this.comparator(u,m))return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ln(this.comparator);return n.data=e,n}}class ir{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function fr(i){return i.hasNext()?i.getNext():void 0}const hi=new pe(vn.comparator);function Qi(){return hi}const $o=new pe(vn.comparator);function yu(){return $o}function Ja(){return new ee(i=>i.toString(),(i,e)=>i.isEqual(e))}const ul=new pe(vn.comparator),fd=new ln(vn.comparator);function Vr(...i){let e=fd;for(const n of i)e=e.add(n);return e}const ll=new ln(b);function ju(){return ll}class cl{constructor(e,n,o,u,m){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=o,this.documentUpdates=u,this.resolvedLimboDocuments=m}static createSynthesizedRemoteEventForCurrentChange(e,n){const o=new Map;return o.set(e,Xa.createSynthesizedTargetChangeForCurrentChange(e,n)),new cl(X.min(),o,ju(),Qi(),Vr())}}class Xa{constructor(e,n,o,u,m){this.resumeToken=e,this.current=n,this.addedDocuments=o,this.modifiedDocuments=u,this.removedDocuments=m}static createSynthesizedTargetChangeForCurrentChange(e,n){return new Xa(Kr.EMPTY_BYTE_STRING,n,Vr(),Vr(),Vr())}}class eu{constructor(e,n,o,u){this.O=e,this.removedTargetIds=n,this.key=o,this.F=u}}class ic{constructor(e,n){this.targetId=e,this.$=n}}class tu{constructor(e,n,o=Kr.EMPTY_BYTE_STRING,u=null){this.state=e,this.targetIds=n,this.resumeToken=o,this.cause=u}}class _i{constructor(){this.B=0,this.L=$r(),this.U=Kr.EMPTY_BYTE_STRING,this.q=!1,this.G=!0}get current(){return this.q}get resumeToken(){return this.U}get K(){return 0!==this.B}get j(){return this.G}W(e){e.approximateByteSize()>0&&(this.G=!0,this.U=e)}H(){let e=Vr(),n=Vr(),o=Vr();return this.L.forEach((u,m)=>{switch(m){case 0:e=e.add(u);break;case 2:n=n.add(u);break;case 1:o=o.add(u);break;default:In()}}),new Xa(this.U,this.q,e,n,o)}J(){this.G=!1,this.L=$r()}Y(e,n){this.G=!0,this.L=this.L.insert(e,n)}X(e){this.G=!0,this.L=this.L.remove(e)}Z(){this.B+=1}tt(){this.B-=1}et(){this.G=!0,this.q=!0}}class Nl{constructor(e){this.nt=e,this.st=new Map,this.it=Qi(),this.rt=sc(),this.ot=new ln(b)}ut(e){for(const n of e.O)e.F&&e.F.isFoundDocument()?this.at(n,e.F):this.ct(n,e.key,e.F);for(const n of e.removedTargetIds)this.ct(n,e.key,e.F)}ht(e){this.forEachTarget(e,n=>{const o=this.lt(n);switch(e.state){case 0:this.ft(n)&&o.W(e.resumeToken);break;case 1:o.tt(),o.K||o.J(),o.W(e.resumeToken);break;case 2:o.tt(),o.K||this.removeTarget(n);break;case 3:this.ft(n)&&(o.et(),o.W(e.resumeToken));break;case 4:this.ft(n)&&(this.dt(n),o.W(e.resumeToken));break;default:In()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.st.forEach((o,u)=>{this.ft(u)&&n(u)})}_t(e){const n=e.targetId,o=e.$.count,u=this.wt(n);if(u){const m=u.target;if(Qs(m))if(0===o){const I=new vn(m.path);this.ct(n,I,si.newNoDocument(I,X.min()))}else Xn(1===o);else this.gt(n)!==o&&(this.dt(n),this.ot=this.ot.add(n))}}yt(e){const n=new Map;this.st.forEach((m,I)=>{const O=this.wt(I);if(O){if(m.current&&Qs(O.target)){const Q=new vn(O.target.path);null!==this.it.get(Q)||this.It(I,Q)||this.ct(I,Q,si.newNoDocument(Q,e))}m.j&&(n.set(I,m.H()),m.J())}});let o=Vr();this.rt.forEach((m,I)=>{let O=!0;I.forEachWhile(Q=>{const ne=this.wt(Q);return!ne||2===ne.purpose||(O=!1,!1)}),O&&(o=o.add(m))}),this.it.forEach((m,I)=>I.setReadTime(e));const u=new cl(e,n,this.ot,this.it,o);return this.it=Qi(),this.rt=sc(),this.ot=new ln(b),u}at(e,n){if(!this.ft(e))return;const o=this.It(e,n.key)?2:0;this.lt(e).Y(n.key,o),this.it=this.it.insert(n.key,n),this.rt=this.rt.insert(n.key,this.Tt(n.key).add(e))}ct(e,n,o){if(!this.ft(e))return;const u=this.lt(e);this.It(e,n)?u.Y(n,1):u.X(n),this.rt=this.rt.insert(n,this.Tt(n).delete(e)),o&&(this.it=this.it.insert(n,o))}removeTarget(e){this.st.delete(e)}gt(e){const n=this.lt(e).H();return this.nt.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Z(e){this.lt(e).Z()}lt(e){let n=this.st.get(e);return n||(n=new _i,this.st.set(e,n)),n}Tt(e){let n=this.rt.get(e);return n||(n=new ln(b),this.rt=this.rt.insert(e,n)),n}ft(e){const n=null!==this.wt(e);return n||on("WatchChangeAggregator","Detected inactive target",e),n}wt(e){const n=this.st.get(e);return n&&n.K?null:this.nt.Et(e)}dt(e){this.st.set(e,new _i),this.nt.getRemoteKeysForTarget(e).forEach(n=>{this.ct(e,n,null)})}It(e,n){return this.nt.getRemoteKeysForTarget(e).has(n)}}function sc(){return new pe(vn.comparator)}function $r(){return new pe(vn.comparator)}const Mc={asc:"ASCENDING",desc:"DESCENDING"},$u={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"};class Ol{constructor(e,n){this.databaseId=e,this.N=n}}function Vs(i,e){return i.N?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Hu(i,e){return i.N?e.toBase64():e.toUint8Array()}function pd(i,e){return Vs(i,e.toTimestamp())}function Ts(i){return Xn(!!i),X.fromTimestamp(function(e){const n=ms(e);return new W(n.seconds,n.nanos)}(i))}function vu(i,e){return(n=i,new Tn(["projects",n.projectId,"databases",n.database])).child("documents").child(e).canonicalString();var n}function wh(i){const e=Tn.fromString(i);return Xn(lc(e)),e}function oc(i,e){return vu(i.databaseId,e.path)}function Eu(i,e){const n=wh(e);if(n.get(1)!==i.databaseId.projectId)throw new Jt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+i.databaseId.projectId);if(n.get(3)!==i.databaseId.database)throw new Jt(bt.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+i.databaseId.database);return new vn(gd(n))}function wu(i,e){return vu(i.databaseId,e)}function Ds(i){const e=wh(i);return 4===e.length?Tn.emptyPath():gd(e)}function Wu(i){return new Tn(["projects",i.databaseId.projectId,"databases",i.databaseId.database]).canonicalString()}function gd(i){return Xn(i.length>4&&"documents"===i.get(4)),i.popFirst(5)}function dl(i,e,n){return{name:oc(i,e),fields:n.value.mapValue.fields}}function ki(i,e,n){const o=Eu(i,e.name),u=Ts(e.updateTime),m=new Oi({mapValue:{fields:e.fields}}),I=si.newFoundDocument(o,u,m);return n&&I.setHasCommittedMutations(),n?I.setHasCommittedMutations():I}function kl(i,e){let n;if(e instanceof sl)n={update:dl(i,e.key,e.value)};else if(e instanceof ol)n={delete:oc(i,e.key)};else if(e instanceof Qa)n={update:dl(i,e.key,e.data),updateMask:Ih(e.fieldMask)};else{if(!(e instanceof al))return In();n={verify:oc(i,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(o=>function(u,m){const I=m.transform;if(I instanceof Co)return{fieldPath:m.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(I instanceof Us)return{fieldPath:m.field.canonicalString(),appendMissingElements:{values:I.elements}};if(I instanceof ss)return{fieldPath:m.field.canonicalString(),removeAllFromArray:{values:I.elements}};if(I instanceof Za)return{fieldPath:m.field.canonicalString(),increment:I.k};throw In()}(0,o))),e.precondition.isNone||(n.currentDocument=void 0!==(u=e.precondition).updateTime?{updateTime:pd(i,u.updateTime)}:void 0!==u.exists?{exists:u.exists}:In()),n;var u}function md(i,e){const n=e.currentDocument?void 0!==(u=e.currentDocument).updateTime?$i.updateTime(Ts(u.updateTime)):void 0!==u.exists?$i.exists(u.exists):$i.none():$i.none(),o=e.updateTransforms?e.updateTransforms.map(u=>function(m,I){let O=null;"setToServerValue"in I?(Xn("REQUEST_TIME"===I.setToServerValue),O=new Co):"appendMissingElements"in I?O=new Us(I.appendMissingElements.values||[]):"removeAllFromArray"in I?O=new ss(I.removeAllFromArray.values||[]):"increment"in I?O=new Za(m,I.increment):In();const Q=rr.fromServerFormat(I.fieldPath);return new os(Q,O)}(i,u)):[];var u;if(e.update){const u=Eu(i,e.update.name),m=new Oi({mapValue:{fields:e.update.fields}});if(e.updateMask){const I=new Dr((e.updateMask.fieldPaths||[]).map(ne=>rr.fromServerFormat(ne)));return new Qa(u,m,I,n,o)}return new sl(u,m,n,o)}if(e.delete){const u=Eu(i,e.delete);return new ol(u,n)}if(e.verify){const u=Eu(i,e.verify);return new al(u,n)}return In()}function jd(i,e){return{documents:[wu(i,e.path)]}}function _d(i,e){const n={structuredQuery:{}},o=e.path;null!==e.collectionGroup?(n.parent=wu(i,o),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=wu(i,o.popLast()),n.structuredQuery.from=[{collectionId:o.lastSegment()}]);const u=function(Q){if(0===Q.length)return;const ne=Q.map(Re=>function(Ze){if("=="===Ze.op){if(el(Ze.value))return{unaryFilter:{field:fl(Ze.field),op:"IS_NAN"}};if(Ys(Ze.value))return{unaryFilter:{field:fl(Ze.field),op:"IS_NULL"}}}else if("!="===Ze.op){if(el(Ze.value))return{unaryFilter:{field:fl(Ze.field),op:"IS_NOT_NAN"}};if(Ys(Ze.value))return{unaryFilter:{field:fl(Ze.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:fl(Ze.field),op:Ta(Ze.op),value:Ze.value}}}(Re));return 1===ne.length?ne[0]:{compositeFilter:{op:"AND",filters:ne}}}(e.filters);u&&(n.structuredQuery.where=u);const m=function(Q){if(0!==Q.length)return Q.map(ne=>{return{field:fl((Re=ne).field),direction:yd(Re.dir)};var Re})}(e.orderBy);m&&(n.structuredQuery.orderBy=m);const I=(ne=e.limit,i.N||wr(ne)?ne:{value:ne});var ne,O,Q;return null!==I&&(n.structuredQuery.limit=I),e.startAt&&(n.structuredQuery.startAt={before:(O=e.startAt).inclusive,values:O.position}),e.endAt&&(n.structuredQuery.endAt={before:!(Q=e.endAt).inclusive,values:Q.position}),n}function ac(i){let e=Ds(i.parent);const n=i.structuredQuery,o=n.from?n.from.length:0;let u=null;if(o>0){Xn(1===o);const Re=n.from[0];Re.allDescendants?u=Re.collectionId:e=e.child(Re.collectionId)}let m=[];n.where&&(m=uc(n.where));let I=[];n.orderBy&&(I=n.orderBy.map(Re=>{return new _a(bo((Ze=Re).field),function(Tt){switch(Tt){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(Ze.direction));var Ze}));let O=null;n.limit&&(O=function(Re){let Ze;return Ze="object"==typeof Re?Re.value:Re,wr(Ze)?null:Ze}(n.limit));let Q=null;var Re;n.startAt&&(Q=new ci((Re=n.startAt).values||[],!!Re.before));let ne=null;return n.endAt&&(ne=function(Re){return new ci(Re.values||[],!Re.before)}(n.endAt)),gu(e,u,I,m,O,"F",Q,ne)}function uc(i){return i?void 0!==i.unaryFilter?[Rc(i)]:void 0!==i.fieldFilter?[vd(i)]:void 0!==i.compositeFilter?i.compositeFilter.filters.map(e=>uc(e)).reduce((e,n)=>e.concat(n)):In():[]}function yd(i){return Mc[i]}function Ta(i){return $u[i]}function fl(i){return{fieldPath:i.canonicalString()}}function bo(i){return rr.fromServerFormat(i.fieldPath)}function vd(i){return mi.create(bo(i.fieldFilter.field),function(e){switch(e){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return In()}}(i.fieldFilter.op),i.fieldFilter.value)}function Rc(i){switch(i.unaryFilter.op){case"IS_NAN":const e=bo(i.unaryFilter.field);return mi.create(e,"==",{doubleValue:NaN});case"IS_NULL":const n=bo(i.unaryFilter.field);return mi.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=bo(i.unaryFilter.field);return mi.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=bo(i.unaryFilter.field);return mi.create(u,"!=",{nullValue:"NULL_VALUE"});default:return In()}}function Ih(i){const e=[];return i.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function lc(i){return i.length>=4&&"projects"===i.get(0)&&"databases"===i.get(2)}function As(i){let e="";for(let n=0;n<i.length;n++)e.length>0&&(e=$d(e)),e=Ch(i.get(n),e);return $d(e)}function Ch(i,e){let n=e;const o=i.length;for(let u=0;u<o;u++){const m=i.charAt(u);switch(m){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=m}}return n}function $d(i){return i+"\x01\x01"}function Da(i){const e=i.length;if(Xn(e>=2),2===e)return Xn("\x01"===i.charAt(0)&&"\x01"===i.charAt(1)),Tn.emptyPath();const n=e-2,o=[];let u="";for(let m=0;m<e;){const I=i.indexOf("\x01",m);switch((I<0||I>n)&&In(),i.charAt(I+1)){case"\x01":const O=i.substring(m,I);let Q;0===u.length?Q=O:(u+=O,Q=u,u=""),o.push(Q);break;case"\x10":u+=i.substring(m,I),u+="\0";break;case"\x11":u+=i.substring(m,I+1);break;default:In()}m=I+2}return new Tn(o)}const Hd=["userId","batchId"];function cc(i,e){return[i,As(e)]}function Wd(i,e,n){return[i,As(e),n]}const Aa={},Ed=["prefixPath","collectionGroup","readTime","documentId"],Gd=["prefixPath","collectionGroup","documentId"],zd=["collectionGroup","readTime","prefixPath","documentId"],bh=["canonicalId","targetId"],Kd=["targetId","path"],qd=["path","targetId"],Fl=["collectionId","parent"],aa=["indexId","uid"],Th=["uid","sequenceNumber"],Gu=["indexId","uid","arrayValue","directionalValue","documentKey"],dc=["indexId","uid","documentKey"],af=["userId","collectionPath","documentId"],nu=["userId","collectionPath","largestBatchId"],Pc=["userId","collectionGroup","largestBatchId"],Nc=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],fo=[...Nc,"documentOverlays"],Ll=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],hc=[...Ll,"indexConfiguration","indexState","indexEntries"],pl="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class wd{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}class Nt{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&In(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new Nt((o,u)=>{this.nextCallback=m=>{this.wrapSuccess(e,m).next(o,u)},this.catchCallback=m=>{this.wrapFailure(n,m).next(o,u)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof Nt?n:Nt.resolve(n)}catch(n){return Nt.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):Nt.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):Nt.reject(n)}static resolve(e){return new Nt((n,o)=>{n(e)})}static reject(e){return new Nt((n,o)=>{o(e)})}static waitFor(e){return new Nt((n,o)=>{let u=0,m=0,I=!1;e.forEach(O=>{++u,O.next(()=>{++m,I&&m===u&&n()},Q=>o(Q))}),I=!0,m===u&&n()})}static or(e){let n=Nt.resolve(!1);for(const o of e)n=n.next(u=>u?Nt.resolve(u):o());return n}static forEach(e,n){const o=[];return e.forEach((u,m)=>{o.push(n.call(this,u,m))}),this.waitFor(o)}}class gl{constructor(e,n){this.action=e,this.transaction=n,this.aborted=!1,this.At=new ii,this.transaction.oncomplete=()=>{this.At.resolve()},this.transaction.onabort=()=>{n.error?this.At.reject(new Sa(e,n.error)):this.At.resolve()},this.transaction.onerror=o=>{const u=l(o.target.error);this.At.reject(new Sa(e,u))}}static open(e,n,o,u){try{return new gl(n,e.transaction(u,o))}catch(m){throw new Sa(n,m)}}get Rt(){return this.At.promise}abort(e){e&&this.At.reject(e),this.aborted||(on("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}bt(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const n=this.transaction.objectStore(e);return new Dh(n)}}class ua{constructor(e,n,o){this.name=e,this.version=n,this.Pt=o,12.2===ua.Vt((0,we.z$)())&&Vi("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return on("SimpleDb","Removing database:",e),Ul(window.indexedDB.deleteDatabase(e)).toPromise()}static vt(){if(!(0,we.hl)())return!1;if(ua.St())return!0;const e=(0,we.z$)(),n=ua.Vt(e),o=0<n&&n<10,u=ua.Dt(e),m=0<u&&u<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||o||m)}static St(){var e;return"undefined"!=typeof process&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.Ct)}static xt(e,n){return e.store(n)}static Vt(e){const n=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),o=n?n[1].split("_").slice(0,2).join("."):"-1";return Number(o)}static Dt(e){const n=e.match(/Android ([\d.]+)/i),o=n?n[1].split(".").slice(0,2).join("."):"-1";return Number(o)}Nt(e){var n=this;return(0,f.Z)(function*(){return n.db||(on("SimpleDb","Opening database:",n.name),n.db=yield new Promise((o,u)=>{const m=indexedDB.open(n.name,n.version);m.onsuccess=I=>{o(I.target.result)},m.onblocked=()=>{u(new Sa(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},m.onerror=I=>{const O=I.target.error;u("VersionError"===O.name?new Jt(bt.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===O.name?new Jt(bt.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+O):new Sa(e,O))},m.onupgradeneeded=I=>{on("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',I.oldVersion),n.Pt.kt(I.target.result,m.transaction,I.oldVersion,n.version).next(()=>{on("SimpleDb","Database upgrade to version "+n.version+" complete")})}})),n.Mt&&(n.db.onversionchange=o=>n.Mt(o)),n.db})()}Ot(e){this.Mt=e,this.db&&(this.db.onversionchange=n=>e(n))}runTransaction(e,n,o,u){var m=this;return(0,f.Z)(function*(){const I="readonly"===n;let O=0;for(;;){++O;try{m.db=yield m.Nt(e);const Q=gl.open(m.db,e,I?"readonly":"readwrite",o),ne=u(Q).next(Re=>(Q.bt(),Re)).catch(Re=>(Q.abort(Re),Nt.reject(Re))).toPromise();return ne.catch(()=>{}),yield Q.Rt,ne}catch(Q){const ne="FirebaseError"!==Q.name&&O<3;if(on("SimpleDb","Transaction failed with error:",Q.message,"Retrying:",ne),m.close(),!ne)return Promise.reject(Q)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class Zd{constructor(e){this.Ft=e,this.$t=!1,this.Bt=null}get isDone(){return this.$t}get Lt(){return this.Bt}set cursor(e){this.Ft=e}done(){this.$t=!0}Ut(e){this.Bt=e}delete(){return Ul(this.Ft.delete())}}class Sa extends Jt{constructor(e,n){super(bt.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${n}`),this.name="IndexedDbTransactionError"}}function ru(i){return"IndexedDbTransactionError"===i.name}class Dh{constructor(e){this.store=e}put(e,n){let o;return void 0!==n?(on("SimpleDb","PUT",this.store.name,e,n),o=this.store.put(n,e)):(on("SimpleDb","PUT",this.store.name,"<auto-key>",e),o=this.store.put(e)),Ul(o)}add(e){return on("SimpleDb","ADD",this.store.name,e,e),Ul(this.store.add(e))}get(e){return Ul(this.store.get(e)).next(n=>(void 0===n&&(n=null),on("SimpleDb","GET",this.store.name,e,n),n))}delete(e){return on("SimpleDb","DELETE",this.store.name,e),Ul(this.store.delete(e))}count(){return on("SimpleDb","COUNT",this.store.name),Ul(this.store.count())}qt(e,n){const o=this.options(e,n);if(o.index||"function"!=typeof this.store.getAll){const u=this.cursor(o),m=[];return this.Gt(u,(I,O)=>{m.push(O)}).next(()=>m)}{const u=this.store.getAll(o.range);return new Nt((m,I)=>{u.onerror=O=>{I(O.target.error)},u.onsuccess=O=>{m(O.target.result)}})}}Kt(e,n){const o=this.store.getAll(e,null===n?void 0:n);return new Nt((u,m)=>{o.onerror=I=>{m(I.target.error)},o.onsuccess=I=>{u(I.target.result)}})}Qt(e,n){on("SimpleDb","DELETE ALL",this.store.name);const o=this.options(e,n);o.jt=!1;const u=this.cursor(o);return this.Gt(u,(m,I,O)=>O.delete())}Wt(e,n){let o;n?o=e:(o={},n=e);const u=this.cursor(o);return this.Gt(u,n)}zt(e){const n=this.cursor({});return new Nt((o,u)=>{n.onerror=m=>{const I=l(m.target.error);u(I)},n.onsuccess=m=>{const I=m.target.result;I?e(I.primaryKey,I.value).next(O=>{O?I.continue():o()}):o()}})}Gt(e,n){const o=[];return new Nt((u,m)=>{e.onerror=I=>{m(I.target.error)},e.onsuccess=I=>{const O=I.target.result;if(!O)return void u();const Q=new Zd(O),ne=n(O.primaryKey,O.value,Q);if(ne instanceof Nt){const Re=ne.catch(Ze=>(Q.done(),Nt.reject(Ze)));o.push(Re)}Q.isDone?u():null===Q.Lt?O.continue():O.continue(Q.Lt)}}).next(()=>Nt.waitFor(o))}options(e,n){let o;return void 0!==e&&("string"==typeof e?o=e:n=e),{index:o,range:n}}cursor(e){let n="next";if(e.reverse&&(n="prev"),e.index){const o=this.store.index(e.index);return e.jt?o.openKeyCursor(e.range,n):o.openCursor(e.range,n)}return this.store.openCursor(e.range,n)}}function Ul(i){return new Nt((e,n)=>{i.onsuccess=o=>{e(o.target.result)},i.onerror=o=>{const u=l(o.target.error);n(u)}})}let h=!1;function l(i){const e=ua.Vt((0,we.z$)());if(e>=12.2&&e<13){const n="An internal error was encountered in the Indexed Database server";if(i.message.indexOf(n)>=0){const o=new Jt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${n}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return h||(h=!0,setTimeout(()=>{throw o},0)),o}}return i}class c extends wd{constructor(e,n){super(),this.Ht=e,this.currentSequenceNumber=n}}function _(i,e){const n=nn(i);return ua.xt(n.Ht,e)}class A{constructor(e,n,o,u){this.batchId=e,this.localWriteTime=n,this.baseMutations=o,this.mutations=u}applyToRemoteDocument(e,n){const o=n.mutationResults;for(let u=0;u<this.mutations.length;u++){const m=this.mutations[u];m.key.isEqual(e.key)&&Vd(m,e,o[u])}}applyToLocalView(e){for(const n of this.baseMutations)n.key.isEqual(e.key)&&il(n,e,this.localWriteTime);for(const n of this.mutations)n.key.isEqual(e.key)&&il(n,e,this.localWriteTime)}applyToLocalDocumentSet(e){this.mutations.forEach(n=>{const o=e.get(n.key),u=o;this.applyToLocalView(u),o.isValidDocument()||u.convertToNoDocument(X.min())})}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Vr())}isEqual(e){return this.batchId===e.batchId&&C(this.mutations,e.mutations,(n,o)=>Ya(n,o))&&C(this.baseMutations,e.baseMutations,(n,o)=>Ya(n,o))}}class L{constructor(e,n,o,u){this.batch=e,this.commitVersion=n,this.mutationResults=o,this.docVersions=u}static from(e,n,o){Xn(e.mutations.length===o.length);let u=ul;const m=e.mutations;for(let I=0;I<m.length;I++)u=u.insert(m[I].key,o[I].version);return new L(e,n,o,u)}}class G{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class ce{constructor(e,n,o,u,m=X.min(),I=X.min(),O=Kr.EMPTY_BYTE_STRING){this.target=e,this.targetId=n,this.purpose=o,this.sequenceNumber=u,this.snapshotVersion=m,this.lastLimboFreeSnapshotVersion=I,this.resumeToken=O}withSequenceNumber(e){return new ce(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)}withResumeToken(e,n){return new ce(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)}withLastLimboFreeSnapshotVersion(e){return new ce(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)}}class Ae{constructor(e){this.Jt=e}}function Dt(i,e){const n=e.key,o={prefixPath:n.getCollectionPath().popLast().toArray(),collectionGroup:n.collectionGroup,documentId:n.path.lastSegment(),readTime:Et(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())o.document={name:oc(u=i.Jt,(m=e).key),fields:m.data.value.mapValue.fields,updateTime:Vs(u,m.version.toTimestamp())};else if(e.isNoDocument())o.noDocument={path:n.path.toArray(),readTime:Bt(e.version)};else{if(!e.isUnknownDocument())return In();o.unknownDocument={path:n.path.toArray(),version:Bt(e.version)}}var u,m;return o}function Et(i){const e=i.toTimestamp();return[e.seconds,e.nanoseconds]}function Bt(i){const e=i.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Mn(i){const e=new W(i.seconds,i.nanoseconds);return X.fromTimestamp(e)}function qn(i,e){const n=(e.baseMutations||[]).map(m=>md(i.Jt,m));for(let m=0;m<e.mutations.length-1;++m){const I=e.mutations[m];m+1<e.mutations.length&&void 0!==e.mutations[m+1].transform&&(I.updateTransforms=e.mutations[m+1].transform.fieldTransforms,e.mutations.splice(m+1,1),++m)}const o=e.mutations.map(m=>md(i.Jt,m)),u=W.fromMillis(e.localWriteTimeMs);return new A(e.batchId,u,n,o)}function Or(i){const e=Mn(i.readTime),n=void 0!==i.lastLimboFreeSnapshotVersion?Mn(i.lastLimboFreeSnapshotVersion):X.min();let o;var u;return void 0!==i.query.documents?(Xn(1===(u=i.query).documents.length),o=bs(Vo(Ds(u.documents[0])))):o=bs(ac(i.query)),new ce(o,i.targetId,0,i.lastListenSequenceNumber,e,n,Kr.fromBase64String(i.resumeToken))}function Ki(i,e){const n=Bt(e.snapshotVersion),o=Bt(e.lastLimboFreeSnapshotVersion);let u;u=Qs(e.target)?jd(i.Jt,e.target):_d(i.Jt,e.target);const m=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:ra(e.target),readTime:n,resumeToken:m,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:o,query:u}}function zu(i){const e=ac({parent:i.parent,structuredQuery:i.structuredQuery});return"LAST"===i.limitType?wa(e,e.limit,"L"):e}function Vl(i,e){return new G(e.largestBatchId,md(i.Jt,e.overlayMutation))}function ml(i,e){const n=e.path.lastSegment();return[i,As(e.path.popLast()),n]}class Yd{getBundleMetadata(e,n){return Ah(e).get(n).next(o=>{if(o)return{id:(u=o).bundleId,createTime:Mn(u.createTime),version:u.version};var u})}saveBundleMetadata(e,n){return Ah(e).put({bundleId:(o=n).id,createTime:Bt(Ts(o.createTime)),version:o.version});var o}getNamedQuery(e,n){return uf(e).get(n).next(o=>{if(o)return{name:(u=o).name,query:zu(u.bundledQuery),readTime:Mn(u.readTime)};var u})}saveNamedQuery(e,n){return uf(e).put({name:(o=n).name,readTime:Bt(Ts(o.readTime)),bundledQuery:o.bundledQuery});var o}}function Ah(i){return _(i,"bundles")}function uf(i){return _(i,"namedQueries")}class po{constructor(e,n){this.M=e,this.userId=n}static Yt(e,n){return new po(e,n.uid||"")}getOverlay(e,n){return _l(e).get(ml(this.userId,n)).next(o=>o?Vl(this.M,o):null)}saveOverlays(e,n,o){const u=[];return o.forEach((m,I)=>{const O=new G(n,I);u.push(this.Xt(e,O))}),Nt.waitFor(u)}removeOverlaysForBatchId(e,n,o){const u=new Set;n.forEach(I=>u.add(As(I.getCollectionPath())));const m=[];return u.forEach(I=>{const O=IDBKeyRange.bound([this.userId,I,o],[this.userId,I,o+1],!1,!0);m.push(_l(e).Qt("collectionPathOverlayIndex",O))}),Nt.waitFor(m)}getOverlaysForCollection(e,n,o){const u=Ja(),m=As(n),I=IDBKeyRange.bound([this.userId,m,o],[this.userId,m,Number.POSITIVE_INFINITY],!0);return _l(e).qt("collectionPathOverlayIndex",I).next(O=>{for(const Q of O){const ne=Vl(this.M,Q);u.set(ne.getKey(),ne)}return u})}getOverlaysForCollectionGroup(e,n,o,u){const m=Ja();let I;const O=IDBKeyRange.bound([this.userId,n,o],[this.userId,n,Number.POSITIVE_INFINITY],!0);return _l(e).Wt({index:"collectionGroupOverlayIndex",range:O},(Q,ne,Re)=>{const Ze=Vl(this.M,ne);m.size()<u||Ze.largestBatchId===I?(m.set(Ze.getKey(),Ze),I=Ze.largestBatchId):Re.done()}).next(()=>m)}Xt(e,n){return _l(e).put(function(o,u,m){const[I,O,Q]=ml(u,m.mutation.key);return{userId:u,collectionPath:O,documentId:Q,collectionGroup:m.mutation.key.getCollectionGroup(),largestBatchId:m.largestBatchId,overlayMutation:kl(o.Jt,m.mutation)}}(this.M,this.userId,n))}}function _l(i){return _(i,"documentOverlays")}class fc{constructor(){}Zt(e,n){this.te(e,n),n.ee()}te(e,n){if("nullValue"in e)this.ne(n,5);else if("booleanValue"in e)this.ne(n,10),n.se(e.booleanValue?1:0);else if("integerValue"in e)this.ne(n,15),n.se(Fr(e.integerValue));else if("doubleValue"in e){const o=Fr(e.doubleValue);isNaN(o)?this.ne(n,13):(this.ne(n,15),Va(o)?n.se(0):n.se(o))}else if("timestampValue"in e){const o=e.timestampValue;this.ne(n,20),"string"==typeof o?n.ie(o):(n.ie(`${o.seconds||""}`),n.se(o.nanos||0))}else if("stringValue"in e)this.re(e.stringValue,n),this.oe(n);else if("bytesValue"in e)this.ne(n,30),n.ue(ks(e.bytesValue)),this.oe(n);else if("referenceValue"in e)this.ae(e.referenceValue,n);else if("geoPointValue"in e){const o=e.geoPointValue;this.ne(n,45),n.se(o.latitude||0),n.se(o.longitude||0)}else"mapValue"in e?Mu(e)?this.ne(n,Number.MAX_SAFE_INTEGER):(this.ce(e.mapValue,n),this.oe(n)):"arrayValue"in e?(this.he(e.arrayValue,n),this.oe(n)):In()}re(e,n){this.ne(n,25),this.le(e,n)}le(e,n){n.ie(e)}ce(e,n){const o=e.fields||{};this.ne(n,55);for(const u of Object.keys(o))this.re(u,n),this.te(o[u],n)}he(e,n){const o=e.values||[];this.ne(n,50);for(const u of o)this.te(u,n)}ae(e,n){this.ne(n,37),vn.fromName(e).path.forEach(o=>{this.ne(n,60),this.le(o,n)})}ne(e,n){e.se(n)}oe(e){e.se(2)}}function yl(i){if(0===i)return 8;let e=0;return i>>4==0&&(e+=4,i<<=4),i>>6==0&&(e+=2,i<<=2),i>>7==0&&(e+=1),e}function Oc(i){const e=64-function(n){let o=0;for(let u=0;u<8;++u){const m=yl(255&n[u]);if(o+=m,8!==m)break}return o}(i);return Math.ceil(e/8)}fc.fe=new fc;class ap{constructor(){this.buffer=new Uint8Array(1024),this.position=0}de(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this._e(o.value),o=n.next();this.we()}me(e){const n=e[Symbol.iterator]();let o=n.next();for(;!o.done;)this.ge(o.value),o=n.next();this.ye()}pe(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this._e(o);else if(o<2048)this._e(960|o>>>6),this._e(128|63&o);else if(n<"\ud800"||"\udbff"<n)this._e(480|o>>>12),this._e(128|63&o>>>6),this._e(128|63&o);else{const u=n.codePointAt(0);this._e(240|u>>>18),this._e(128|63&u>>>12),this._e(128|63&u>>>6),this._e(128|63&u)}}this.we()}Ie(e){for(const n of e){const o=n.charCodeAt(0);if(o<128)this.ge(o);else if(o<2048)this.ge(960|o>>>6),this.ge(128|63&o);else if(n<"\ud800"||"\udbff"<n)this.ge(480|o>>>12),this.ge(128|63&o>>>6),this.ge(128|63&o);else{const u=n.codePointAt(0);this.ge(240|u>>>18),this.ge(128|63&u>>>12),this.ge(128|63&u>>>6),this.ge(128|63&u)}}this.ye()}Te(e){const n=this.Ee(e),o=Oc(n);this.Ae(1+o),this.buffer[this.position++]=255&o;for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=255&n[u]}Re(e){const n=this.Ee(e),o=Oc(n);this.Ae(1+o),this.buffer[this.position++]=~(255&o);for(let u=n.length-o;u<n.length;++u)this.buffer[this.position++]=~(255&n[u])}be(){this.Pe(255),this.Pe(255)}Ve(){this.ve(255),this.ve(255)}reset(){this.position=0}seed(e){this.Ae(e.length),this.buffer.set(e,this.position),this.position+=e.length}Se(){return this.buffer.slice(0,this.position)}Ee(e){const n=function(u){const m=new DataView(new ArrayBuffer(8));return m.setFloat64(0,u,!1),new Uint8Array(m.buffer)}(e),o=0!=(128&n[0]);n[0]^=o?255:128;for(let u=1;u<n.length;++u)n[u]^=o?255:0;return n}_e(e){const n=255&e;0===n?(this.Pe(0),this.Pe(255)):255===n?(this.Pe(255),this.Pe(0)):this.Pe(n)}ge(e){const n=255&e;0===n?(this.ve(0),this.ve(255)):255===n?(this.ve(255),this.ve(0)):this.ve(e)}we(){this.Pe(0),this.Pe(1)}ye(){this.ve(0),this.ve(1)}Pe(e){this.Ae(1),this.buffer[this.position++]=e}ve(e){this.Ae(1),this.buffer[this.position++]=~e}Ae(e){const n=e+this.position;if(n<=this.buffer.length)return;let o=2*this.buffer.length;o<n&&(o=n);const u=new Uint8Array(o);u.set(this.buffer),this.buffer=u}}class Sh{constructor(e){this.De=e}ue(e){this.De.de(e)}ie(e){this.De.pe(e)}se(e){this.De.Te(e)}ee(){this.De.be()}}class iu{constructor(e){this.De=e}ue(e){this.De.me(e)}ie(e){this.De.Ie(e)}se(e){this.De.Re(e)}ee(){this.De.Ve()}}class kc{constructor(){this.De=new ap,this.Ce=new Sh(this.De),this.xe=new iu(this.De)}seed(e){this.De.seed(e)}Ne(e){return 0===e?this.Ce:this.xe}Se(){return this.De.Se()}reset(){this.De.reset()}}class su{constructor(e,n,o,u){this.indexId=e,this.documentKey=n,this.arrayValue=o,this.directionalValue=u}ke(){const e=this.directionalValue.length,n=0===e||255===this.directionalValue[e-1]?e+1:e,o=new Uint8Array(n);return o.set(this.directionalValue,0),n!==e?o.set([0],this.directionalValue.length):++o[o.length-1],new su(this.indexId,this.documentKey,this.arrayValue,o)}}function pc(i,e){let n=i.indexId-e.indexId;return 0!==n?n:(n=xh(i.arrayValue,e.arrayValue),0!==n?n:(n=xh(i.directionalValue,e.directionalValue),0!==n?n:vn.comparator(i.documentKey,e.documentKey)))}function xh(i,e){for(let n=0;n<i.length&&n<e.length;++n){const o=i[n]-e[n];if(0!==o)return o}return i.length-e.length}class up{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Me=e.orderBy,this.Oe=[];for(const n of e.filters){const o=n;o.S()?this.Fe=o:this.Oe.push(o)}}$e(e){const n=tl(e);if(void 0!==n&&!this.Be(n))return!1;const o=Ls(e);let u=0,m=0;for(;u<o.length&&this.Be(o[u]);++u);if(u===o.length)return!0;if(void 0!==this.Fe){const I=o[u];if(!this.Le(this.Fe,I)||!this.Ue(this.Me[m++],I))return!1;++u}for(;u<o.length;++u){const I=o[u];if(m>=this.Me.length||!this.Ue(this.Me[m++],I))return!1}return!0}Be(e){for(const n of this.Oe)if(this.Le(n,e))return!0;return!1}Le(e,n){return!(void 0===e||!e.field.isEqual(n.fieldPath))&&2===n.kind==("array-contains"===e.op||"array-contains-any"===e.op)}Ue(e,n){return!!e.field.isEqual(n.fieldPath)&&(0===n.kind&&"asc"===e.dir||1===n.kind&&"desc"===e.dir)}}class gc{constructor(){this.qe=new Qd}addToCollectionParentIndex(e,n){return this.qe.add(n),Nt.resolve()}getCollectionParents(e,n){return Nt.resolve(this.qe.getEntries(n))}addFieldIndex(e,n){return Nt.resolve()}deleteFieldIndex(e,n){return Nt.resolve()}getDocumentsMatchingTarget(e,n){return Nt.resolve(null)}getFieldIndex(e,n){return Nt.resolve(null)}getFieldIndexes(e,n){return Nt.resolve([])}getNextCollectionGroupToUpdate(e){return Nt.resolve(null)}updateCollectionGroup(e,n,o){return Nt.resolve()}updateIndexEntries(e,n){return Nt.resolve()}}class Qd{constructor(){this.index={}}add(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n]||new ln(Tn.comparator),m=!u.has(o);return this.index[n]=u.add(o),m}has(e){const n=e.lastSegment(),o=e.popLast(),u=this.index[n];return u&&u.has(o)}getEntries(e){return(this.index[e]||new ln(Tn.comparator)).toArray()}}const Fc=new Uint8Array(0);class Mh{constructor(e){this.user=e,this.Ge=new Qd,this.Ke=new ee(n=>ra(n),(n,o)=>ia(n,o)),this.uid=e.uid||""}addToCollectionParentIndex(e,n){if(!this.Ge.has(n)){const o=n.lastSegment(),u=n.popLast();e.addOnCommittedListener(()=>{this.Ge.add(n)});const m={collectionId:o,parent:As(u)};return lp(e).put(m)}return Nt.resolve()}getCollectionParents(e,n){const o=[],u=IDBKeyRange.bound([n,""],[V(n),""],!1,!0);return lp(e).qt(u).next(m=>{for(const I of m){if(I.collectionId!==n)break;o.push(Da(I.parent))}return o})}addFieldIndex(e,n){const o=Jd(e),u={indexId:(m=n).indexId,collectionGroup:m.collectionGroup,fields:m.fields.map(I=>[I.fieldPath.canonicalString(),I.kind])};var m;return delete u.indexId,o.add(u).next()}deleteFieldIndex(e,n){const o=Jd(e),u=Uc(e),m=Lc(e);return o.delete(n.indexId).next(()=>u.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0))).next(()=>m.delete(IDBKeyRange.bound([n.indexId],[n.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,n){const o=Lc(e);let u=!0;const m=new Map;return Nt.forEach(this.Qe(n),I=>this.getFieldIndex(e,I).next(O=>{u&&(u=!!O),m.set(I,O)})).next(()=>{if(u){let I=Vr();return Nt.forEach(m,(O,Q)=>{var ne;on("IndexedDbIndexManager",`Using index ${ne=O,`id=${ne.indexId}|cg=${ne.collectionGroup}|f=${ne.fields.map(Hr=>`${Hr.fieldPath}:${Hr.kind}`).join(",")}`} to execute ${ra(n)}`);const Re=function(Hr,au){const js=tl(au);if(void 0===js)return null;for(const eo of Ha(Hr,js.fieldPath))switch(eo.op){case"array-contains-any":return eo.value.arrayValue.values||[];case"array-contains":return[eo.value]}return null}(Q,O),Ze=function(Hr,au){const js=new Map;for(const eo of Ls(au))for(const wi of Ha(Hr,eo.fieldPath))switch(wi.op){case"==":case"in":js.set(eo.fieldPath.canonicalString(),wi.value);break;case"not-in":case"!=":return js.set(eo.fieldPath.canonicalString(),wi.value),Array.from(js.values())}return null}(Q,O),Tt=function(Hr,au){const js=[];let eo=!0;for(const nd of Ls(au)){let bu,rd=!0;for(const to of Ha(Hr,nd.fieldPath)){let us,Ud=!0;switch(to.op){case"<":case"<=":us="nullValue"in(wi=to.value)?sd:"booleanValue"in wi?{booleanValue:!1}:"integerValue"in wi||"doubleValue"in wi?{doubleValue:NaN}:"timestampValue"in wi?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in wi?{stringValue:""}:"bytesValue"in wi?{bytesValue:""}:"referenceValue"in wi?ja(na.empty(),vn.empty()):"geoPointValue"in wi?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in wi?{arrayValue:{}}:"mapValue"in wi?{mapValue:{}}:In();break;case"==":case"in":case">=":us=to.value;break;case">":us=to.value,Ud=!1;break;case"!=":case"not-in":us=sd}Ml(bu,us)===us&&(bu=us,rd=Ud)}if(null!==Hr.startAt)for(let to=0;to<Hr.orderBy.length;++to)if(Hr.orderBy[to].field.isEqual(nd.fieldPath)){const us=Hr.startAt.position[to];Ml(bu,us)===us&&(bu=us,rd=Hr.startAt.inclusive);break}if(void 0===bu)return null;js.push(bu),eo&&(eo=rd)}var wi;return new ci(js,eo)}(Q,O),Zt=function(Hr,au){const js=[];let eo=!0;for(const nd of Ls(au)){let bu,rd=!0;for(const to of Ha(Hr,nd.fieldPath)){let us,Ud=!0;switch(to.op){case">=":case">":us="nullValue"in(wi=to.value)?{booleanValue:!1}:"booleanValue"in wi?{doubleValue:NaN}:"integerValue"in wi||"doubleValue"in wi?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in wi?{stringValue:""}:"stringValue"in wi?{bytesValue:""}:"bytesValue"in wi?ja(na.empty(),vn.empty()):"referenceValue"in wi?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in wi?{arrayValue:{}}:"arrayValue"in wi?{mapValue:{}}:"mapValue"in wi?Jl:In(),Ud=!1;break;case"==":case"in":case"<=":us=to.value;break;case"<":us=to.value,Ud=!1;break;case"!=":case"not-in":us=Jl}Tc(bu,us)===us&&(bu=us,rd=Ud)}if(null!==Hr.endAt)for(let to=0;to<Hr.orderBy.length;++to)if(Hr.orderBy[to].field.isEqual(nd.fieldPath)){const us=Hr.endAt.position[to];Tc(bu,us)===us&&(bu=us,rd=Hr.endAt.inclusive);break}if(void 0===bu)return null;js.push(bu),eo&&(eo=rd)}var wi;return new ci(js,eo)}(Q,O),tn=this.je(O,Q,Tt),Zn=this.je(O,Q,Zt),Pr=this.We(O,Q,Ze),Ms=this.ze(O.indexId,Re,tn,!!Tt&&Tt.inclusive,Zn,!!Zt&&Zt.inclusive,Pr);return Nt.forEach(Ms,Hr=>o.Kt(Hr,n.limit).next(au=>{au.forEach(js=>{I=I.add(new vn(Da(js.documentKey)))})}))}).next(()=>I)}return Nt.resolve(null)})}Qe(e){let n=this.Ke.get(e);return n||(n=[e],this.Ke.set(e,n),n)}ze(e,n,o,u,m,I,O){const Q=(null!=n?n.length:1)*Math.max(null!=o?o.length:1,null!=m?m.length:1),ne=Q/(null!=n?n.length:1),Re=[];for(let Ze=0;Ze<Q;++Ze){const Tt=n?this.He(n[Ze/ne]):Fc,Zt=o?this.Je(e,Tt,o[Ze%ne],u):this.Ye(e),tn=m?this.Xe(e,Tt,m[Ze%ne],I):this.Ye(e+1);Re.push(...this.createRange(Zt,tn,O.map(Zn=>this.Je(e,Tt,Zn,!0))))}return Re}Je(e,n,o,u){const m=new su(e,vn.empty(),n,o);return u?m:m.ke()}Xe(e,n,o,u){const m=new su(e,vn.empty(),n,o);return u?m.ke():m}Ye(e){return new su(e,vn.empty(),Fc,Fc)}getFieldIndex(e,n){const o=new up(n),u=null!=n.collectionGroup?n.collectionGroup:n.path.lastSegment();return this.getFieldIndexes(e,u).next(m=>{const I=m.filter(O=>o.$e(O));return I.sort((O,Q)=>Q.fields.length-O.fields.length),I.length>0?I[0]:null})}Ze(e,n){const o=new kc;for(const u of Ls(e)){const m=n.data.field(u.fieldPath);if(null==m)return null;const I=o.Ne(u.kind);fc.fe.Zt(m,I)}return o.Se()}He(e){const n=new kc;return fc.fe.Zt(e,n.Ne(0)),n.Se()}We(e,n,o){if(null===o)return[];let u=[];u.push(new kc);let m=0;for(const I of Ls(e)){const O=o[m++];for(const Q of u)if(this.tn(n,I.fieldPath)&&Ni(O))u=this.en(u,I,O);else{const ne=Q.Ne(I.kind);fc.fe.Zt(O,ne)}}return this.nn(u)}je(e,n,o){return null==o?null:this.We(e,n,o.position)}nn(e){const n=[];for(let o=0;o<e.length;++o)n[o]=e[o].Se();return n}en(e,n,o){const u=[...e],m=[];for(const I of o.arrayValue.values||[])for(const O of u){const Q=new kc;Q.seed(O.Se()),fc.fe.Zt(I,Q.Ne(n.kind)),m.push(Q)}return m}tn(e,n){return!!e.filters.find(o=>o instanceof mi&&o.field.isEqual(n)&&("in"===o.op||"not-in"===o.op))}getFieldIndexes(e,n){const o=Jd(e),u=Uc(e);return(n?o.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)):o.qt()).next(m=>{const I=[];return Nt.forEach(m,O=>u.get([O.indexId,this.uid]).next(Q=>{I.push(function(ne,Re){const Ze=Re?new ga(Re.sequenceNumber,new co(Mn(Re.readTime),new vn(Da(Re.documentKey)),Re.largestBatchId)):ga.empty(),Tt=ne.fields.map(([Zt,tn])=>new Xl(rr.fromServerFormat(Zt),tn));return new Is(ne.indexId,ne.collectionGroup,Tt,Ze)}(O,Q))})).next(()=>I)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(n=>0===n.length?null:(n.sort((o,u)=>{const m=o.indexState.sequenceNumber-u.indexState.sequenceNumber;return 0!==m?m:b(o.collectionGroup,u.collectionGroup)}),n[0].collectionGroup))}updateCollectionGroup(e,n,o){const u=Jd(e),m=Uc(e);return this.sn(e).next(I=>u.qt("collectionGroupIndex",IDBKeyRange.bound(n,n)).next(O=>Nt.forEach(O,Q=>{return m.put({indexId:Q.indexId,uid:this.user.uid||"",sequenceNumber:I,readTime:Bt((Tt=o).readTime),documentKey:As(Tt.documentKey.path),largestBatchId:Tt.largestBatchId});var Tt})))}updateIndexEntries(e,n){const o=new Map;return Nt.forEach(n,(u,m)=>{const I=o.get(u.collectionGroup);return(I?Nt.resolve(I):this.getFieldIndexes(e,u.collectionGroup)).next(O=>(o.set(u.collectionGroup,O),Nt.forEach(O,Q=>this.rn(e,u,Q).next(ne=>{const Re=this.on(m,Q);return ne.isEqual(Re)?Nt.resolve():this.un(e,m,ne,Re)}))))})}an(e,n,o){return Lc(e).put({indexId:o.indexId,uid:this.uid,arrayValue:o.arrayValue,directionalValue:o.directionalValue,documentKey:As(n.key.path)})}cn(e,n,o){return Lc(e).delete([o.indexId,this.uid,o.arrayValue,o.directionalValue,As(n.key.path)])}rn(e,n,o){const u=Lc(e);let m=new ln(pc);return u.Wt({index:"documentKeyIndex",range:IDBKeyRange.only([o.indexId,this.uid,As(n.path)])},(I,O)=>{m=m.add(new su(o.indexId,n,O.arrayValue,O.directionalValue))}).next(()=>m)}on(e,n){let o=new ln(pc);const u=this.Ze(n,e);if(null==u)return o;const m=tl(n);if(null!=m){const I=e.data.field(m.fieldPath);if(Ni(I))for(const O of I.arrayValue.values||[])o=o.add(new su(n.indexId,e.key,this.He(O),u))}else o=o.add(new su(n.indexId,e.key,Fc,u));return o}un(e,n,o,u){on("IndexedDbIndexManager","Updating index entries for document '%s'",n.key);const m=[];return function(I,O,Q,ne,Re){const Ze=I.getIterator(),Tt=O.getIterator();let Zt=fr(Ze),tn=fr(Tt);for(;Zt||tn;){let Zn=!1,Pr=!1;if(Zt&&tn){const Ms=Q(Zt,tn);Ms<0?Pr=!0:Ms>0&&(Zn=!0)}else null!=Zt?Pr=!0:Zn=!0;Zn?(ne(tn),tn=fr(Tt)):Pr?(Re(Zt),Zt=fr(Ze)):(Zt=fr(Ze),tn=fr(Tt))}}(o,u,pc,I=>{m.push(this.an(e,n,I))},I=>{m.push(this.cn(e,n,I))}),Nt.waitFor(m)}sn(e){let n=1;return Uc(e).Wt({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(o,u,m)=>{m.done(),n=u.sequenceNumber+1}).next(()=>n)}createRange(e,n,o){o=o.sort((I,O)=>pc(I,O)).filter((I,O,Q)=>!O||0!==pc(I,Q[O-1]));const u=[];u.push(e);for(const I of o){const O=pc(I,e),Q=pc(I,n);if(0===O)u[0]=e.ke();else if(O>0&&Q<0)u.push(I),u.push(I.ke());else if(Q>0)break}u.push(n);const m=[];for(let I=0;I<u.length;I+=2)m.push(IDBKeyRange.bound([u[I].indexId,this.uid,u[I].arrayValue,u[I].directionalValue,""],[u[I+1].indexId,this.uid,u[I+1].arrayValue,u[I+1].directionalValue,""]));return m}}function lp(i){return _(i,"collectionParents")}function Lc(i){return _(i,"indexEntries")}function Jd(i){return _(i,"indexConfiguration")}function Uc(i){return _(i,"indexState")}const Xd={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Wo{constructor(e,n,o){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=o}static withCacheSize(e){return new Wo(e,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function ou(i,e,n){const o=i.store("mutations"),u=i.store("documentMutations"),m=[],I=IDBKeyRange.only(n.batchId);let O=0;const Q=o.Wt({range:I},(Re,Ze,Tt)=>(O++,Tt.delete()));m.push(Q.next(()=>{Xn(1===O)}));const ne=[];for(const Re of n.mutations){const Ze=Wd(e,Re.key.path,n.batchId);m.push(u.delete(Ze)),ne.push(Re.key)}return Nt.waitFor(m).next(()=>ne)}function eh(i){if(!i)return 0;let e;if(i.document)e=i.document;else if(i.unknownDocument)e=i.unknownDocument;else{if(!i.noDocument)throw In();e=i.noDocument}return JSON.stringify(e).length}Wo.DEFAULT_COLLECTION_PERCENTILE=10,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wo.DEFAULT=new Wo(41943040,Wo.DEFAULT_COLLECTION_PERCENTILE,Wo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wo.DISABLED=new Wo(-1,0,0);class th{constructor(e,n,o,u){this.userId=e,this.M=n,this.indexManager=o,this.referenceDelegate=u,this.hn={}}static Yt(e,n,o,u){Xn(""!==e.uid);const m=e.isAuthenticated()?e.uid:"";return new th(m,n,o,u)}checkEmpty(e){let n=!0;const o=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).Wt({index:"userMutationsIndex",range:o},(u,m,I)=>{n=!1,I.done()}).next(()=>n)}addMutationBatch(e,n,o,u){const m=Vc(e),I=vl(e);return I.add({}).next(O=>{Xn("number"==typeof O);const Q=new A(O,n,o,u),ne=function(Tt,Zt,tn){const Zn=tn.baseMutations.map(Ms=>kl(Tt.Jt,Ms)),Pr=tn.mutations.map(Ms=>kl(Tt.Jt,Ms));return{userId:Zt,batchId:tn.batchId,localWriteTimeMs:tn.localWriteTime.toMillis(),baseMutations:Zn,mutations:Pr}}(this.M,this.userId,Q),Re=[];let Ze=new ln((Tt,Zt)=>b(Tt.canonicalString(),Zt.canonicalString()));for(const Tt of u){const Zt=Wd(this.userId,Tt.key.path,O);Ze=Ze.add(Tt.key.path.popLast()),Re.push(I.put(ne)),Re.push(m.put(Zt,Aa))}return Ze.forEach(Tt=>{Re.push(this.indexManager.addToCollectionParentIndex(e,Tt))}),e.addOnCommittedListener(()=>{this.hn[O]=Q.keys()}),Nt.waitFor(Re).next(()=>Q)})}lookupMutationBatch(e,n){return vl(e).get(n).next(o=>o?(Xn(o.userId===this.userId),qn(this.M,o)):null)}ln(e,n){return this.hn[n]?Nt.resolve(this.hn[n]):this.lookupMutationBatch(e,n).next(o=>{if(o){const u=o.keys();return this.hn[n]=u,u}return null})}getNextMutationBatchAfterBatchId(e,n){const o=n+1,u=IDBKeyRange.lowerBound([this.userId,o]);let m=null;return vl(e).Wt({index:"userMutationsIndex",range:u},(I,O,Q)=>{O.userId===this.userId&&(Xn(O.batchId>=o),m=qn(this.M,O)),Q.done()}).next(()=>m)}getHighestUnacknowledgedBatchId(e){const n=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let o=-1;return vl(e).Wt({index:"userMutationsIndex",range:n,reverse:!0},(u,m,I)=>{o=m.batchId,I.done()}).next(()=>o)}getAllMutationBatches(e){const n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).qt("userMutationsIndex",n).next(o=>o.map(u=>qn(this.M,u)))}getAllMutationBatchesAffectingDocumentKey(e,n){const o=cc(this.userId,n.path),u=IDBKeyRange.lowerBound(o),m=[];return Vc(e).Wt({range:u},(I,O,Q)=>{const[ne,Re,Ze]=I,Tt=Da(Re);if(ne===this.userId&&n.path.isEqual(Tt))return vl(e).get(Ze).next(Zt=>{if(!Zt)throw In();Xn(Zt.userId===this.userId),m.push(qn(this.M,Zt))});Q.done()}).next(()=>m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ln(b);const u=[];return n.forEach(m=>{const I=cc(this.userId,m.path),O=IDBKeyRange.lowerBound(I),Q=Vc(e).Wt({range:O},(ne,Re,Ze)=>{const[Tt,Zt,tn]=ne,Zn=Da(Zt);Tt===this.userId&&m.path.isEqual(Zn)?o=o.add(tn):Ze.done()});u.push(Q)}),Nt.waitFor(u).next(()=>this.fn(e,o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1,m=cc(this.userId,o),I=IDBKeyRange.lowerBound(m);let O=new ln(b);return Vc(e).Wt({range:I},(Q,ne,Re)=>{const[Ze,Tt,Zt]=Q,tn=Da(Tt);Ze===this.userId&&o.isPrefixOf(tn)?tn.length===u&&(O=O.add(Zt)):Re.done()}).next(()=>this.fn(e,O))}fn(e,n){const o=[],u=[];return n.forEach(m=>{u.push(vl(e).get(m).next(I=>{if(null===I)throw In();Xn(I.userId===this.userId),o.push(qn(this.M,I))}))}),Nt.waitFor(u).next(()=>o)}removeMutationBatch(e,n){return ou(e.Ht,this.userId,n).next(o=>(e.addOnCommittedListener(()=>{this.dn(n.batchId)}),Nt.forEach(o,u=>this.referenceDelegate.markPotentiallyOrphaned(e,u))))}dn(e){delete this.hn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(n=>{if(!n)return Nt.resolve();const o=IDBKeyRange.lowerBound([this.userId]),u=[];return Vc(e).Wt({range:o},(m,I,O)=>{if(m[0]===this.userId){const Q=Da(m[1]);u.push(Q)}else O.done()}).next(()=>{Xn(0===u.length)})})}containsKey(e,n){return lf(e,this.userId,n)}_n(e){return cf(e).get(this.userId).next(n=>n||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function lf(i,e,n){const o=cc(e,n.path),u=o[1],m=IDBKeyRange.lowerBound(o);let I=!1;return Vc(i).Wt({range:m,jt:!0},(O,Q,ne)=>{const[Re,Ze,Tt]=O;Re===e&&Ze===u&&(I=!0),ne.done()}).next(()=>I)}function vl(i){return _(i,"mutations")}function Vc(i){return _(i,"documentMutations")}function cf(i){return _(i,"mutationQueues")}class El{constructor(e){this.wn=e}next(){return this.wn+=2,this.wn}static mn(){return new El(0)}static gn(){return new El(-1)}}class cp{constructor(e,n){this.referenceDelegate=e,this.M=n}allocateTargetId(e){return this.yn(e).next(n=>{const o=new El(n.highestTargetId);return n.highestTargetId=o.next(),this.pn(e,n).next(()=>n.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.yn(e).next(n=>X.fromTimestamp(new W(n.lastRemoteSnapshotVersion.seconds,n.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.yn(e).next(n=>n.highestListenSequenceNumber)}setTargetsMetadata(e,n,o){return this.yn(e).next(u=>(u.highestListenSequenceNumber=n,o&&(u.lastRemoteSnapshotVersion=o.toTimestamp()),n>u.highestListenSequenceNumber&&(u.highestListenSequenceNumber=n),this.pn(e,u)))}addTargetData(e,n){return this.In(e,n).next(()=>this.yn(e).next(o=>(o.targetCount+=1,this.Tn(n,o),this.pn(e,o))))}updateTargetData(e,n){return this.In(e,n)}removeTargetData(e,n){return this.removeMatchingKeysForTargetId(e,n.targetId).next(()=>mc(e).delete(n.targetId)).next(()=>this.yn(e)).next(o=>(Xn(o.targetCount>0),o.targetCount-=1,this.pn(e,o)))}removeTargets(e,n,o){let u=0;const m=[];return mc(e).Wt((I,O)=>{const Q=Or(O);Q.sequenceNumber<=n&&null===o.get(Q.targetId)&&(u++,m.push(this.removeTargetData(e,Q)))}).next(()=>Nt.waitFor(m)).next(()=>u)}forEachTarget(e,n){return mc(e).Wt((o,u)=>{const m=Or(u);n(m)})}yn(e){return df(e).get("targetGlobalKey").next(n=>(Xn(null!==n),n))}pn(e,n){return df(e).put("targetGlobalKey",n)}In(e,n){return mc(e).put(Ki(this.M,n))}Tn(e,n){let o=!1;return e.targetId>n.highestTargetId&&(n.highestTargetId=e.targetId,o=!0),e.sequenceNumber>n.highestListenSequenceNumber&&(n.highestListenSequenceNumber=e.sequenceNumber,o=!0),o}getTargetCount(e){return this.yn(e).next(n=>n.targetCount)}getTargetData(e,n){const o=ra(n),u=IDBKeyRange.bound([o,Number.NEGATIVE_INFINITY],[o,Number.POSITIVE_INFINITY]);let m=null;return mc(e).Wt({range:u,index:"queryTargetsIndex"},(I,O,Q)=>{const ne=Or(O);ia(n,ne.target)&&(m=ne,Q.done())}).next(()=>m)}addMatchingKeys(e,n,o){const u=[],m=dr(e);return n.forEach(I=>{const O=As(I.path);u.push(m.put({targetId:o,path:O})),u.push(this.referenceDelegate.addReference(e,o,I))}),Nt.waitFor(u)}removeMatchingKeys(e,n,o){const u=dr(e);return Nt.forEach(n,m=>{const I=As(m.path);return Nt.waitFor([u.delete([o,I]),this.referenceDelegate.removeReference(e,o,m)])})}removeMatchingKeysForTargetId(e,n){const o=dr(e),u=IDBKeyRange.bound([n],[n+1],!1,!0);return o.delete(u)}getMatchingKeysForTargetId(e,n){const o=IDBKeyRange.bound([n],[n+1],!1,!0),u=dr(e);let m=Vr();return u.Wt({range:o,jt:!0},(I,O,Q)=>{const ne=Da(I[1]),Re=new vn(ne);m=m.add(Re)}).next(()=>m)}containsKey(e,n){const o=As(n.path),u=IDBKeyRange.bound([o],[V(o)],!1,!0);let m=0;return dr(e).Wt({index:"documentTargetsIndex",jt:!0,range:u},([I,O],Q,ne)=>{0!==I&&(m++,ne.done())}).next(()=>m>0)}Et(e,n){return mc(e).get(n).next(o=>o?Or(o):null)}}function mc(i){return _(i,"targets")}function df(i){return _(i,"targetGlobal")}function dr(i){return _(i,"targetDocuments")}function wl(i){return Id.apply(this,arguments)}function Id(){return Id=(0,f.Z)(function*(i){if(i.code!==bt.FAILED_PRECONDITION||i.message!==pl)throw i;on("LocalStore","Unexpectedly lost primary lease")}),Id.apply(this,arguments)}function nh([i,e],[n,o]){const u=b(i,n);return 0===u?b(e,o):u}class Rh{constructor(e){this.En=e,this.buffer=new ln(nh),this.An=0}Rn(){return++this.An}bn(e){const n=[e,this.Rn()];if(this.buffer.size<this.En)this.buffer=this.buffer.add(n);else{const o=this.buffer.last();nh(n,o)<0&&(this.buffer=this.buffer.delete(o).add(n))}}get maxValue(){return this.buffer.last()[0]}}class Ku{constructor(e,n){this.garbageCollector=e,this.asyncQueue=n,this.Pn=!1,this.Vn=null}start(e){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.vn(e)}stop(){this.Vn&&(this.Vn.cancel(),this.Vn=null)}get started(){return null!==this.Vn}vn(e){var n=this;const o=this.Pn?3e5:6e4;on("LruGarbageCollector",`Garbage collection scheduled in ${o}ms`),this.Vn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",o,(0,f.Z)(function*(){n.Vn=null,n.Pn=!0;try{yield e.collectGarbage(n.garbageCollector)}catch(u){ru(u)?on("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",u):yield wl(u)}yield n.vn(e)}))}}class dp{constructor(e,n){this.Sn=e,this.params=n}calculateTargetCount(e,n){return this.Sn.Dn(e).next(o=>Math.floor(n/100*o))}nthSequenceNumber(e,n){if(0===n)return Nt.resolve(gs.A);const o=new Rh(n);return this.Sn.forEachTarget(e,u=>o.bn(u.sequenceNumber)).next(()=>this.Sn.Cn(e,u=>o.bn(u))).next(()=>o.maxValue)}removeTargets(e,n,o){return this.Sn.removeTargets(e,n,o)}removeOrphanedDocuments(e,n){return this.Sn.removeOrphanedDocuments(e,n)}collect(e,n){return-1===this.params.cacheSizeCollectionThreshold?(on("LruGarbageCollector","Garbage collection skipped; disabled"),Nt.resolve(Xd)):this.getCacheSize(e).next(o=>o<this.params.cacheSizeCollectionThreshold?(on("LruGarbageCollector",`Garbage collection skipped; Cache size ${o} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),Xd):this.xn(e,n))}getCacheSize(e){return this.Sn.getCacheSize(e)}xn(e,n){let o,u,m,I,O,Q,ne;const Re=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(Ze=>(Ze>this.params.maximumSequenceNumbersToCollect?(on("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${Ze}`),u=this.params.maximumSequenceNumbersToCollect):u=Ze,I=Date.now(),this.nthSequenceNumber(e,u))).next(Ze=>(o=Ze,O=Date.now(),this.removeTargets(e,o,n))).next(Ze=>(m=Ze,Q=Date.now(),this.removeOrphanedDocuments(e,o))).next(Ze=>(ne=Date.now(),ka()<=Z.in.DEBUG&&on("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${I-Re}ms\n\tDetermined least recently used ${u} in `+(O-I)+`ms\n\tRemoved ${m} targets in `+(Q-O)+`ms\n\tRemoved ${Ze} documents in `+(ne-Q)+`ms\nTotal Duration: ${ne-Re}ms`),Nt.resolve({didRun:!0,sequenceNumbersCollected:u,targetsRemoved:m,documentsRemoved:Ze})))}}class Og{constructor(e,n){this.db=e,this.garbageCollector=new dp(this,n)}Dn(e){const n=this.Nn(e);return this.db.getTargetCache().getTargetCount(e).next(o=>n.next(u=>o+u))}Nn(e){let n=0;return this.Cn(e,o=>{n++}).next(()=>n)}forEachTarget(e,n){return this.db.getTargetCache().forEachTarget(e,n)}Cn(e,n){return this.kn(e,(o,u)=>n(u))}addReference(e,n,o){return Cd(e,o)}removeReference(e,n,o){return Cd(e,o)}removeTargets(e,n,o){return this.db.getTargetCache().removeTargets(e,n,o)}markPotentiallyOrphaned(e,n){return Cd(e,n)}Mn(e,n){return function(o,u){let m=!1;return cf(o).zt(I=>lf(o,I,u).next(O=>(O&&(m=!0),Nt.resolve(!O)))).next(()=>m)}(e,n)}removeOrphanedDocuments(e,n){const o=this.db.getRemoteDocumentCache().newChangeBuffer(),u=[];let m=0;return this.kn(e,(I,O)=>{if(O<=n){const Q=this.Mn(e,I).next(ne=>{if(!ne)return m++,o.getEntry(e,I).next(()=>(o.removeEntry(I,X.min()),dr(e).delete([0,As(I.path)])))});u.push(Q)}}).next(()=>Nt.waitFor(u)).next(()=>o.apply(e)).next(()=>m)}removeTarget(e,n){const o=n.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,o)}updateLimboDocument(e,n){return Cd(e,n)}kn(e,n){const o=dr(e);let u,m=gs.A;return o.Wt({index:"documentTargetsIndex"},([I,O],{path:Q,sequenceNumber:ne})=>{0===I?(m!==gs.A&&n(new vn(Da(u)),m),m=ne,u=Q):m=gs.A}).next(()=>{m!==gs.A&&n(new vn(Da(u)),m)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function Cd(i,e){return dr(i).put((o=i.currentSequenceNumber,{targetId:0,path:As(e.path),sequenceNumber:o}));var o}class Il{constructor(){this.changes=new ee(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,si.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const o=this.changes.get(n);return void 0!==o?Nt.resolve(o):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class hf{constructor(e){this.M=e}setIndexManager(e){this.indexManager=e}addEntry(e,n,o){return bd(e).put(o)}removeEntry(e,n,o){return bd(e).delete(function(u,m){const I=u.path.toArray();return[I.slice(0,I.length-2),I[I.length-2],Et(m),I[I.length-1]]}(n,o))}updateMetadata(e,n){return this.getMetadata(e).next(o=>(o.byteSize+=n,this.On(e,o)))}getEntry(e,n){let o=si.newInvalidDocument(n);return bd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Td(n))},(u,m)=>{o=this.Fn(n,m)}).next(()=>o)}$n(e,n){let o={size:0,document:si.newInvalidDocument(n)};return bd(e).Wt({index:"documentKeyIndex",range:IDBKeyRange.only(Td(n))},(u,m)=>{o={document:this.Fn(n,m),size:eh(m)}}).next(()=>o)}getEntries(e,n){let o=Qi();return this.Bn(e,n,(u,m)=>{const I=this.Fn(u,m);o=o.insert(u,I)}).next(()=>o)}Ln(e,n){let o=Qi(),u=new pe(vn.comparator);return this.Bn(e,n,(m,I)=>{const O=this.Fn(m,I);o=o.insert(m,O),u=u.insert(m,eh(I))}).next(()=>({documents:o,Un:u}))}Bn(e,n,o){if(n.isEmpty())return Nt.resolve();let u=new ln(Dd);n.forEach(Q=>u=u.add(Q));const m=IDBKeyRange.bound(Td(u.first()),Td(u.last())),I=u.getIterator();let O=I.getNext();return bd(e).Wt({index:"documentKeyIndex",range:m},(Q,ne,Re)=>{const Ze=vn.fromSegments([...ne.prefixPath,ne.collectionGroup,ne.documentId]);for(;O&&Dd(O,Ze)<0;)o(O,null),O=I.getNext();O&&O.isEqual(Ze)&&(o(O,ne),O=I.hasNext()?I.getNext():null),O?Re.Ut(Td(O)):Re.done()}).next(()=>{for(;O;)o(O,null),O=I.hasNext()?I.getNext():null})}getAllFromCollection(e,n,o){const u=[n.popLast().toArray(),n.lastSegment(),Et(o.readTime),o.documentKey.path.isEmpty()?"":o.documentKey.path.lastSegment()],m=[n.popLast().toArray(),n.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return bd(e).qt(IDBKeyRange.bound(u,m,!0)).next(I=>{let O=Qi();for(const Q of I){const ne=this.Fn(vn.fromSegments(Q.prefixPath.concat(Q.collectionGroup,Q.documentId)),Q);O=O.insert(ne.key,ne)}return O})}getAllFromCollectionGroup(e,n,o,u){let m=Qi();const I=kg(n,o),O=kg(n,co.max());return bd(e).Wt({index:"collectionGroupIndex",range:IDBKeyRange.bound(I,O,!0)},(Q,ne,Re)=>{const Ze=this.Fn(vn.fromSegments(ne.prefixPath.concat(ne.collectionGroup,ne.documentId)),ne);m=m.insert(Ze.key,Ze),m.size===u&&Re.done()}).next(()=>m)}newChangeBuffer(e){return new hp(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(n=>n.byteSize)}getMetadata(e){return Ph(e).get("remoteDocumentGlobalKey").next(n=>(Xn(!!n),n))}On(e,n){return Ph(e).put("remoteDocumentGlobalKey",n)}Fn(e,n){if(n){const o=function Be(i,e){let n;if(e.document)n=ki(i.Jt,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const o=vn.fromSegments(e.noDocument.path),u=Mn(e.noDocument.readTime);n=si.newNoDocument(o,u),e.hasCommittedMutations&&n.setHasCommittedMutations()}else{if(!e.unknownDocument)return In();{const o=vn.fromSegments(e.unknownDocument.path),u=Mn(e.unknownDocument.version);n=si.newUnknownDocument(o,u)}}return e.readTime&&n.setReadTime(function(o){const u=new W(o[0],o[1]);return X.fromTimestamp(u)}(e.readTime)),n}(this.M,n);if(!o.isNoDocument()||!o.version.isEqual(X.min()))return o}return si.newInvalidDocument(e)}}class hp extends Il{constructor(e,n){super(),this.qn=e,this.trackRemovals=n,this.Gn=new ee(o=>o.toString(),(o,u)=>o.isEqual(u))}applyChanges(e){const n=[];let o=0,u=new ln((m,I)=>b(m.canonicalString(),I.canonicalString()));return this.changes.forEach((m,I)=>{const O=this.Gn.get(m);if(n.push(this.qn.removeEntry(e,m,O.readTime)),I.isValidDocument()){const Q=Dt(this.qn.M,I);u=u.add(m.path.popLast()),o+=eh(Q)-O.size,n.push(this.qn.addEntry(e,m,Q))}else if(o-=O.size,this.trackRemovals){const Q=Dt(this.qn.M,I.convertToNoDocument(X.min()));n.push(this.qn.addEntry(e,m,Q))}}),u.forEach(m=>{n.push(this.qn.indexManager.addToCollectionParentIndex(e,m))}),n.push(this.qn.updateMetadata(e,o)),Nt.waitFor(n)}getFromCache(e,n){return this.qn.$n(e,n).next(o=>(this.Gn.set(n,{size:o.size,readTime:o.document.readTime}),o.document))}getAllFromCache(e,n){return this.qn.Ln(e,n).next(({documents:o,Un:u})=>(u.forEach((m,I)=>{this.Gn.set(m,{size:I,readTime:o.get(m).readTime})}),o))}}function Ph(i){return _(i,"remoteDocumentGlobal")}function bd(i){return _(i,"remoteDocumentsV14")}function Td(i){const e=i.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function kg(i,e){const n=e.documentKey.path.toArray();return[i,Et(e.readTime),n.slice(0,n.length-2),n.length>0?n[n.length-1]:""]}function Dd(i,e){const n=i.path.length-e.path.length;return 0!==n?n:vn.comparator(i,e)}class Nh{constructor(e){this.M=e}kt(e,n,o,u){const m=new gl("createOrUpgrade",n);var O;o<1&&u>=1&&(e.createObjectStore("owner"),(O=e).createObjectStore("mutationQueues",{keyPath:"userId"}),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hd,{unique:!0}),O.createObjectStore("documentMutations"),Oh(e),function(O){O.createObjectStore("remoteDocuments")}(e));let I=Nt.resolve();return o<3&&u>=3&&(0!==o&&(function(O){O.deleteObjectStore("targetDocuments"),O.deleteObjectStore("targets"),O.deleteObjectStore("targetGlobal")}(e),Oh(e)),I=I.next(()=>function(O){const Q=O.store("targetGlobal"),ne={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:X.min().toTimestamp(),targetCount:0};return Q.put("targetGlobalKey",ne)}(m))),o<4&&u>=4&&(0!==o&&(I=I.next(()=>function(O,Q){return Q.store("mutations").qt().next(ne=>{O.deleteObjectStore("mutations"),O.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",Hd,{unique:!0});const Re=Q.store("mutations"),Ze=ne.map(Tt=>Re.put(Tt));return Nt.waitFor(Ze)})}(e,m))),I=I.next(()=>{!function(O){O.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),o<5&&u>=5&&(I=I.next(()=>this.Kn(m))),o<6&&u>=6&&(I=I.next(()=>(function(O){O.createObjectStore("remoteDocumentGlobal")}(e),this.Qn(m)))),o<7&&u>=7&&(I=I.next(()=>this.jn(m))),o<8&&u>=8&&(I=I.next(()=>this.Wn(e,m))),o<9&&u>=9&&(I=I.next(()=>{!function(O){O.objectStoreNames.contains("remoteDocumentChanges")&&O.deleteObjectStore("remoteDocumentChanges")}(e)})),o<10&&u>=10&&(I=I.next(()=>this.zn(m))),o<11&&u>=11&&(I=I.next(()=>{(function(O){O.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(O){O.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),o<12&&u>=12&&(I=I.next(()=>{!function(O){const Q=O.createObjectStore("documentOverlays",{keyPath:af});Q.createIndex("collectionPathOverlayIndex",nu,{unique:!1}),Q.createIndex("collectionGroupOverlayIndex",Pc,{unique:!1})}(e)})),o<13&&u>=13&&(I=I.next(()=>function(O){const Q=O.createObjectStore("remoteDocumentsV14",{keyPath:Ed});Q.createIndex("documentKeyIndex",Gd),Q.createIndex("collectionGroupIndex",zd)}(e)).next(()=>this.Hn(e,m)).next(()=>e.deleteObjectStore("remoteDocuments"))),o<14&&u>=14&&(I=I.next(()=>{!function(O){O.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),O.createObjectStore("indexState",{keyPath:aa}).createIndex("sequenceNumberIndex",Th,{unique:!1}),O.createObjectStore("indexEntries",{keyPath:Gu}).createIndex("documentKeyIndex",dc,{unique:!1})}(e)})),I}Qn(e){let n=0;return e.store("remoteDocuments").Wt((o,u)=>{n+=eh(u)}).next(()=>{const o={byteSize:n};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",o)})}Kn(e){const n=e.store("mutationQueues"),o=e.store("mutations");return n.qt().next(u=>Nt.forEach(u,m=>{const I=IDBKeyRange.bound([m.userId,-1],[m.userId,m.lastAcknowledgedBatchId]);return o.qt("userMutationsIndex",I).next(O=>Nt.forEach(O,Q=>{Xn(Q.userId===m.userId);const ne=qn(this.M,Q);return ou(e,m.userId,ne).next(()=>{})}))}))}jn(e){const n=e.store("targetDocuments"),o=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(u=>{const m=[];return o.Wt((I,O)=>{const Q=new Tn(I),ne=[0,As(Q)];m.push(n.get(ne).next(Re=>Re?Nt.resolve():n.put({targetId:0,path:As(Q),sequenceNumber:u.highestListenSequenceNumber})))}).next(()=>Nt.waitFor(m))})}Wn(e,n){e.createObjectStore("collectionParents",{keyPath:Fl});const o=n.store("collectionParents"),u=new Qd,m=I=>{if(u.add(I)){const O=I.lastSegment(),Q=I.popLast();return o.put({collectionId:O,parent:As(Q)})}};return n.store("remoteDocuments").Wt({jt:!0},(I,O)=>{const Q=new Tn(I);return m(Q.popLast())}).next(()=>n.store("documentMutations").Wt({jt:!0},([I,O,Q],ne)=>{const Re=Da(O);return m(Re.popLast())}))}zn(e){const n=e.store("targets");return n.Wt((o,u)=>{const m=Or(u),I=Ki(this.M,m);return n.put(I)})}Hn(e,n){const o=n.store("remoteDocuments"),u=[];return o.Wt((m,I)=>{const O=n.store("remoteDocumentsV14"),Q=(ne=I,ne.document?new vn(Tn.fromString(ne.document.name).popFirst(5)):ne.noDocument?vn.fromSegments(ne.noDocument.path):ne.unknownDocument?vn.fromSegments(ne.unknownDocument.path):In()).path.toArray();var ne;const Re={prefixPath:Q.slice(0,Q.length-2),collectionGroup:Q[Q.length-2],documentId:Q[Q.length-1],readTime:I.readTime||[0,0],unknownDocument:I.unknownDocument,noDocument:I.noDocument,document:I.document,hasCommittedMutations:!!I.hasCommittedMutations};u.push(O.put(Re))}).next(()=>Nt.waitFor(u))}}function Oh(i){i.createObjectStore("targetDocuments",{keyPath:Kd}).createIndex("documentTargetsIndex",qd,{unique:!0}),i.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",bh,{unique:!0}),i.createObjectStore("targetGlobal")}const rh="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class Ad{constructor(e,n,o,u,m,I,O,Q,ne,Re,Ze=13){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=o,this.Jn=m,this.window=I,this.document=O,this.Yn=ne,this.Xn=Re,this.Zn=Ze,this.ts=null,this.es=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ns=null,this.inForeground=!1,this.ss=null,this.rs=null,this.os=Number.NEGATIVE_INFINITY,this.us=Tt=>Promise.resolve(),!Ad.vt())throw new Jt(bt.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Og(this,u),this.cs=n+"main",this.M=new Ae(Q),this.hs=new ua(this.cs,this.Zn,new Nh(this.M)),this.ls=new cp(this.referenceDelegate,this.M),this.fs=new hf(this.M),this.ds=new Yd,this.window&&this.window.localStorage?this._s=this.window.localStorage:(this._s=null,!1===Re&&Vi("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.ws().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new Jt(bt.FAILED_PRECONDITION,rh);return this.gs(),this.ys(),this.ps(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.ls.getHighestSequenceNumber(e))}).then(e=>{this.ts=new gs(e,this.Yn)}).then(()=>{this.es=!0}).catch(e=>(this.hs&&this.hs.close(),Promise.reject(e)))}Is(e){var n=this;return this.us=function(){var o=(0,f.Z)(function*(u){if(n.started)return e(u)});return function(u){return o.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.hs.Ot(function(){var n=(0,f.Z)(function*(o){null===o.newVersion&&(yield e())});return function(o){return n.apply(this,arguments)}}())}setNetworkEnabled(e){var n=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.Jn.enqueueAndForget((0,f.Z)(function*(){n.started&&(yield n.ws())})))}ws(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>Bc(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ts(e).next(n=>{n||(this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)))})}).next(()=>this.Es(e)).next(n=>this.isPrimary&&!n?this.As(e).next(()=>!1):!!n&&this.Rs(e).next(()=>!0))).catch(e=>{if(ru(e))return on("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return on("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.Jn.enqueueRetryable(()=>this.us(e)),this.isPrimary=e})}Ts(e){return ih(e).get("owner").next(n=>Nt.resolve(this.bs(n)))}Ps(e){return Bc(e).delete(this.clientId)}Vs(){var e=this;return(0,f.Z)(function*(){if(e.isPrimary&&!e.vs(e.os,18e5)){e.os=Date.now();const n=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",o=>{const u=_(o,"clientMetadata");return u.qt().next(m=>{const I=e.Ss(m,18e5),O=m.filter(Q=>-1===I.indexOf(Q));return Nt.forEach(O,Q=>u.delete(Q.clientId)).next(()=>O)})}).catch(()=>[]);if(e._s)for(const o of n)e._s.removeItem(e.Ds(o.clientId))}})()}ps(){this.rs=this.Jn.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.ws().then(()=>this.Vs()).then(()=>this.ps()))}bs(e){return!!e&&e.ownerId===this.clientId}Es(e){return this.Xn?Nt.resolve(!0):ih(e).get("owner").next(n=>{if(null!==n&&this.vs(n.leaseTimestampMs,5e3)&&!this.Cs(n.ownerId)){if(this.bs(n)&&this.networkEnabled)return!0;if(!this.bs(n)){if(!n.allowTabSynchronization)throw new Jt(bt.FAILED_PRECONDITION,rh);return!1}}return!(!this.networkEnabled||!this.inForeground)||Bc(e).qt().next(o=>void 0===this.Ss(o,5e3).find(u=>{if(this.clientId!==u.clientId){const I=!this.inForeground&&u.inForeground,O=this.networkEnabled===u.networkEnabled;if(!this.networkEnabled&&u.networkEnabled||I&&O)return!0}return!1}))}).next(n=>(this.isPrimary!==n&&on("IndexedDbPersistence",`Client ${n?"is":"is not"} eligible for a primary lease.`),n))}shutdown(){var e=this;return(0,f.Z)(function*(){e.es=!1,e.xs(),e.rs&&(e.rs.cancel(),e.rs=null),e.Ns(),e.ks(),yield e.hs.runTransaction("shutdown","readwrite",["owner","clientMetadata"],n=>{const o=new c(n,gs.A);return e.As(o).next(()=>e.Ps(o))}),e.hs.close(),e.Ms()})()}Ss(e,n){return e.filter(o=>this.vs(o.updateTimeMs,n)&&!this.Cs(o.clientId))}Os(){return this.runTransaction("getActiveClients","readonly",e=>Bc(e).qt().next(n=>this.Ss(n,18e5).map(o=>o.clientId)))}get started(){return this.es}getMutationQueue(e,n){return th.Yt(e,this.M,n,this.referenceDelegate)}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getIndexManager(e){return new Mh(e)}getDocumentOverlayCache(e){return po.Yt(this.M,e)}getBundleCache(){return this.ds}runTransaction(e,n,o){on("IndexedDbPersistence","Starting transaction:",e);const u="readonly"===n?"readonly":"readwrite",m=14===(I=this.Zn)?hc:13===I?Ll:12===I?fo:11===I?Nc:void In();var I;let O;return this.hs.runTransaction(e,u,m,Q=>(O=new c(Q,this.ts?this.ts.next():gs.A),"readwrite-primary"===n?this.Ts(O).next(ne=>!!ne||this.Es(O)).next(ne=>{if(!ne)throw Vi(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.Jn.enqueueRetryable(()=>this.us(!1)),new Jt(bt.FAILED_PRECONDITION,pl);return o(O)}).next(ne=>this.Rs(O).next(()=>ne)):this.Fs(O).next(()=>o(O)))).then(Q=>(O.raiseOnCommittedEvent(),Q))}Fs(e){return ih(e).get("owner").next(n=>{if(null!==n&&this.vs(n.leaseTimestampMs,5e3)&&!this.Cs(n.ownerId)&&!this.bs(n)&&!(this.Xn||this.allowTabSynchronization&&n.allowTabSynchronization))throw new Jt(bt.FAILED_PRECONDITION,rh)})}Rs(e){const n={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return ih(e).put("owner",n)}static vt(){return ua.vt()}As(e){const n=ih(e);return n.get("owner").next(o=>this.bs(o)?(on("IndexedDbPersistence","Releasing primary lease."),n.delete("owner")):Nt.resolve())}vs(e,n){const o=Date.now();return!(e<o-n||e>o&&(Vi(`Detected an update time that is in the future: ${e} > ${o}`),1))}gs(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ss=()=>{this.Jn.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.ws()))},this.document.addEventListener("visibilitychange",this.ss),this.inForeground="visible"===this.document.visibilityState)}Ns(){this.ss&&(this.document.removeEventListener("visibilitychange",this.ss),this.ss=null)}ys(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ns=()=>{this.xs(),(0,we.G6)()&&navigator.appVersion.match(/Version\/1[45]/)&&this.Jn.enterRestrictedMode(!0),this.Jn.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ns))}ks(){this.ns&&(this.window.removeEventListener("pagehide",this.ns),this.ns=null)}Cs(e){var n;try{const o=null!==(null===(n=this._s)||void 0===n?void 0:n.getItem(this.Ds(e)));return on("IndexedDbPersistence",`Client '${e}' ${o?"is":"is not"} zombied in LocalStorage`),o}catch(o){return Vi("IndexedDbPersistence","Failed to get zombied client id.",o),!1}}xs(){if(this._s)try{this._s.setItem(this.Ds(this.clientId),String(Date.now()))}catch(e){Vi("Failed to set zombie client id.",e)}}Ms(){if(this._s)try{this._s.removeItem(this.Ds(this.clientId))}catch(e){}}Ds(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function ih(i){return _(i,"owner")}function Bc(i){return _(i,"clientMetadata")}function sh(i,e){let n=i.projectId;return i.isDefaultDatabase||(n+="."+i.database),"firestore/"+e+"/"+n+"/"}class fp{constructor(e,n,o){this.fs=e,this.$s=n,this.indexManager=o}Bs(e,n){return this.$s.getAllMutationBatchesAffectingDocumentKey(e,n).next(o=>this.Ls(e,n,o))}Ls(e,n,o){return this.fs.getEntry(e,n).next(u=>{for(const m of o)m.applyToLocalView(u);return u})}Us(e,n){e.forEach((o,u)=>{for(const m of n)m.applyToLocalView(u)})}qs(e,n){return this.fs.getEntries(e,n).next(o=>this.Gs(e,o).next(()=>o))}Gs(e,n){return this.$s.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>this.Us(n,o))}Ks(e,n,o){return vn.isDocumentKey((u=n).path)&&null===u.collectionGroup&&0===u.filters.length?this.Qs(e,n.path):ku(n)?this.js(e,n,o):this.Ws(e,n,o);var u}Qs(e,n){return this.Bs(e,new vn(n)).next(o=>{let u=yu();return o.isFoundDocument()&&(u=u.insert(o.key,o)),u})}js(e,n,o){const u=n.collectionGroup;let m=yu();return this.indexManager.getCollectionParents(e,u).next(I=>Nt.forEach(I,O=>{const Q=(ne=n,Re=O.child(u),new Cs(Re,null,ne.explicitOrderBy.slice(),ne.filters.slice(),ne.limit,ne.limitType,ne.startAt,ne.endAt));var ne,Re;return this.Ws(e,Q,o).next(ne=>{ne.forEach((Re,Ze)=>{m=m.insert(Re,Ze)})})}).next(()=>m))}Ws(e,n,o){let u;return this.fs.getAllFromCollection(e,n.path,o).next(m=>(u=m,this.$s.getAllMutationBatchesAffectingQuery(e,n))).next(m=>{for(const I of m)for(const O of I.mutations){const Q=O.key;let ne=u.get(Q);null==ne&&(ne=si.newInvalidDocument(Q),u=u.insert(Q,ne)),il(O,ne,I.localWriteTime),ne.isFoundDocument()||(u=u.remove(Q))}}).next(()=>(u.forEach((m,I)=>{Ka(n,I)||(u=u.remove(m))}),u))}}class ff{constructor(e,n,o,u){this.targetId=e,this.fromCache=n,this.zs=o,this.Hs=u}static Js(e,n){let o=Vr(),u=Vr();for(const m of n.docChanges)switch(m.type){case 0:o=o.add(m.doc.key);break;case 1:u=u.add(m.doc.key)}return new ff(e,n.fromCache,o,u)}}class Sd{Ys(e){this.Xs=e}Ks(e,n,o,u){return 0===(m=n).filters.length&&null===m.limit&&null==m.startAt&&null==m.endAt&&(0===m.explicitOrderBy.length||1===m.explicitOrderBy.length&&m.explicitOrderBy[0].field.isKeyField())||o.isEqual(X.min())?this.Zs(e,n):this.Xs.qs(e,u).next(m=>{const I=this.ti(n,m);return(ho(n)||Bo(n))&&this.ei(n.limitType,I,u,o)?this.Zs(e,n):(ka()<=Z.in.DEBUG&&on("QueryEngine","Re-using previous result from %s to execute query: %s",o.toString(),Fu(n)),this.Xs.Ks(e,n,ec(o,-1)).next(O=>(I.forEach(Q=>{O=O.insert(Q.key,Q)}),O)))});var m}ti(e,n){let o=new ln(Lu(e));return n.forEach((u,m)=>{Ka(e,m)&&(o=o.add(m))}),o}ei(e,n,o,u){if(o.size!==n.size)return!0;const m="F"===e?n.last():n.first();return!!m&&(m.hasPendingWrites||m.version.compareTo(u)>0)}Zs(e,n){return ka()<=Z.in.DEBUG&&on("QueryEngine","Using full collection scan to execute query:",Fu(n)),this.Xs.Ks(e,n,co.min())}}class Fg{constructor(e,n,o,u){this.persistence=e,this.ni=n,this.M=u,this.si=new pe(b),this.ii=new ee(m=>ra(m),ia),this.ri=new Map,this.oi=e.getRemoteDocumentCache(),this.ls=e.getTargetCache(),this.ds=e.getBundleCache(),this.ui(o)}ui(e){this.indexManager=this.persistence.getIndexManager(e),this.$s=this.persistence.getMutationQueue(e,this.indexManager),this.ai=new fp(this.oi,this.$s,this.indexManager),this.oi.setIndexManager(this.indexManager),this.ni.Ys(this.ai)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.si))}}function pf(i,e,n,o){return new Fg(i,e,n,o)}function pp(i,e){return oh.apply(this,arguments)}function oh(){return oh=(0,f.Z)(function*(i,e){const n=nn(i);return yield n.persistence.runTransaction("Handle user change","readonly",o=>{let u;return n.$s.getAllMutationBatches(o).next(m=>(u=m,n.ui(e),n.$s.getAllMutationBatches(o))).next(m=>{const I=[],O=[];let Q=Vr();for(const ne of u){I.push(ne.batchId);for(const Re of ne.mutations)Q=Q.add(Re.key)}for(const ne of m){O.push(ne.batchId);for(const Re of ne.mutations)Q=Q.add(Re.key)}return n.ai.qs(o,Q).next(ne=>({ci:ne,removedBatchIds:I,addedBatchIds:O}))})})}),oh.apply(this,arguments)}function gf(i,e){const n=nn(i);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",o=>{const u=e.batch.keys(),m=n.oi.newChangeBuffer({trackRemovals:!0});return function(I,O,Q,ne){const Re=Q.batch,Ze=Re.keys();let Tt=Nt.resolve();return Ze.forEach(Zt=>{Tt=Tt.next(()=>ne.getEntry(O,Zt)).next(tn=>{const Zn=Q.docVersions.get(Zt);Xn(null!==Zn),tn.version.compareTo(Zn)<0&&(Re.applyToRemoteDocument(tn,Q),tn.isValidDocument()&&(tn.setReadTime(Q.commitVersion),ne.addEntry(tn)))})}),Tt.next(()=>I.$s.removeMutationBatch(O,Re))}(n,o,e,m).next(()=>m.apply(o)).next(()=>n.$s.performConsistencyCheck(o)).next(()=>n.ai.qs(o,u))})}function mf(i){const e=nn(i);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.ls.getLastRemoteSnapshotVersion(n))}function _f(i,e){const n=nn(i),o=e.snapshotVersion;let u=n.si;return n.persistence.runTransaction("Apply remote event","readwrite-primary",m=>{const I=n.oi.newChangeBuffer({trackRemovals:!0});u=n.si;const O=[];e.targetChanges.forEach((ne,Re)=>{const Ze=u.get(Re);if(!Ze)return;O.push(n.ls.removeMatchingKeys(m,ne.removedDocuments,Re).next(()=>n.ls.addMatchingKeys(m,ne.addedDocuments,Re)));let Tt=Ze.withSequenceNumber(m.currentSequenceNumber);var Zt,tn,Zn;e.targetMismatches.has(Re)?Tt=Tt.withResumeToken(Kr.EMPTY_BYTE_STRING,X.min()).withLastLimboFreeSnapshotVersion(X.min()):ne.resumeToken.approximateByteSize()>0&&(Tt=Tt.withResumeToken(ne.resumeToken,o)),u=u.insert(Re,Tt),tn=Tt,Zn=ne,(0===(Zt=Ze).resumeToken.approximateByteSize()||tn.snapshotVersion.toMicroseconds()-Zt.snapshotVersion.toMicroseconds()>=3e8||Zn.addedDocuments.size+Zn.modifiedDocuments.size+Zn.removedDocuments.size>0)&&O.push(n.ls.updateTargetData(m,Tt))});let Q=Qi();if(e.documentUpdates.forEach(ne=>{e.resolvedLimboDocuments.has(ne)&&O.push(n.persistence.referenceDelegate.updateLimboDocument(m,ne))}),O.push(Lg(m,I,e.documentUpdates).next(ne=>{Q=ne})),!o.isEqual(X.min())){const ne=n.ls.getLastRemoteSnapshotVersion(m).next(Re=>n.ls.setTargetsMetadata(m,m.currentSequenceNumber,o));O.push(ne)}return Nt.waitFor(O).next(()=>I.apply(m)).next(()=>n.ai.Gs(m,Q)).next(()=>Q)}).then(m=>(n.si=u,m))}function Lg(i,e,n){let o=Vr();return n.forEach(u=>o=o.add(u)),e.getEntries(i,o).next(u=>{let m=Qi();return n.forEach((I,O)=>{const Q=u.get(I);O.isNoDocument()&&O.version.isEqual(X.min())?(e.removeEntry(I,O.readTime),m=m.insert(I,O)):!Q.isValidDocument()||O.version.compareTo(Q.version)>0||0===O.version.compareTo(Q.version)&&Q.hasPendingWrites?(e.addEntry(O),m=m.insert(I,O)):on("LocalStore","Ignoring outdated watch update for ",I,". Current version:",Q.version," Watch version:",O.version)}),m})}function a_(i,e){const n=nn(i);return n.persistence.runTransaction("Get next mutation batch","readonly",o=>(void 0===e&&(e=-1),n.$s.getNextMutationBatchAfterBatchId(o,e)))}function ah(i,e){const n=nn(i);return n.persistence.runTransaction("Allocate target","readwrite",o=>{let u;return n.ls.getTargetData(o,e).next(m=>m?(u=m,Nt.resolve(u)):n.ls.allocateTargetId(o).next(I=>(u=new ce(e,I,0,o.currentSequenceNumber),n.ls.addTargetData(o,u).next(()=>u))))}).then(o=>{const u=n.si.get(o.targetId);return(null===u||o.snapshotVersion.compareTo(u.snapshotVersion)>0)&&(n.si=n.si.insert(o.targetId,o),n.ii.set(e,o.targetId)),o})}function uh(i,e,n){return gp.apply(this,arguments)}function gp(){return gp=(0,f.Z)(function*(i,e,n){const o=nn(i),u=o.si.get(e),m=n?"readwrite":"readwrite-primary";try{n||(yield o.persistence.runTransaction("Release target",m,I=>o.persistence.referenceDelegate.removeTarget(I,u)))}catch(I){if(!ru(I))throw I;on("LocalStore",`Failed to update sequence numbers for target ${e}: ${I}`)}o.si=o.si.remove(e),o.ii.delete(u.target)}),gp.apply(this,arguments)}function yf(i,e,n){const o=nn(i);let u=X.min(),m=Vr();return o.persistence.runTransaction("Execute query","readonly",I=>function(O,Q,ne){const Re=nn(O),Ze=Re.ii.get(ne);return void 0!==Ze?Nt.resolve(Re.si.get(Ze)):Re.ls.getTargetData(Q,ne)}(o,I,bs(e)).next(O=>{if(O)return u=O.lastLimboFreeSnapshotVersion,o.ls.getMatchingKeysForTargetId(I,O.targetId).next(Q=>{m=Q})}).next(()=>o.ni.Ks(I,e,n?u:X.min(),n?m:Vr())).next(O=>(Vg(o,Ca(e),O),{documents:O,hi:m})))}function Ug(i,e){const n=nn(i),o=nn(n.ls),u=n.si.get(e);return u?Promise.resolve(u.target):n.persistence.runTransaction("Get target data","readonly",m=>o.Et(m,e).next(I=>I?I.target:null))}function mp(i,e){const n=nn(i),o=n.ri.get(e)||X.min();return n.persistence.runTransaction("Get new document changes","readonly",u=>n.oi.getAllFromCollectionGroup(u,e,ec(o,-1),Number.MAX_SAFE_INTEGER)).then(u=>(Vg(n,e,u),u))}function Vg(i,e,n){let o=X.min();n.forEach((u,m)=>{m.readTime.compareTo(o)>0&&(o=m.readTime)}),i.ri.set(e,o)}function Cl(){return Cl=(0,f.Z)(function*(i,e,n,o){const u=nn(i);let m=Vr(),I=Qi();for(const ne of n){const Re=e.li(ne.metadata.name);ne.document&&(m=m.add(Re));const Ze=e.fi(ne);Ze.setReadTime(e.di(ne.metadata.readTime)),I=I.insert(Re,Ze)}const O=u.oi.newChangeBuffer({trackRemovals:!0}),Q=yield ah(u,(ne=o,bs(Vo(Tn.fromString(`__bundle__/docs/${ne}`)))));var ne;return u.persistence.runTransaction("Apply bundle documents","readwrite",ne=>Lg(ne,O,I).next(Re=>(O.apply(ne),Re)).next(Re=>u.ls.removeMatchingKeysForTargetId(ne,Q.targetId).next(()=>u.ls.addMatchingKeys(ne,m,Q.targetId)).next(()=>u.ai.Gs(ne,Re)).next(()=>Re)))}),Cl.apply(this,arguments)}function vf(i,e){return Ef.apply(this,arguments)}function Ef(){return Ef=(0,f.Z)(function*(i,e,n=Vr()){const o=yield ah(i,bs(zu(e.bundledQuery))),u=nn(i);return u.persistence.runTransaction("Save named query","readwrite",m=>{const I=Ts(e.readTime);if(o.snapshotVersion.compareTo(I)>=0)return u.ds.saveNamedQuery(m,e);const O=o.withResumeToken(Kr.EMPTY_BYTE_STRING,I);return u.si=u.si.insert(O.targetId,O),u.ls.updateTargetData(m,O).next(()=>u.ls.removeMatchingKeysForTargetId(m,o.targetId)).next(()=>u.ls.addMatchingKeys(m,n,o.targetId)).next(()=>u.ds.saveNamedQuery(m,e))})}),Ef.apply(this,arguments)}class _p{constructor(e){this.M=e,this._i=new Map,this.wi=new Map}getBundleMetadata(e,n){return Nt.resolve(this._i.get(n))}saveBundleMetadata(e,n){var o;return this._i.set(n.id,{id:(o=n).id,version:o.version,createTime:Ts(o.createTime)}),Nt.resolve()}getNamedQuery(e,n){return Nt.resolve(this.wi.get(n))}saveNamedQuery(e,n){return this.wi.set(n.name,{name:(o=n).name,query:zu(o.bundledQuery),readTime:Ts(o.readTime)}),Nt.resolve();var o}}class wf{constructor(){this.overlays=new pe(vn.comparator),this.mi=new Map}getOverlay(e,n){return Nt.resolve(this.overlays.get(n))}saveOverlays(e,n,o){return o.forEach((u,m)=>{this.Xt(e,n,m)}),Nt.resolve()}removeOverlaysForBatchId(e,n,o){const u=this.mi.get(o);return void 0!==u&&(u.forEach(m=>this.overlays=this.overlays.remove(m)),this.mi.delete(o)),Nt.resolve()}getOverlaysForCollection(e,n,o){const u=Ja(),m=n.length+1,I=new vn(n.child("")),O=this.overlays.getIteratorFrom(I);for(;O.hasNext();){const Q=O.getNext().value,ne=Q.getKey();if(!n.isPrefixOf(ne.path))break;ne.path.length===m&&Q.largestBatchId>o&&u.set(Q.getKey(),Q)}return Nt.resolve(u)}getOverlaysForCollectionGroup(e,n,o,u){let m=new pe((ne,Re)=>ne-Re);const I=this.overlays.getIterator();for(;I.hasNext();){const ne=I.getNext().value;if(ne.getKey().getCollectionGroup()===n&&ne.largestBatchId>o){let Re=m.get(ne.largestBatchId);null===Re&&(Re=Ja(),m=m.insert(ne.largestBatchId,Re)),Re.set(ne.getKey(),ne)}}const O=Ja(),Q=m.getIterator();for(;Q.hasNext()&&(Q.getNext().value.forEach((ne,Re)=>O.set(ne,Re)),!(O.size()>=u)););return Nt.resolve(O)}Xt(e,n,o){if(null===o)return;const u=this.overlays.get(o.key);if(null!==u){const I=this.mi.get(u.largestBatchId).delete(o.key);this.mi.set(u.largestBatchId,I)}this.overlays=this.overlays.insert(o.key,new G(n,o));let m=this.mi.get(n);void 0===m&&(m=Vr(),this.mi.set(n,m)),this.mi.set(n,m.add(o.key))}}class kh{constructor(){this.gi=new ln(Ss.yi),this.pi=new ln(Ss.Ii)}isEmpty(){return this.gi.isEmpty()}addReference(e,n){const o=new Ss(e,n);this.gi=this.gi.add(o),this.pi=this.pi.add(o)}Ti(e,n){e.forEach(o=>this.addReference(o,n))}removeReference(e,n){this.Ei(new Ss(e,n))}Ai(e,n){e.forEach(o=>this.removeReference(o,n))}Ri(e){const n=new vn(new Tn([])),o=new Ss(n,e),u=new Ss(n,e+1),m=[];return this.pi.forEachInRange([o,u],I=>{this.Ei(I),m.push(I.key)}),m}bi(){this.gi.forEach(e=>this.Ei(e))}Ei(e){this.gi=this.gi.delete(e),this.pi=this.pi.delete(e)}Pi(e){const n=new vn(new Tn([])),o=new Ss(n,e),u=new Ss(n,e+1);let m=Vr();return this.pi.forEachInRange([o,u],I=>{m=m.add(I.key)}),m}containsKey(e){const n=new Ss(e,0),o=this.gi.firstAfterOrEqual(n);return null!==o&&e.isEqual(o.key)}}class Ss{constructor(e,n){this.key=e,this.Vi=n}static yi(e,n){return vn.comparator(e.key,n.key)||b(e.Vi,n.Vi)}static Ii(e,n){return b(e.Vi,n.Vi)||vn.comparator(e.key,n.key)}}class yp{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.$s=[],this.vi=1,this.Si=new ln(Ss.yi)}checkEmpty(e){return Nt.resolve(0===this.$s.length)}addMutationBatch(e,n,o,u){const m=this.vi;this.vi++;const I=new A(m,n,o,u);this.$s.push(I);for(const O of u)this.Si=this.Si.add(new Ss(O.key,m)),this.indexManager.addToCollectionParentIndex(e,O.key.path.popLast());return Nt.resolve(I)}lookupMutationBatch(e,n){return Nt.resolve(this.Di(n))}getNextMutationBatchAfterBatchId(e,n){const u=this.Ci(n+1),m=u<0?0:u;return Nt.resolve(this.$s.length>m?this.$s[m]:null)}getHighestUnacknowledgedBatchId(){return Nt.resolve(0===this.$s.length?-1:this.vi-1)}getAllMutationBatches(e){return Nt.resolve(this.$s.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const o=new Ss(n,0),u=new Ss(n,Number.POSITIVE_INFINITY),m=[];return this.Si.forEachInRange([o,u],I=>{const O=this.Di(I.Vi);m.push(O)}),Nt.resolve(m)}getAllMutationBatchesAffectingDocumentKeys(e,n){let o=new ln(b);return n.forEach(u=>{const m=new Ss(u,0),I=new Ss(u,Number.POSITIVE_INFINITY);this.Si.forEachInRange([m,I],O=>{o=o.add(O.Vi)})}),Nt.resolve(this.xi(o))}getAllMutationBatchesAffectingQuery(e,n){const o=n.path,u=o.length+1;let m=o;vn.isDocumentKey(m)||(m=m.child(""));const I=new Ss(new vn(m),0);let O=new ln(b);return this.Si.forEachWhile(Q=>{const ne=Q.key.path;return!!o.isPrefixOf(ne)&&(ne.length===u&&(O=O.add(Q.Vi)),!0)},I),Nt.resolve(this.xi(O))}xi(e){const n=[];return e.forEach(o=>{const u=this.Di(o);null!==u&&n.push(u)}),n}removeMutationBatch(e,n){Xn(0===this.Ni(n.batchId,"removed")),this.$s.shift();let o=this.Si;return Nt.forEach(n.mutations,u=>{const m=new Ss(u.key,n.batchId);return o=o.delete(m),this.referenceDelegate.markPotentiallyOrphaned(e,u.key)}).next(()=>{this.Si=o})}dn(e){}containsKey(e,n){const o=new Ss(n,0),u=this.Si.firstAfterOrEqual(o);return Nt.resolve(n.isEqual(u&&u.key))}performConsistencyCheck(e){return Nt.resolve()}Ni(e,n){return this.Ci(e)}Ci(e){return 0===this.$s.length?0:e-this.$s[0].batchId}Di(e){const n=this.Ci(e);return n<0||n>=this.$s.length?null:this.$s[n]}}class Bl{constructor(e){this.ki=e,this.docs=new pe(vn.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const o=n.key,u=this.docs.get(o),m=u?u.size:0,I=this.ki(n);return this.docs=this.docs.insert(o,{document:n.mutableCopy(),size:I}),this.size+=I-m,this.indexManager.addToCollectionParentIndex(e,o.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const o=this.docs.get(n);return Nt.resolve(o?o.document.mutableCopy():si.newInvalidDocument(n))}getEntries(e,n){let o=Qi();return n.forEach(u=>{const m=this.docs.get(u);o=o.insert(u,m?m.document.mutableCopy():si.newInvalidDocument(u))}),Nt.resolve(o)}getAllFromCollection(e,n,o){let u=Qi();const m=new vn(n.child("")),I=this.docs.getIteratorFrom(m);for(;I.hasNext();){const{key:O,value:{document:Q}}=I.getNext();if(!n.isPrefixOf(O.path))break;O.path.length>n.length+1||$a(pu(Q),o)<=0||(u=u.insert(Q.key,Q.mutableCopy()))}return Nt.resolve(u)}getAllFromCollectionGroup(e,n,o,u){In()}Mi(e,n){return Nt.forEach(this.docs,o=>n(o))}newChangeBuffer(e){return new If(this)}getSize(e){return Nt.resolve(this.size)}}class If extends Il{constructor(e){super(),this.qn=e}applyChanges(e){const n=[];return this.changes.forEach((o,u)=>{u.isValidDocument()?n.push(this.qn.addEntry(e,u)):this.qn.removeEntry(o)}),Nt.waitFor(n)}getFromCache(e,n){return this.qn.getEntry(e,n)}getAllFromCache(e,n){return this.qn.getEntries(e,n)}}class vp{constructor(e){this.persistence=e,this.Oi=new ee(n=>ra(n),ia),this.lastRemoteSnapshotVersion=X.min(),this.highestTargetId=0,this.Fi=0,this.$i=new kh,this.targetCount=0,this.Bi=El.mn()}forEachTarget(e,n){return this.Oi.forEach((o,u)=>n(u)),Nt.resolve()}getLastRemoteSnapshotVersion(e){return Nt.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Nt.resolve(this.Fi)}allocateTargetId(e){return this.highestTargetId=this.Bi.next(),Nt.resolve(this.highestTargetId)}setTargetsMetadata(e,n,o){return o&&(this.lastRemoteSnapshotVersion=o),n>this.Fi&&(this.Fi=n),Nt.resolve()}In(e){this.Oi.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Bi=new El(n),this.highestTargetId=n),e.sequenceNumber>this.Fi&&(this.Fi=e.sequenceNumber)}addTargetData(e,n){return this.In(n),this.targetCount+=1,Nt.resolve()}updateTargetData(e,n){return this.In(n),Nt.resolve()}removeTargetData(e,n){return this.Oi.delete(n.target),this.$i.Ri(n.targetId),this.targetCount-=1,Nt.resolve()}removeTargets(e,n,o){let u=0;const m=[];return this.Oi.forEach((I,O)=>{O.sequenceNumber<=n&&null===o.get(O.targetId)&&(this.Oi.delete(I),m.push(this.removeMatchingKeysForTargetId(e,O.targetId)),u++)}),Nt.waitFor(m).next(()=>u)}getTargetCount(e){return Nt.resolve(this.targetCount)}getTargetData(e,n){const o=this.Oi.get(n)||null;return Nt.resolve(o)}addMatchingKeys(e,n,o){return this.$i.Ti(n,o),Nt.resolve()}removeMatchingKeys(e,n,o){this.$i.Ai(n,o);const u=this.persistence.referenceDelegate,m=[];return u&&n.forEach(I=>{m.push(u.markPotentiallyOrphaned(e,I))}),Nt.waitFor(m)}removeMatchingKeysForTargetId(e,n){return this.$i.Ri(n),Nt.resolve()}getMatchingKeysForTargetId(e,n){const o=this.$i.Pi(n);return Nt.resolve(o)}containsKey(e,n){return Nt.resolve(this.$i.containsKey(n))}}class Fh{constructor(e,n){this.Li={},this.overlays={},this.ts=new gs(0),this.es=!1,this.es=!0,this.referenceDelegate=e(this),this.ls=new vp(this),this.indexManager=new gc,this.fs=new Bl(o=>this.referenceDelegate.Ui(o)),this.M=new Ae(n),this.ds=new _p(this.M)}start(){return Promise.resolve()}shutdown(){return this.es=!1,Promise.resolve()}get started(){return this.es}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new wf,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let o=this.Li[e.toKey()];return o||(o=new yp(n,this.referenceDelegate),this.Li[e.toKey()]=o),o}getTargetCache(){return this.ls}getRemoteDocumentCache(){return this.fs}getBundleCache(){return this.ds}runTransaction(e,n,o){on("MemoryPersistence","Starting transaction:",e);const u=new Ep(this.ts.next());return this.referenceDelegate.qi(),o(u).next(m=>this.referenceDelegate.Gi(u).next(()=>m)).toPromise().then(m=>(u.raiseOnCommittedEvent(),m))}Ki(e,n){return Nt.or(Object.values(this.Li).map(o=>()=>o.containsKey(e,n)))}}class Ep extends wd{constructor(e){super(),this.currentSequenceNumber=e}}class lh{constructor(e){this.persistence=e,this.Qi=new kh,this.ji=null}static Wi(e){return new lh(e)}get zi(){if(this.ji)return this.ji;throw In()}addReference(e,n,o){return this.Qi.addReference(o,n),this.zi.delete(o.toString()),Nt.resolve()}removeReference(e,n,o){return this.Qi.removeReference(o,n),this.zi.add(o.toString()),Nt.resolve()}markPotentiallyOrphaned(e,n){return this.zi.add(n.toString()),Nt.resolve()}removeTarget(e,n){this.Qi.Ri(n.targetId).forEach(u=>this.zi.add(u.toString()));const o=this.persistence.getTargetCache();return o.getMatchingKeysForTargetId(e,n.targetId).next(u=>{u.forEach(m=>this.zi.add(m.toString()))}).next(()=>o.removeTargetData(e,n))}qi(){this.ji=new Set}Gi(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Nt.forEach(this.zi,o=>{const u=vn.fromPath(o);return this.Hi(e,u).next(m=>{m||n.removeEntry(u,X.min())})}).next(()=>(this.ji=null,n.apply(e)))}updateLimboDocument(e,n){return this.Hi(e,n).next(o=>{o?this.zi.delete(n.toString()):this.zi.add(n.toString())})}Ui(e){return 0}Hi(e,n){return Nt.or([()=>Nt.resolve(this.Qi.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ki(e,n)])}}function Cf(i,e){return`firestore_clients_${i}_${e}`}function bf(i,e,n){let o=`firestore_mutations_${i}_${n}`;return e.isAuthenticated()&&(o+=`_${e.uid}`),o}function E(i,e){return`firestore_targets_${i}_${e}`}class v{constructor(e,n,o,u){this.user=e,this.batchId=n,this.state=o,this.error=u}static Ji(e,n,o){const u=JSON.parse(o);let m,I="object"==typeof u&&-1!==["pending","acknowledged","rejected"].indexOf(u.state)&&(void 0===u.error||"object"==typeof u.error);return I&&u.error&&(I="string"==typeof u.error.message&&"string"==typeof u.error.code,I&&(m=new Jt(u.error.code,u.error.message))),I?new v(e,n,u.state,m):(Vi("SharedClientState",`Failed to parse mutation state for ID '${n}': ${o}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class S{constructor(e,n,o){this.targetId=e,this.state=n,this.error=o}static Ji(e,n){const o=JSON.parse(n);let u,m="object"==typeof o&&-1!==["not-current","current","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return m&&o.error&&(m="string"==typeof o.error.message&&"string"==typeof o.error.code,m&&(u=new Jt(o.error.code,o.error.message))),m?new S(e,o.state,u):(Vi("SharedClientState",`Failed to parse target state for ID '${e}': ${n}`),null)}Yi(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class K{constructor(e,n){this.clientId=e,this.activeTargetIds=n}static Ji(e,n){const o=JSON.parse(n);let u="object"==typeof o&&o.activeTargetIds instanceof Array,m=ju();for(let I=0;u&&I<o.activeTargetIds.length;++I)u=Ql(o.activeTargetIds[I]),m=m.add(o.activeTargetIds[I]);return u?new K(e,m):(Vi("SharedClientState",`Failed to parse client data for instance '${e}': ${n}`),null)}}class re{constructor(e,n){this.clientId=e,this.onlineState=n}static Ji(e){const n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new re(n.clientId,n.onlineState):(Vi("SharedClientState",`Failed to parse online state: ${e}`),null)}}class Ve{constructor(){this.activeTargetIds=ju()}Xi(e){this.activeTargetIds=this.activeTargetIds.add(e)}Zi(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Yi(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class vt{constructor(e,n,o,u,m){this.window=e,this.Jn=n,this.persistenceKey=o,this.tr=u,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.er=this.nr.bind(this),this.sr=new pe(b),this.started=!1,this.ir=[];const I=o.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=m,this.rr=Cf(this.persistenceKey,this.tr),this.ur=`firestore_sequence_number_${this.persistenceKey}`,this.sr=this.sr.insert(this.tr,new Ve),this.ar=new RegExp(`^firestore_clients_${I}_([^_]*)$`),this.cr=new RegExp(`^firestore_mutations_${I}_(\\d+)(?:_(.*))?$`),this.hr=new RegExp(`^firestore_targets_${I}_(\\d+)$`),this.lr=`firestore_online_state_${this.persistenceKey}`,this.dr=function(O){return`firestore_bundle_loaded_v2_${O}`}(this.persistenceKey),this.window.addEventListener("storage",this.er)}static vt(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,f.Z)(function*(){const n=yield e.syncEngine.Os();for(const u of n){if(u===e.tr)continue;const m=e.getItem(Cf(e.persistenceKey,u));if(m){const I=K.Ji(u,m);I&&(e.sr=e.sr.insert(I.clientId,I))}}e._r();const o=e.storage.getItem(e.lr);if(o){const u=e.wr(o);u&&e.mr(u)}for(const u of e.ir)e.nr(u);e.ir=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.ur,JSON.stringify(e))}getAllActiveQueryTargets(){return this.gr(this.sr)}isActiveQueryTarget(e){let n=!1;return this.sr.forEach((o,u)=>{u.activeTargetIds.has(e)&&(n=!0)}),n}addPendingMutation(e){this.yr(e,"pending")}updateMutationState(e,n,o){this.yr(e,n,o),this.pr(e)}addLocalQueryTarget(e){let n="not-current";if(this.isActiveQueryTarget(e)){const o=this.storage.getItem(E(this.persistenceKey,e));if(o){const u=S.Ji(e,o);u&&(n=u.state)}}return this.Ir.Xi(e),this._r(),n}removeLocalQueryTarget(e){this.Ir.Zi(e),this._r()}isLocalQueryTarget(e){return this.Ir.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(E(this.persistenceKey,e))}updateQueryState(e,n,o){this.Tr(e,n,o)}handleUserChange(e,n,o){n.forEach(u=>{this.pr(u)}),this.currentUser=e,o.forEach(u=>{this.addPendingMutation(u)})}setOnlineState(e){this.Er(e)}notifyBundleLoaded(e){this.Ar(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this.er),this.removeItem(this.rr),this.started=!1)}getItem(e){const n=this.storage.getItem(e);return on("SharedClientState","READ",e,n),n}setItem(e,n){on("SharedClientState","SET",e,n),this.storage.setItem(e,n)}removeItem(e){on("SharedClientState","REMOVE",e),this.storage.removeItem(e)}nr(e){var n=this;const o=e;if(o.storageArea===this.storage){if(on("SharedClientState","EVENT",o.key,o.newValue),o.key===this.rr)return void Vi("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Jn.enqueueRetryable((0,f.Z)(function*(){if(n.started){if(null!==o.key)if(n.ar.test(o.key)){if(null==o.newValue){const u=n.Rr(o.key);return n.br(u,null)}{const u=n.Pr(o.key,o.newValue);if(u)return n.br(u.clientId,u)}}else if(n.cr.test(o.key)){if(null!==o.newValue){const u=n.Vr(o.key,o.newValue);if(u)return n.vr(u)}}else if(n.hr.test(o.key)){if(null!==o.newValue){const u=n.Sr(o.key,o.newValue);if(u)return n.Dr(u)}}else if(o.key===n.lr){if(null!==o.newValue){const u=n.wr(o.newValue);if(u)return n.mr(u)}}else if(o.key===n.ur){const u=function(m){let I=gs.A;if(null!=m)try{const O=JSON.parse(m);Xn("number"==typeof O),I=O}catch(O){Vi("SharedClientState","Failed to read sequence number from WebStorage",O)}return I}(o.newValue);u!==gs.A&&n.sequenceNumberHandler(u)}else if(o.key===n.dr){const u=n.Cr(o.newValue);yield Promise.all(u.map(m=>n.syncEngine.Nr(m)))}}else n.ir.push(o)}))}}get Ir(){return this.sr.get(this.tr)}_r(){this.setItem(this.rr,this.Ir.Yi())}yr(e,n,o){const u=new v(this.currentUser,e,n,o),m=bf(this.persistenceKey,this.currentUser,e);this.setItem(m,u.Yi())}pr(e){const n=bf(this.persistenceKey,this.currentUser,e);this.removeItem(n)}Er(e){this.storage.setItem(this.lr,JSON.stringify({clientId:this.tr,onlineState:e}))}Tr(e,n,o){const u=E(this.persistenceKey,e),m=new S(e,n,o);this.setItem(u,m.Yi())}Ar(e){const n=JSON.stringify(Array.from(e));this.setItem(this.dr,n)}Rr(e){const n=this.ar.exec(e);return n?n[1]:null}Pr(e,n){const o=this.Rr(e);return K.Ji(o,n)}Vr(e,n){const o=this.cr.exec(e),u=Number(o[1]);return v.Ji(new ri(void 0!==o[2]?o[2]:null),u,n)}Sr(e,n){const o=this.hr.exec(e),u=Number(o[1]);return S.Ji(u,n)}wr(e){return re.Ji(e)}Cr(e){return JSON.parse(e)}vr(e){var n=this;return(0,f.Z)(function*(){if(e.user.uid===n.currentUser.uid)return n.syncEngine.kr(e.batchId,e.state,e.error);on("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Dr(e){return this.syncEngine.Mr(e.targetId,e.state,e.error)}br(e,n){const o=n?this.sr.insert(e,n):this.sr.remove(e),u=this.gr(this.sr),m=this.gr(o),I=[],O=[];return m.forEach(Q=>{u.has(Q)||I.push(Q)}),u.forEach(Q=>{m.has(Q)||O.push(Q)}),this.syncEngine.Or(I,O).then(()=>{this.sr=o})}mr(e){this.sr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}gr(e){let n=ju();return e.forEach((o,u)=>{n=n.unionWith(u.activeTargetIds)}),n}}class qt{constructor(){this.Fr=new Ve,this.$r={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,o){}addLocalQueryTarget(e){return this.Fr.Xi(e),this.$r[e]||"not-current"}updateQueryState(e,n,o){this.$r[e]=n}removeLocalQueryTarget(e){this.Fr.Zi(e)}isLocalQueryTarget(e){return this.Fr.activeTargetIds.has(e)}clearQueryState(e){delete this.$r[e]}getAllActiveQueryTargets(){return this.Fr.activeTargetIds}isActiveQueryTarget(e){return this.Fr.activeTargetIds.has(e)}start(){return this.Fr=new Ve,Promise.resolve()}handleUserChange(e,n,o){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class cn{Br(e){}shutdown(){}}class ar{constructor(){this.Lr=()=>this.Ur(),this.qr=()=>this.Gr(),this.Kr=[],this.Qr()}Br(e){this.Kr.push(e)}shutdown(){window.removeEventListener("online",this.Lr),window.removeEventListener("offline",this.qr)}Qr(){window.addEventListener("online",this.Lr),window.addEventListener("offline",this.qr)}Ur(){on("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.Kr)e(0)}Gr(){on("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.Kr)e(1)}static vt(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}const pr={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"};class qr{constructor(e){this.jr=e.jr,this.Wr=e.Wr}zr(e){this.Hr=e}Jr(e){this.Yr=e}onMessage(e){this.Xr=e}close(){this.Wr()}send(e){this.jr(e)}Zr(){this.Hr()}eo(e){this.Yr(e)}no(e){this.Xr(e)}}class Mr extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.so=(e.ssl?"https":"http")+"://"+e.host,this.io="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}ro(e,n,o,u,m){const I=this.oo(e,n);on("RestConnection","Sending: ",I,o);const O={};return this.uo(O,u,m),this.ao(e,I,O,o).then(Q=>(on("RestConnection","Received: ",Q),Q),Q=>{throw qs("RestConnection",`${e} failed with error: `,Q,"url: ",I,"request:",o),Q})}co(e,n,o,u,m){return this.ro(e,n,o,u,m)}uo(e,n,o){e["X-Goog-Api-Client"]="gl-js/ fire/"+Ns,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((u,m)=>e[m]=u),o&&o.headers.forEach((u,m)=>e[m]=u)}oo(e,n){return`${this.so}/v1/${n}:${pr[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams}ao(e,n,o,u){return new Promise((m,I)=>{const O=new ea;O.listenOnce(uu.COMPLETE,()=>{try{switch(O.getLastErrorCode()){case Fo.NO_ERROR:const ne=O.getResponseJson();on("Connection","XHR received:",JSON.stringify(ne)),m(ne);break;case Fo.TIMEOUT:on("Connection",'RPC "'+e+'" timed out'),I(new Jt(bt.DEADLINE_EXCEEDED,"Request time out"));break;case Fo.HTTP_ERROR:const Re=O.getStatus();if(on("Connection",'RPC "'+e+'" failed with status:',Re,"response text:",O.getResponseText()),Re>0){const Ze=O.getResponseJson().error;if(Ze&&Ze.status&&Ze.message){const Tt=function(Zt){const tn=Zt.toLowerCase().replace(/_/g,"-");return Object.values(bt).indexOf(tn)>=0?tn:bt.UNKNOWN}(Ze.status);I(new Jt(Tt,Ze.message))}else I(new Jt(bt.UNKNOWN,"Server responded with status "+O.getStatus()))}else I(new Jt(bt.UNAVAILABLE,"Connection failed."));break;default:In()}}finally{on("Connection",'RPC "'+e+'" completed.')}});const Q=JSON.stringify(u);O.send(n,"POST",Q,o,15)})}ho(e,n,o){const u=[this.so,"/","google.firestore.v1.Firestore","/",e,"/channel"],m=Wi(),I=uo(),O={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.useFetchStreams&&(O.xmlHttpFactory=new Su({})),this.uo(O.initMessageHeaders,n,o),(0,we.uI)()||(0,we.b$)()||(0,we.d)()||(0,we.w1)()||(0,we.Mn)()||(0,we.ru)()||(O.httpHeadersOverwriteParam="$httpHeaders");const Q=u.join("");on("Connection","Creating WebChannel: "+Q,O);const ne=m.createWebChannel(Q,O);let Re=!1,Ze=!1;const Tt=new qr({jr:tn=>{Ze?on("Connection","Not sending because WebChannel is closed:",tn):(Re||(on("Connection","Opening WebChannel transport."),ne.open(),Re=!0),on("Connection","WebChannel sending:",tn),ne.send(tn))},Wr:()=>ne.close()}),Zt=(tn,Zn,Pr)=>{tn.listen(Zn,Ms=>{try{Pr(Ms)}catch(Hr){setTimeout(()=>{throw Hr},0)}})};return Zt(ne,Ri.EventType.OPEN,()=>{Ze||on("Connection","WebChannel transport opened.")}),Zt(ne,Ri.EventType.CLOSE,()=>{Ze||(Ze=!0,on("Connection","WebChannel transport closed"),Tt.eo())}),Zt(ne,Ri.EventType.ERROR,tn=>{Ze||(Ze=!0,qs("Connection","WebChannel transport errored:",tn),Tt.eo(new Jt(bt.UNAVAILABLE,"The operation could not be completed")))}),Zt(ne,Ri.EventType.MESSAGE,tn=>{var Zn;if(!Ze){const Pr=tn.data[0];Xn(!!Pr);const Ms=Pr,Hr=Ms.error||(null===(Zn=Ms[0])||void 0===Zn?void 0:Zn.error);if(Hr){on("Connection","WebChannel received error:",Hr);const au=Hr.status;let js=function(wi){const nd=D[wi];if(void 0!==nd)return M(nd)}(au),eo=Hr.message;void 0===js&&(js=bt.INTERNAL,eo="Unknown error status: "+au+" with message "+Hr.message),Ze=!0,Tt.eo(new Jt(js,eo)),ne.close()}else on("Connection","WebChannel received:",Pr),Tt.no(Pr)}}),Zt(I,lu.STAT_EVENT,tn=>{tn.stat===gi.PROXY?on("Connection","Detected buffering proxy"):tn.stat===gi.NOPROXY&&on("Connection","Detected no buffering proxy")}),setTimeout(()=>{Tt.Zr()},0),Tt}}function Zr(){return"undefined"!=typeof window?window:null}function Br(){return"undefined"!=typeof document?document:null}function Fi(i){return new Ol(i,!0)}class Yr{constructor(e,n,o=1e3,u=1.5,m=6e4){this.Jn=e,this.timerId=n,this.lo=o,this.fo=u,this._o=m,this.wo=0,this.mo=null,this.yo=Date.now(),this.reset()}reset(){this.wo=0}po(){this.wo=this._o}Io(e){this.cancel();const n=Math.floor(this.wo+this.To()),o=Math.max(0,Date.now()-this.yo),u=Math.max(0,n-o);u>0&&on("ExponentialBackoff",`Backing off for ${u} ms (base delay: ${this.wo} ms, delay with jitter: ${n} ms, last attempt: ${o} ms ago)`),this.mo=this.Jn.enqueueAfterDelay(this.timerId,u,()=>(this.yo=Date.now(),e())),this.wo*=this.fo,this.wo<this.lo&&(this.wo=this.lo),this.wo>this._o&&(this.wo=this._o)}Eo(){null!==this.mo&&(this.mo.skipDelay(),this.mo=null)}cancel(){null!==this.mo&&(this.mo.cancel(),this.mo=null)}To(){return(Math.random()-.5)*this.wo}}class To{constructor(e,n,o,u,m,I,O,Q){this.Jn=e,this.Ao=o,this.Ro=u,this.bo=m,this.authCredentialsProvider=I,this.appCheckCredentialsProvider=O,this.listener=Q,this.state=0,this.Po=0,this.Vo=null,this.vo=null,this.stream=null,this.So=new Yr(e,n)}Do(){return 1===this.state||5===this.state||this.Co()}Co(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.xo()}stop(){var e=this;return(0,f.Z)(function*(){e.Do()&&(yield e.close(0))})()}No(){this.state=0,this.So.reset()}ko(){this.Co()&&null===this.Vo&&(this.Vo=this.Jn.enqueueAfterDelay(this.Ao,6e4,()=>this.Mo()))}Oo(e){this.Fo(),this.stream.send(e)}Mo(){var e=this;return(0,f.Z)(function*(){if(e.Co())return e.close(0)})()}Fo(){this.Vo&&(this.Vo.cancel(),this.Vo=null)}$o(){this.vo&&(this.vo.cancel(),this.vo=null)}close(e,n){var o=this;return(0,f.Z)(function*(){o.Fo(),o.$o(),o.So.cancel(),o.Po++,4!==e?o.So.reset():n&&n.code===bt.RESOURCE_EXHAUSTED?(Vi(n.toString()),Vi("Using maximum backoff delay to prevent overloading the backend."),o.So.po()):n&&n.code===bt.UNAUTHENTICATED&&3!==o.state&&(o.authCredentialsProvider.invalidateToken(),o.appCheckCredentialsProvider.invalidateToken()),null!==o.stream&&(o.Bo(),o.stream.close(),o.stream=null),o.state=e,yield o.listener.Jr(n)})()}Bo(){}auth(){this.state=1;const e=this.Lo(this.Po),n=this.Po;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([o,u])=>{this.Po===n&&this.Uo(o,u)},o=>{e(()=>{const u=new Jt(bt.UNKNOWN,"Fetching auth token failed: "+o.message);return this.qo(u)})})}Uo(e,n){const o=this.Lo(this.Po);this.stream=this.Go(e,n),this.stream.zr(()=>{o(()=>(this.state=2,this.vo=this.Jn.enqueueAfterDelay(this.Ro,1e4,()=>(this.Co()&&(this.state=3),Promise.resolve())),this.listener.zr()))}),this.stream.Jr(u=>{o(()=>this.qo(u))}),this.stream.onMessage(u=>{o(()=>this.onMessage(u))})}xo(){var e=this;this.state=5,this.So.Io((0,f.Z)(function*(){e.state=0,e.start()}))}qo(e){return on("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Lo(e){return n=>{this.Jn.enqueueAndForget(()=>this.Po===e?n():(on("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Do extends To{constructor(e,n,o,u,m,I){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,o,u,I),this.M=m}Go(e,n){return this.bo.ho("Listen",e,n)}onMessage(e){this.So.reset();const n=function hl(i,e){let n;if("targetChange"in e){const o="NO_CHANGE"===(Q=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===Q?1:"REMOVE"===Q?2:"CURRENT"===Q?3:"RESET"===Q?4:In(),u=e.targetChange.targetIds||[],m=function(Q,ne){return Q.N?(Xn(void 0===ne||"string"==typeof ne),Kr.fromBase64String(ne||"")):(Xn(void 0===ne||ne instanceof Uint8Array),Kr.fromUint8Array(ne||new Uint8Array))}(i,e.targetChange.resumeToken),I=e.targetChange.cause,O=I&&function(Q){const ne=void 0===Q.code?bt.UNKNOWN:M(Q.code);return new Jt(ne,Q.message||"")}(I);n=new tu(o,u,m,O||null)}else if("documentChange"in e){const o=e.documentChange,u=Eu(i,o.document.name),m=Ts(o.document.updateTime),I=new Oi({mapValue:{fields:o.document.fields}}),O=si.newFoundDocument(u,m,I);n=new eu(o.targetIds||[],o.removedTargetIds||[],O.key,O)}else if("documentDelete"in e){const o=e.documentDelete,u=Eu(i,o.document),m=o.readTime?Ts(o.readTime):X.min(),I=si.newNoDocument(u,m);n=new eu([],o.removedTargetIds||[],I.key,I)}else if("documentRemove"in e){const o=e.documentRemove,u=Eu(i,o.document);n=new eu([],o.removedTargetIds||[],u,null)}else{if(!("filter"in e))return In();{const o=e.filter,m=new hd(o.count||0);n=new ic(o.targetId,m)}}var Q;return n}(this.M,e),o=function(u){if(!("targetChange"in u))return X.min();const m=u.targetChange;return m.targetIds&&m.targetIds.length?X.min():m.readTime?Ts(m.readTime):X.min()}(e);return this.listener.Ko(n,o)}Qo(e){const n={};n.database=Wu(this.M),n.addTarget=function(u,m){let I;const O=m.target;return I=Qs(O)?{documents:jd(u,O)}:{query:_d(u,O)},I.targetId=m.targetId,m.resumeToken.approximateByteSize()>0?I.resumeToken=Hu(u,m.resumeToken):m.snapshotVersion.compareTo(X.min())>0&&(I.readTime=Vs(u,m.snapshotVersion.toTimestamp())),I}(this.M,e);const o=function Ho(i,e){const n=function(o,u){switch(u){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return In()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,e);o&&(n.labels=o),this.Oo(n)}jo(e){const n={};n.database=Wu(this.M),n.removeTarget=e,this.Oo(n)}}class go extends To{constructor(e,n,o,u,m,I){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,o,u,I),this.M=m,this.Wo=!1}get zo(){return this.Wo}start(){this.Wo=!1,this.lastStreamToken=void 0,super.start()}Bo(){this.Wo&&this.Ho([])}Go(e,n){return this.bo.ho("Write",e,n)}onMessage(e){if(Xn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.Wo){this.So.reset();const n=function Bd(i,e){return i&&i.length>0?(Xn(void 0!==e),i.map(n=>function(o,u){let m=Ts(o.updateTime?o.updateTime:u);return m.isEqual(X.min())&&(m=Ts(u)),new Sc(m,o.transformResults||[])}(n,e))):[]}(e.writeResults,e.commitTime),o=Ts(e.commitTime);return this.listener.Jo(o,n)}return Xn(!e.writeResults||0===e.writeResults.length),this.Wo=!0,this.listener.Yo()}Xo(){const e={};e.database=Wu(this.M),this.Oo(e)}Ho(e){const n={streamToken:this.lastStreamToken,writes:e.map(o=>kl(this.M,o))};this.Oo(n)}}class mo extends class{}{constructor(e,n,o,u){super(),this.authCredentials=e,this.appCheckCredentials=n,this.bo=o,this.M=u,this.Zo=!1}tu(){if(this.Zo)throw new Jt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}ro(e,n,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.bo.ro(e,n,o,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Jt(bt.UNKNOWN,u.toString())})}co(e,n,o){return this.tu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,m])=>this.bo.co(e,n,o,u,m)).catch(u=>{throw"FirebaseError"===u.name?(u.code===bt.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new Jt(bt.UNKNOWN,u.toString())})}terminate(){this.Zo=!0}}class jc{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.eu=0,this.nu=null,this.su=!0}iu(){0===this.eu&&(this.ru("Unknown"),this.nu=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.nu=null,this.ou("Backend didn't respond within 10 seconds."),this.ru("Offline"),Promise.resolve())))}uu(e){"Online"===this.state?this.ru("Unknown"):(this.eu++,this.eu>=1&&(this.au(),this.ou(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ru("Offline")))}set(e){this.au(),this.eu=0,"Online"===e&&(this.su=!1),this.ru(e)}ru(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}ou(e){const n=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.su?(Vi(n),this.su=!1):on("OnlineStateTracker",n)}au(){null!==this.nu&&(this.nu.cancel(),this.nu=null)}}class Js{constructor(e,n,o,u,m){var I=this;this.localStore=e,this.datastore=n,this.asyncQueue=o,this.remoteSyncer={},this.cu=[],this.hu=new Map,this.lu=new Set,this.fu=[],this.du=m,this.du.Br(O=>{o.enqueueAndForget((0,f.Z)(function*(){var Q;$c(I)&&(on("RemoteStore","Restarting streams for network reachability change."),yield(Q=(0,f.Z)(function*(ne){const Re=nn(ne);Re.lu.add(4),yield vc(Re),Re._u.set("Unknown"),Re.lu.delete(4),yield _c(Re)}),function(ne){return Q.apply(this,arguments)})(I))}))}),this._u=new jc(o,u)}}function _c(i){return yc.apply(this,arguments)}function yc(){return yc=(0,f.Z)(function*(i){if($c(i))for(const e of i.fu)yield e(!0)}),yc.apply(this,arguments)}function vc(i){return Bg.apply(this,arguments)}function Bg(){return Bg=(0,f.Z)(function*(i){for(const e of i.fu)yield e(!1)}),Bg.apply(this,arguments)}function Lh(i,e){const n=nn(i);n.hu.has(e.targetId)||(n.hu.set(e.targetId,e),Ip(n)?Af(n):dh(n).Co()&&wp(n,e))}function Tf(i,e){const n=nn(i),o=dh(n);n.hu.delete(e),o.Co()&&Df(n,e),0===n.hu.size&&(o.Co()?o.ko():$c(n)&&n._u.set("Unknown"))}function wp(i,e){i.wu.Z(e.targetId),dh(i).Qo(e)}function Df(i,e){i.wu.Z(e),dh(i).jo(e)}function Af(i){i.wu=new Nl({getRemoteKeysForTarget:e=>i.remoteSyncer.getRemoteKeysForTarget(e),Et:e=>i.hu.get(e)||null}),dh(i).start(),i._u.iu()}function Ip(i){return $c(i)&&!dh(i).Do()&&i.hu.size>0}function $c(i){return 0===nn(i).lu.size}function jg(i){i.wu=void 0}function $g(i){return Cp.apply(this,arguments)}function Cp(){return Cp=(0,f.Z)(function*(i){i.hu.forEach((e,n)=>{wp(i,e)})}),Cp.apply(this,arguments)}function Hg(i,e){return bp.apply(this,arguments)}function bp(){return bp=(0,f.Z)(function*(i,e){jg(i),Ip(i)?(i._u.uu(e),Af(i)):i._u.set("Unknown")}),bp.apply(this,arguments)}function l_(i,e,n){return Sf.apply(this,arguments)}function Sf(){return Sf=(0,f.Z)(function*(i,e,n){if(i._u.set("Online"),e instanceof tu&&2===e.state&&e.cause)try{yield(o=(0,f.Z)(function*(u,m){const I=m.cause;for(const O of m.targetIds)u.hu.has(O)&&(yield u.remoteSyncer.rejectListen(O,I),u.hu.delete(O),u.wu.removeTarget(O))}),function(u,m){return o.apply(this,arguments)})(i,e)}catch(o){on("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),o),yield Uh(i,o)}else if(e instanceof eu?i.wu.ut(e):e instanceof ic?i.wu._t(e):i.wu.ht(e),!n.isEqual(X.min()))try{const o=yield mf(i.localStore);n.compareTo(o)>=0&&(yield function(u,m){const I=u.wu.yt(m);return I.targetChanges.forEach((O,Q)=>{if(O.resumeToken.approximateByteSize()>0){const ne=u.hu.get(Q);ne&&u.hu.set(Q,ne.withResumeToken(O.resumeToken,m))}}),I.targetMismatches.forEach(O=>{const Q=u.hu.get(O);if(!Q)return;u.hu.set(O,Q.withResumeToken(Kr.EMPTY_BYTE_STRING,Q.snapshotVersion)),Df(u,O);const ne=new ce(Q.target,O,1,Q.sequenceNumber);wp(u,ne)}),u.remoteSyncer.applyRemoteEvent(I)}(i,n))}catch(o){on("RemoteStore","Failed to raise snapshot:",o),yield Uh(i,o)}var o}),Sf.apply(this,arguments)}function Uh(i,e,n){return Tp.apply(this,arguments)}function Tp(){return Tp=(0,f.Z)(function*(i,e,n){if(!ru(e))throw e;i.lu.add(1),yield vc(i),i._u.set("Offline"),n||(n=()=>mf(i.localStore)),i.asyncQueue.enqueueRetryable((0,f.Z)(function*(){on("RemoteStore","Retrying IndexedDB access"),yield n(),i.lu.delete(1),yield _c(i)}))}),Tp.apply(this,arguments)}function bl(i,e){return e().catch(n=>Uh(i,n,e))}function Hc(i){return Dp.apply(this,arguments)}function Dp(){return Dp=(0,f.Z)(function*(i){const e=nn(i),n=jl(e);let o=e.cu.length>0?e.cu[e.cu.length-1].batchId:-1;for(;c_(e);)try{const u=yield a_(e.localStore,o);if(null===u){0===e.cu.length&&n.ko();break}o=u.batchId,Hy(e,u)}catch(u){yield Uh(e,u)}Ap(e)&&Wg(e)}),Dp.apply(this,arguments)}function c_(i){return $c(i)&&i.cu.length<10}function Hy(i,e){i.cu.push(e);const n=jl(i);n.Co()&&n.zo&&n.Ho(e.mutations)}function Ap(i){return $c(i)&&!jl(i).Do()&&i.cu.length>0}function Wg(i){jl(i).start()}function d_(i){return Sp.apply(this,arguments)}function Sp(){return Sp=(0,f.Z)(function*(i){jl(i).Xo()}),Sp.apply(this,arguments)}function xp(i){return Mp.apply(this,arguments)}function Mp(){return Mp=(0,f.Z)(function*(i){const e=jl(i);for(const n of i.cu)e.Ho(n.mutations)}),Mp.apply(this,arguments)}function h_(i,e,n){return ch.apply(this,arguments)}function ch(){return ch=(0,f.Z)(function*(i,e,n){const o=i.cu.shift(),u=L.from(o,e,n);yield bl(i,()=>i.remoteSyncer.applySuccessfulWrite(u)),yield Hc(i)}),ch.apply(this,arguments)}function Rp(i,e){return Pp.apply(this,arguments)}function Pp(){return Pp=(0,f.Z)(function*(i,e){var n;e&&jl(i).zo&&(yield(n=(0,f.Z)(function*(o,u){if(y(m=u.code)&&m!==bt.ABORTED){const I=o.cu.shift();jl(o).No(),yield bl(o,()=>o.remoteSyncer.rejectFailedWrite(I.batchId,u)),yield Hc(o)}var m}),function(o,u){return n.apply(this,arguments)})(i,e)),Ap(i)&&Wg(i)}),Pp.apply(this,arguments)}function xf(i,e){return Vh.apply(this,arguments)}function Vh(){return Vh=(0,f.Z)(function*(i,e){const n=nn(i);n.asyncQueue.verifyOperationInProgress(),on("RemoteStore","RemoteStore received new credentials");const o=$c(n);n.lu.add(3),yield vc(n),o&&n._u.set("Unknown"),yield n.remoteSyncer.handleCredentialChange(e),n.lu.delete(3),yield _c(n)}),Vh.apply(this,arguments)}function Mf(i,e){return Np.apply(this,arguments)}function Np(){return Np=(0,f.Z)(function*(i,e){const n=nn(i);e?(n.lu.delete(2),yield _c(n)):e||(n.lu.add(2),yield vc(n),n._u.set("Unknown"))}),Np.apply(this,arguments)}function dh(i){return i.mu||(i.mu=function(e,n,o){const u=nn(e);return u.tu(),new Do(n,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{zr:$g.bind(null,i),Jr:Hg.bind(null,i),Ko:l_.bind(null,i)}),i.fu.push(function(){var e=(0,f.Z)(function*(n){n?(i.mu.No(),Ip(i)?Af(i):i._u.set("Unknown")):(yield i.mu.stop(),jg(i))});return function(n){return e.apply(this,arguments)}}())),i.mu}function jl(i){return i.gu||(i.gu=function(e,n,o){const u=nn(e);return u.tu(),new go(n,u.bo,u.authCredentials,u.appCheckCredentials,u.M,o)}(i.datastore,i.asyncQueue,{zr:d_.bind(null,i),Jr:Rp.bind(null,i),Yo:xp.bind(null,i),Jo:h_.bind(null,i)}),i.fu.push(function(){var e=(0,f.Z)(function*(n){n?(i.gu.No(),yield Hc(i)):(yield i.gu.stop(),i.cu.length>0&&(on("RemoteStore",`Stopping write stream with ${i.cu.length} pending writes`),i.cu=[]))});return function(n){return e.apply(this,arguments)}}())),i.gu}class Gg{constructor(e,n,o,u,m){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=o,this.op=u,this.removalCallback=m,this.deferred=new ii,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(I=>{})}static createAndSchedule(e,n,o,u,m){const I=Date.now()+o,O=new Gg(e,n,I,u,m);return O.start(o),O}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Jt(bt.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function hh(i,e){if(Vi("AsyncQueue",`${e}: ${i}`),ru(i))return new Jt(bt.UNAVAILABLE,`${e}: ${i}`);throw i}class xd{constructor(e){this.comparator=e?(n,o)=>e(n,o)||vn.comparator(n.key,o.key):(n,o)=>vn.comparator(n.key,o.key),this.keyedMap=yu(),this.sortedSet=new pe(this.comparator)}static emptySet(e){return new xd(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,o)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof xd)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),o=e.sortedSet.getIterator();for(;n.hasNext();){const u=n.getNext().key,m=o.getNext().key;if(!u.isEqual(m))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,n){const o=new xd;return o.comparator=this.comparator,o.keyedMap=e,o.sortedSet=n,o}}class Op{constructor(){this.yu=new pe(vn.comparator)}track(e){const n=e.doc.key,o=this.yu.get(n);o?0!==e.type&&3===o.type?this.yu=this.yu.insert(n,e):3===e.type&&1!==o.type?this.yu=this.yu.insert(n,{type:o.type,doc:e.doc}):2===e.type&&2===o.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):2===e.type&&0===o.type?this.yu=this.yu.insert(n,{type:0,doc:e.doc}):1===e.type&&0===o.type?this.yu=this.yu.remove(n):1===e.type&&2===o.type?this.yu=this.yu.insert(n,{type:1,doc:o.doc}):0===e.type&&1===o.type?this.yu=this.yu.insert(n,{type:2,doc:e.doc}):In():this.yu=this.yu.insert(n,e)}pu(){const e=[];return this.yu.inorderTraversal((n,o)=>{e.push(o)}),e}}class Md{constructor(e,n,o,u,m,I,O,Q){this.query=e,this.docs=n,this.oldDocs=o,this.docChanges=u,this.mutatedKeys=m,this.fromCache=I,this.syncStateChanged=O,this.excludesMetadataChanges=Q}static fromInitialDocuments(e,n,o,u){const m=[];return n.forEach(I=>{m.push({type:0,doc:I})}),new Md(e,n,xd.emptySet(n),m,o,u,!0,!1)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&za(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,o=e.docChanges;if(n.length!==o.length)return!1;for(let u=0;u<n.length;u++)if(n[u].type!==o[u].type||!n[u].doc.isEqual(o[u].doc))return!1;return!0}}class zg{constructor(){this.Iu=void 0,this.listeners=[]}}class Kg{constructor(){this.queries=new ee(e=>Ia(e),za),this.onlineState="Unknown",this.Tu=new Set}}function Tl(i,e){return fh.apply(this,arguments)}function fh(){return fh=(0,f.Z)(function*(i,e){const n=nn(i),o=e.query;let u=!1,m=n.queries.get(o);if(m||(u=!0,m=new zg),u)try{m.Iu=yield n.onListen(o)}catch(I){const O=hh(I,`Initialization of query '${Fu(e.query)}' failed`);return void e.onError(O)}n.queries.set(o,m),m.listeners.push(e),e.Eu(n.onlineState),m.Iu&&e.Au(m.Iu)&&Rf(n)}),fh.apply(this,arguments)}function kp(i,e){return Fp.apply(this,arguments)}function Fp(){return Fp=(0,f.Z)(function*(i,e){const n=nn(i),o=e.query;let u=!1;const m=n.queries.get(o);if(m){const I=m.listeners.indexOf(e);I>=0&&(m.listeners.splice(I,1),u=0===m.listeners.length)}if(u)return n.queries.delete(o),n.onUnlisten(o)}),Fp.apply(this,arguments)}function Wy(i,e){const n=nn(i);let o=!1;for(const u of e){const I=n.queries.get(u.query);if(I){for(const O of I.listeners)O.Au(u)&&(o=!0);I.Iu=u}}o&&Rf(n)}function Lp(i,e,n){const o=nn(i),u=o.queries.get(e);if(u)for(const m of u.listeners)m.onError(n);o.queries.delete(e)}function Rf(i){i.Tu.forEach(e=>{e.next()})}class Bh{constructor(e,n,o){this.query=e,this.Ru=n,this.bu=!1,this.Pu=null,this.onlineState="Unknown",this.options=o||{}}Au(e){if(!this.options.includeMetadataChanges){const o=[];for(const u of e.docChanges)3!==u.type&&o.push(u);e=new Md(e.query,e.docs,e.oldDocs,o,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0)}let n=!1;return this.bu?this.Vu(e)&&(this.Ru.next(e),n=!0):this.vu(e,this.onlineState)&&(this.Su(e),n=!0),this.Pu=e,n}onError(e){this.Ru.error(e)}Eu(e){this.onlineState=e;let n=!1;return this.Pu&&!this.bu&&this.vu(this.Pu,e)&&(this.Su(this.Pu),n=!0),n}vu(e,n){return!e.fromCache||!(this.options.Du&&"Offline"!==n||e.docs.isEmpty()&&"Offline"!==n)}Vu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Pu&&this.Pu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Su(e){e=Md.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache),this.bu=!0,this.Ru.next(e)}}class jh{constructor(e,n){this.payload=e,this.byteLength=n}Cu(){return"metadata"in this.payload}}class qg{constructor(e){this.M=e}li(e){return Eu(this.M,e)}fi(e){return e.metadata.exists?ki(this.M,e.document,!1):si.newNoDocument(this.li(e.metadata.name),this.di(e.metadata.readTime))}di(e){return Ts(e)}}class Up{constructor(e,n,o){this.xu=e,this.localStore=n,this.M=o,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Vp(e)}Nu(e){this.progress.bytesLoaded+=e.byteLength;let n=this.progress.documentsLoaded;if(e.payload.namedQuery)this.queries.push(e.payload.namedQuery);else if(e.payload.documentMetadata){this.documents.push({metadata:e.payload.documentMetadata}),e.payload.documentMetadata.exists||++n;const o=Tn.fromString(e.payload.documentMetadata.name);this.collectionGroups.add(o.get(o.length-2))}else e.payload.document&&(this.documents[this.documents.length-1].document=e.payload.document,++n);return n!==this.progress.documentsLoaded?(this.progress.documentsLoaded=n,Object.assign({},this.progress)):null}ku(e){const n=new Map,o=new qg(this.M);for(const u of e)if(u.metadata.queries){const m=o.li(u.metadata.name);for(const I of u.metadata.queries){const O=(n.get(I)||Vr()).add(m);n.set(I,O)}}return n}complete(){var e=this;return(0,f.Z)(function*(){const n=yield function u_(i,e,n,o){return Cl.apply(this,arguments)}(e.localStore,new qg(e.M),e.documents,e.xu.id),o=e.ku(e.documents);for(const u of e.queries)yield vf(e.localStore,u,o.get(u.name));return e.progress.taskState="Success",{progress:e.progress,Mu:e.collectionGroups,Ou:n}})()}}function Vp(i){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:i.totalDocuments,totalBytes:i.totalBytes}}class Bp{constructor(e){this.key=e}}class jp{constructor(e){this.key=e}}class Zg{constructor(e,n){this.query=e,this.Fu=n,this.$u=null,this.current=!1,this.Bu=Vr(),this.mutatedKeys=Vr(),this.Lu=Lu(e),this.Uu=new xd(this.Lu)}get qu(){return this.Fu}Gu(e,n){const o=n?n.Ku:new Op,u=n?n.Uu:this.Uu;let m=n?n.mutatedKeys:this.mutatedKeys,I=u,O=!1;const Q=ho(this.query)&&u.size===this.query.limit?u.last():null,ne=Bo(this.query)&&u.size===this.query.limit?u.first():null;if(e.inorderTraversal((Re,Ze)=>{const Tt=u.get(Re),Zt=Ka(this.query,Ze)?Ze:null,tn=!!Tt&&this.mutatedKeys.has(Tt.key),Zn=!!Zt&&(Zt.hasLocalMutations||this.mutatedKeys.has(Zt.key)&&Zt.hasCommittedMutations);let Pr=!1;Tt&&Zt?Tt.data.isEqual(Zt.data)?tn!==Zn&&(o.track({type:3,doc:Zt}),Pr=!0):this.Qu(Tt,Zt)||(o.track({type:2,doc:Zt}),Pr=!0,(Q&&this.Lu(Zt,Q)>0||ne&&this.Lu(Zt,ne)<0)&&(O=!0)):!Tt&&Zt?(o.track({type:0,doc:Zt}),Pr=!0):Tt&&!Zt&&(o.track({type:1,doc:Tt}),Pr=!0,(Q||ne)&&(O=!0)),Pr&&(Zt?(I=I.add(Zt),m=Zn?m.add(Re):m.delete(Re)):(I=I.delete(Re),m=m.delete(Re)))}),ho(this.query)||Bo(this.query))for(;I.size>this.query.limit;){const Re=ho(this.query)?I.last():I.first();I=I.delete(Re.key),m=m.delete(Re.key),o.track({type:1,doc:Re})}return{Uu:I,Ku:o,ei:O,mutatedKeys:m}}Qu(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,o){const u=this.Uu;this.Uu=e.Uu,this.mutatedKeys=e.mutatedKeys;const m=e.Ku.pu();m.sort((ne,Re)=>function(Ze,Tt){const Zt=tn=>{switch(tn){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return In()}};return Zt(Ze)-Zt(Tt)}(ne.type,Re.type)||this.Lu(ne.doc,Re.doc)),this.ju(o);const I=n?this.Wu():[],O=0===this.Bu.size&&this.current?1:0,Q=O!==this.$u;return this.$u=O,0!==m.length||Q?{snapshot:new Md(this.query,e.Uu,u,m,e.mutatedKeys,0===O,Q,!1),zu:I}:{zu:I}}Eu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({Uu:this.Uu,Ku:new Op,mutatedKeys:this.mutatedKeys,ei:!1},!1)):{zu:[]}}Hu(e){return!this.Fu.has(e)&&!!this.Uu.has(e)&&!this.Uu.get(e).hasLocalMutations}ju(e){e&&(e.addedDocuments.forEach(n=>this.Fu=this.Fu.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Fu=this.Fu.delete(n)),this.current=e.current)}Wu(){if(!this.current)return[];const e=this.Bu;this.Bu=Vr(),this.Uu.forEach(o=>{this.Hu(o.key)&&(this.Bu=this.Bu.add(o.key))});const n=[];return e.forEach(o=>{this.Bu.has(o)||n.push(new jp(o))}),this.Bu.forEach(o=>{e.has(o)||n.push(new Bp(o))}),n}Ju(e){this.Fu=e.hi,this.Bu=Vr();const n=this.Gu(e.documents);return this.applyChanges(n,!0)}Yu(){return Md.fromInitialDocuments(this.query,this.Uu,this.mutatedKeys,0===this.$u)}}class $p{constructor(e,n,o){this.query=e,this.targetId=n,this.view=o}}class f_{constructor(e){this.key=e,this.Xu=!1}}class p_{constructor(e,n,o,u,m,I){this.localStore=e,this.remoteStore=n,this.eventManager=o,this.sharedClientState=u,this.currentUser=m,this.maxConcurrentLimboResolutions=I,this.Zu={},this.ta=new ee(O=>Ia(O),za),this.ea=new Map,this.na=new Set,this.sa=new pe(vn.comparator),this.ia=new Map,this.ra=new kh,this.oa={},this.ua=new Map,this.aa=El.gn(),this.onlineState="Unknown",this.ca=void 0}get isPrimaryClient(){return!0===this.ca}}function Yg(i,e){return Wc.apply(this,arguments)}function Wc(){return Wc=(0,f.Z)(function*(i,e){const n=ng(i);let o,u;const m=n.ta.get(e);if(m)o=m.targetId,n.sharedClientState.addLocalQueryTarget(o),u=m.view.Yu();else{const I=yield ah(n.localStore,bs(e));n.isPrimaryClient&&Lh(n.remoteStore,I);const O=n.sharedClientState.addLocalQueryTarget(I.targetId);o=I.targetId,u=yield Pf(n,e,o,"current"===O)}return u}),Wc.apply(this,arguments)}function Pf(i,e,n,o){return Hp.apply(this,arguments)}function Hp(){return Hp=(0,f.Z)(function*(i,e,n,o){i.ha=(Re,Ze,Tt)=>{return(Zt=(0,f.Z)(function*(tn,Zn,Pr,Ms){let Hr=Zn.view.Gu(Pr);Hr.ei&&(Hr=yield yf(tn.localStore,Zn.query,!1).then(({documents:eo})=>Zn.view.Gu(eo,Hr)));const au=Ms&&Ms.targetChanges.get(Zn.targetId),js=Zn.view.applyChanges(Hr,tn.isPrimaryClient,au);return Qp(tn,Zn.targetId,js.zu),js.snapshot}),function(tn,Zn,Pr,Ms){return Zt.apply(this,arguments)})(i,Re,Ze,Tt);var Zt};const u=yield yf(i.localStore,e,!0),m=new Zg(e,u.hi),I=m.Gu(u.documents),O=Xa.createSynthesizedTargetChangeForCurrentChange(n,o&&"Offline"!==i.onlineState),Q=m.applyChanges(I,i.isPrimaryClient,O);Qp(i,n,Q.zu);const ne=new $p(e,n,m);return i.ta.set(e,ne),i.ea.has(n)?i.ea.get(n).push(e):i.ea.set(n,[e]),Q.snapshot}),Hp.apply(this,arguments)}function g_(i,e){return Gc.apply(this,arguments)}function Gc(){return Gc=(0,f.Z)(function*(i,e){const n=nn(i),o=n.ta.get(e),u=n.ea.get(o.targetId);if(u.length>1)return n.ea.set(o.targetId,u.filter(m=>!za(m,e))),void n.ta.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(o.targetId),n.sharedClientState.isActiveQueryTarget(o.targetId)||(yield uh(n.localStore,o.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(o.targetId),Tf(n.remoteStore,o.targetId),$h(n,o.targetId)}).catch(wl))):($h(n,o.targetId),yield uh(n.localStore,o.targetId,!0))}),Gc.apply(this,arguments)}function Wp(){return Wp=(0,f.Z)(function*(i,e,n){const o=rg(i);try{const u=yield function(m,I){const O=nn(m),Q=W.now(),ne=I.reduce((Ze,Tt)=>Ze.add(Tt.key),Vr());let Re;return O.persistence.runTransaction("Locally write mutations","readwrite",Ze=>O.ai.qs(Ze,ne).next(Tt=>{Re=Tt;const Zt=[];for(const tn of I){const Zn=jo(tn,Re.get(tn.key));null!=Zn&&Zt.push(new Qa(tn.key,Zn,fu(Zn.value.mapValue),$i.exists(!0)))}return O.$s.addMutationBatch(Ze,Q,Zt,I)})).then(Ze=>(Ze.applyToLocalDocumentSet(Re),{batchId:Ze.batchId,changes:Re}))}(o.localStore,e);o.sharedClientState.addPendingMutation(u.batchId),function(m,I,O){let Q=m.oa[m.currentUser.toKey()];Q||(Q=new pe(b)),Q=Q.insert(I,O),m.oa[m.currentUser.toKey()]=Q}(o,u.batchId,n),yield zc(o,u.changes),yield Hc(o.remoteStore)}catch(u){const m=hh(u,"Failed to persist write");n.reject(m)}}),Wp.apply(this,arguments)}function Qg(i,e){return Gp.apply(this,arguments)}function Gp(){return Gp=(0,f.Z)(function*(i,e){const n=nn(i);try{const o=yield _f(n.localStore,e);e.targetChanges.forEach((u,m)=>{const I=n.ia.get(m);I&&(Xn(u.addedDocuments.size+u.modifiedDocuments.size+u.removedDocuments.size<=1),u.addedDocuments.size>0?I.Xu=!0:u.modifiedDocuments.size>0?Xn(I.Xu):u.removedDocuments.size>0&&(Xn(I.Xu),I.Xu=!1))}),yield zc(n,o,e)}catch(o){yield wl(o)}}),Gp.apply(this,arguments)}function qu(i,e,n){const o=nn(i);if(o.isPrimaryClient&&0===n||!o.isPrimaryClient&&1===n){const u=[];o.ta.forEach((m,I)=>{const O=I.view.Eu(e);O.snapshot&&u.push(O.snapshot)}),function(m,I){const O=nn(m);O.onlineState=I;let Q=!1;O.queries.forEach((ne,Re)=>{for(const Ze of Re.listeners)Ze.Eu(I)&&(Q=!0)}),Q&&Rf(O)}(o.eventManager,e),u.length&&o.Zu.Ko(u),o.onlineState=e,o.isPrimaryClient&&o.sharedClientState.setOnlineState(e)}}function zp(i,e,n){return Nf.apply(this,arguments)}function Nf(){return Nf=(0,f.Z)(function*(i,e,n){const o=nn(i);o.sharedClientState.updateQueryState(e,"rejected",n);const u=o.ia.get(e),m=u&&u.key;if(m){let I=new pe(vn.comparator);I=I.insert(m,si.newNoDocument(m,X.min()));const O=Vr().add(m),Q=new cl(X.min(),new Map,new ln(b),I,O);yield Qg(o,Q),o.sa=o.sa.remove(m),o.ia.delete(e),em(o)}else yield uh(o.localStore,e,!1).then(()=>$h(o,e,n)).catch(wl)}),Nf.apply(this,arguments)}function Jg(i,e){return Of.apply(this,arguments)}function Of(){return Of=(0,f.Z)(function*(i,e){const n=nn(i),o=e.batch.batchId;try{const u=yield gf(n.localStore,e);kf(n,o,null),Zp(n,o),n.sharedClientState.updateMutationState(o,"acknowledged"),yield zc(n,u)}catch(u){yield wl(u)}}),Of.apply(this,arguments)}function Xg(i,e,n){return Kp.apply(this,arguments)}function Kp(){return Kp=(0,f.Z)(function*(i,e,n){const o=nn(i);try{const u=yield function(m,I){const O=nn(m);return O.persistence.runTransaction("Reject batch","readwrite-primary",Q=>{let ne;return O.$s.lookupMutationBatch(Q,I).next(Re=>(Xn(null!==Re),ne=Re.keys(),O.$s.removeMutationBatch(Q,Re))).next(()=>O.$s.performConsistencyCheck(Q)).next(()=>O.ai.qs(Q,ne))})}(o.localStore,e);kf(o,e,n),Zp(o,e),o.sharedClientState.updateMutationState(e,"rejected",n),yield zc(o,u)}catch(u){yield wl(u)}}),Kp.apply(this,arguments)}function qp(){return qp=(0,f.Z)(function*(i,e){const n=nn(i);$c(n.remoteStore)||on("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const o=yield function(m){const I=nn(m);return I.persistence.runTransaction("Get highest unacknowledged batch id","readonly",O=>I.$s.getHighestUnacknowledgedBatchId(O))}(n.localStore);if(-1===o)return void e.resolve();const u=n.ua.get(o)||[];u.push(e),n.ua.set(o,u)}catch(o){const u=hh(o,"Initialization of waitForPendingWrites() operation failed");e.reject(u)}}),qp.apply(this,arguments)}function Zp(i,e){(i.ua.get(e)||[]).forEach(n=>{n.resolve()}),i.ua.delete(e)}function kf(i,e,n){const o=nn(i);let u=o.oa[o.currentUser.toKey()];if(u){const m=u.get(e);m&&(n?m.reject(n):m.resolve(),u=u.remove(e)),o.oa[o.currentUser.toKey()]=u}}function $h(i,e,n=null){i.sharedClientState.removeLocalQueryTarget(e);for(const o of i.ea.get(e))i.ta.delete(o),n&&i.Zu.la(o,n);i.ea.delete(e),i.isPrimaryClient&&i.ra.Ri(e).forEach(o=>{i.ra.containsKey(o)||Yp(i,o)})}function Yp(i,e){i.na.delete(e.path.canonicalString());const n=i.sa.get(e);null!==n&&(Tf(i.remoteStore,n),i.sa=i.sa.remove(e),i.ia.delete(n),em(i))}function Qp(i,e,n){for(const o of n)o instanceof Bp?(i.ra.addReference(o.key,e),y_(i,o)):o instanceof jp?(on("SyncEngine","Document no longer in limbo: "+o.key),i.ra.removeReference(o.key,e),i.ra.containsKey(o.key)||Yp(i,o.key)):In()}function y_(i,e){const n=e.key,o=n.path.canonicalString();i.sa.get(n)||i.na.has(o)||(on("SyncEngine","New document in limbo: "+n),i.na.add(o),em(i))}function em(i){for(;i.na.size>0&&i.sa.size<i.maxConcurrentLimboResolutions;){const e=i.na.values().next().value;i.na.delete(e);const n=new vn(Tn.fromString(e)),o=i.aa.next();i.ia.set(o,new f_(n)),i.sa=i.sa.insert(n,o),Lh(i.remoteStore,new ce(bs(Vo(n.path)),o,2,gs.A))}}function zc(i,e,n){return Hh.apply(this,arguments)}function Hh(){return Hh=(0,f.Z)(function*(i,e,n){const o=nn(i),u=[],m=[],I=[];var O;o.ta.isEmpty()||(o.ta.forEach((O,Q)=>{I.push(o.ha(Q,e,n).then(ne=>{if(ne){o.isPrimaryClient&&o.sharedClientState.updateQueryState(Q.targetId,ne.fromCache?"not-current":"current"),u.push(ne);const Re=ff.Js(Q.targetId,ne);m.push(Re)}}))}),yield Promise.all(I),o.Zu.Ko(u),yield(O=(0,f.Z)(function*(Q,ne){const Re=nn(Q);try{yield Re.persistence.runTransaction("notifyLocalViewChanges","readwrite",Ze=>Nt.forEach(ne,Tt=>Nt.forEach(Tt.zs,Zt=>Re.persistence.referenceDelegate.addReference(Ze,Tt.targetId,Zt)).next(()=>Nt.forEach(Tt.Hs,Zt=>Re.persistence.referenceDelegate.removeReference(Ze,Tt.targetId,Zt)))))}catch(Ze){if(!ru(Ze))throw Ze;on("LocalStore","Failed to update sequence numbers: "+Ze)}for(const Ze of ne){const Tt=Ze.targetId;if(!Ze.fromCache){const Zt=Re.si.get(Tt),Zn=Zt.withLastLimboFreeSnapshotVersion(Zt.snapshotVersion);Re.si=Re.si.insert(Tt,Zn)}}}),function(Q,ne){return O.apply(this,arguments)})(o.localStore,m))}),Hh.apply(this,arguments)}function v_(i,e){return Ff.apply(this,arguments)}function Ff(){return Ff=(0,f.Z)(function*(i,e){const n=nn(i);if(!n.currentUser.isEqual(e)){on("SyncEngine","User change. New user:",e.toKey());const o=yield pp(n.localStore,e);n.currentUser=e,(u=n).ua.forEach(I=>{I.forEach(O=>{O.reject(new Jt(bt.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),u.ua.clear(),n.sharedClientState.handleUserChange(e,o.removedBatchIds,o.addedBatchIds),yield zc(n,o.ci)}var u}),Ff.apply(this,arguments)}function tm(i,e){const n=nn(i),o=n.ia.get(e);if(o&&o.Xu)return Vr().add(o.key);{let u=Vr();const m=n.ea.get(e);if(!m)return u;for(const I of m){const O=n.ta.get(I);u=u.unionWith(O.view.qu)}return u}}function Gy(i,e){return Iu.apply(this,arguments)}function Iu(){return Iu=(0,f.Z)(function*(i,e){const n=nn(i),o=yield yf(n.localStore,e.query,!0),u=e.view.Ju(o);return n.isPrimaryClient&&Qp(n,e.targetId,u.zu),u}),Iu.apply(this,arguments)}function zy(i,e){return nm.apply(this,arguments)}function nm(){return nm=(0,f.Z)(function*(i,e){const n=nn(i);return mp(n.localStore,e).then(o=>zc(n,o))}),nm.apply(this,arguments)}function rm(i,e,n,o){return Lf.apply(this,arguments)}function Lf(){return Lf=(0,f.Z)(function*(i,e,n,o){const u=nn(i),m=yield function(I,O){const Q=nn(I),ne=nn(Q.$s);return Q.persistence.runTransaction("Lookup mutation documents","readonly",Re=>ne.ln(Re,O).next(Ze=>Ze?Q.ai.qs(Re,Ze):Nt.resolve(null)))}(u.localStore,e);var O;null!==m?("pending"===n?yield Hc(u.remoteStore):"acknowledged"===n||"rejected"===n?(kf(u,e,o||null),Zp(u,e),O=e,nn(nn(u.localStore).$s).dn(O)):In(),yield zc(u,m)):on("SyncEngine","Cannot apply mutation batch with id: "+e)}),Lf.apply(this,arguments)}function Jp(){return Jp=(0,f.Z)(function*(i,e){const n=nn(i);if(ng(n),rg(n),!0===e&&!0!==n.ca){const o=n.sharedClientState.getAllActiveQueryTargets(),u=yield E_(n,o.toArray());n.ca=!0,yield Mf(n.remoteStore,!0);for(const m of u)Lh(n.remoteStore,m)}else if(!1===e&&!1!==n.ca){const o=[];let u=Promise.resolve();n.ea.forEach((m,I)=>{n.sharedClientState.isLocalQueryTarget(I)?o.push(I):u=u.then(()=>($h(n,I),uh(n.localStore,I,!0))),Tf(n.remoteStore,I)}),yield u,yield E_(n,o),function(m){const I=nn(m);I.ia.forEach((O,Q)=>{Tf(I.remoteStore,Q)}),I.ra.bi(),I.ia=new Map,I.sa=new pe(vn.comparator)}(n),n.ca=!1,yield Mf(n.remoteStore,!1)}}),Jp.apply(this,arguments)}function E_(i,e,n){return Uf.apply(this,arguments)}function Uf(){return Uf=(0,f.Z)(function*(i,e,n){const o=nn(i),u=[],m=[];for(const I of e){let O;const Q=o.ea.get(I);if(Q&&0!==Q.length){O=yield ah(o.localStore,bs(Q[0]));for(const ne of Q){const Re=o.ta.get(ne),Ze=yield Gy(o,Re);Ze.snapshot&&m.push(Ze.snapshot)}}else{const ne=yield Ug(o.localStore,I);O=yield ah(o.localStore,ne),yield Pf(o,Vf(ne),I,!1)}u.push(O)}return o.Zu.Ko(m),u}),Uf.apply(this,arguments)}function Vf(i){return gu(i.path,i.collectionGroup,i.orderBy,i.filters,i.limit,"F",i.startAt,i.endAt)}function w_(i){const e=nn(i);return nn(nn(e.localStore).persistence).Os()}function Xp(i,e,n,o){return eg.apply(this,arguments)}function eg(){return eg=(0,f.Z)(function*(i,e,n,o){const u=nn(i);if(u.ca)return void on("SyncEngine","Ignoring unexpected query state notification.");const m=u.ea.get(e);if(m&&m.length>0)switch(n){case"current":case"not-current":{const I=yield mp(u.localStore,Ca(m[0])),O=cl.createSynthesizedRemoteEventForCurrentChange(e,"current"===n);yield zc(u,I,O);break}case"rejected":yield uh(u.localStore,e,!0),$h(u,e,o);break;default:In()}}),eg.apply(this,arguments)}function I_(i,e,n){return tg.apply(this,arguments)}function tg(){return tg=(0,f.Z)(function*(i,e,n){const o=ng(i);if(o.ca){for(const u of e){if(o.ea.has(u)){on("SyncEngine","Adding an already active target "+u);continue}const m=yield Ug(o.localStore,u),I=yield ah(o.localStore,m);yield Pf(o,Vf(m),I.targetId,!1),Lh(o.remoteStore,I)}for(const u of n)o.ea.has(u)&&(yield uh(o.localStore,u,!1).then(()=>{Tf(o.remoteStore,u),$h(o,u)}).catch(wl))}}),tg.apply(this,arguments)}function ng(i){const e=nn(i);return e.remoteStore.remoteSyncer.applyRemoteEvent=Qg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=tm.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=zp.bind(null,e),e.Zu.Ko=Wy.bind(null,e.eventManager),e.Zu.la=Lp.bind(null,e.eventManager),e}function rg(i){const e=nn(i);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Jg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Xg.bind(null,e),e}class Wh{constructor(){this.synchronizeTabs=!1}initialize(e){var n=this;return(0,f.Z)(function*(){n.M=Fi(e.databaseInfo.databaseId),n.sharedClientState=n.da(e),n.persistence=n._a(e),yield n.persistence.start(),n.gcScheduler=n.wa(e),n.localStore=n.ma(e)})()}wa(e){return null}ma(e){return pf(this.persistence,new Sd,e.initialUser,this.M)}_a(e){return new Fh(lh.Wi,this.M)}da(e){return new qt}terminate(){var e=this;return(0,f.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class Rd extends Wh{constructor(e,n,o){super(),this.ga=e,this.cacheSizeBytes=n,this.forceOwnership=o,this.synchronizeTabs=!1}initialize(e){var n=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield n().call(o,e),yield o.ga.initialize(o,e),yield rg(o.ga.syncEngine),yield Hc(o.ga.remoteStore),yield o.persistence.Is(()=>(o.gcScheduler&&!o.gcScheduler.started&&o.gcScheduler.start(o.localStore),Promise.resolve()))})()}ma(e){return pf(this.persistence,new Sd,e.initialUser,this.M)}wa(e){return new Ku(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue)}_a(e){const n=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),o=void 0!==this.cacheSizeBytes?Wo.withCacheSize(this.cacheSizeBytes):Wo.DEFAULT;return new Ad(this.synchronizeTabs,n,e.clientId,o,e.asyncQueue,Zr(),Br(),this.M,this.sharedClientState,!!this.forceOwnership)}da(e){return new qt}}class b_ extends Rd{constructor(e,n){super(e,n,!1),this.ga=e,this.cacheSizeBytes=n,this.synchronizeTabs=!0}initialize(e){var n=()=>super.initialize,o=this;return(0,f.Z)(function*(){yield n().call(o,e);const u=o.ga.syncEngine;o.sharedClientState instanceof vt&&(o.sharedClientState.syncEngine={kr:rm.bind(null,u),Mr:Xp.bind(null,u),Or:I_.bind(null,u),Os:w_.bind(null,u),Nr:zy.bind(null,u)},yield o.sharedClientState.start()),yield o.persistence.Is(function(){var m=(0,f.Z)(function*(I){yield function im(i,e){return Jp.apply(this,arguments)}(o.ga.syncEngine,I),o.gcScheduler&&(I&&!o.gcScheduler.started?o.gcScheduler.start(o.localStore):I||o.gcScheduler.stop())});return function(I){return m.apply(this,arguments)}}())})()}da(e){const n=Zr();if(!vt.vt(n))throw new Jt(bt.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const o=sh(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new vt(n,e.asyncQueue,o,e.clientId,e.initialUser)}}class Pd{initialize(e,n){var o=this;return(0,f.Z)(function*(){o.localStore||(o.localStore=e.localStore,o.sharedClientState=e.sharedClientState,o.datastore=o.createDatastore(n),o.remoteStore=o.createRemoteStore(n),o.eventManager=o.createEventManager(n),o.syncEngine=o.createSyncEngine(n,!e.synchronizeTabs),o.sharedClientState.onlineStateHandler=u=>qu(o.syncEngine,u,1),o.remoteStore.remoteSyncer.handleCredentialChange=v_.bind(null,o.syncEngine),yield Mf(o.remoteStore,o.syncEngine.isPrimaryClient))})()}createEventManager(e){return new Kg}createDatastore(e){const n=Fi(e.databaseInfo.databaseId),o=new Mr(e.databaseInfo);return new mo(e.authCredentials,e.appCheckCredentials,o,n)}createRemoteStore(e){return n=this.localStore,o=this.datastore,u=e.asyncQueue,m=O=>qu(this.syncEngine,O,0),I=ar.vt()?new ar:new cn,new Js(n,o,u,m,I);var n,o,u,m,I}createSyncEngine(e,n){return function(o,u,m,I,O,Q,ne){const Re=new p_(o,u,m,I,O,Q);return ne&&(Re.ca=!0),Re}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return(e=(0,f.Z)(function*(n){const o=nn(n);on("RemoteStore","RemoteStore shutting down."),o.lu.add(5),yield vc(o),o.du.shutdown(),o._u.set("Unknown")}),function(n){return e.apply(this,arguments)})(this.remoteStore);var e}}function sm(i,e=10240){let n=0;return{read:()=>(0,f.Z)(function*(){if(n<i.byteLength){const o={value:i.slice(n,n+e),done:!1};return n+=e,o}return{done:!0}})(),cancel:()=>(0,f.Z)(function*(){})(),releaseLock(){},closed:Promise.reject("unimplemented")}}class Bf{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.ya(this.observer.next,e)}error(e){this.observer.error?this.ya(this.observer.error,e):console.error("Uncaught Error in snapshot listener:",e)}pa(){this.muted=!0}ya(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}class ig{constructor(e,n){this.Ia=e,this.M=n,this.metadata=new ii,this.buffer=new Uint8Array,this.Ta=new TextDecoder("utf-8"),this.Ea().then(o=>{o&&o.Cu()?this.metadata.resolve(o.payload.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(null==o?void 0:o.payload)}`))},o=>this.metadata.reject(o))}close(){return this.Ia.cancel()}getMetadata(){var e=this;return(0,f.Z)(function*(){return e.metadata.promise})()}fa(){var e=this;return(0,f.Z)(function*(){return yield e.getMetadata(),e.Ea()})()}Ea(){var e=this;return(0,f.Z)(function*(){const n=yield e.Aa();if(null===n)return null;const o=e.Ta.decode(n),u=Number(o);isNaN(u)&&e.Ra(`length string (${o}) is not valid number`);const m=yield e.ba(u);return new jh(JSON.parse(m),n.length+u)})()}Pa(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}Aa(){var e=this;return(0,f.Z)(function*(){for(;e.Pa()<0&&!(yield e.Va()););if(0===e.buffer.length)return null;const n=e.Pa();n<0&&e.Ra("Reached the end of bundle when a length string is expected.");const o=e.buffer.slice(0,n);return e.buffer=e.buffer.slice(n),o})()}ba(e){var n=this;return(0,f.Z)(function*(){for(;n.buffer.length<e;)(yield n.Va())&&n.Ra("Reached the end of bundle when more is expected.");const o=n.Ta.decode(n.buffer.slice(0,e));return n.buffer=n.buffer.slice(e),o})()}Ra(e){throw this.Ia.cancel(),new Error(`Invalid bundle format: ${e}`)}Va(){var e=this;return(0,f.Z)(function*(){const n=yield e.Ia.read();if(!n.done){const o=new Uint8Array(e.buffer.length+n.value.length);o.set(e.buffer),o.set(n.value,e.buffer.length),e.buffer=o}return n.done})()}}class $l{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var n=this;return(0,f.Z)(function*(){if(n.ensureCommitNotCalled(),n.mutations.length>0)throw new Jt(bt.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const o=yield(u=(0,f.Z)(function*(m,I){const O=nn(m),Q=Wu(O.M)+"/documents",ne={documents:I.map(Zt=>oc(O.M,Zt))},Re=yield O.co("BatchGetDocuments",Q,ne),Ze=new Map;Re.forEach(Zt=>{const tn=function zi(i,e){return"found"in e?function(n,o){Xn(!!o.found);const u=Eu(n,o.found.name),m=Ts(o.found.updateTime),I=new Oi({mapValue:{fields:o.found.fields}});return si.newFoundDocument(u,m,I)}(i,e):"missing"in e?function(n,o){Xn(!!o.missing),Xn(!!o.readTime);const u=Eu(n,o.missing),m=Ts(o.readTime);return si.newNoDocument(u,m)}(i,e):In()}(O.M,Zt);Ze.set(tn.key.toString(),tn)});const Tt=[];return I.forEach(Zt=>{const tn=Ze.get(Zt.toString());Xn(!!tn),Tt.push(tn)}),Tt}),function(m,I){return u.apply(this,arguments)})(n.datastore,e);var u;return o.forEach(u=>n.recordVersion(u)),o})()}set(e,n){this.write(n.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,n){try{this.write(n.toMutation(e,this.preconditionForUpdate(e)))}catch(o){this.lastWriteError=o}this.writtenDocs.add(e.toString())}delete(e){this.write(new ol(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,f.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const n=e.readVersions;var o;e.mutations.forEach(o=>{n.delete(o.key.toString())}),n.forEach((o,u)=>{const m=vn.fromPath(u);e.mutations.push(new al(m,e.precondition(m)))}),yield(o=(0,f.Z)(function*(u,m){const I=nn(u),O=Wu(I.M)+"/documents",Q={writes:m.map(ne=>kl(I.M,ne))};yield I.ro("Commit",O,Q)}),function(u,m){return o.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let n;if(e.isFoundDocument())n=e.version;else{if(!e.isNoDocument())throw In();n=X.min()}const o=this.readVersions.get(e.key.toString());if(o){if(!n.isEqual(o))throw new Jt(bt.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),n)}precondition(e){const n=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&n?$i.updateTime(n):$i.none()}preconditionForUpdate(e){const n=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&n){if(n.isEqual(X.min()))throw new Jt(bt.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return $i.updateTime(n)}return $i.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gh{constructor(e,n,o,u){this.asyncQueue=e,this.datastore=n,this.updateFunction=o,this.deferred=u,this.va=5,this.So=new Yr(this.asyncQueue,"transaction_retry")}run(){this.va-=1,this.Sa()}Sa(){var e=this;this.So.Io((0,f.Z)(function*(){const n=new $l(e.datastore),o=e.Da(n);o&&o.then(u=>{e.asyncQueue.enqueueAndForget(()=>n.commit().then(()=>{e.deferred.resolve(u)}).catch(m=>{e.Ca(m)}))}).catch(u=>{e.Ca(u)})}))}Da(e){try{const n=this.updateFunction(e);return!wr(n)&&n.catch&&n.then?n:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(n){return this.deferred.reject(n),null}}Ca(e){this.va>0&&this.xa(e)?(this.va-=1,this.asyncQueue.enqueueAndForget(()=>(this.Sa(),Promise.resolve()))):this.deferred.reject(e)}xa(e){if("FirebaseError"===e.name){const n=e.code;return"aborted"===n||"failed-precondition"===n||!y(n)}return!1}}class la{constructor(e,n,o,u){var m=this;this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=o,this.databaseInfo=u,this.user=ri.UNAUTHENTICATED,this.clientId=R.R(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(o,function(){var I=(0,f.Z)(function*(O){on("FirestoreClient","Received user=",O.uid),yield m.authCredentialListener(O),m.user=O});return function(O){return I.apply(this,arguments)}}()),this.appCheckCredentials.start(o,I=>(on("FirestoreClient","Received new app check token=",I),this.appCheckCredentialListener(I,this.user)))}getConfiguration(){var e=this;return(0,f.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new Jt(bt.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const n=new ii;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{e.onlineComponents&&(yield e.onlineComponents.terminate()),e.offlineComponents&&(yield e.offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),n.resolve()}catch(o){const u=hh(o,"Failed to shutdown persistence");n.reject(u)}})),n.promise}}function Kc(i,e){return ph.apply(this,arguments)}function ph(){return ph=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress(),on("FirestoreClient","Initializing OfflineComponentProvider");const n=yield i.getConfiguration();yield e.initialize(n);let o=n.initialUser;i.setCredentialChangeListener(function(){var u=(0,f.Z)(function*(m){o.isEqual(m)||(yield pp(e.localStore,m),o=m)});return function(m){return u.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>i.terminate()),i.offlineComponents=e}),ph.apply(this,arguments)}function Cu(i,e){return zh.apply(this,arguments)}function zh(){return zh=(0,f.Z)(function*(i,e){i.asyncQueue.verifyOperationInProgress();const n=yield qc(i);on("FirestoreClient","Initializing OnlineComponentProvider");const o=yield i.getConfiguration();yield e.initialize(n,o),i.setCredentialChangeListener(u=>xf(e.remoteStore,u)),i.setAppCheckTokenChangeListener((u,m)=>xf(e.remoteStore,m)),i.onlineComponents=e}),zh.apply(this,arguments)}function qc(i){return Zc.apply(this,arguments)}function Zc(){return Zc=(0,f.Z)(function*(i){return i.offlineComponents||(on("FirestoreClient","Using default OfflineComponentProvider"),yield Kc(i,new Wh)),i.offlineComponents}),Zc.apply(this,arguments)}function Ec(i){return Yc.apply(this,arguments)}function Yc(){return Yc=(0,f.Z)(function*(i){return i.onlineComponents||(on("FirestoreClient","Using default OnlineComponentProvider"),yield Cu(i,new Pd)),i.onlineComponents}),Yc.apply(this,arguments)}function Nd(i){return qc(i).then(e=>e.persistence)}function Qc(i){return qc(i).then(e=>e.localStore)}function Od(i){return Ec(i).then(e=>e.remoteStore)}function Jc(i){return Ec(i).then(e=>e.syncEngine)}function Dl(i){return jf.apply(this,arguments)}function jf(){return jf=(0,f.Z)(function*(i){const e=yield Ec(i),n=e.eventManager;return n.onListen=Yg.bind(null,e.syncEngine),n.onUnlisten=g_.bind(null,e.syncEngine),n}),jf.apply(this,arguments)}function sg(i,e,n={}){const o=new ii;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(u,m,I,O,Q){const ne=new Bf({next:Ze=>{m.enqueueAndForget(()=>kp(u,Re));const Tt=Ze.docs.has(I);!Tt&&Ze.fromCache?Q.reject(new Jt(bt.UNAVAILABLE,"Failed to get document because the client is offline.")):Tt&&Ze.fromCache&&O&&"server"===O.source?Q.reject(new Jt(bt.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):Q.resolve(Ze)},error:Ze=>Q.reject(Ze)}),Re=new Bh(Vo(I.path),ne,{includeMetadataChanges:!0,Du:!0});return Tl(u,Re)}(yield Dl(i),i.asyncQueue,e,n,o)})),o.promise}function og(i,e,n={}){const o=new ii;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function(u,m,I,O,Q){const ne=new Bf({next:Ze=>{m.enqueueAndForget(()=>kp(u,Re)),Ze.fromCache&&"server"===O.source?Q.reject(new Jt(bt.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):Q.resolve(Ze)},error:Ze=>Q.reject(Ze)}),Re=new Bh(I,ne,{includeMetadataChanges:!0,Du:!0});return Tl(u,Re)}(yield Dl(i),i.asyncQueue,e,n,o)})),o.promise}const fm=new Map;function ag(i,e,n){if(!n)throw new Jt(bt.INVALID_ARGUMENT,`Function ${i}() cannot be called with an empty ${e}.`)}function ug(i,e,n,o){if(!0===e&&!0===o)throw new Jt(bt.INVALID_ARGUMENT,`${i} and ${n} cannot be used together.`)}function pm(i){if(!vn.isDocumentKey(i))throw new Jt(bt.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${i} has ${i.length}.`)}function gm(i){if(vn.isDocumentKey(i))throw new Jt(bt.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${i} has ${i.length}.`)}function Kh(i){if(void 0===i)return"undefined";if(null===i)return"null";if("string"==typeof i)return i.length>20&&(i=`${i.substring(0,20)}...`),JSON.stringify(i);if("number"==typeof i||"boolean"==typeof i)return""+i;if("object"==typeof i){if(i instanceof Array)return"an array";{const e=(n=i).constructor?n.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var n;return"function"==typeof i?"a function":In()}function Qr(i,e){if("_delegate"in i&&(i=i._delegate),!(i instanceof e)){if(e.name===i.constructor.name)throw new Jt(bt.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Kh(i);throw new Jt(bt.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return i}function lg(i,e){if(e<=0)throw new Jt(bt.INVALID_ARGUMENT,`Function ${i}() requires a positive number, but it was: ${e}.`)}class mm{constructor(e){var n;if(void 0===e.host){if(void 0!==e.ssl)throw new Jt(bt.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(n=e.ssl)||void 0===n||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new Jt(bt.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.useFetchStreams=!!e.useFetchStreams,ug("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling)}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class qh{constructor(e,n,o){this._authCredentials=n,this._appCheckCredentials=o,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new mm({}),this._settingsFrozen=!1,e instanceof na?this._databaseId=e:(this._app=e,this._databaseId=function(u){if(!Object.prototype.hasOwnProperty.apply(u.options,["projectId"]))throw new Jt(bt.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new na(u.options.projectId)}(e))}get app(){if(!this._app)throw new Jt(bt.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new Jt(bt.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new mm(e),void 0!==e.credentials&&(this._authCredentials=function(n){if(!n)return new ta;switch(n.type){case"gapi":const o=n.client;return Xn(!("object"!=typeof o||null===o||!o.auth||!o.auth.getAuthHeaderValueForFirstParty)),new La(o,n.sessionIndex||"0",n.iamToken||null);case"provider":return n.client;default:throw new Jt(bt.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const n=fm.get(e);n&&(on("ComponentProvider","Removing Datastore"),fm.delete(e),n.terminate())}(this),Promise.resolve()}}function Ky(i,e,n,o={}){var u;const m=(i=Qr(i,qh))._getSettings();if("firestore.googleapis.com"!==m.host&&m.host!==e&&qs("Host has been set in both settings() and useEmulator(), emulator host will be used"),i._setSettings(Object.assign(Object.assign({},m),{host:`${e}:${n}`,ssl:!1})),o.mockUserToken){let I,O;if("string"==typeof o.mockUserToken)I=o.mockUserToken,O=ri.MOCK_USER;else{I=(0,we.Sg)(o.mockUserToken,null===(u=i._app)||void 0===u?void 0:u.options.projectId);const Q=o.mockUserToken.sub||o.mockUserToken.user_id;if(!Q)throw new Jt(bt.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");O=new ri(Q)}i._authCredentials=new Zl(new ha(I,O))}}class xs{constructor(e,n,o){this.converter=n,this._key=o,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Zu(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xs(this.firestore,e,this._key)}}class Ao{constructor(e,n,o){this.converter=n,this._query=o,this.type="query",this.firestore=e}withConverter(e){return new Ao(this.firestore,e,this._query)}}class Zu extends Ao{constructor(e,n,o){super(e,n,Vo(o)),this._path=o,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xs(this.firestore,null,new vn(e))}withConverter(e){return new Zu(this.firestore,e,this._path)}}function D_(i,e,...n){if(i=(0,we.m9)(i),ag("collection","path",e),i instanceof qh){const o=Tn.fromString(e,...n);return gm(o),new Zu(i,null,o)}{if(!(i instanceof xs||i instanceof Zu))throw new Jt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Tn.fromString(e,...n));return gm(o),new Zu(i.firestore,null,o)}}function qy(i,e){if(i=Qr(i,qh),ag("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Jt(bt.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new Ao(i,null,(n=e,new Cs(Tn.emptyPath(),n)));var n}function A_(i,e,...n){if(i=(0,we.m9)(i),1===arguments.length&&(e=R.R()),ag("doc","path",e),i instanceof qh){const o=Tn.fromString(e,...n);return pm(o),new xs(i,null,new vn(o))}{if(!(i instanceof xs||i instanceof Zu))throw new Jt(bt.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const o=i._path.child(Tn.fromString(e,...n));return pm(o),new xs(i.firestore,i instanceof Zu?i.converter:null,new vn(o))}}function Zy(i,e){return i=(0,we.m9)(i),e=(0,we.m9)(e),(i instanceof xs||i instanceof Zu)&&(e instanceof xs||e instanceof Zu)&&i.firestore===e.firestore&&i.path===e.path&&i.converter===e.converter}function _m(i,e){return i=(0,we.m9)(i),e=(0,we.m9)(e),i instanceof Ao&&e instanceof Ao&&i.firestore===e.firestore&&za(i._query,e._query)&&i.converter===e.converter}class ym{constructor(){this.Na=Promise.resolve(),this.ka=[],this.Ma=!1,this.Oa=[],this.Fa=null,this.$a=!1,this.Ba=!1,this.La=[],this.So=new Yr(this,"async_queue_retry"),this.Ua=()=>{const n=Br();n&&on("AsyncQueue","Visibility state changed to "+n.visibilityState),this.So.Eo()};const e=Br();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Ua)}get isShuttingDown(){return this.Ma}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.qa(),this.Ga(e)}enterRestrictedMode(e){if(!this.Ma){this.Ma=!0,this.Ba=e||!1;const n=Br();n&&"function"==typeof n.removeEventListener&&n.removeEventListener("visibilitychange",this.Ua)}}enqueue(e){if(this.qa(),this.Ma)return new Promise(()=>{});const n=new ii;return this.Ga(()=>this.Ma&&this.Ba?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.ka.push(e),this.Ka()))}Ka(){var e=this;return(0,f.Z)(function*(){if(0!==e.ka.length){try{yield e.ka[0](),e.ka.shift(),e.So.reset()}catch(n){if(!ru(n))throw n;on("AsyncQueue","Operation failed with retryable error: "+n)}e.ka.length>0&&e.So.Io(()=>e.Ka())}})()}Ga(e){const n=this.Na.then(()=>(this.$a=!0,e().catch(o=>{throw this.Fa=o,this.$a=!1,Vi("INTERNAL UNHANDLED ERROR: ",function(m){let I=m.message||"";return m.stack&&(I=m.stack.includes(m.message)?m.stack:m.message+"\n"+m.stack),I}(o)),o}).then(o=>(this.$a=!1,o))));return this.Na=n,n}enqueueAfterDelay(e,n,o){this.qa(),this.La.indexOf(e)>-1&&(n=0);const u=Gg.createAndSchedule(this,e,n,o,m=>this.Qa(m));return this.Oa.push(u),u}qa(){this.Fa&&In()}verifyOperationInProgress(){}ja(){var e=this;return(0,f.Z)(function*(){let n;do{n=e.Na,yield n}while(n!==e.Na)})()}Wa(e){for(const n of this.Oa)if(n.timerId===e)return!0;return!1}za(e){return this.ja().then(()=>{this.Oa.sort((n,o)=>n.targetTimeMs-o.targetTimeMs);for(const n of this.Oa)if(n.skipDelay(),"all"!==e&&n.timerId===e)break;return this.ja()})}Ha(e){this.La.push(e)}Qa(e){const n=this.Oa.indexOf(e);this.Oa.splice(n,1)}}function vm(i){return function(e,n){if("object"!=typeof e||null===e)return!1;const o=e;for(const u of["next","error","complete"])if(u in o&&"function"==typeof o[u])return!0;return!1}(i)}class S_{constructor(){this._progressObserver={},this._taskCompletionResolver=new ii,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,n,o){this._progressObserver={next:e,error:n,complete:o}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,n){return this._taskCompletionResolver.promise.then(e,n)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}const gh=-1;class as extends qh{constructor(e,n,o){super(e,n,o),this.type="firestore",this._queue=new ym,this._persistenceKey="name"in e?e.name:"[DEFAULT]"}_terminate(){return this._firestoreClient||Zh(this),this._firestoreClient.terminate()}}function M_(i=(0,T.getApp)()){return(0,T._getProvider)(i,"firestore").getImmediate()}function Bs(i){return i._firestoreClient||Zh(i),i._firestoreClient.verifyNotTerminated(),i._firestoreClient}function Zh(i){var e;const n=i._freezeSettings(),o=(m=(null===(e=i._app)||void 0===e?void 0:e.options.appId)||"",new Yl(i._databaseId,m,i._persistenceKey,(O=n).host,O.ssl,O.experimentalForceLongPolling,O.experimentalAutoDetectLongPolling,O.useFetchStreams));var m,O;i._firestoreClient=new la(i._authCredentials,i._appCheckCredentials,i._queue,o)}function R_(i,e){cg(i=Qr(i,as));const n=Bs(i),o=i._freezeSettings(),u=new Pd;return wm(n,u,new Rd(u,o.cacheSizeBytes,null==e?void 0:e.forceOwnership))}function Em(i){cg(i=Qr(i,as));const e=Bs(i),n=i._freezeSettings(),o=new Pd;return wm(e,o,new b_(o,n.cacheSizeBytes))}function wm(i,e,n){const o=new ii;return i.asyncQueue.enqueue((0,f.Z)(function*(){try{yield Kc(i,n),yield Cu(i,e),o.resolve()}catch(u){if(!("FirebaseError"===(m=u).name?m.code===bt.FAILED_PRECONDITION||m.code===bt.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&m instanceof DOMException)||22===m.code||20===m.code||11===m.code))throw u;console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+u),o.reject(u)}var m})).then(()=>o.promise)}function P_(i){if(i._initialized&&!i._terminated)throw new Jt(bt.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new ii;return i._queue.enqueueAndForgetEvenWhileRestricted((0,f.Z)(function*(){try{yield(n=(0,f.Z)(function*(o){if(!ua.vt())return Promise.resolve();const u=o+"main";yield ua.delete(u)}),function(o){return n.apply(this,arguments)})(sh(i._databaseId,i._persistenceKey)),e.resolve()}catch(n){e.reject(n)}var n})),e.promise}function N_(i){return function(e){const n=new ii;return e.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function __(i,e){return qp.apply(this,arguments)}(yield Jc(e),n)})),n.promise}(Bs(i=Qr(i,as)))}function O_(i){return function om(i){return i.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield Nd(i),n=yield Od(i);return e.setNetworkEnabled(!0),function(o){const u=nn(o);return u.lu.delete(0),_c(u)}(n)}))}(Bs(i=Qr(i,as)))}function k_(i){return function am(i){return i.asyncQueue.enqueue((0,f.Z)(function*(){const e=yield Nd(i),n=yield Od(i);return e.setNetworkEnabled(!1),(o=(0,f.Z)(function*(u){const m=nn(u);m.lu.add(0),yield vc(m),m._u.set("Offline")}),function(u){return o.apply(this,arguments)})(n);var o}))}(Bs(i=Qr(i,as)))}function L_(i,e){const n=Bs(i=Qr(i,as)),o=new S_;return function T_(i,e,n,o){const u=function(m,I){let O;return O="string"==typeof m?(new TextEncoder).encode(m):m,Q=function(Q,ne){if(Q instanceof Uint8Array)return sm(Q,void 0);if(Q instanceof ArrayBuffer)return sm(new Uint8Array(Q),void 0);if(Q instanceof ReadableStream)return Q.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(O),new ig(Q,I);var Q}(n,Fi(e));i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){!function C_(i,e,n){const o=nn(i);var u;(u=(0,f.Z)(function*(m,I,O){try{const Q=yield I.getMetadata();if(yield function(Tt,Zt){const tn=nn(Tt),Zn=Ts(Zt.createTime);return tn.persistence.runTransaction("hasNewerBundle","readonly",Pr=>tn.ds.getBundleMetadata(Pr,Zt.id)).then(Pr=>!!Pr&&Pr.createTime.compareTo(Zn)>=0)}(m.localStore,Q))return yield I.close(),O._completeWith({taskState:"Success",documentsLoaded:(Tt=Q).totalDocuments,bytesLoaded:Tt.totalBytes,totalDocuments:Tt.totalDocuments,totalBytes:Tt.totalBytes}),Promise.resolve(new Set);O._updateProgress(Vp(Q));const ne=new Up(Q,m.localStore,I.M);let Re=yield I.fa();for(;Re;){const Tt=yield ne.Nu(Re);Tt&&O._updateProgress(Tt),Re=yield I.fa()}const Ze=yield ne.complete();return yield zc(m,Ze.Ou,void 0),yield function(Tt,Zt){const tn=nn(Tt);return tn.persistence.runTransaction("Save bundle","readwrite",Zn=>tn.ds.saveBundleMetadata(Zn,Zt))}(m.localStore,Q),O._completeWith(Ze.progress),Promise.resolve(Ze.Mu)}catch(Q){return qs("SyncEngine",`Loading bundle failed with ${Q}`),O._failWith(Q),Promise.resolve(new Set)}var Tt}),function(m,I,O){return u.apply(this,arguments)})(o,e,n).then(u=>{o.sharedClientState.notifyBundleLoaded(u)})}(yield Jc(i),u,o)}))}(n,i._databaseId,e,o),o}function Im(i,e){return function hm(i,e){return i.asyncQueue.enqueue((0,f.Z)(function*(){return function(n,o){const u=nn(n);return u.persistence.runTransaction("Get named query","readonly",m=>u.ds.getNamedQuery(m,o))}(yield Qc(i),e)}))}(Bs(i=Qr(i,as)),e).then(n=>n?new Ao(i,null,n.query):null)}function cg(i){if(i._initialized||i._terminated)throw new Jt(bt.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Hl{constructor(...e){for(let n=0;n<e.length;++n)if(0===e[n].length)throw new Jt(bt.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new rr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class Wl{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Wl(Kr.fromBase64String(e))}catch(n){throw new Jt(bt.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new Wl(Kr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class kd{constructor(e){this._methodName=e}}class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new Jt(bt.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new Jt(bt.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return b(this._lat,e._lat)||b(this._long,e._long)}}const Yh=/^__.*__$/;class Cm{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return null!==this.fieldMask?new Qa(e,this.data,this.fieldMask,n,this.fieldTransforms):new sl(e,this.data,n,this.fieldTransforms)}}class $f{constructor(e,n,o){this.data=e,this.fieldMask=n,this.fieldTransforms=o}toMutation(e,n){return new Qa(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function Hf(i){switch(i){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw In()}}class Wf{constructor(e,n,o,u,m,I){this.settings=e,this.databaseId=n,this.M=o,this.ignoreUndefinedProperties=u,void 0===m&&this.Ja(),this.fieldTransforms=m||[],this.fieldMask=I||[]}get path(){return this.settings.path}get Ya(){return this.settings.Ya}Xa(e){return new Wf(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.M,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Za(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Xa({path:o,tc:!1});return u.ec(e),u}nc(e){var n;const o=null===(n=this.path)||void 0===n?void 0:n.child(e),u=this.Xa({path:o,tc:!1});return u.Ja(),u}sc(e){return this.Xa({path:void 0,tc:!0})}ic(e){return Yf(e,this.settings.methodName,this.settings.rc||!1,this.path,this.settings.oc)}contains(e){return void 0!==this.fieldMask.find(n=>e.isPrefixOf(n))||void 0!==this.fieldTransforms.find(n=>e.isPrefixOf(n.field))}Ja(){if(this.path)for(let e=0;e<this.path.length;e++)this.ec(this.path.get(e))}ec(e){if(0===e.length)throw this.ic("Document fields must not be empty");if(Hf(this.Ya)&&Yh.test(e))throw this.ic('Document fields cannot begin and end with "__"')}}class Gf{constructor(e,n,o){this.databaseId=e,this.ignoreUndefinedProperties=n,this.M=o||Fi(e)}uc(e,n,o,u=!1){return new Wf({Ya:e,methodName:n,oc:o,path:rr.emptyPath(),tc:!1,rc:u},this.databaseId,this.M,this.ignoreUndefinedProperties)}}function Gl(i){const e=i._freezeSettings(),n=Fi(i._databaseId);return new Gf(i._databaseId,!!e.ignoreUndefinedProperties,n)}function mh(i,e,n,o,u,m={}){const I=i.uc(m.merge||m.mergeFields?2:0,e,n,u);qf("Data must be an object, but it was:",I,o);const O=pg(o,I);let Q,ne;if(m.merge)Q=new Dr(I.fieldMask),ne=I.fieldTransforms;else if(m.mergeFields){const Re=[];for(const Ze of m.mergeFields){const Tt=Zf(e,Ze,n);if(!I.contains(Tt))throw new Jt(bt.INVALID_ARGUMENT,`Field '${Tt}' is specified in your field mask but missing from your input data.`);Sm(Re,Tt)||Re.push(Tt)}Q=new Dr(Re),ne=I.fieldTransforms.filter(Ze=>Q.covers(Ze.field))}else Q=null,ne=I.fieldTransforms;return new Cm(new Oi(O),Q,ne)}class zf extends kd{_toFieldTransform(e){if(2!==e.Ya)throw e.ic(1===e.Ya?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof zf}}function bm(i,e,n){return new Wf({Ya:3,oc:e.settings.oc,methodName:i._methodName,tc:n},e.databaseId,e.M,e.ignoreUndefinedProperties)}class Qh extends kd{_toFieldTransform(e){return new os(e.path,new Co)}isEqual(e){return e instanceof Qh}}class hg extends kd{constructor(e,n){super(e),this.ac=n}_toFieldTransform(e){const n=bm(this,e,!0),o=this.ac.map(m=>wc(m,n)),u=new Us(o);return new os(e.path,u)}isEqual(e){return this===e}}class Tm extends kd{constructor(e,n){super(e),this.ac=n}_toFieldTransform(e){const n=bm(this,e,!0),o=this.ac.map(m=>wc(m,n)),u=new ss(o);return new os(e.path,u)}isEqual(e){return this===e}}class Dm extends kd{constructor(e,n){super(e),this.cc=n}_toFieldTransform(e){const n=new Za(e.M,oa(e.M,this.cc));return new os(e.path,n)}isEqual(e){return this===e}}function Jh(i,e,n,o){const u=i.uc(1,e,n);qf("Data must be an object, but it was:",u,o);const m=[],I=Oi.empty();Ue(o,(Q,ne)=>{const Re=Xh(e,Q,n);ne=(0,we.m9)(ne);const Ze=u.nc(Re);if(ne instanceof zf)m.push(Re);else{const Tt=wc(ne,Ze);null!=Tt&&(m.push(Re),I.set(Re,Tt))}});const O=new Dr(m);return new $f(I,O,u.fieldTransforms)}function Kf(i,e,n,o,u,m){const I=i.uc(1,e,n),O=[Zf(e,o,n)],Q=[u];if(m.length%2!=0)throw new Jt(bt.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let Tt=0;Tt<m.length;Tt+=2)O.push(Zf(e,m[Tt])),Q.push(m[Tt+1]);const ne=[],Re=Oi.empty();for(let Tt=O.length-1;Tt>=0;--Tt)if(!Sm(ne,O[Tt])){const Zt=O[Tt];let tn=Q[Tt];tn=(0,we.m9)(tn);const Zn=I.nc(Zt);if(tn instanceof zf)ne.push(Zt);else{const Pr=wc(tn,Zn);null!=Pr&&(ne.push(Zt),Re.set(Zt,Pr))}}const Ze=new Dr(ne);return new $f(Re,Ze,I.fieldTransforms)}function fg(i,e,n,o=!1){return wc(n,i.uc(o?4:3,e))}function wc(i,e){if(Am(i=(0,we.m9)(i)))return qf("Unsupported field value:",e,i),pg(i,e);if(i instanceof kd)return function(n,o){if(!Hf(o.Ya))throw o.ic(`${n._methodName}() can only be used with update() and set()`);if(!o.path)throw o.ic(`${n._methodName}() is not currently supported inside arrays`);const u=n._toFieldTransform(o);u&&o.fieldTransforms.push(u)}(i,e),null;if(void 0===i&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),i instanceof Array){if(e.settings.tc&&4!==e.Ya)throw e.ic("Nested arrays are not supported");return function(n,o){const u=[];let m=0;for(const I of n){let O=wc(I,o.sc(m));null==O&&(O={nullValue:"NULL_VALUE"}),u.push(O),m++}return{arrayValue:{values:u}}}(i,e)}return function(n,o){if(null===(n=(0,we.m9)(n)))return{nullValue:"NULL_VALUE"};if("number"==typeof n)return oa(o.M,n);if("boolean"==typeof n)return{booleanValue:n};if("string"==typeof n)return{stringValue:n};if(n instanceof Date){const u=W.fromDate(n);return{timestampValue:Vs(o.M,u)}}if(n instanceof W){const u=new W(n.seconds,1e3*Math.floor(n.nanoseconds/1e3));return{timestampValue:Vs(o.M,u)}}if(n instanceof dg)return{geoPointValue:{latitude:n.latitude,longitude:n.longitude}};if(n instanceof Wl)return{bytesValue:Hu(o.M,n._byteString)};if(n instanceof xs){const u=o.databaseId,m=n.firestore._databaseId;if(!m.isEqual(u))throw o.ic(`Document reference is for database ${m.projectId}/${m.database} but should be for database ${u.projectId}/${u.database}`);return{referenceValue:vu(n.firestore._databaseId||o.databaseId,n._key.path)}}throw o.ic(`Unsupported field value: ${Kh(n)}`)}(i,e)}function pg(i,e){const n={};return At(i)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Ue(i,(o,u)=>{const m=wc(u,e.Za(o));null!=m&&(n[o]=m)}),{mapValue:{fields:n}}}function Am(i){return!("object"!=typeof i||null===i||i instanceof Array||i instanceof Date||i instanceof W||i instanceof dg||i instanceof Wl||i instanceof xs||i instanceof kd)}function qf(i,e,n){if(!Am(n)||"object"!=typeof(o=n)||null===o||Object.getPrototypeOf(o)!==Object.prototype&&null!==Object.getPrototypeOf(o)){const o=Kh(n);throw e.ic("an object"===o?i+" a custom object":i+" "+o)}var o}function Zf(i,e,n){if((e=(0,we.m9)(e))instanceof Hl)return e._internalPath;if("string"==typeof e)return Xh(i,e);throw Yf("Field path arguments must be of type string or ",i,!1,void 0,n)}const gg=new RegExp("[~\\*/\\[\\]]");function Xh(i,e,n){if(e.search(gg)>=0)throw Yf(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,i,!1,void 0,n);try{return new Hl(...e.split("."))._internalPath}catch(o){throw Yf(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,i,!1,void 0,n)}}function Yf(i,e,n,o,u){const m=o&&!o.isEmpty(),I=void 0!==u;let O=`Function ${e}() called with invalid data`;n&&(O+=" (via `toFirestore()`)"),O+=". ";let Q="";return(m||I)&&(Q+=" (found",m&&(Q+=` in field ${o}`),I&&(Q+=` in document ${u}`),Q+=")"),new Jt(bt.INVALID_ARGUMENT,O+i+Q)}function Sm(i,e){return i.some(n=>n.isEqual(e))}class ef{constructor(e,n,o,u,m){this._firestore=e,this._userDataWriter=n,this._key=o,this._document=u,this._converter=m}get id(){return this._key.path.lastSegment()}get ref(){return new xs(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new mg(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Fd("DocumentSnapshot.get",e));if(null!==n)return this._userDataWriter.convertValue(n)}}}class mg extends ef{data(){return super.data()}}function Fd(i,e){return"string"==typeof e?Xh(i,e):e instanceof Hl?e._internalPath:e._delegate._internalPath}class Xc{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class ed extends ef{constructor(e,n,o,u,m,I){super(e,n,o,u,I),this._firestore=e,this._firestoreImpl=e,this.metadata=m}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new _h(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const o=this._document.data.field(Fd("DocumentSnapshot.get",e));if(null!==o)return this._userDataWriter.convertValue(o,n.serverTimestamps)}}}class _h extends ed{data(e={}){return super.data(e)}}class td{constructor(e,n,o,u){this._firestore=e,this._userDataWriter=n,this._snapshot=u,this.metadata=new Xc(u.hasPendingWrites,u.fromCache),this.query=o}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,n){this._snapshot.docs.forEach(o=>{e.call(n,new _h(this._firestore,this._userDataWriter,o.key,o,new Xc(this._snapshot.mutatedKeys.has(o.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Jt(bt.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(o,u){if(o._snapshot.oldDocs.isEmpty()){let m=0;return o._snapshot.docChanges.map(I=>({type:"added",doc:new _h(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Xc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter),oldIndex:-1,newIndex:m++}))}{let m=o._snapshot.oldDocs;return o._snapshot.docChanges.filter(I=>u||3!==I.type).map(I=>{const O=new _h(o._firestore,o._userDataWriter,I.doc.key,I.doc,new Xc(o._snapshot.mutatedKeys.has(I.doc.key),o._snapshot.fromCache),o.query.converter);let Q=-1,ne=-1;return 0!==I.type&&(Q=m.indexOf(I.doc.key),m=m.delete(I.doc.key)),1!==I.type&&(m=m.add(I.doc),ne=m.indexOf(I.doc.key)),{type:xm(I.type),doc:O,oldIndex:Q,newIndex:ne}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function xm(i){switch(i){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return In()}}function Mm(i,e){return i instanceof ed&&e instanceof ed?i._firestore===e._firestore&&i._key.isEqual(e._key)&&(null===i._document?null===e._document:i._document.isEqual(e._document))&&i._converter===e._converter:i instanceof td&&e instanceof td&&i._firestore===e._firestore&&_m(i.query,e.query)&&i.metadata.isEqual(e.metadata)&&i._snapshot.isEqual(e._snapshot)}function _g(i){if(Bo(i)&&0===i.explicitOrderBy.length)throw new Jt(bt.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class yh{}function Yy(i,...e){for(const n of e)i=n._apply(i);return i}class U_ extends yh{constructor(e,n,o){super(),this.hc=e,this.lc=n,this.fc=o,this.type="where"}_apply(e){const n=Gl(e.firestore),o=function(u,m,I,O,Q,ne,Re){let Ze;if(Q.isKeyField()){if("array-contains"===ne||"array-contains-any"===ne)throw new Jt(bt.INVALID_ARGUMENT,`Invalid Query. You can't perform '${ne}' queries on documentId().`);if("in"===ne||"not-in"===ne){vg(Re,ne);const Zt=[];for(const tn of Re)Zt.push(Lm(O,u,tn));Ze={arrayValue:{values:Zt}}}else Ze=Lm(O,u,Re)}else"in"!==ne&&"not-in"!==ne&&"array-contains-any"!==ne||vg(Re,ne),Ze=fg(I,"where",Re,"in"===ne||"not-in"===ne);const Tt=mi.create(Q,ne,Ze);return function(Zt,tn){if(tn.S()){const Pr=va(Zt);if(null!==Pr&&!Pr.isEqual(tn.field))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${Pr.toString()}' and '${tn.field.toString()}'`);const Ms=Ou(Zt);null!==Ms&&Um(0,tn.field,Ms)}const Zn=function(Pr,Ms){for(const Hr of Pr.filters)if(Ms.indexOf(Hr.op)>=0)return Hr.op;return null}(Zt,function(Pr){switch(Pr){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(tn.op));if(null!==Zn)throw new Jt(bt.INVALID_ARGUMENT,Zn===tn.op?`Invalid query. You cannot use more than one '${tn.op.toString()}' filter.`:`Invalid query. You cannot use '${tn.op.toString()}' filters with '${Zn.toString()}' filters.`)}(u,Tt),Tt}(e._query,0,n,e.firestore._databaseId,this.hc,this.lc,this.fc);return new Ao(e.firestore,e.converter,function(u,m){const I=u.filters.concat([m]);return new Cs(u.path,u.collectionGroup,u.explicitOrderBy.slice(),I,u.limit,u.limitType,u.startAt,u.endAt)}(e._query,o))}}function V_(i,e,n){const o=e,u=Fd("where",i);return new U_(u,o,n)}class Rm extends yh{constructor(e,n){super(),this.hc=e,this.dc=n,this.type="orderBy"}_apply(e){const n=function(o,u,m){if(null!==o.startAt)throw new Jt(bt.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==o.endAt)throw new Jt(bt.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const I=new _a(u,m);return function(O,Q){if(null===Ou(O)){const ne=va(O);null!==ne&&Um(0,ne,Q.field)}}(o,I),I}(e._query,this.hc,this.dc);return new Ao(e.firestore,e.converter,function(o,u){const m=o.explicitOrderBy.concat([u]);return new Cs(o.path,o.collectionGroup,m,o.filters.slice(),o.limit,o.limitType,o.startAt,o.endAt)}(e._query,n))}}function B_(i,e="asc"){const n=e,o=Fd("orderBy",i);return new Rm(o,n)}class Xs extends yh{constructor(e,n,o){super(),this.type=e,this._c=n,this.wc=o}_apply(e){return new Ao(e.firestore,e.converter,wa(e._query,this._c,this.wc))}}function Pm(i){return lg("limit",i),new Xs("limit",i,"F")}function j_(i){return lg("limitToLast",i),new Xs("limitToLast",i,"L")}class Nm extends yh{constructor(e,n,o){super(),this.type=e,this.mc=n,this.gc=o}_apply(e){const n=Fm(e,this.type,this.mc,this.gc);return new Ao(e.firestore,e.converter,(u=n,new Cs((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,u,o.endAt)));var o,u}}function Om(...i){return new Nm("startAt",i,!0)}function $_(...i){return new Nm("startAfter",i,!1)}class yg extends yh{constructor(e,n,o){super(),this.type=e,this.mc=n,this.gc=o}_apply(e){const n=Fm(e,this.type,this.mc,this.gc);return new Ao(e.firestore,e.converter,(u=n,new Cs((o=e._query).path,o.collectionGroup,o.explicitOrderBy.slice(),o.filters.slice(),o.limit,o.limitType,o.startAt,u)));var o,u}}function km(...i){return new yg("endBefore",i,!1)}function vh(...i){return new yg("endAt",i,!0)}function Fm(i,e,n,o){if(n[0]=(0,we.m9)(n[0]),n[0]instanceof ef)return function(u,m,I,O,Q){if(!O)throw new Jt(bt.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${I}().`);const ne=[];for(const Re of Ea(u))if(Re.field.isKeyField())ne.push(ja(m,O.key));else{const Ze=O.data.field(Re.field);if(Xu(Ze))throw new Jt(bt.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+Re.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===Ze){const Tt=Re.field.canonicalString();throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${Tt}' (used as the orderBy) does not exist.`)}ne.push(Ze)}return new ci(ne,Q)}(i._query,i.firestore._databaseId,e,n[0]._document,o);{const u=Gl(i.firestore);return function(m,I,O,Q,ne,Re){const Ze=m.explicitOrderBy;if(ne.length>Ze.length)throw new Jt(bt.INVALID_ARGUMENT,`Too many arguments provided to ${Q}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const Tt=[];for(let Zt=0;Zt<ne.length;Zt++){const tn=ne[Zt];if(Ze[Zt].field.isKeyField()){if("string"!=typeof tn)throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${Q}(), but got a ${typeof tn}`);if(!ku(m)&&-1!==tn.indexOf("/"))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${Q}() must be a plain document ID, but '${tn}' contains a slash.`);const Zn=m.path.child(Tn.fromString(tn));if(!vn.isDocumentKey(Zn))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${Q}() must result in a valid document path, but '${Zn}' is not because it contains an odd number of segments.`);const Pr=new vn(Zn);Tt.push(ja(I,Pr))}else{const Zn=fg(O,Q,tn);Tt.push(Zn)}}return new ci(Tt,Re)}(i._query,i.firestore._databaseId,u,e,n,o)}}function Lm(i,e,n){if("string"==typeof(n=(0,we.m9)(n))){if(""===n)throw new Jt(bt.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!ku(e)&&-1!==n.indexOf("/"))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const o=e.path.child(Tn.fromString(n));if(!vn.isDocumentKey(o))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${o}' is not because it has an odd number of segments (${o.length}).`);return ja(i,new vn(o))}if(n instanceof xs)return ja(i,n._key);throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${Kh(n)}.`)}function vg(i,e){if(!Array.isArray(i)||0===i.length)throw new Jt(bt.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`);if(i.length>10)throw new Jt(bt.INVALID_ARGUMENT,`Invalid Query. '${e.toString()}' filters support a maximum of 10 elements in the value array.`)}function Um(i,e,n){if(!n.isEqual(e))throw new Jt(bt.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${n.toString()}' instead.`)}class Qf{convertValue(e,n="none"){switch(pa(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Fr(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ks(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw In()}}convertObject(e,n){const o={};return Ue(e.fields,(u,m)=>{o[u]=this.convertValue(m,n)}),o}convertGeoPoint(e){return new dg(Fr(e.latitude),Fr(e.longitude))}convertArray(e,n){return(e.values||[]).map(o=>this.convertValue(o,n))}convertServerTimestamp(e,n){switch(n){case"previous":const o=Gi(e);return null==o?null:this.convertValue(o,n);case"estimate":return this.convertTimestamp(Pi(e));default:return null}}convertTimestamp(e){const n=ms(e);return new W(n.seconds,n.nanos)}convertDocumentKey(e,n){const o=Tn.fromString(e);Xn(lc(o));const u=new na(o.get(1),o.get(3)),m=new vn(o.popFirst(5));return u.isEqual(n)||Vi(`Document ${m} contains a document reference within a different database (${u.projectId}/${u.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),m}}function Eg(i,e,n){let o;return o=i?n&&(n.merge||n.mergeFields)?i.toFirestore(e,n):i.toFirestore(e):e,o}class Vm extends Qf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xs(this.firestore,null,n)}}class Jf{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Gl(e)}set(e,n,o){this._verifyNotCommitted();const u=Go(e,this._firestore),m=Eg(u.converter,n,o),I=mh(this._dataReader,"WriteBatch.set",u._key,m,null!==u.converter,o);return this._mutations.push(I.toMutation(u._key,$i.none())),this}update(e,n,o,...u){this._verifyNotCommitted();const m=Go(e,this._firestore);let I;return I="string"==typeof(n=(0,we.m9)(n))||n instanceof Hl?Kf(this._dataReader,"WriteBatch.update",m._key,n,o,u):Jh(this._dataReader,"WriteBatch.update",m._key,n),this._mutations.push(I.toMutation(m._key,$i.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Go(e,this._firestore);return this._mutations=this._mutations.concat(new ol(n._key,$i.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new Jt(bt.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Go(i,e){if((i=(0,we.m9)(i)).firestore!==e)throw new Jt(bt.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return i}function H_(i){i=Qr(i,xs);const e=Qr(i.firestore,as);return sg(Bs(e),i._key).then(n=>Xf(e,i,n))}class Ld extends Qf{constructor(e){super(),this.firestore=e}convertBytes(e){return new Wl(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new xs(this.firestore,null,n)}}function zl(i){i=Qr(i,xs);const e=Qr(i.firestore,as),n=Bs(e),o=new Ld(e);return function um(i,e){const n=new ii;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(u,m,I){try{const O=yield function(Q,ne){const Re=nn(Q);return Re.persistence.runTransaction("read document","readonly",Ze=>Re.ai.Bs(Ze,ne))}(u,m);O.isFoundDocument()?I.resolve(O):O.isNoDocument()?I.resolve(null):I.reject(new Jt(bt.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(O){const Q=hh(O,`Failed to get document '${m} from cache`);I.reject(Q)}}),function(u,m,I){return o.apply(this,arguments)})(yield Qc(i),e,n);var o})),n.promise}(n,i._key).then(u=>new ed(e,o,i._key,u,new Xc(null!==u&&u.hasLocalMutations,!0),i.converter))}function Al(i){i=Qr(i,xs);const e=Qr(i.firestore,as);return sg(Bs(e),i._key,{source:"server"}).then(n=>Xf(e,i,n))}function Sl(i){i=Qr(i,Ao);const e=Qr(i.firestore,as),n=Bs(e),o=new Ld(e);return _g(i._query),og(n,i._query).then(u=>new td(e,o,i,u))}function Bm(i){i=Qr(i,Ao);const e=Qr(i.firestore,as),n=Bs(e),o=new Ld(e);return function lm(i,e){const n=new ii;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return(o=(0,f.Z)(function*(u,m,I){try{const O=yield yf(u,m,!0),Q=new Zg(m,O.hi),ne=Q.Gu(O.documents),Re=Q.applyChanges(ne,!1);I.resolve(Re.snapshot)}catch(O){const Q=hh(O,`Failed to execute query '${m} against cache`);I.reject(Q)}}),function(u,m,I){return o.apply(this,arguments)})(yield Qc(i),e,n);var o})),n.promise}(n,i._query).then(u=>new td(e,o,i,u))}function jm(i){i=Qr(i,Ao);const e=Qr(i.firestore,as),n=Bs(e),o=new Ld(e);return og(n,i._query,{source:"server"}).then(u=>new td(e,o,i,u))}function W_(i,e,n){i=Qr(i,xs);const o=Qr(i.firestore,as),u=Eg(i.converter,e,n);return Eh(o,[mh(Gl(o),"setDoc",i._key,u,null!==i.converter,n).toMutation(i._key,$i.none())])}function G_(i,e,n,...o){i=Qr(i,xs);const u=Qr(i.firestore,as),m=Gl(u);let I;return I="string"==typeof(e=(0,we.m9)(e))||e instanceof Hl?Kf(m,"updateDoc",i._key,e,n,o):Jh(m,"updateDoc",i._key,e),Eh(u,[I.toMutation(i._key,$i.exists(!0))])}function z_(i){return Eh(Qr(i.firestore,as),[new ol(i._key,$i.none())])}function K_(i,e){const n=Qr(i.firestore,as),o=A_(i),u=Eg(i.converter,e);return Eh(n,[mh(Gl(i.firestore),"addDoc",o._key,u,null!==i.converter,{}).toMutation(o._key,$i.exists(!1))]).then(()=>o)}function wg(i,...e){var n,o,u;i=(0,we.m9)(i);let m={includeMetadataChanges:!1},I=0;"object"!=typeof e[I]||vm(e[I])||(m=e[I],I++);const O={includeMetadataChanges:m.includeMetadataChanges};if(vm(e[I])){const Ze=e[I];e[I]=null===(n=Ze.next)||void 0===n?void 0:n.bind(Ze),e[I+1]=null===(o=Ze.error)||void 0===o?void 0:o.bind(Ze),e[I+2]=null===(u=Ze.complete)||void 0===u?void 0:u.bind(Ze)}let Q,ne,Re;if(i instanceof xs)ne=Qr(i.firestore,as),Re=Vo(i._key.path),Q={next:Ze=>{e[I]&&e[I](Xf(ne,i,Ze))},error:e[I+1],complete:e[I+2]};else{const Ze=Qr(i,Ao);ne=Qr(Ze.firestore,as),Re=Ze._query;const Tt=new Ld(ne);Q={next:Zt=>{e[I]&&e[I](new td(ne,Tt,Ze,Zt))},error:e[I+1],complete:e[I+2]},_g(i._query)}return function(Ze,Tt,Zt,tn){const Zn=new Bf(tn),Pr=new Bh(Tt,Zn,Zt);return Ze.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return Tl(yield Dl(Ze),Pr)})),()=>{Zn.pa(),Ze.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return kp(yield Dl(Ze),Pr)}))}}(Bs(ne),Re,O,Q)}function tf(i,e){return function cm(i,e){const n=new Bf(e);return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return o=yield Dl(i),u=n,nn(o).Tu.add(u),void u.next();var o,u})),()=>{n.pa(),i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return o=yield Dl(i),u=n,void nn(o).Tu.delete(u);var o,u}))}}(Bs(i=Qr(i,as)),vm(e)?e:{next:e})}function Eh(i,e){return function(n,o){const u=new ii;return n.asyncQueue.enqueueAndForget((0,f.Z)(function*(){return function m_(i,e,n){return Wp.apply(this,arguments)}(yield Jc(n),o,u)})),u.promise}(Bs(i),e)}function Xf(i,e,n){const o=n.docs.get(e._key),u=new Ld(i);return new ed(i,u,e._key,o,new Xc(n.hasPendingWrites,n.fromCache),e.converter)}class q_ extends class{constructor(e,n){this._firestore=e,this._transaction=n,this._dataReader=Gl(e)}get(e){const n=Go(e,this._firestore),o=new Vm(this._firestore);return this._transaction.lookup([n._key]).then(u=>{if(!u||1!==u.length)return In();const m=u[0];if(m.isFoundDocument())return new ef(this._firestore,o,m.key,m,n.converter);if(m.isNoDocument())return new ef(this._firestore,o,n._key,null,n.converter);throw In()})}set(e,n,o){const u=Go(e,this._firestore),m=Eg(u.converter,n,o),I=mh(this._dataReader,"Transaction.set",u._key,m,null!==u.converter,o);return this._transaction.set(u._key,I),this}update(e,n,o,...u){const m=Go(e,this._firestore);let I;return I="string"==typeof(n=(0,we.m9)(n))||n instanceof Hl?Kf(this._dataReader,"Transaction.update",m._key,n,o,u):Jh(this._dataReader,"Transaction.update",m._key,n),this._transaction.update(m._key,I),this}delete(e){const n=Go(e,this._firestore);return this._transaction.delete(n._key),this}}{constructor(e,n){super(e,n),this._firestore=e}get(e){const n=Go(e,this._firestore),o=new Ld(this._firestore);return super.get(e).then(u=>new ed(this._firestore,o,n._key,u._document,new Xc(!1,!1),n.converter))}}function $m(i,e){return function dm(i,e){const n=new ii;return i.asyncQueue.enqueueAndForget((0,f.Z)(function*(){const o=yield(u=i,Ec(u).then(m=>m.datastore));var u;new Gh(i.asyncQueue,o,e,n).run()})),n.promise}(Bs(i=Qr(i,as)),n=>e(new q_(i,n)))}function Hm(){return new zf("deleteField")}function ep(){return new Qh("serverTimestamp")}function Z_(...i){return new hg("arrayUnion",i)}function Wm(...i){return new Tm("arrayRemove",i)}function Gm(i){return new Dm("increment",i)}!function(i,e=!0){Ns=T.SDK_VERSION,(0,T._registerComponent)(new P.wA("firestore",(n,{options:o})=>{const u=n.getProvider("app").getImmediate(),m=new as(u,new Fa(n.getProvider("auth-internal")),new Io(n.getProvider("app-check-internal")));return o=Object.assign({useFetchStreams:e},o),m._setSettings(o),m},"PUBLIC")),(0,T.registerVersion)(ps,"3.4.7",i),(0,T.registerVersion)(ps,"3.4.7","esm2017")}()},2090:(rn,et,N)=>{N.d(et,{BH:()=>at,LL:()=>dn,ZR:()=>Ne,gQ:()=>sr,zI:()=>xe,hu:()=>P,g5:()=>Z,US:()=>Pe,tV:()=>ae,h$:()=>he,L:()=>He,$s:()=>Ar,r3:()=>St,Sg:()=>dt,ne:()=>wt,p$:()=>ve,vZ:()=>Cn,ZB:()=>De,Lj:()=>Me,gK:()=>Vn,pd:()=>xn,m9:()=>Ye,z$:()=>Ct,GJ:()=>un,jU:()=>Mt,ru:()=>Pt,d:()=>rt,xb:()=>Kt,w1:()=>ht,hl:()=>Ke,uI:()=>be,UG:()=>mt,Yr:()=>fe,b$:()=>st,G6:()=>Lt,Mn:()=>ke,w9:()=>sn,cI:()=>nt,UI:()=>gn,X3:()=>de,xO:()=>Qn,zd:()=>zn,DV:()=>Yt,ug:()=>hn,dS:()=>Ot,Pz:()=>Ce,Dv:()=>Nn,Wj:()=>Hn,lb:()=>Kn,eu:()=>it});var f=N(5861);const P=function(le,oe){if(!le)throw Z(oe)},Z=function(le){return new Error("Firebase Database (${JSCORE_VERSION}) INTERNAL ASSERT FAILED: "+le)},we=function(le){const oe=[];let Ee=0;for(let qe=0;qe<le.length;qe++){let se=le.charCodeAt(qe);se<128?oe[Ee++]=se:se<2048?(oe[Ee++]=se>>6|192,oe[Ee++]=63&se|128):55296==(64512&se)&&qe+1<le.length&&56320==(64512&le.charCodeAt(qe+1))?(se=65536+((1023&se)<<10)+(1023&le.charCodeAt(++qe)),oe[Ee++]=se>>18|240,oe[Ee++]=se>>12&63|128,oe[Ee++]=se>>6&63|128,oe[Ee++]=63&se|128):(oe[Ee++]=se>>12|224,oe[Ee++]=se>>6&63|128,oe[Ee++]=63&se|128)}return oe},Pe={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(le,oe){if(!Array.isArray(le))throw Error("encodeByteArray takes an array as a parameter");this.init_();const Ee=oe?this.byteToCharMapWebSafe_:this.byteToCharMap_,qe=[];for(let se=0;se<le.length;se+=3){const ge=le[se],ye=se+1<le.length,lt=ye?le[se+1]:0,yt=se+2<le.length,Qt=yt?le[se+2]:0;let On=(15&lt)<<2|Qt>>6,mr=63&Qt;yt||(mr=64,ye||(On=64)),qe.push(Ee[ge>>2],Ee[(3&ge)<<4|lt>>4],Ee[On],Ee[mr])}return qe.join("")},encodeString(le,oe){return this.HAS_NATIVE_SUPPORT&&!oe?btoa(le):this.encodeByteArray(we(le),oe)},decodeString(le,oe){return this.HAS_NATIVE_SUPPORT&&!oe?atob(le):function(le){const oe=[];let Ee=0,qe=0;for(;Ee<le.length;){const se=le[Ee++];if(se<128)oe[qe++]=String.fromCharCode(se);else if(se>191&&se<224){const ge=le[Ee++];oe[qe++]=String.fromCharCode((31&se)<<6|63&ge)}else if(se>239&&se<365){const yt=((7&se)<<18|(63&le[Ee++])<<12|(63&le[Ee++])<<6|63&le[Ee++])-65536;oe[qe++]=String.fromCharCode(55296+(yt>>10)),oe[qe++]=String.fromCharCode(56320+(1023&yt))}else{const ge=le[Ee++],ye=le[Ee++];oe[qe++]=String.fromCharCode((15&se)<<12|(63&ge)<<6|63&ye)}}return oe.join("")}(this.decodeStringToByteArray(le,oe))},decodeStringToByteArray(le,oe){this.init_();const Ee=oe?this.charToByteMapWebSafe_:this.charToByteMap_,qe=[];for(let se=0;se<le.length;){const ge=Ee[le.charAt(se++)],lt=se<le.length?Ee[le.charAt(se)]:0;++se;const Qt=se<le.length?Ee[le.charAt(se)]:64;++se;const fn=se<le.length?Ee[le.charAt(se)]:64;if(++se,null==ge||null==lt||null==Qt||null==fn)throw Error();qe.push(ge<<2|lt>>4),64!==Qt&&(qe.push(lt<<4&240|Qt>>2),64!==fn&&qe.push(Qt<<6&192|fn))}return qe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let le=0;le<this.ENCODED_VALS.length;le++)this.byteToCharMap_[le]=this.ENCODED_VALS.charAt(le),this.charToByteMap_[this.byteToCharMap_[le]]=le,this.byteToCharMapWebSafe_[le]=this.ENCODED_VALS_WEBSAFE.charAt(le),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[le]]=le,le>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(le)]=le,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(le)]=le)}}},he=function(le){const oe=we(le);return Pe.encodeByteArray(oe,!0)},He=function(le){return he(le).replace(/\./g,"")},ae=function(le){try{return Pe.decodeString(le,!0)}catch(oe){console.error("base64Decode failed: ",oe)}return null};function ve(le){return De(void 0,le)}function De(le,oe){if(!(oe instanceof Object))return oe;switch(oe.constructor){case Date:return new Date(oe.getTime());case Object:void 0===le&&(le={});break;case Array:le=[];break;default:return oe}for(const Ee in oe)!oe.hasOwnProperty(Ee)||!ot(Ee)||(le[Ee]=De(le[Ee],oe[Ee]));return le}function ot(le){return"__proto__"!==le}class at{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((oe,Ee)=>{this.resolve=oe,this.reject=Ee})}wrapCallback(oe){return(Ee,qe)=>{Ee?this.reject(Ee):this.resolve(qe),"function"==typeof oe&&(this.promise.catch(()=>{}),1===oe.length?oe(Ee):oe(Ee,qe))}}}function dt(le,oe){if(le.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const qe=oe||"demo-project",se=le.iat||0,ge=le.sub||le.user_id;if(!ge)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const ye=Object.assign({iss:`https://securetoken.google.com/${qe}`,aud:qe,iat:se,exp:se+3600,auth_time:se,sub:ge,user_id:ge,firebase:{sign_in_provider:"custom",identities:{}}},le);return[He(JSON.stringify({alg:"none",type:"JWT"})),He(JSON.stringify(ye)),""].join(".")}function Ct(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function be(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ct())}function mt(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(le){return!1}}function Mt(){return"object"==typeof self&&self.self===self}function Pt(){const le="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof le&&void 0!==le.id}function st(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function rt(){return Ct().indexOf("Electron/")>=0}function ht(){const le=Ct();return le.indexOf("MSIE ")>=0||le.indexOf("Trident/")>=0}function ke(){return Ct().indexOf("MSAppHost/")>=0}function fe(){return!1}function Lt(){return!mt()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Ke(){return"object"==typeof indexedDB}function it(){return new Promise((le,oe)=>{try{let Ee=!0;const qe="validate-browser-context-for-indexeddb-analytics-module",se=self.indexedDB.open(qe);se.onsuccess=()=>{se.result.close(),Ee||self.indexedDB.deleteDatabase(qe),le(!0)},se.onupgradeneeded=()=>{Ee=!1},se.onerror=()=>{var ge;oe((null===(ge=se.error)||void 0===ge?void 0:ge.message)||"")}}catch(Ee){oe(Ee)}})}function xe(){return!("undefined"==typeof navigator||!navigator.cookieEnabled)}class Ne extends Error{constructor(oe,Ee,qe){super(Ee),this.code=oe,this.customData=qe,this.name="FirebaseError",Object.setPrototypeOf(this,Ne.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,dn.prototype.create)}}class dn{constructor(oe,Ee,qe){this.service=oe,this.serviceName=Ee,this.errors=qe}create(oe,...Ee){const qe=Ee[0]||{},se=`${this.service}/${oe}`,ge=this.errors[oe],ye=ge?function Wt(le,oe){return le.replace(ut,(Ee,qe)=>{const se=oe[qe];return null!=se?String(se):`<${qe}?>`})}(ge,qe):"Error";return new Ne(se,`${this.serviceName}: ${ye} (${se}).`,qe)}}const ut=/\{\$([^}]+)}/g;function nt(le){return JSON.parse(le)}function Ce(le){return JSON.stringify(le)}const $t=function(le){let oe={},Ee={},qe={},se="";try{const ge=le.split(".");oe=nt(ae(ge[0])||""),Ee=nt(ae(ge[1])||""),se=ge[2],qe=Ee.d||{},delete Ee.d}catch(ge){}return{header:oe,claims:Ee,data:qe,signature:se}},sn=function(le){const Ee=$t(le).claims;return!!Ee&&"object"==typeof Ee&&Ee.hasOwnProperty("iat")},un=function(le){const oe=$t(le).claims;return"object"==typeof oe&&!0===oe.admin};function St(le,oe){return Object.prototype.hasOwnProperty.call(le,oe)}function Yt(le,oe){if(Object.prototype.hasOwnProperty.call(le,oe))return le[oe]}function Kt(le){for(const oe in le)if(Object.prototype.hasOwnProperty.call(le,oe))return!1;return!0}function gn(le,oe,Ee){const qe={};for(const se in le)Object.prototype.hasOwnProperty.call(le,se)&&(qe[se]=oe.call(Ee,le[se],se,le));return qe}function Cn(le,oe){if(le===oe)return!0;const Ee=Object.keys(le),qe=Object.keys(oe);for(const se of Ee){if(!qe.includes(se))return!1;const ge=le[se],ye=oe[se];if(Pn(ge)&&Pn(ye)){if(!Cn(ge,ye))return!1}else if(ge!==ye)return!1}for(const se of qe)if(!Ee.includes(se))return!1;return!0}function Pn(le){return null!==le&&"object"==typeof le}function Qn(le){const oe=[];for(const[Ee,qe]of Object.entries(le))Array.isArray(qe)?qe.forEach(se=>{oe.push(encodeURIComponent(Ee)+"="+encodeURIComponent(se))}):oe.push(encodeURIComponent(Ee)+"="+encodeURIComponent(qe));return oe.length?"&"+oe.join("&"):""}function zn(le){const oe={};return le.replace(/^\?/,"").split("&").forEach(qe=>{if(qe){const[se,ge]=qe.split("=");oe[decodeURIComponent(se)]=decodeURIComponent(ge)}}),oe}function xn(le){const oe=le.indexOf("?");if(!oe)return"";const Ee=le.indexOf("#",oe);return le.substring(oe,Ee>0?Ee:void 0)}class sr{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let oe=1;oe<this.blockSize;++oe)this.pad_[oe]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(oe,Ee){Ee||(Ee=0);const qe=this.W_;if("string"==typeof oe)for(let fn=0;fn<16;fn++)qe[fn]=oe.charCodeAt(Ee)<<24|oe.charCodeAt(Ee+1)<<16|oe.charCodeAt(Ee+2)<<8|oe.charCodeAt(Ee+3),Ee+=4;else for(let fn=0;fn<16;fn++)qe[fn]=oe[Ee]<<24|oe[Ee+1]<<16|oe[Ee+2]<<8|oe[Ee+3],Ee+=4;for(let fn=16;fn<80;fn++){const On=qe[fn-3]^qe[fn-8]^qe[fn-14]^qe[fn-16];qe[fn]=4294967295&(On<<1|On>>>31)}let Qt,bn,se=this.chain_[0],ge=this.chain_[1],ye=this.chain_[2],lt=this.chain_[3],yt=this.chain_[4];for(let fn=0;fn<80;fn++){fn<40?fn<20?(Qt=lt^ge&(ye^lt),bn=1518500249):(Qt=ge^ye^lt,bn=1859775393):fn<60?(Qt=ge&ye|lt&(ge|ye),bn=2400959708):(Qt=ge^ye^lt,bn=3395469782);const On=(se<<5|se>>>27)+Qt+yt+bn+qe[fn]&4294967295;yt=lt,lt=ye,ye=4294967295&(ge<<30|ge>>>2),ge=se,se=On}this.chain_[0]=this.chain_[0]+se&4294967295,this.chain_[1]=this.chain_[1]+ge&4294967295,this.chain_[2]=this.chain_[2]+ye&4294967295,this.chain_[3]=this.chain_[3]+lt&4294967295,this.chain_[4]=this.chain_[4]+yt&4294967295}update(oe,Ee){if(null==oe)return;void 0===Ee&&(Ee=oe.length);const qe=Ee-this.blockSize;let se=0;const ge=this.buf_;let ye=this.inbuf_;for(;se<Ee;){if(0===ye)for(;se<=qe;)this.compress_(oe,se),se+=this.blockSize;if("string"==typeof oe){for(;se<Ee;)if(ge[ye]=oe.charCodeAt(se),++ye,++se,ye===this.blockSize){this.compress_(ge),ye=0;break}}else for(;se<Ee;)if(ge[ye]=oe[se],++ye,++se,ye===this.blockSize){this.compress_(ge),ye=0;break}}this.inbuf_=ye,this.total_+=Ee}digest(){const oe=[];let Ee=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let se=this.blockSize-1;se>=56;se--)this.buf_[se]=255&Ee,Ee/=256;this.compress_(this.buf_);let qe=0;for(let se=0;se<5;se++)for(let ge=24;ge>=0;ge-=8)oe[qe]=this.chain_[se]>>ge&255,++qe;return oe}}function wt(le,oe){const Ee=new Xe(le,oe);return Ee.subscribe.bind(Ee)}class Xe{constructor(oe,Ee){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=Ee,this.task.then(()=>{oe(this)}).catch(qe=>{this.error(qe)})}next(oe){this.forEachObserver(Ee=>{Ee.next(oe)})}error(oe){this.forEachObserver(Ee=>{Ee.error(oe)}),this.close(oe)}complete(){this.forEachObserver(oe=>{oe.complete()}),this.close()}subscribe(oe,Ee,qe){let se;if(void 0===oe&&void 0===Ee&&void 0===qe)throw new Error("Missing Observer.");se=function Rt(le,oe){if("object"!=typeof le||null===le)return!1;for(const Ee of oe)if(Ee in le&&"function"==typeof le[Ee])return!0;return!1}(oe,["next","error","complete"])?oe:{next:oe,error:Ee,complete:qe},void 0===se.next&&(se.next=pn),void 0===se.error&&(se.error=pn),void 0===se.complete&&(se.complete=pn);const ge=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?se.error(this.finalError):se.complete()}catch(ye){}}),this.observers.push(se),ge}unsubscribeOne(oe){void 0===this.observers||void 0===this.observers[oe]||(delete this.observers[oe],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(oe){if(!this.finalized)for(let Ee=0;Ee<this.observers.length;Ee++)this.sendOne(Ee,oe)}sendOne(oe,Ee){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[oe])try{Ee(this.observers[oe])}catch(qe){"undefined"!=typeof console&&console.error&&console.error(qe)}})}close(oe){this.finalized||(this.finalized=!0,void 0!==oe&&(this.finalError=oe),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function pn(){}const Nn=function(le,oe,Ee,qe){let se;if(qe<oe?se="at least "+oe:qe>Ee&&(se=0===Ee?"none":"no more than "+Ee),se)throw new Error(le+" failed: Was called with "+qe+(1===qe?" argument.":" arguments.")+" Expects "+se+".")};function Vn(le,oe){return`${le} failed: ${oe} argument `}function Hn(le,oe,Ee,qe){if((!qe||Ee)&&"function"!=typeof Ee)throw new Error(Vn(le,oe)+"must be a valid function.")}function Kn(le,oe,Ee,qe){if((!qe||Ee)&&("object"!=typeof Ee||null===Ee))throw new Error(Vn(le,oe)+"must be a valid context object.")}const Ot=function(le){const oe=[];let Ee=0;for(let qe=0;qe<le.length;qe++){let se=le.charCodeAt(qe);if(se>=55296&&se<=56319){const ge=se-55296;qe++,P(qe<le.length,"Surrogate pair missing trail surrogate."),se=65536+(ge<<10)+(le.charCodeAt(qe)-56320)}se<128?oe[Ee++]=se:se<2048?(oe[Ee++]=se>>6|192,oe[Ee++]=63&se|128):se<65536?(oe[Ee++]=se>>12|224,oe[Ee++]=se>>6&63|128,oe[Ee++]=63&se|128):(oe[Ee++]=se>>18|240,oe[Ee++]=se>>12&63|128,oe[Ee++]=se>>6&63|128,oe[Ee++]=63&se|128)}return oe},hn=function(le){let oe=0;for(let Ee=0;Ee<le.length;Ee++){const qe=le.charCodeAt(Ee);qe<128?oe++:qe<2048?oe+=2:qe>=55296&&qe<=56319?(oe+=4,Ee++):oe+=3}return oe};function Ar(le,oe=1e3,Ee=2){const qe=oe*Math.pow(Ee,le),se=Math.round(.5*qe*(Math.random()-.5)*2);return Math.min(144e5,qe+se)}function Ye(le){return le&&le._delegate?le._delegate:le}function Fe(le,oe){return new Promise((Ee,qe)=>{le.onsuccess=se=>{Ee(se.target.result)},le.onerror=se=>{var ge;qe(`${oe}: ${null===(ge=se.target.error)||void 0===ge?void 0:ge.message}`)}})}class ue{constructor(oe){this._db=oe,this.objectStoreNames=this._db.objectStoreNames}transaction(oe,Ee){return new $(this._db.transaction.call(this._db,oe,Ee))}createObjectStore(oe,Ee){return new z(this._db.createObjectStore(oe,Ee))}close(){this._db.close()}}class ${constructor(oe){this._transaction=oe,this.complete=new Promise((Ee,qe)=>{this._transaction.oncomplete=function(){Ee()},this._transaction.onerror=()=>{qe(this._transaction.error)},this._transaction.onabort=()=>{qe(this._transaction.error)}})}objectStore(oe){return new z(this._transaction.objectStore(oe))}}class z{constructor(oe){this._store=oe}index(oe){return new me(this._store.index(oe))}createIndex(oe,Ee,qe){return new me(this._store.createIndex(oe,Ee,qe))}get(oe){return Fe(this._store.get(oe),"Error reading from IndexedDB")}put(oe,Ee){return Fe(this._store.put(oe,Ee),"Error writing to IndexedDB")}delete(oe){return Fe(this._store.delete(oe),"Error deleting from IndexedDB")}clear(){return Fe(this._store.clear(),"Error clearing IndexedDB object store")}}class me{constructor(oe){this._index=oe}get(oe){return Fe(this._index.get(oe),"Error reading from IndexedDB")}}function de(le,oe,Ee){return new Promise((qe,se)=>{try{const ge=indexedDB.open(le,oe);ge.onsuccess=ye=>{qe(new ue(ye.target.result))},ge.onerror=ye=>{var lt;se(`Error opening indexedDB: ${null===(lt=ye.target.error)||void 0===lt?void 0:lt.message}`)},ge.onupgradeneeded=ye=>{Ee(new ue(ge.result),ye.oldVersion,ye.newVersion,new $(ge.transaction))}}catch(ge){se(`Error opening indexedDB: ${ge.message}`)}})}function Me(le){return Ge.apply(this,arguments)}function Ge(){return(Ge=(0,f.Z)(function*(le){return new Promise((oe,Ee)=>{try{const qe=indexedDB.deleteDatabase(le);qe.onsuccess=()=>{oe()},qe.onerror=se=>{var ge;Ee(`Error deleting indexedDB database "${le}": ${null===(ge=se.target.error)||void 0===ge?void 0:ge.message}`)}}catch(qe){Ee(`Error deleting indexedDB database "${le}": ${qe.message}`)}})})).apply(this,arguments)}},8528:(rn,et,N)=>{N.d(et,{D:()=>it});var f=N(5839),T=N(5e3),P=N(1205),Z=N(3290),we=N(4135),Se=N(9808),Pe=N(322);function he(xe,We){if(1&xe&&(T.TgZ(0,"div")(1,"div",6)(2,"div",7)(3,"h3"),T._uU(4),T.ALo(5,"shorten"),T.qZA(),T.TgZ(6,"div",8)(7,"p"),T._uU(8),T._UZ(9,"i",9),T.qZA(),T.TgZ(10,"p"),T._uU(11),T._UZ(12,"i",10),T.qZA(),T.TgZ(13,"p",11),T._uU(14),T.ALo(15,"date"),T.qZA(),T.TgZ(16,"a",12),T._uU(17,"Details"),T.qZA()()()()()),2&xe){const Qe=We.$implicit;T.xp6(4),T.Oqu(T.xi3(5,5,Qe.title,10)),T.xp6(4),T.hij("",Qe.likes.length," "),T.xp6(3),T.hij("",Qe.comments.length," "),T.xp6(3),T.Oqu(T.xi3(15,8,Qe.created_at,"MMM d, h:mm a")),T.xp6(2),T.MGl("routerLink","/details/",Qe.id,"")}}function He(xe,We){if(1&xe&&(T.TgZ(0,"div"),T.YNc(1,he,18,11,"div",5),T.qZA()),2&xe){const Qe=T.oxw();T.xp6(1),T.Q6J("ngForOf",Qe.posts)}}function ae(xe,We){1&xe&&(T.TgZ(0,"div",13)(1,"h3"),T._uU(2,"No posts yet"),T.qZA()())}let ve=(()=>{class xe{constructor(Qe,Ne,dn){this.auth=Qe,this.firestore=Ne,this.postService=dn,this.posts=[]}ngOnInit(){var Qe;this.auth.currentUser.then(Ne=>{this.email=null==Ne?void 0:Ne.email}),null===(Qe=this.postService.getPosts())||void 0===Qe||Qe.subscribe(Ne=>this.posts=Ne.filter(dn=>dn.user===this.email))}}return xe.\u0275fac=function(Qe){return new(Qe||xe)(T.Y36(P.zQ),T.Y36(Z.ST),T.Y36(we.L))},xe.\u0275cmp=T.Xpm({type:xe,selectors:[["app-profile"]],decls:7,vars:3,consts:[[1,"profile-wrap"],[1,"fa-solid","fa-circle-user","fa-8x"],[1,"profile-info"],[4,"ngIf"],["class","posts-none",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"posts-wrap"],[1,"post"],[1,"post-info"],[1,"fa-solid","fa-heart","fa-1x"],[1,"fa-solid","fa-comment","fa-1x"],[2,"font-style","italic"],["id","details",3,"routerLink"],[1,"posts-none"]],template:function(Qe,Ne){1&Qe&&(T.TgZ(0,"div",0),T._UZ(1,"i",1),T.TgZ(2,"div",2)(3,"h3"),T._uU(4),T.qZA()(),T.YNc(5,He,2,1,"div",3),T.YNc(6,ae,3,0,"div",4),T.qZA()),2&Qe&&(T.xp6(4),T.Oqu(Ne.email),T.xp6(1),T.Q6J("ngIf",Ne.posts),T.xp6(1),T.Q6J("ngIf",0==Ne.posts.length))},directives:[Se.O5,Se.sg,f.yS],pipes:[Pe.T,Se.uU],styles:['@import"https://use.fontawesome.com/releases/v6.1.1/css/all.css";.profile-wrap[_ngcontent-%COMP%]{position:relative;left:450px;top:100px;width:600px;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;border-radius:10px;border:2px solid #128d22;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:15px 15px 165px}.profile-wrap[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:-75px;color:#128d22}.profile-info[_ngcontent-%COMP%]{position:relative;top:-75px;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.posts-wrap[_ngcontent-%COMP%]{position:relative;top:-75px;width:500px;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.post[_ngcontent-%COMP%]{border:2px solid #128d22;width:90%;height:70px;margin-bottom:10px}.post-info[_ngcontent-%COMP%]{position:relative;top:-45px;display:flex;flex-direction:row;float:right}.post-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:static;width:30px;height:30px}.post-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.post-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#128d22;border-radius:10px;color:#fff;font-weight:bolder;padding:5px;text-align:center;text-decoration:none;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px 5px 5px 40px}.post-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:bolder;background-color:#fff;color:#128d22}']}),xe})();var De=N(2382),ot=N(8386);function at(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Email is required!"),T.qZA())}function dt(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Email is invalid!"),T.qZA())}function Ct(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Password is required!"),T.qZA())}function be(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Password must be at least 6 characters!"),T.qZA())}function mt(xe,We){if(1&xe&&(T.TgZ(0,"div",12),T.YNc(1,at,2,0,"p",13),T.YNc(2,dt,2,0,"p",13),T.YNc(3,Ct,2,0,"p",13),T.YNc(4,be,2,0,"p",13),T.qZA()),2&xe){const Qe=T.oxw();T.xp6(1),T.Q6J("ngIf",null==Qe.loginForm.get("email").errors?null:Qe.loginForm.get("email").errors.required),T.xp6(1),T.Q6J("ngIf",null==Qe.loginForm.get("email").errors?null:Qe.loginForm.get("email").errors.email),T.xp6(1),T.Q6J("ngIf",null==Qe.loginForm.get("password").errors?null:Qe.loginForm.get("password").errors.required),T.xp6(1),T.Q6J("ngIf",null==Qe.loginForm.get("password").errors?null:Qe.loginForm.get("password").errors.minlength)}}let Mt=(()=>{class xe{constructor(Qe,Ne,dn){this.userService=Qe,this.formbuilder=Ne,this.router=dn,this.submitted=!1}ngOnInit(){this.loginForm=this.formbuilder.group({email:["",[De.kI.required,De.kI.email]],password:["",[De.kI.required,De.kI.minLength(6)]]})}onSubmit(){this.submitted=!0,!this.loginForm.invalid&&(this.userService.login(this.loginForm.controls.email.value,this.loginForm.controls.password.value),this.loginForm.reset(),this.router.navigate(["/all-posts"]))}}return xe.\u0275fac=function(Qe){return new(Qe||xe)(T.Y36(ot.K),T.Y36(De.qu),T.Y36(f.F0))},xe.\u0275cmp=T.Xpm({type:xe,selectors:[["app-login"]],decls:20,vars:2,consts:[["class","me",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-email"],["for","email"],["formControlName","email","type","email","id","email","aria-describedby","emailHelp","placeholder","Enter email",1,"form-control"],[1,"form-password"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Password",1,"form-control"],[1,"button-submit"],["type","submit",1,"btn","btn-primary"],[1,"login"],["routerLink","/register"],[1,"me"],[4,"ngIf"]],template:function(Qe,Ne){1&Qe&&(T.YNc(0,mt,5,4,"div",0),T.TgZ(1,"form",1),T.NdJ("ngSubmit",function(){return Ne.onSubmit()}),T.TgZ(2,"h3"),T._uU(3,"Log In"),T.qZA(),T.TgZ(4,"div",2)(5,"label",3),T._uU(6,"Email address"),T.qZA(),T._UZ(7,"input",4),T.qZA(),T.TgZ(8,"div",5)(9,"label",6),T._uU(10,"Password"),T.qZA(),T._UZ(11,"input",7),T.qZA(),T.TgZ(12,"div",8)(13,"button",9),T._uU(14,"Log In!"),T.qZA()(),T.TgZ(15,"div",10)(16,"p"),T._uU(17,"Wait. You actually don't have an account? "),T.TgZ(18,"a",11),T._uU(19,"Register"),T.qZA()()()()),2&Qe&&(T.Q6J("ngIf",Ne.submitted&&Ne.loginForm.invalid),T.xp6(1),T.Q6J("formGroup",Ne.loginForm))},directives:[Se.O5,De._Y,De.JL,De.sg,De.Fj,De.JJ,De.u,f.yS],styles:["form[_ngcontent-%COMP%]{display:flex;position:relative;left:80px;top:120px;flex-direction:column;justify-content:center;align-items:center;margin:auto;width:30%;border:3px solid #128d22;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow:visible}h3[_ngcontent-%COMP%]{background-color:#128d22;color:#fff;width:100%;text-align:center;padding-top:10px;padding-bottom:10px;margin-left:1px;padding-right:1px;margin-right:1px;margin-top:-1px;border-radius:7px 7px 0 0;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:30px}label[_ngcontent-%COMP%]{display:block;position:relative;left:-50px;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;background-color:#128d22;color:#fff;padding:8px;border-radius:10px;margin:15px}input[_ngcontent-%COMP%]{display:block;position:relative;left:-30px;font-family:Helvetica Neue,Helvetica,Arial;font-size:15px;width:100%;padding:10px;margin:5px;height:20px;border-radius:10px;border:1px solid #128d22}input[_ngcontent-%COMP%]:focus{border:3px solid #555}button[_ngcontent-%COMP%]{background-color:#128d22;border:none;color:#fff;padding:6px 12px;text-decoration:none;margin:14px 12px;cursor:pointer;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;border-radius:10px}.me[_ngcontent-%COMP%]{position:absolute;background-color:#fa6767;color:#fff;padding:10px;border-radius:10px;font-family:Helvetica Neue,Helvetica,Arial;border:3px solid red}.login[_ngcontent-%COMP%]{color:#128d22;padding:10px;margin:20px;border-radius:10px;font-weight:700;font-family:Helvetica Neue,Helvetica,Arial}.login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;top:15px;color:#fff;background-color:#128d22;text-decoration:none;font-weight:700;padding:10px;margin:10px;border-radius:10px;font-family:Helvetica Neue,Helvetica,Arial}"]}),xe})();function Pt(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Email is required!"),T.qZA())}function st(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Email is invalid!"),T.qZA())}function rt(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Password is required!"),T.qZA())}function ht(xe,We){1&xe&&(T.TgZ(0,"p"),T._uU(1,"Password must be at least 6 characters!"),T.qZA())}function ke(xe,We){if(1&xe&&(T.TgZ(0,"div",12),T.YNc(1,Pt,2,0,"p",13),T.YNc(2,st,2,0,"p",13),T.YNc(3,rt,2,0,"p",13),T.YNc(4,ht,2,0,"p",13),T.qZA()),2&xe){const Qe=T.oxw();T.xp6(1),T.Q6J("ngIf",null==Qe.form.get("email").errors?null:Qe.form.get("email").errors.required),T.xp6(1),T.Q6J("ngIf",null==Qe.form.get("email").errors?null:Qe.form.get("email").errors.email),T.xp6(1),T.Q6J("ngIf",null==Qe.form.get("password").errors?null:Qe.form.get("password").errors.required),T.xp6(1),T.Q6J("ngIf",null==Qe.form.get("password").errors?null:Qe.form.get("password").errors.minlength)}}let fe=(()=>{class xe{constructor(Qe,Ne,dn){this.userService=Qe,this.fb=Ne,this.router=dn,this.submitted=!1}ngOnInit(){this.form=this.fb.group({email:["",[De.kI.required,De.kI.email]],password:["",[De.kI.required,De.kI.minLength(6)]]})}onSubmit(){this.submitted=!0,!this.form.invalid&&(this.userService.register(this.form.controls.email.value,this.form.controls.password.value),this.form.reset(),this.router.navigate(["/all-posts"]))}}return xe.\u0275fac=function(Qe){return new(Qe||xe)(T.Y36(ot.K),T.Y36(De.qu),T.Y36(f.F0))},xe.\u0275cmp=T.Xpm({type:xe,selectors:[["app-register"]],decls:20,vars:2,consts:[["class","me",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"form-email"],["for","email"],["formControlName","email","type","email","id","email","aria-describedby","emailHelp","placeholder","Enter email",1,"form-control"],[1,"form-password"],["for","password"],["formControlName","password","type","password","id","password","placeholder","Password",1,"form-control"],[1,"button-submit"],["type","submit",1,"btn","btn-primary"],[1,"login"],["routerLink","/login"],[1,"me"],[4,"ngIf"]],template:function(Qe,Ne){1&Qe&&(T.YNc(0,ke,5,4,"div",0),T.TgZ(1,"form",1),T.NdJ("ngSubmit",function(){return Ne.onSubmit()}),T.TgZ(2,"h3"),T._uU(3,"Register"),T.qZA(),T.TgZ(4,"div",2)(5,"label",3),T._uU(6,"Email address"),T.qZA(),T._UZ(7,"input",4),T.qZA(),T.TgZ(8,"div",5)(9,"label",6),T._uU(10,"Password"),T.qZA(),T._UZ(11,"input",7),T.qZA(),T.TgZ(12,"div",8)(13,"button",9),T._uU(14,"Register"),T.qZA()(),T.TgZ(15,"div",10)(16,"p"),T._uU(17,"Wait. You actually have an account? "),T.TgZ(18,"a",11),T._uU(19,"Log In"),T.qZA()()()()),2&Qe&&(T.Q6J("ngIf",Ne.submitted&&Ne.form.invalid),T.xp6(1),T.Q6J("formGroup",Ne.form))},directives:[Se.O5,De._Y,De.JL,De.sg,De.Fj,De.JJ,De.u,f.yS],styles:["form[_ngcontent-%COMP%]{display:flex;position:relative;left:80px;top:120px;flex-direction:column;justify-content:center;align-items:center;margin:auto;width:30%;border:3px solid #128d22;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px);overflow:visible}h3[_ngcontent-%COMP%]{background-color:#128d22;color:#fff;width:100%;text-align:center;padding-top:10px;padding-bottom:10px;margin-left:1px;padding-right:1px;margin-right:1px;margin-top:-1px;border-radius:7px 7px 0 0;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:30px}label[_ngcontent-%COMP%]{display:block;position:relative;left:-50px;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;background-color:#128d22;color:#fff;padding:8px;border-radius:10px;margin:15px}input[_ngcontent-%COMP%]{display:block;position:relative;left:-30px;font-family:Helvetica Neue,Helvetica,Arial;font-size:15px;width:100%;padding:10px;margin:5px;height:20px;border-radius:10px;border:1px solid #128d22}input[_ngcontent-%COMP%]:focus{border:3px solid #555}button[_ngcontent-%COMP%]{background-color:#128d22;border:none;color:#fff;padding:6px 12px;text-decoration:none;margin:14px 12px;cursor:pointer;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;border-radius:10px}.me[_ngcontent-%COMP%]{position:absolute;background-color:#fa6767;color:#fff;padding:10px;border-radius:10px;font-family:Helvetica Neue,Helvetica,Arial;border:3px solid red}.login[_ngcontent-%COMP%]{color:#128d22;padding:10px;margin:20px;border-radius:10px;font-weight:700;font-family:Helvetica Neue,Helvetica,Arial}.login[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{position:relative;top:15px;color:#fff;background-color:#128d22;text-decoration:none;font-weight:700;padding:10px;margin:10px;border-radius:10px;font-family:Helvetica Neue,Helvetica,Arial}"]}),xe})();const Ke=[{path:"profile",component:ve,canActivate:[N(7574).a],data:{authRequired:!0}},{path:"login",component:Mt},{path:"register",component:fe}];let it=(()=>{class xe{}return xe.\u0275fac=function(Qe){return new(Qe||xe)},xe.\u0275mod=T.oAB({type:xe}),xe.\u0275inj=T.cJS({imports:[[f.Bz.forChild(Ke)],f.Bz]}),xe})()},1674:(rn,et,N)=>{N.r(et),N.d(et,{AuthModule:()=>Se});var f=N(9808),T=N(2382),P=N(8528),Z=N(4466),we=N(5e3);let Se=(()=>{class Pe{}return Pe.\u0275fac=function(He){return new(He||Pe)},Pe.\u0275mod=we.oAB({type:Pe}),Pe.\u0275inj=we.cJS({imports:[[f.ez,T.u5,P.D,T.UX,Z.m]]}),Pe})()},7574:(rn,et,N)=>{N.d(et,{a:()=>Z});var f=N(5e3),T=N(5839),P=N(8386);let Z=(()=>{class we{constructor(Pe,he){this.router=Pe,this.userService=he}canActivate(Pe,he){return!0!==this.userService.isLoggedIn&&this.router.navigate(["/login"]),!0}}return we.\u0275fac=function(Pe){return new(Pe||we)(f.LFG(T.F0),f.LFG(P.K))},we.\u0275prov=f.Yz7({token:we,factory:we.\u0275fac,providedIn:"root"}),we})()},4135:(rn,et,N)=>{N.d(et,{L:()=>Pe});var f=N(3266),T=N(5e3),P=N(3290),Z=N(5839),we=N(5019),Se=N(8386);let Pe=(()=>{class he{constructor(ae,ve,De,ot,at){this.firestore=ae,this.router=ve,this.route=De,this.database=ot,this.userService=at,this.postIds=[]}getPosts(){return this.posts=this.firestore.collection("Posts").valueChanges(),this.firestore.collection("posts").get({}).subscribe(ae=>{ae.docs.map(ve=>{var De;return null===(De=this.postIds)||void 0===De?void 0:De.push(ve.id)})}),this.posts}getAllPostIds(){return this.postIds}getPostById(ae){return this.firestore.collection("Posts").doc(ae).valueChanges()}createPost(ae,ve,De,ot){const at={id:"",keyword:ae,title:ve,image:De,description:ot,likes:[],comments:[],userId:this.userService.getUserId(),created_at:Date.now(),user:this.userService.getUserEmail()};at.id=this.firestore.createId(),this.firestore.collection("Posts").doc(at.id).set(at)}update(ae,ve){this.firestore.collection("Posts").doc(ve).set(ae)}delete(ae){this.firestore.collection("Posts").doc(ae).delete().then(()=>this.router.navigate(["/all-posts"]))}getPostByKeyword(ae){return this.firestore.collection("Posts",ve=>ve.where("keyword","==",ae)).snapshotChanges()}likePost(ae){this.firestore.collection("Posts").doc(ae).update({likes:(0,f.vr)(this.userService.getUserId())})}commentPost(ae,ve){const De={id:"",content:ve,userId:this.userService.getUserId(),created_at:Date.now(),user:this.userService.getUserEmail()};De.id=this.firestore.createId(),this.firestore.collection("Posts").doc(ae).update({comments:(0,f.vr)(De)})}searchPosts(ae){return this.firestore.collection("Posts",ve=>ve.where("keyword","==",ae)).snapshotChanges()}}return he.\u0275fac=function(ae){return new(ae||he)(T.LFG(P.ST),T.LFG(Z.F0),T.LFG(Z.gz),T.LFG(we.KQ),T.LFG(Se.K))},he.\u0275prov=T.Yz7({token:he,factory:he.\u0275fac,providedIn:"root"}),he})()},8386:(rn,et,N)=>{N.d(et,{K:()=>we});var f=N(5e3),T=N(3290),P=N(1205),Z=N(5839);let we=(()=>{class Se{constructor(he,He,ae,ve){this.afs=he,this.afAuth=He,this.router=ae,this.ngZone=ve,this.afAuth.authState.subscribe(De=>{De?(this.userData=De,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}login(he,He){return this.afAuth.signInWithEmailAndPassword(he,He).then(ae=>{this.setUserData(ae.user)}).catch(ae=>{window.alert(ae.message)})}register(he,He){return this.afAuth.createUserWithEmailAndPassword(he,He).then(ae=>{this.setUserData(ae.user)}).catch(ae=>{window.alert(ae.message)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}setUserData(he){return this.afs.doc(`Users/${he.uid}`).set({uid:he.uid,email:he.email},{merge:!0})}logout(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["/login"])})}getUserId(){return this.userData.uid}getUserEmail(){return this.userData.email}}return Se.\u0275fac=function(he){return new(he||Se)(f.LFG(T.ST),f.LFG(P.zQ),f.LFG(Z.F0),f.LFG(f.R0b))},Se.\u0275prov=f.Yz7({token:Se,factory:Se.\u0275fac,providedIn:"root"}),Se})()},2140:(rn,et,N)=>{N.d(et,{u:()=>Wt});var f=N(5839),T=N(2382),P=N(5e3),Z=N(4135),we=N(9808);function Se(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Keyword is required!"),P.qZA())}function Pe(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Keyword must be at least 3 characters!"),P.qZA())}function he(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Title is required!"),P.qZA())}function He(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Title must be at least 3 characters!"),P.qZA())}function ae(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Image is required!"),P.qZA())}function ve(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Image is Invalid!"),P.qZA())}function De(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Description is required!"),P.qZA())}function ot(ut,nt){1&ut&&(P.TgZ(0,"p"),P._uU(1,"Description must be at least 3 characters!"),P.qZA())}function at(ut,nt){if(1&ut&&(P.TgZ(0,"div",13),P.YNc(1,Se,2,0,"p",14),P.YNc(2,Pe,2,0,"p",14),P.YNc(3,he,2,0,"p",14),P.YNc(4,He,2,0,"p",14),P.YNc(5,ae,2,0,"p",14),P.YNc(6,ve,2,0,"p",14),P.YNc(7,De,2,0,"p",14),P.YNc(8,ot,2,0,"p",14),P.qZA()),2&ut){const Ce=P.oxw();P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("keyword").errors?null:Ce.form.get("keyword").errors.required),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("keyword").errors?null:Ce.form.get("keyword").errors.minlength),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("title").errors?null:Ce.form.get("title").errors.required),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("title").errors?null:Ce.form.get("title").errors.minlength),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("image").errors?null:Ce.form.get("image").errors.required),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("image").errors?null:Ce.form.get("image").errors.pattern),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("description").errors?null:Ce.form.get("description").errors.required),P.xp6(1),P.Q6J("ngIf",null==Ce.form.get("description").errors?null:Ce.form.get("description").errors.minlength)}}let dt=(()=>{class ut{constructor(Ce,$t,an){this.postService=Ce,this.fb=$t,this.router=an}ngOnInit(){this.postService.getPosts(),this.submitForm()}submitForm(){this.form=this.fb.group({keyword:["",[T.kI.required,T.kI.minLength(3)]],title:["",[T.kI.required,T.kI.minLength(3)]],image:["",[T.kI.required]],description:["",[T.kI.required,T.kI.minLength(3)]]})}onSubmit(){this.form.valid&&(this.postService.createPost(this.form.controls.keyword.value,this.form.controls.title.value,this.form.controls.image.value,this.form.controls.description.value),this.form.reset(),this.router.navigate(["/all-posts"]))}}return ut.\u0275fac=function(Ce){return new(Ce||ut)(P.Y36(Z.L),P.Y36(T.qu),P.Y36(f.F0))},ut.\u0275cmp=P.Xpm({type:ut,selectors:[["app-create-post"]],decls:18,vars:2,consts:[["class","me",4,"ngIf"],[3,"formGroup","ngSubmit"],[1,"group-a"],["type","text","formControlName","keyword","id","keyword","aria-describedby","keywordHelp","placeholder","Keyword",1,"form-control"],["type","text","formControlName","title","id","title","aria-describedby","titleHelp","placeholder","Title",1,"form-control"],[1,"image-form"],["for","image"],["type","text","formControlName","image","pattern","^https*:\\/\\/.*","id","image","placeholder","Image",1,"form-control"],[1,"description-form"],["for","description"],["formControlName","description","id","description","rows","5",1,"form-control"],[1,"button-submit"],["type","submit",1,"btn","btn-primary"],[1,"me"],[4,"ngIf"]],template:function(Ce,$t){1&Ce&&(P.YNc(0,at,9,8,"div",0),P.TgZ(1,"form",1),P.NdJ("ngSubmit",function(){return $t.onSubmit()}),P.TgZ(2,"h3"),P._uU(3,"Create Post"),P.qZA(),P.TgZ(4,"div",2),P._UZ(5,"input",3)(6,"input",4),P.qZA(),P.TgZ(7,"div",5)(8,"label",6),P._uU(9,"Image"),P.qZA(),P._UZ(10,"input",7),P.qZA(),P.TgZ(11,"div",8)(12,"label",9),P._uU(13,"Description"),P.qZA(),P._UZ(14,"textarea",10),P.qZA(),P.TgZ(15,"div",11)(16,"button",12),P._uU(17,"Create Post"),P.qZA()()()),2&Ce&&(P.Q6J("ngIf",$t.form.invalid),P.xp6(1),P.Q6J("formGroup",$t.form))},directives:[we.O5,T._Y,T.JL,T.sg,T.Fj,T.JJ,T.u,T.c5],styles:["form[_ngcontent-%COMP%]{display:flex;position:relative;left:250px;top:75px;flex-direction:column;justify-content:center;align-items:center;margin:auto;width:40%;border:3px solid #128d22;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}h3[_ngcontent-%COMP%]{background-color:#128d22;color:#fff;width:100%;text-align:center;padding-top:10px;padding-bottom:10px;margin-left:1px;padding-right:1px;margin-right:1px;margin-top:-1px;border-radius:7px 7px 0 0;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:30px}label[_ngcontent-%COMP%]{display:block;position:relative;left:-70px;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;background-color:#128d22;color:#fff;padding:8px;border-radius:10px;margin:15px}input[_ngcontent-%COMP%]{position:relative;font-family:Helvetica Neue,Helvetica,Arial;font-size:15px;padding:10px;margin:5px;height:20px;border-radius:10px;border:1px solid #128d22}input[_ngcontent-%COMP%]:focus{border:3px solid #555}label[for=description][_ngcontent-%COMP%]{display:block;position:relative;left:-10px;width:410px}#image[_ngcontent-%COMP%]{position:relative;left:0px;width:400px}label[for=image][_ngcontent-%COMP%]{position:relative;width:400px;left:-10px}textarea[_ngcontent-%COMP%]{position:relative;width:400px;resize:none;left:10px}button[_ngcontent-%COMP%]{background-color:#128d22;border:none;color:#fff;padding:6px 12px;text-decoration:none;margin:14px 12px;cursor:pointer;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;border-radius:10px}.me[_ngcontent-%COMP%]{position:absolute;background-color:#fa6767;color:#fff;padding:10px;border-radius:10px;font-family:Helvetica Neue,Helvetica,Arial;border:3px solid red}"]}),ut})();var Ct=N(322);function be(ut,nt){if(1&ut&&(P.TgZ(0,"div",5)(1,"div",6)(2,"h3"),P._uU(3),P.ALo(4,"shorten"),P.qZA(),P.TgZ(5,"div",7)(6,"p"),P._uU(7),P._UZ(8,"i",8),P.qZA(),P.TgZ(9,"p"),P._uU(10),P._UZ(11,"i",9),P.qZA(),P.TgZ(12,"p",10),P._uU(13),P.ALo(14,"date"),P.qZA(),P.TgZ(15,"a",11),P._uU(16,"Details"),P.qZA()()()()),2&ut){const Ce=nt.$implicit;P.xp6(3),P.hij("",P.xi3(4,5,Ce.title,15)," "),P.xp6(4),P.hij("",Ce.likes.length," "),P.xp6(3),P.hij("",Ce.comments.length," "),P.xp6(3),P.Oqu(P.xi3(14,8,Ce.created_at,"MMM d, y, h:mm a")),P.xp6(2),P.MGl("routerLink","/details/",Ce.id,"")}}function mt(ut,nt){if(1&ut&&(P.TgZ(0,"div",2)(1,"div",3)(2,"h2"),P._uU(3,"Recent posts"),P.qZA()(),P.YNc(4,be,17,11,"div",4),P.ALo(5,"async"),P.qZA()),2&ut){const Ce=P.oxw();P.xp6(4),P.Q6J("ngForOf",P.lcZ(5,1,Ce.posts))}}function Mt(ut,nt){1&ut&&(P.TgZ(0,"div",12)(1,"h3"),P._uU(2,"No posts yet"),P.qZA(),P.TgZ(3,"p"),P._uU(4,"Be the first to post!"),P.qZA()())}let Pt=(()=>{class ut{constructor(Ce,$t){this.router=Ce,this.postService=$t}ngOnInit(){this.getPosts()}getPosts(){this.posts=this.postService.getPosts()}}return ut.\u0275fac=function(Ce){return new(Ce||ut)(P.Y36(f.F0),P.Y36(Z.L))},ut.\u0275cmp=P.Xpm({type:ut,selectors:[["app-all-posts"]],decls:2,vars:2,consts:[["class","wrap",4,"ngIf"],["class","posts-none",4,"ngIf"],[1,"wrap"],[1,"intro"],["class","posts-wrap",4,"ngFor","ngForOf"],[1,"posts-wrap"],[1,"post"],[1,"post-info"],[1,"fa-solid","fa-heart"],[1,"fa-solid","fa-comment"],[2,"font-style","italic"],["id","details",3,"routerLink"],[1,"posts-none"]],template:function(Ce,$t){1&Ce&&(P.YNc(0,mt,6,3,"div",0),P.YNc(1,Mt,5,0,"div",1)),2&Ce&&(P.Q6J("ngIf",$t.posts),P.xp6(1),P.Q6J("ngIf",0==$t.posts.length))},directives:[we.O5,we.sg,f.yS],pipes:[we.Ov,Ct.T,we.uU],styles:['@import"https://use.fontawesome.com/releases/v6.1.1/css/all.css";.intro[_ngcontent-%COMP%]{align-items:center;text-align:center}.wrap[_ngcontent-%COMP%]{margin-bottom:200px}.intro[_ngcontent-%COMP%]   h2[_ngcontent-%COMP%]{position:relative;top:15px;left:200px;font-size:2.5rem;font-weight:700;color:#000;margin-bottom:1rem}.posts-wrap[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.post[_ngcontent-%COMP%]{border:4px solid #128d22;width:40%;height:60px;padding-bottom:0;margin-bottom:10px;padding-top:20px}.post-info[_ngcontent-%COMP%]{position:relative;top:-55px;display:flex;flex-direction:row;float:right;padding-top:10px}p[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{font-size:1.5rem;color:#128d22;margin-right:10px}.post-info[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;top:5px;width:20px;height:20px}.post-info[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.post[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#124d1b;font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px}h2[_ngcontent-%COMP%]{color:#124d1b;text-align:center;font-size:40px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:10px;padding-bottom:20px}.intro[_ngcontent-%COMP%]{width:100%;border-bottom:8px solid #128d22;border-width:100%;margin-bottom:10px}p[style="font-style: italic;"][_ngcontent-%COMP%]{padding-top:5px}.posts-none[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center}.posts-none[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{color:#128d22;font-size:45px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px}.posts-none[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{color:#128d22;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px}.post-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{background-color:#128d22;border-radius:10px;color:#fff;font-weight:bolder;padding:5px;text-align:center;text-decoration:none;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px 5px 5px 40px}.post-info[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]:hover{font-weight:bolder;background-color:#fff;color:#128d22}']}),ut})();var st=N(3290),rt=N(1205);let ht=(()=>{class ut{constructor(Ce,$t,an,Rn,sn,un){this.firestore=Ce,this.route=$t,this.postService=an,this.fireauth=Rn,this.fb=sn,this.router=un,this.editForm=this.fb.group({keyword:["",[T.kI.required,T.kI.minLength(3)]],title:["",[T.kI.required,T.kI.minLength(3)]],image:["",[T.kI.required]],description:["",[T.kI.required,T.kI.minLength(3)]]})}ngOnInit(){this.postService.getPostById(this.route.snapshot.params.id).subscribe(Ce=>{this.post=Ce,this.editLink="/edit/"+this.route.snapshot.params.id,this.editForm.controls.keyword.setValue(Ce.keyword),this.editForm.controls.title.setValue(Ce.title),this.editForm.controls.image.setValue(Ce.image),this.editForm.controls.description.setValue(Ce.description)})}onSubmit(){if(this.editForm.valid){const Ce=Object.assign(Object.assign({},this.post),{keyword:this.editForm.controls.keyword.value,title:this.editForm.controls.title.value,description:this.editForm.controls.description.value,image:this.editForm.controls.image.value});this.postService.update(Ce,this.route.snapshot.params.id),this.editForm.reset(),this.router.navigate(["/details/"+this.route.snapshot.params.id])}}}return ut.\u0275fac=function(Ce){return new(Ce||ut)(P.Y36(st.ST),P.Y36(f.gz),P.Y36(Z.L),P.Y36(rt.zQ),P.Y36(T.qu),P.Y36(f.F0))},ut.\u0275cmp=P.Xpm({type:ut,selectors:[["app-edit-post"]],decls:17,vars:1,consts:[[3,"formGroup","ngSubmit"],[1,"group-a"],["formControlName","keyword","type","text","id","keyword","aria-describedby","keywordHelp","placeholder","Keyword",1,"form-control",3,"value"],["formControlName","title","type","text","id","title","aria-describedby","titleHelp","placeholder","Title",1,"form-control",3,"value"],[1,"image-form"],["for","image"],["formControlName","image","type","text","id","image","placeholder","Image",1,"form-control",3,"value"],[1,"description-form"],["for","description"],["formControlName","description","id","description","rows","5",1,"form-control",3,"value"],[1,"button-submit"],["type","submit",1,"btn","btn-primary"]],template:function(Ce,$t){1&Ce&&(P.TgZ(0,"form",0),P.NdJ("ngSubmit",function(){return $t.onSubmit()}),P.TgZ(1,"h3"),P._uU(2,"Edit Post"),P.qZA(),P.TgZ(3,"div",1)(4,"input",2),P.NdJ("value",function(){return $t.post.keyword}),P.qZA(),P.TgZ(5,"input",3),P.NdJ("value",function(){return $t.post.title}),P.qZA()(),P.TgZ(6,"div",4)(7,"label",5),P._uU(8,"Image"),P.qZA(),P.TgZ(9,"input",6),P.NdJ("value",function(){return $t.post.image}),P.qZA()(),P.TgZ(10,"div",7)(11,"label",8),P._uU(12,"Description"),P.qZA(),P.TgZ(13,"textarea",9),P.NdJ("value",function(){return $t.post.description}),P.qZA()(),P.TgZ(14,"div",10)(15,"button",11),P._uU(16,"Edit Post"),P.qZA()()()),2&Ce&&P.Q6J("formGroup",$t.editForm)},directives:[T._Y,T.JL,T.sg,T.Fj,T.JJ,T.u],styles:["form[_ngcontent-%COMP%]{display:flex;position:relative;left:250px;top:75px;flex-direction:column;justify-content:center;align-items:center;margin:auto;width:40%;border:3px solid #128d22;border-radius:10px;-webkit-backdrop-filter:blur(10px);backdrop-filter:blur(10px)}h3[_ngcontent-%COMP%]{background-color:#128d22;color:#fff;width:100%;text-align:center;padding-top:10px;padding-bottom:10px;margin-left:1px;padding-right:1px;margin-right:1px;margin-top:-1px;border-radius:7px 7px 0 0;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:30px}label[_ngcontent-%COMP%]{display:block;position:relative;left:-70px;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;background-color:#128d22;color:#fff;padding:8px;border-radius:10px;margin:15px}input[_ngcontent-%COMP%]{position:relative;font-family:Helvetica Neue,Helvetica,Arial;font-size:15px;padding:10px;margin:5px;height:20px;border-radius:10px;border:1px solid #128d22}input[_ngcontent-%COMP%]:focus{border:3px solid #555}label[for=description][_ngcontent-%COMP%]{display:block;position:relative;left:-10px;width:410px}#image[_ngcontent-%COMP%]{position:relative;left:0px;width:400px}label[for=image][_ngcontent-%COMP%]{position:relative;width:400px;left:-10px}textarea[_ngcontent-%COMP%]{position:relative;width:400px;resize:none;left:10px}button[_ngcontent-%COMP%]{background-color:#128d22;border:none;color:#fff;padding:6px 12px;text-decoration:none;margin:14px 12px;cursor:pointer;font-family:Helvetica Neue,Helvetica,Arial;font-weight:bolder;font-size:20px;border-radius:10px}"]}),ut})();var ke=N(8386);function fe(ut,nt){if(1&ut){const Ce=P.EpF();P.TgZ(0,"button",20),P.NdJ("click",function(){return P.CHM(Ce),P.oxw(2).navigateToPostEdit()}),P._uU(1,"Edit"),P.qZA()}}function Lt(ut,nt){if(1&ut){const Ce=P.EpF();P.TgZ(0,"button",21),P.NdJ("click",function(){return P.CHM(Ce),P.oxw(2).deletePost()}),P._uU(1,"Delete"),P.qZA()}}function Ke(ut,nt){if(1&ut){const Ce=P.EpF();P.TgZ(0,"div",16)(1,"button",17),P.NdJ("click",function(){P.CHM(Ce);const an=P.oxw();return an.likePost(an.postId)}),P._uU(2,"Like"),P.qZA(),P.YNc(3,fe,2,0,"button",18),P.YNc(4,Lt,2,0,"button",19),P.qZA()}if(2&ut){const Ce=P.oxw();P.xp6(3),P.Q6J("ngIf",Ce.post.user==Ce.currUser),P.xp6(1),P.Q6J("ngIf",Ce.post.user==Ce.currUser)}}function it(ut,nt){if(1&ut&&(P.TgZ(0,"div",24)(1,"div",24)(2,"div",25)(3,"div",26),P._UZ(4,"i",27),P.TgZ(5,"p"),P._uU(6),P.qZA()(),P.TgZ(7,"div",28)(8,"div",29)(9,"p"),P._uU(10),P.ALo(11,"date"),P.qZA()()()(),P.TgZ(12,"p"),P._uU(13),P.qZA()()()),2&ut){const Ce=nt.$implicit;P.xp6(6),P.Oqu(Ce.user),P.xp6(4),P.Oqu(P.xi3(11,3,Ce.created_at,"MMM d, y, h:mm a")),P.xp6(3),P.hij(" ",Ce.content," ")}}function xe(ut,nt){if(1&ut&&(P.TgZ(0,"div",22)(1,"h3"),P._uU(2,"Comments"),P.qZA(),P.YNc(3,it,14,6,"div",23),P.qZA()),2&ut){const Ce=P.oxw();P.xp6(3),P.Q6J("ngForOf",Ce.post.comments)}}function We(ut,nt){1&ut&&(P.TgZ(0,"div",30)(1,"p"),P._uU(2,"No comments yet!"),P.qZA()())}let Qe=(()=>{class ut{constructor(Ce,$t,an,Rn,sn){this.postService=Ce,this.route=$t,this.router=an,this.auth=Rn,this.userService=sn,this.postLikes=[]}ngOnInit(){this.postId=this.route.snapshot.params.id,this.postService.getPostById(this.postId).subscribe(Ce=>{this.post=Ce,this.postLikes=Ce.likes,this.comments$=Ce.comments}),this.auth.authState.subscribe(Ce=>{this.currUser=Ce.uid}),this.auth.user.subscribe(Ce=>this.currUser=null==Ce?void 0:Ce.email),this.commentForm=(new T.qu).group({content:["",[]]})}navigateToPostEdit(){this.router.navigate([`/edit/${this.postId}`])}deletePost(){alert("Are you sure you want to delete this post?"),this.postService.delete(this.postId),this.router.navigate(["/all-posts"])}likePost(Ce){this.postService.likePost(Ce)}commentPost(Ce){this.postService.commentPost(Ce,this.commentForm.controls.content.value),this.commentForm.reset()}}return ut.\u0275fac=function(Ce){return new(Ce||ut)(P.Y36(Z.L),P.Y36(f.gz),P.Y36(f.F0),P.Y36(rt.zQ),P.Y36(ke.K))},ut.\u0275cmp=P.Xpm({type:ut,selectors:[["app-post-details"]],decls:29,vars:13,consts:[[1,"post-wrap"],[1,"post"],["alt","",3,"src"],[1,"stats"],[1,"likes-num"],[1,"fa-solid","fa-heart"],[1,"comments-num"],[1,"fa-solid","fa-comment"],[1,"date-num"],[2,"font-style","italic"],["class","buttons",4,"ngIf"],[1,"add-comment",3,"formGroup","ngSubmit"],["formControlName","content","id","form-control","cols","30","rows","10","placeholder","add a comment"],["id","add-comment",1,"btn","btn-primary"],["class","comments",4,"ngIf"],["class","no-comments",4,"ngIf"],[1,"buttons"],["id","like",1,"btn","btn-primary",3,"click"],["class","btn btn-primary","id","edit",3,"click",4,"ngIf"],["class","btn btn-primary","id","delete",3,"click",4,"ngIf"],["id","edit",1,"btn","btn-primary",3,"click"],["id","delete",1,"btn","btn-primary",3,"click"],[1,"comments"],["class","comment",4,"ngFor","ngForOf"],[1,"comment"],[1,"comment-header"],[1,"comment-user"],[1,"fa-solid","fa-circle-user","fa-1x"],[1,"info"],[1,"comment-date"],[1,"no-comments"]],template:function(Ce,$t){1&Ce&&(P.TgZ(0,"div",0)(1,"div",1)(2,"h3"),P._uU(3),P.qZA(),P.TgZ(4,"p"),P._uU(5),P.qZA(),P._UZ(6,"img",2),P.qZA(),P.TgZ(7,"div",3)(8,"div",4)(9,"p"),P._uU(10),P._UZ(11,"i",5),P.qZA()(),P.TgZ(12,"div",6)(13,"p"),P._uU(14),P._UZ(15,"i",7),P.qZA()(),P.TgZ(16,"div",8)(17,"p",9),P._uU(18),P.ALo(19,"date"),P.qZA()()(),P.YNc(20,Ke,5,2,"div",10),P.TgZ(21,"form",11),P.NdJ("ngSubmit",function(){return $t.commentPost($t.postId)}),P.TgZ(22,"h3"),P._uU(23,"Add Comment"),P.qZA(),P._UZ(24,"textarea",12),P.TgZ(25,"button",13),P._uU(26,"Add Comment"),P.qZA()(),P.YNc(27,xe,4,1,"div",14),P.YNc(28,We,3,0,"div",15),P.qZA()),2&Ce&&(P.xp6(3),P.Oqu($t.post.title),P.xp6(2),P.hij(" ",$t.post.description," "),P.xp6(1),P.s9C("src",$t.post.image,P.LSH),P.xp6(4),P.hij("",$t.post.likes.length," "),P.xp6(4),P.hij("",$t.post.comments.length," "),P.xp6(4),P.Oqu(P.xi3(19,10,$t.post.created_at,"MMM d, y, h:mm a")),P.xp6(2),P.Q6J("ngIf",$t.userService.isLoggedIn),P.xp6(1),P.Q6J("formGroup",$t.commentForm),P.xp6(6),P.Q6J("ngIf",0!=$t.post.comments.length),P.xp6(1),P.Q6J("ngIf",0==$t.post.comments.length))},directives:[we.O5,T._Y,T.JL,T.sg,T.Fj,T.JJ,T.u,we.sg],pipes:[we.uU],styles:['@import"https://use.fontawesome.com/releases/v6.1.1/css/all.css";.post-wrap[_ngcontent-%COMP%]{position:relative;width:100%;height:100%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:80px}.post[_ngcontent-%COMP%]{border:4px solid #128d22;width:50%;position:relative;display:flex;flex-direction:column;float:right;margin:25px}.post[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:static;width:100%;height:100%}.post[_ngcontent-%COMP%]   p[_ngcontent-%COMP%]{margin:10px;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}h3[_ngcontent-%COMP%]{width:100%;color:#124d1b;font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:5px}.stats[_ngcontent-%COMP%]{position:relative;top:-25px;width:100%;align-items:center;justify-content:center;display:flex;flex-direction:row;float:right;font-size:36px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;font-weight:700}.stats[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{position:relative;width:20px;height:20px}.stats[_ngcontent-%COMP%]   .likes-num[_ngcontent-%COMP%], .stats[_ngcontent-%COMP%]   .comments-num[_ngcontent-%COMP%]{margin:10px;font-size:25px}.stats[_ngcontent-%COMP%]   .date-num[_ngcontent-%COMP%]{margin:15px 15px 15px 260px;font-size:15px}.comments[_ngcontent-%COMP%]{position:relative;top:-25px;width:50%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:10px;border:4px solid #128d22}.comments[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#124d1b;font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:15px}.comment[_ngcontent-%COMP%]{position:relative;width:80%;display:flex;flex-direction:column;justify-content:center;align-items:center;margin-bottom:10px}.comment[_ngcontent-%COMP%]   i[_ngcontent-%COMP%]{color:#128d22}.comment-header[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;flex-direction:row;float:left;align-items:center}.comment-header[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:static;width:50px;height:50px}.comment-user[_ngcontent-%COMP%]{position:relative;top:-29px;left:1px;width:100%;display:flex;flex-direction:row;float:right;align-items:center;font-size:20px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.info[_ngcontent-%COMP%]{position:relative;top:-30px;width:70%;display:flex;flex-direction:row;float:right;align-items:center}.info[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{position:static;width:20px;height:20px}.comment-date[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;flex-direction:row;float:right;align-items:center;font-size:15px;font-style:italic;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.comment-likes[_ngcontent-%COMP%]{position:relative;width:100%;display:flex;flex-direction:row;float:right;align-items:center;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.comment[_ngcontent-%COMP%] > p[_ngcontent-%COMP%]{position:relative;width:100%;top:-30px;display:flex;flex-direction:row;float:right;align-items:center;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.no-comments[_ngcontent-%COMP%]{font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;color:#124d1b;font-weight:bolder}.add-comment[_ngcontent-%COMP%]{position:relative;top:-30px;width:49%;display:flex;justify-content:center;flex-direction:column;align-items:center;font-size:15px;border:4px solid #128d22;margin-bottom:10px;padding:10px}.add-comment[_ngcontent-%COMP%]   h3[_ngcontent-%COMP%]{text-align:center;color:#124d1b;font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:15px}.add-comment[_ngcontent-%COMP%]   textarea[_ngcontent-%COMP%]{position:relative;width:100%;height:100px;font-size:15px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif}.buttons[_ngcontent-%COMP%]{position:relative;top:-30px;width:100%;display:flex;justify-content:center;flex-direction:row;float:right;align-items:center;font-size:15px;margin:15px}.btn.btn-primary[_ngcontent-%COMP%]{display:flex;justify-content:center;font-size:25px;font-family:Helvetica Neue,Helvetica,Arial,sans-serif;margin:35px;border:4px solid #128d22;border-radius:10px}#like[_ngcontent-%COMP%]{background-color:#128d22;color:#fff}#edit[_ngcontent-%COMP%]{background-color:#3a5efc;border-color:#3a5efc;color:#fff}#delete[_ngcontent-%COMP%]{background-color:red;border-color:red;color:#fff}#add-comment[_ngcontent-%COMP%]{background-color:#128d22;color:#fff;border-color:#128d22}']}),ut})();var Ne=N(7574);const dn=[{path:"all-posts",component:Pt},{path:"create",component:dt,canActivate:[Ne.a],data:{authRequired:!0}},{path:"edit/:id",component:ht,canActivate:[Ne.a],data:{authRequired:!0}},{path:"details/:id",component:Qe}];let Wt=(()=>{class ut{}return ut.\u0275fac=function(Ce){return new(Ce||ut)},ut.\u0275mod=P.oAB({type:ut}),ut.\u0275inj=P.cJS({imports:[[f.Bz.forChild(dn)],f.Bz]}),ut})()},2029:(rn,et,N)=>{N.r(et),N.d(et,{ItemsModule:()=>Se});var f=N(9808),T=N(2382),P=N(2140),Z=N(4466),we=N(5e3);let Se=(()=>{class Pe{}return Pe.\u0275fac=function(He){return new(He||Pe)},Pe.\u0275mod=we.oAB({type:Pe}),Pe.\u0275inj=we.cJS({imports:[[T.UX,f.ez,P.u,Z.m,T.u5]]}),Pe})()},322:(rn,et,N)=>{N.d(et,{T:()=>T});var f=N(5e3);let T=(()=>{class P{transform(we,Se){return we.length>Se?`${we.substr(0,Se)}...`:we}}return P.\u0275fac=function(we){return new(we||P)},P.\u0275pipe=f.Yjl({name:"shorten",type:P,pure:!0}),P})()},4466:(rn,et,N)=>{N.d(et,{m:()=>P});var f=N(9808),T=N(5e3);let P=(()=>{class Z{}return Z.\u0275fac=function(Se){return new(Se||Z)},Z.\u0275mod=T.oAB({type:Z}),Z.\u0275inj=T.cJS({imports:[[f.ez]]}),Z})()},5293:(rn,et,N)=>{var f=N(9808),T=N(5e3);class P extends f.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Z extends P{static makeCurrent(){(0,f.HT)(new Z)}onAndCancel(v,S,K){return v.addEventListener(S,K,!1),()=>{v.removeEventListener(S,K,!1)}}dispatchEvent(v,S){v.dispatchEvent(S)}remove(v){v.parentNode&&v.parentNode.removeChild(v)}createElement(v,S){return(S=S||this.getDefaultDocument()).createElement(v)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(v){return v.nodeType===Node.ELEMENT_NODE}isShadowRoot(v){return v instanceof DocumentFragment}getGlobalEventTarget(v,S){return"window"===S?window:"document"===S?v:"body"===S?v.body:null}getBaseHref(v){const S=function Se(){return we=we||document.querySelector("base"),we?we.getAttribute("href"):null}();return null==S?null:function he(E){Pe=Pe||document.createElement("a"),Pe.setAttribute("href",E);const v=Pe.pathname;return"/"===v.charAt(0)?v:`/${v}`}(S)}resetBaseElement(){we=null}getUserAgent(){return window.navigator.userAgent}getCookie(v){return(0,f.Mx)(document.cookie,v)}}let Pe,we=null;const He=new T.OlP("TRANSITION_ID"),ve=[{provide:T.ip1,useFactory:function ae(E,v,S){return()=>{S.get(T.CZH).donePromise.then(()=>{const K=(0,f.q)(),re=v.querySelectorAll(`style[ng-transition="${E}"]`);for(let Ve=0;Ve<re.length;Ve++)K.remove(re[Ve])})}},deps:[He,f.K0,T.zs3],multi:!0}];class De{static init(){(0,T.VLi)(new De)}addToWindow(v){T.dqk.getAngularTestability=(K,re=!0)=>{const Ve=v.findTestabilityInTree(K,re);if(null==Ve)throw new Error("Could not find testability for element.");return Ve},T.dqk.getAllAngularTestabilities=()=>v.getAllTestabilities(),T.dqk.getAllAngularRootElements=()=>v.getAllRootElements(),T.dqk.frameworkStabilizers||(T.dqk.frameworkStabilizers=[]),T.dqk.frameworkStabilizers.push(K=>{const re=T.dqk.getAllAngularTestabilities();let Ve=re.length,vt=!1;const qt=function(cn){vt=vt||cn,Ve--,0==Ve&&K(vt)};re.forEach(function(cn){cn.whenStable(qt)})})}findTestabilityInTree(v,S,K){if(null==S)return null;const re=v.getTestability(S);return null!=re?re:K?(0,f.q)().isShadowRoot(S)?this.findTestabilityInTree(v,S.host,!0):this.findTestabilityInTree(v,S.parentElement,!0):null}}let ot=(()=>{class E{build(){return new XMLHttpRequest}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();const at=new T.OlP("EventManagerPlugins");let dt=(()=>{class E{constructor(S,K){this._zone=K,this._eventNameToPlugin=new Map,S.forEach(re=>re.manager=this),this._plugins=S.slice().reverse()}addEventListener(S,K,re){return this._findPluginFor(K).addEventListener(S,K,re)}addGlobalEventListener(S,K,re){return this._findPluginFor(K).addGlobalEventListener(S,K,re)}getZone(){return this._zone}_findPluginFor(S){const K=this._eventNameToPlugin.get(S);if(K)return K;const re=this._plugins;for(let Ve=0;Ve<re.length;Ve++){const vt=re[Ve];if(vt.supports(S))return this._eventNameToPlugin.set(S,vt),vt}throw new Error(`No event manager plugin found for event ${S}`)}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(at),T.LFG(T.R0b))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();class Ct{constructor(v){this._doc=v}addGlobalEventListener(v,S,K){const re=(0,f.q)().getGlobalEventTarget(this._doc,v);if(!re)throw new Error(`Unsupported event target ${re} for event ${S}`);return this.addEventListener(re,S,K)}}let be=(()=>{class E{constructor(){this._stylesSet=new Set}addStyles(S){const K=new Set;S.forEach(re=>{this._stylesSet.has(re)||(this._stylesSet.add(re),K.add(re))}),this.onStylesAdded(K)}onStylesAdded(S){}getAllStyles(){return Array.from(this._stylesSet)}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})(),mt=(()=>{class E extends be{constructor(S){super(),this._doc=S,this._hostNodes=new Map,this._hostNodes.set(S.head,[])}_addStylesToHost(S,K,re){S.forEach(Ve=>{const vt=this._doc.createElement("style");vt.textContent=Ve,re.push(K.appendChild(vt))})}addHost(S){const K=[];this._addStylesToHost(this._stylesSet,S,K),this._hostNodes.set(S,K)}removeHost(S){const K=this._hostNodes.get(S);K&&K.forEach(Mt),this._hostNodes.delete(S)}onStylesAdded(S){this._hostNodes.forEach((K,re)=>{this._addStylesToHost(S,re,K)})}ngOnDestroy(){this._hostNodes.forEach(S=>S.forEach(Mt))}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(f.K0))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();function Mt(E){(0,f.q)().remove(E)}const Pt={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},st=/%COMP%/g;function it(E,v,S){for(let K=0;K<v.length;K++){let re=v[K];Array.isArray(re)?it(E,re,S):(re=re.replace(st,E),S.push(re))}return S}function xe(E){return v=>{if("__ngUnwrap__"===v)return E;!1===E(v)&&(v.preventDefault(),v.returnValue=!1)}}let Qe=(()=>{class E{constructor(S,K,re){this.eventManager=S,this.sharedStylesHost=K,this.appId=re,this.rendererByCompId=new Map,this.defaultRenderer=new Ne(S)}createRenderer(S,K){if(!S||!K)return this.defaultRenderer;switch(K.encapsulation){case T.ifc.Emulated:{let re=this.rendererByCompId.get(K.id);return re||(re=new ut(this.eventManager,this.sharedStylesHost,K,this.appId),this.rendererByCompId.set(K.id,re)),re.applyToHost(S),re}case 1:case T.ifc.ShadowDom:return new nt(this.eventManager,this.sharedStylesHost,S,K);default:if(!this.rendererByCompId.has(K.id)){const re=it(K.id,K.styles,[]);this.sharedStylesHost.addStyles(re),this.rendererByCompId.set(K.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(dt),T.LFG(mt),T.LFG(T.AFp))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();class Ne{constructor(v){this.eventManager=v,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(v,S){return S?document.createElementNS(Pt[S]||S,v):document.createElement(v)}createComment(v){return document.createComment(v)}createText(v){return document.createTextNode(v)}appendChild(v,S){v.appendChild(S)}insertBefore(v,S,K){v&&v.insertBefore(S,K)}removeChild(v,S){v&&v.removeChild(S)}selectRootElement(v,S){let K="string"==typeof v?document.querySelector(v):v;if(!K)throw new Error(`The selector "${v}" did not match any elements`);return S||(K.textContent=""),K}parentNode(v){return v.parentNode}nextSibling(v){return v.nextSibling}setAttribute(v,S,K,re){if(re){S=re+":"+S;const Ve=Pt[re];Ve?v.setAttributeNS(Ve,S,K):v.setAttribute(S,K)}else v.setAttribute(S,K)}removeAttribute(v,S,K){if(K){const re=Pt[K];re?v.removeAttributeNS(re,S):v.removeAttribute(`${K}:${S}`)}else v.removeAttribute(S)}addClass(v,S){v.classList.add(S)}removeClass(v,S){v.classList.remove(S)}setStyle(v,S,K,re){re&(T.JOm.DashCase|T.JOm.Important)?v.style.setProperty(S,K,re&T.JOm.Important?"important":""):v.style[S]=K}removeStyle(v,S,K){K&T.JOm.DashCase?v.style.removeProperty(S):v.style[S]=""}setProperty(v,S,K){v[S]=K}setValue(v,S){v.nodeValue=S}listen(v,S,K){return"string"==typeof v?this.eventManager.addGlobalEventListener(v,S,xe(K)):this.eventManager.addEventListener(v,S,xe(K))}}class ut extends Ne{constructor(v,S,K,re){super(v),this.component=K;const Ve=it(re+"-"+K.id,K.styles,[]);S.addStyles(Ve),this.contentAttr=function Lt(E){return"_ngcontent-%COMP%".replace(st,E)}(re+"-"+K.id),this.hostAttr=function Ke(E){return"_nghost-%COMP%".replace(st,E)}(re+"-"+K.id)}applyToHost(v){super.setAttribute(v,this.hostAttr,"")}createElement(v,S){const K=super.createElement(v,S);return super.setAttribute(K,this.contentAttr,""),K}}class nt extends Ne{constructor(v,S,K,re){super(v),this.sharedStylesHost=S,this.hostEl=K,this.shadowRoot=K.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Ve=it(re.id,re.styles,[]);for(let vt=0;vt<Ve.length;vt++){const qt=document.createElement("style");qt.textContent=Ve[vt],this.shadowRoot.appendChild(qt)}}nodeOrShadowRoot(v){return v===this.hostEl?this.shadowRoot:v}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(v,S){return super.appendChild(this.nodeOrShadowRoot(v),S)}insertBefore(v,S,K){return super.insertBefore(this.nodeOrShadowRoot(v),S,K)}removeChild(v,S){return super.removeChild(this.nodeOrShadowRoot(v),S)}parentNode(v){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(v)))}}let Ce=(()=>{class E extends Ct{constructor(S){super(S)}supports(S){return!0}addEventListener(S,K,re){return S.addEventListener(K,re,!1),()=>this.removeEventListener(S,K,re)}removeEventListener(S,K,re){return S.removeEventListener(K,re)}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(f.K0))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();const $t=["alt","control","meta","shift"],Rn={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},sn={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},un={alt:E=>E.altKey,control:E=>E.ctrlKey,meta:E=>E.metaKey,shift:E=>E.shiftKey};let St=(()=>{class E extends Ct{constructor(S){super(S)}supports(S){return null!=E.parseEventName(S)}addEventListener(S,K,re){const Ve=E.parseEventName(K),vt=E.eventCallback(Ve.fullKey,re,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,f.q)().onAndCancel(S,Ve.domEventName,vt))}static parseEventName(S){const K=S.toLowerCase().split("."),re=K.shift();if(0===K.length||"keydown"!==re&&"keyup"!==re)return null;const Ve=E._normalizeKey(K.pop());let vt="";if($t.forEach(cn=>{const ar=K.indexOf(cn);ar>-1&&(K.splice(ar,1),vt+=cn+".")}),vt+=Ve,0!=K.length||0===Ve.length)return null;const qt={};return qt.domEventName=re,qt.fullKey=vt,qt}static getEventFullKey(S){let K="",re=function Yt(E){let v=E.key;if(null==v){if(v=E.keyIdentifier,null==v)return"Unidentified";v.startsWith("U+")&&(v=String.fromCharCode(parseInt(v.substring(2),16)),3===E.location&&sn.hasOwnProperty(v)&&(v=sn[v]))}return Rn[v]||v}(S);return re=re.toLowerCase()," "===re?re="space":"."===re&&(re="dot"),$t.forEach(Ve=>{Ve!=re&&un[Ve](S)&&(K+=Ve+".")}),K+=re,K}static eventCallback(S,K,re){return Ve=>{E.getEventFullKey(Ve)===S&&re.runGuarded(()=>K(Ve))}}static _normalizeKey(S){return"esc"===S?"escape":S}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(f.K0))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();const Qn=(0,T.eFA)(T._c5,"browser",[{provide:T.Lbi,useValue:f.bD},{provide:T.g9A,useValue:function Kt(){Z.makeCurrent(),De.init()},multi:!0},{provide:f.K0,useFactory:function Cn(){return(0,T.RDi)(document),document},deps:[]}]),zn=[{provide:T.zSh,useValue:"root"},{provide:T.qLn,useFactory:function gn(){return new T.qLn},deps:[]},{provide:at,useClass:Ce,multi:!0,deps:[f.K0,T.R0b,T.Lbi]},{provide:at,useClass:St,multi:!0,deps:[f.K0]},{provide:Qe,useClass:Qe,deps:[dt,mt,T.AFp]},{provide:T.FYo,useExisting:Qe},{provide:be,useExisting:mt},{provide:mt,useClass:mt,deps:[f.K0]},{provide:T.dDg,useClass:T.dDg,deps:[T.R0b]},{provide:dt,useClass:dt,deps:[at,T.R0b]},{provide:f.JF,useClass:ot,deps:[]}];let xn=(()=>{class E{constructor(S){if(S)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(S){return{ngModule:E,providers:[{provide:T.AFp,useValue:S.appId},{provide:He,useExisting:T.AFp},ve]}}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(E,12))},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:zn,imports:[f.ez,T.hGG]}),E})(),Rt=(()=>{class E{constructor(S){this._doc=S}getTitle(){return this._doc.title}setTitle(S){this._doc.title=S||""}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(f.K0))},E.\u0275prov=T.Yz7({token:E,factory:function(S){let K=null;return K=S?new S:function It(){return new Rt((0,T.LFG)(f.K0))}(),K},providedIn:"root"}),E})();"undefined"!=typeof window&&window;var ye=N(5839);const lt=[{path:"",redirectTo:"all-posts",pathMatch:"full"},{path:"items",loadChildren:()=>Promise.resolve().then(N.bind(N,2029)).then(E=>E.ItemsModule)},{path:"auth",loadChildren:()=>Promise.resolve().then(N.bind(N,1674)).then(E=>E.AuthModule)}];let yt=(()=>{class E{}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({imports:[[ye.Bz.forRoot(lt)],ye.Bz]}),E})();var Qt=N(8386);function bn(E,v){if(1&E){const S=T.EpF();T.TgZ(0,"a",8),T.NdJ("click",function(){return T.CHM(S),T.oxw().userService.logout()}),T._uU(1,"Logout"),T.qZA()}}function fn(E,v){1&E&&(T.TgZ(0,"a",9),T._uU(1,"Login"),T.qZA())}function On(E,v){1&E&&(T.TgZ(0,"a",10),T._uU(1,"Register"),T.qZA())}function mr(E,v){1&E&&(T.TgZ(0,"a",11),T._uU(1,"Your Profile"),T.qZA())}function Rr(E,v){1&E&&(T.TgZ(0,"a",12),T._uU(1,"Create Post"),T.qZA())}let or=(()=>{class E{constructor(S){this.userService=S}ngOnInit(){}}return E.\u0275fac=function(S){return new(S||E)(T.Y36(Qt.K))},E.\u0275cmp=T.Xpm({type:E,selectors:[["app-header"]],decls:21,vars:5,consts:[["routerLink","/search"],[1,"fa-solid","fa-magnifying-glass"],[3,"click",4,"ngIf"],["routerLink","/login",4,"ngIf"],["routerLink","/register",4,"ngIf"],["routerLink","/profile",4,"ngIf"],["routerLink","/create",4,"ngIf"],["routerLink","/all-posts"],[3,"click"],["routerLink","/login"],["routerLink","/register"],["routerLink","/profile"],["routerLink","/create"]],template:function(S,K){1&S&&(T.TgZ(0,"header")(1,"h1"),T._uU(2,"Sport & Show Forum"),T.qZA(),T.TgZ(3,"nav")(4,"ul")(5,"li")(6,"a",0),T._UZ(7,"i",1),T.qZA()(),T.TgZ(8,"li"),T.YNc(9,bn,2,0,"a",2),T.qZA(),T.TgZ(10,"li"),T.YNc(11,fn,2,0,"a",3),T.qZA(),T.TgZ(12,"li"),T.YNc(13,On,2,0,"a",4),T.qZA(),T.TgZ(14,"li"),T.YNc(15,mr,2,0,"a",5),T.qZA(),T.TgZ(16,"li"),T.YNc(17,Rr,2,0,"a",6),T.qZA(),T.TgZ(18,"li")(19,"a",7),T._uU(20,"Home"),T.qZA()()()()()),2&S&&(T.xp6(9),T.Q6J("ngIf",K.userService.isLoggedIn),T.xp6(2),T.Q6J("ngIf",!K.userService.isLoggedIn),T.xp6(2),T.Q6J("ngIf",!K.userService.isLoggedIn),T.xp6(2),T.Q6J("ngIf",K.userService.isLoggedIn),T.xp6(2),T.Q6J("ngIf",K.userService.isLoggedIn))},directives:[ye.yS,f.O5],styles:["header[_ngcontent-%COMP%]{display:block;width:100%;margin:-10px;padding-top:1px;background-color:#128c22;padding-bottom:10px;padding-right:20px}h1[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-family:Arial,Helvetica,sans-serif}nav[_ngcontent-%COMP%]{position:relative;bottom:50px;margin:-10px;padding-top:0;background-color:#128d22}ul[_ngcontent-%COMP%]{list-style-type:none}li[_ngcontent-%COMP%]{float:right}li[_ngcontent-%COMP%]   a[_ngcontent-%COMP%]{float:left;display:flex;color:#fff;padding:14px 16px;text-decoration:none}a[_ngcontent-%COMP%]{font-family:Arial,Helvetica,sans-serif}"]}),E})(),$e=(()=>{class E{constructor(){}ngOnInit(){}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275cmp=T.Xpm({type:E,selectors:[["app-footer"]],decls:3,vars:0,template:function(S,K){1&S&&(T.TgZ(0,"footer")(1,"h3"),T._uU(2,'This forum is my project for the "Angular" course at SoftUni.'),T.qZA()())},styles:["footer[_ngcontent-%COMP%]{bottom:0;color:#707070;height:50px;left:0;position:fixed;font-size:small;width:100%;text-align:center;background-color:#128d22}h3[_ngcontent-%COMP%]{color:#fff;font-weight:700;font-family:Arial,Helvetica,sans-serif;text-align:center}"]}),E})(),pt=(()=>{class E{constructor(){this.title="sport-show-forum",this.posts=[]}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275cmp=T.Xpm({type:E,selectors:[["app-root"]],decls:3,vars:0,template:function(S,K){1&S&&T._UZ(0,"app-header")(1,"router-outlet")(2,"app-footer")},directives:[or,ye.lC,$e],styles:[""]}),E})();var Ht=N(3692);const _n_firebase={projectId:"sport-show-forum",appId:"1:701281477970:web:5698956cf716dca70dc68b",databaseURL:"https://sport-show-forum-default-rtdb.europe-west1.firebasedatabase.app",storageBucket:"sport-show-forum.appspot.com",locationId:"europe-west",apiKey:"AIzaSyD4Lz3F7WNiHYvx7w_r1VjAZhbZZhXkum4",authDomain:"sport-show-forum.firebaseapp.com",messagingSenderId:"701281477970",measurementId:"G-7JWST5MQQY"};var Ut=N(4027),_e=N(9646),Je=N(9300),xt=N(3900),mn=N(4004),yr=N(8306),Wn=N(8421),kn=N(7579),ur=N(4482),jr=N(5403);var nr=N(5577),yi=N(1884),qi=N(8675),ys=N(1520),er=N(5867),$n=N(655),Ln=N(6148),_r=N(3999);class Oe{constructor(v){return v}}const Le="analytics",zt=Ut.nk.async,en=(0,Ut.u3)(Ln.IH,!0),vr=(0,Ut.u3)(Ln.Kz,!0),vi=(0,Ut.u3)(Ln.Iv,!0);let ni=(()=>{class E{constructor(S,K,re){let Ve;this.disposables=[],(0,er.KN)("angularfire",Ut.q4.full,"user-tracking"),this.initialized=K.runOutsideAngular(()=>new Promise(vt=>{Ve=vt})),zt().then(()=>{const vt=re.get(Oe);vt?this.disposables=[(0,_r.fD)(S).subscribe(qt=>{vi(vt,null==qt?void 0:qt.uid),Ve()})]:Ve()})}ngOnDestroy(){this.disposables.forEach(S=>S.unsubscribe())}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(_r.gx),T.LFG(T.R0b),T.LFG(T.zs3))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();const xo="firebase_screen_id",Mo="outlet",Xi="screen_class",di="screen_name";let $s=Math.floor(Math.random()*(Math.pow(2,32)-1))-Math.pow(2,31);const ai={},Ii=E=>{const v=[E[Xi],E[Mo]].join("#");if(ai.hasOwnProperty(v))return ai[v];{const S=$s++;return ai[v]=S,S}};let Ci=(()=>{class E{constructor(S,K,re,Ve,vt,qt){(0,er.KN)("angularfire",Ut.q4.full,"screen-tracking"),zt().then(()=>{const cn=qt.get(Oe);!S||!cn||Ve.runOutsideAngular(()=>{this.disposable=((E,v,S)=>E.events.pipe((0,Je.h)(re=>re instanceof ye.jw)).pipe((0,xt.w)(re=>{var Ve;const qt=(null===(Ve=E.parseUrl(E.url.replace(/(?:\().+(?:\))/g,Zr=>Zr.replace("://",":///"))).root.children[re.snapshot.outlet])||void 0===Ve?void 0:Ve.toString())||"",cn=E.routerState.root.children.map(Zr=>Zr).find(Zr=>Zr.outlet===re.snapshot.outlet);if(!cn)return(0,_e.of)(null);let ar=cn;for(;ar.firstChild;)ar=ar.firstChild;const pr=ar.pathFromRoot.map(Zr=>{var Br;return null===(Br=Zr.routeConfig)||void 0===Br?void 0:Br.path}).filter(Zr=>Zr).join("/")||"/",qr={[di]:pr,page_path:`/${qt}`,firebase_event_origin:"auto",firebase_screen:pr,[Mo]:re.snapshot.outlet};v&&(qr.page_title=v.getTitle());let Mr=cn.component;if(Mr){if(Mr===ye.fw){let Zr=re.snapshot;for(;Zr.firstChild;)Zr=Zr.firstChild;Mr=Zr.component}}else Mr=re.snapshot.component;if("string"==typeof Mr)return(0,_e.of)(Object.assign(Object.assign({},qr),{[Xi]:Mr}));if(Mr){const Zr=S.resolveComponentFactory(Mr);return(0,_e.of)(Object.assign(Object.assign({},qr),{[Xi]:Zr.selector}))}return(0,_e.of)(null)}),(0,Je.h)(re=>!!re),(0,mn.U)(re=>Object.assign({firebase_screen_class:re[Xi],[xo]:Ii(re)},re)),function Wr(E,v,S,K){return(0,ur.e)((re,Ve)=>{let vt;v&&"function"!=typeof v?({duration:S,element:vt,connector:K}=v):vt=v;const qt=new Map,cn=Br=>{qt.forEach(Br),Br(Ve)},ar=Br=>cn(Fi=>Fi.error(Br));let pr=0,qr=!1;const Mr=new jr.Q(Ve,Br=>{try{const Fi=E(Br);let Yr=qt.get(Fi);if(!Yr){qt.set(Fi,Yr=K?K():new kn.x);const To=function Zr(Br,Fi){const Yr=new yr.y(To=>{pr++;const Do=Fi.subscribe(To);return()=>{Do.unsubscribe(),0==--pr&&qr&&Mr.unsubscribe()}});return Yr.key=Br,Yr}(Fi,Yr);if(Ve.next(To),S){const Do=(0,jr.x)(Yr,()=>{Yr.complete(),null==Do||Do.unsubscribe()},void 0,void 0,()=>qt.delete(Fi));Mr.add((0,Wn.Xf)(S(To)).subscribe(Do))}}Yr.next(vt?vt(Br):Br)}catch(Fi){ar(Fi)}},()=>cn(Br=>Br.complete()),ar,()=>qt.clear(),()=>(qr=!0,0===pr));re.subscribe(Mr)})}(re=>re[Mo]),(0,nr.z)(re=>re.pipe((0,yi.x)((Ve,vt)=>JSON.stringify(Ve)===JSON.stringify(vt)),(0,qi.O)(void 0),(0,ys.G)(),(0,mn.U)(([Ve,vt])=>Ve?Object.assign({firebase_previous_class:Ve[Xi],firebase_previous_screen:Ve[di],firebase_previous_id:Ve[xo]},vt):vt)))))(S,K,re).pipe((0,xt.w)(ar=>(0,$n.mG)(this,void 0,void 0,function*(){return vt&&(yield vt.initialized),vr(cn,"screen_view",ar)}))).subscribe()})})}ngOnDestroy(){this.disposable&&this.disposable.unsubscribe()}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(ye.F0,8),T.LFG(Rt,8),T.LFG(T._Vd),T.LFG(T.R0b),T.LFG(ni,8),T.LFG(T.zs3))},E.\u0275prov=T.Yz7({token:E,factory:E.\u0275fac}),E})();const Ei=new T.OlP("angularfire2.analytics-instances");function bi(E){return(v,S)=>{if(!Ut.nk.sync())return null;const K=v.runOutsideAngular(()=>E(S));return new Oe(K)}}const Hs={provide:class _t{constructor(){return(0,Ut.vb)(Le)}},deps:[[new T.FiY,Ei]]},Ti={provide:Oe,useFactory:function cs(E,v){if(!Ut.nk.sync())return null;const S=(0,Ut.JM)(Le,E,v);return S&&new Oe(S)},deps:[[new T.FiY,Ei],Ht.Ot]};let yo=(()=>{class E{constructor(S,K){(0,er.KN)("angularfire",Ut.q4.full,"analytics")}}return E.\u0275fac=function(S){return new(S||E)(T.LFG(Ci,8),T.LFG(ni,8))},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[Ti,Hs,{provide:T.ip1,useValue:Ut.nk.async,multi:!0}]}),E})();function Di(E,...v){return{ngModule:yo,providers:[{provide:Ei,useFactory:bi(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,...v]}]}}var Lr=N(7128),ts=N(1627);class io{constructor(v){return v}}const Gr="database",vo=new T.OlP("angularfire2.database-instances");function Ko(E){return(v,S)=>{const K=v.runOutsideAngular(()=>E(S));return new io(K)}}const Po={provide:class ds{constructor(){return(0,Ut.vb)(Gr)}},deps:[[new T.FiY,vo]]},Zi={provide:io,useFactory:function xr(E,v){const S=(0,Ut.JM)(Gr,E,v);return S&&new io(S)},deps:[[new T.FiY,vo],Ht.Ot]};let Ws=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"rtdb")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[Zi,Po]}),E})();function hs(E,...v){return{ngModule:Ws,providers:[{provide:vo,useFactory:Ko(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,[new T.FiY,_r.dh],[new T.FiY,Lr.nm],...v]}]}}const zr=(0,Ut.u3)(ts.N8,!0);var Zo=N(3266),Yo=N(5861),Si=N(9681),ui=N(2090),Oo=N(4859);const Yi="functions";class Xo{constructor(v,S,K){this.auth=null,this.messaging=null,this.appCheck=null,this.auth=v.getImmediate({optional:!0}),this.messaging=S.getImmediate({optional:!0}),this.auth||v.get().then(re=>this.auth=re,()=>{}),this.messaging||S.get().then(re=>this.messaging=re,()=>{}),this.appCheck||K.get().then(re=>this.appCheck=re,()=>{})}getAuthToken(){var v=this;return(0,Yo.Z)(function*(){if(v.auth)try{const S=yield v.auth.getToken();return null==S?void 0:S.accessToken}catch(S){return}})()}getMessagingToken(){var v=this;return(0,Yo.Z)(function*(){if(v.messaging&&"Notification"in self&&"granted"===Notification.permission)try{return yield v.messaging.getToken()}catch(S){return}})()}getAppCheckToken(){var v=this;return(0,Yo.Z)(function*(){if(v.appCheck){const S=yield v.appCheck.getToken();return S.error?null:S.token}return null})()}getContext(){var v=this;return(0,Yo.Z)(function*(){return{authToken:yield v.getAuthToken(),messagingToken:yield v.getMessagingToken(),appCheckToken:yield v.getAppCheckToken()}})()}}const Au="us-central1";class Ks{constructor(v,S,K,re,Ve=Au,vt){this.app=v,this.fetchImpl=vt,this.emulatorOrigin=null,this.contextProvider=new Xo(S,K,re),this.cancelAllRequests=new Promise(qt=>{this.deleteService=()=>Promise.resolve(qt())});try{const qt=new URL(Ve);this.customDomain=qt.origin,this.region=Au}catch(qt){this.customDomain=null,this.region=Ve}}_delete(){return this.deleteService()}_url(v){const S=this.app.options.projectId;return null!==this.emulatorOrigin?`${this.emulatorOrigin}/${S}/${this.region}/${v}`:null!==this.customDomain?`${this.customDomain}/${v}`:`https://${this.region}-${S}.cloudfunctions.net/${v}`}}const Wi="@firebase/functions";function Su(E=(0,Si.getApp)(),v=Au){return(0,Si._getProvider)((0,ui.m9)(E),Yi).getImmediate({identifier:v})}!function gi(E,v){(0,Si._registerComponent)(new Oo.wA(Yi,(K,{instanceIdentifier:re})=>{const Ve=K.getProvider("app").getImmediate(),vt=K.getProvider("auth-internal"),qt=K.getProvider("messaging-internal"),cn=K.getProvider("app-check-internal");return new Ks(Ve,vt,qt,cn,re,E)},"PUBLIC").setMultipleInstances(!0)),(0,Si.registerVersion)(Wi,"0.7.10",v),(0,Si.registerVersion)(Wi,"0.7.10","esm2017")}(fetch.bind(self));class ps{constructor(v){return v}}const ri="functions",ka=new T.OlP("angularfire2.functions-instances");function on(E){return(v,S)=>{const K=v.runOutsideAngular(()=>E(S));return new ps(K)}}const Vi={provide:class Ns{constructor(){return(0,Ut.vb)(ri)}},deps:[[new T.FiY,ka]]},qs={provide:ps,useFactory:function bc(E,v){const S=(0,Ut.JM)(ri,E,v);return S&&new ps(S)},deps:[[new T.FiY,ka],Ht.Ot]};let Ju=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"fn")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[qs,Vi]}),E})();function In(E,...v){return{ngModule:Ju,providers:[{provide:ka,useFactory:on(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,[new T.FiY,_r.dh],[new T.FiY,Lr.nm],...v]}]}}const nn=(0,Ut.u3)(Su,!0);var Jt=N(2375);class ii{constructor(v){return v}}const ha="messaging",Fa=new T.OlP("angularfire2.messaging-instances");function La(E){return(v,S)=>{if(!Ut.n1.sync())return null;const K=v.runOutsideAngular(()=>E(S));return new ii(K)}}const du={provide:class ta{constructor(){return(0,Ut.vb)(ha)}},deps:[[new T.FiY,Fa]]},Io={provide:ii,useFactory:function cu(E,v){if(!Ut.n1.sync())return null;const S=(0,Ut.JM)(ha,E,v);return S&&new ii(S)},deps:[[new T.FiY,Fa],Ht.Ot]};let fa=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"fcm")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[Io,du,{provide:T.ip1,useValue:Ut.n1.async,multi:!0}]}),E})();function gs(E,...v){return{ngModule:fa,providers:[{provide:Fa,useFactory:La(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,...v]}]}}const b=(0,Ut.u3)(Jt.KL,!0);var W=N(1877);N(2833);const Te="@firebase/performance",Ue="0.5.7",jn="FB-PERF-TRACE-MEASURE",Ua="@firebase/performance/config",ms="@firebase/performance/configexpire",ks="Performance",Gi=new ui.LL("performance",ks,{"trace started":"Trace {$traceName} was started before.","trace stopped":"Trace {$traceName} is not running.","nonpositive trace startTime":"Trace {$traceName} startTime should be positive.","nonpositive trace duration":"Trace {$traceName} duration should be positive.","no window":"Window is not available.","no app id":"App id is not available.","no project id":"Project id is not available.","no api key":"Api key is not available.","invalid cc log":"Attempted to queue invalid cc event","FB not default":"Performance can only start when Firebase app instance is the default one.","RC response not ok":"RC response is not ok","invalid attribute name":"Attribute name {$attributeName} is invalid.","invalid attribute value":"Attribute value {$attributeValue} is invalid.","invalid custom metric name":"Custom metric name {$customMetricName} is invalid","invalid String merger input":"Input for String merger is invalid, contact support team to resolve.","already initialized":"initializePerformance() has already been called with different options. To avoid this error, call initializePerformance() with the same options as when it was originally called, or call getPerformance() to return the already initialized instance."}),Pi=new W.Yd(ks);let Yl,na,Ql,Zs;Pi.logLevel=W.in.INFO;class wr{constructor(v){if(this.window=v,!v)throw Gi.create("no window");this.performance=v.performance,this.PerformanceObserver=v.PerformanceObserver,this.windowLocation=v.location,this.navigator=v.navigator,this.document=v.document,this.navigator&&this.navigator.cookieEnabled&&(this.localStorage=v.localStorage),v.perfMetrics&&v.perfMetrics.onFirstInputDelay&&(this.onFirstInputDelay=v.perfMetrics.onFirstInputDelay)}getUrl(){return this.windowLocation.href.split("?")[0]}mark(v){!this.performance||!this.performance.mark||this.performance.mark(v)}measure(v,S,K){!this.performance||!this.performance.measure||this.performance.measure(v,S,K)}getEntriesByType(v){return this.performance&&this.performance.getEntriesByType?this.performance.getEntriesByType(v):[]}getEntriesByName(v){return this.performance&&this.performance.getEntriesByName?this.performance.getEntriesByName(v):[]}getTimeOrigin(){return this.performance&&(this.performance.timeOrigin||this.performance.timing.navigationStart)}requiredApisAvailable(){return fetch&&Promise&&(0,ui.zI)()?!!(0,ui.hl)()||(Pi.info("IndexedDB is not supported by current browswer"),!1):(Pi.info("Firebase Performance cannot start if browser does not support fetch and Promise or cookie is disabled."),!1)}setupObserver(v,S){this.PerformanceObserver&&new this.PerformanceObserver(re=>{for(const Ve of re.getEntries())S(Ve)}).observe({entryTypes:[v]})}static getInstance(){return void 0===Yl&&(Yl=new wr(na)),Yl}}function Jl(){return Ql}function pa(E,v){const S=E.length-v.length;if(S<0||S>1)throw Gi.create("invalid String merger input");const K=[];for(let re=0;re<E.length;re++)K.push(E.charAt(re)),v.length>re&&K.push(v.charAt(re));return K.join("")}class Bi{constructor(){this.instrumentationEnabled=!0,this.dataCollectionEnabled=!0,this.loggingEnabled=!1,this.tracesSamplingRate=1,this.networkRequestsSamplingRate=1,this.logEndPointUrl="https://firebaselogging.googleapis.com/v0cc/log?format=json_proto",this.flTransportEndpointUrl=pa("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),this.transportKey=pa("AzSC8r6ReiGqFMyfvgow","Iayx0u-XT3vksVM-pIV"),this.logSource=462,this.logTraceAfterSampling=!1,this.logNetworkAfterSampling=!1,this.configTimeToLive=12}getFlTransportFullUrl(){return this.flTransportEndpointUrl.concat("?key=",this.transportKey)}static getInstance(){return void 0===Zs&&(Zs=new Bi),Zs}}var Fs=(()=>{return(E=Fs||(Fs={}))[E.UNKNOWN=0]="UNKNOWN",E[E.VISIBLE=1]="VISIBLE",E[E.HIDDEN=2]="HIDDEN",Fs;var E})();const ji=["firebase_","google_","ga_"],_s=new RegExp("^[a-zA-Z]\\w*$");function lo(){const E=wr.getInstance().navigator;return"serviceWorker"in E?E.serviceWorker.controller?2:3:1}function Ni(){switch(wr.getInstance().document.visibilityState){case"visible":return Fs.VISIBLE;case"hidden":return Fs.HIDDEN;default:return Fs.UNKNOWN}}function Ys(){const v=wr.getInstance().navigator.connection;switch(v&&v.effectiveType){case"slow-2g":return 1;case"2g":return 2;case"3g":return 3;case"4g":return 4;default:return 0}}function ws(E){var v;const S=null===(v=E.options)||void 0===v?void 0:v.appId;if(!S)throw Gi.create("no app id");return S}const Ls="Could not fetch config, will use default configs";function ga(E){if(!E)return E;const v=Bi.getInstance(),S=E.entries||{};return v.loggingEnabled=void 0===S.fpr_enabled||"true"===String(S.fpr_enabled),S.fpr_log_source&&(v.logSource=Number(S.fpr_log_source)),S.fpr_log_endpoint_url&&(v.logEndPointUrl=S.fpr_log_endpoint_url),S.fpr_log_transport_key&&(v.transportKey=S.fpr_log_transport_key),void 0!==S.fpr_vc_network_request_sampling_rate&&(v.networkRequestsSamplingRate=Number(S.fpr_vc_network_request_sampling_rate)),void 0!==S.fpr_vc_trace_sampling_rate&&(v.tracesSamplingRate=Number(S.fpr_vc_trace_sampling_rate)),v.logTraceAfterSampling=pu(v.tracesSamplingRate),v.logNetworkAfterSampling=pu(v.networkRequestsSamplingRate),E}function pu(E){return Math.random()<=E}let $a,co=1;function Ru(E){return co=2,$a=$a||function ra(E){return function ma(){const E=wr.getInstance().document;return new Promise(v=>{if(E&&"complete"!==E.readyState){const S=()=>{"complete"===E.readyState&&(E.removeEventListener("readystatechange",S),v())};E.addEventListener("readystatechange",S)}else v()})}().then(()=>function vn(E){const v=E.getId();return v.then(S=>{Ql=S}),v}(E.installations)).then(v=>function si(E,v){const S=function Is(){const E=wr.getInstance().localStorage;if(!E)return;const v=E.getItem(ms);if(!v||!function ec(E){return Number(E)>Date.now()}(v))return;const S=E.getItem(Ua);if(S)try{return JSON.parse(S)}catch(K){return}}();return S?(ga(S),Promise.resolve()):function Xl(E,v){return function sd(E){const v=E.getToken();return v.then(S=>{}),v}(E.installations).then(S=>{const K=function Mu(E){var v;const S=null===(v=E.options)||void 0===v?void 0:v.projectId;if(!S)throw Gi.create("no project id");return S}(E.app),re=function Ml(E){var v;const S=null===(v=E.options)||void 0===v?void 0:v.apiKey;if(!S)throw Gi.create("no api key");return S}(E.app),vt=new Request(`https://firebaseremoteconfig.googleapis.com/v1/projects/${K}/namespaces/fireperf:fetch?key=${re}`,{method:"POST",headers:{Authorization:`FIREBASE_INSTALLATIONS_AUTH ${S}`},body:JSON.stringify({app_instance_id:v,app_instance_id_token:S,app_id:ws(E.app),app_version:"0.5.7",sdk_version:"0.0.1"})});return fetch(vt).then(qt=>{if(qt.ok)return qt.json();throw Gi.create("RC response not ok")})}).catch(()=>{Pi.info(Ls)})}(E,v).then(ga).then(K=>function tl(E){const v=wr.getInstance().localStorage;!E||!v||(v.setItem(Ua,JSON.stringify(E)),v.setItem(ms,String(Date.now()+60*Bi.getInstance().configTimeToLive*60*1e3)))}(K),()=>{})}(E,v)).then(()=>ia(),()=>ia())}(E),$a}function ia(){co=3}let ya,Wa=3,Ga=[],Pu=!1;function sa(E){setTimeout(()=>{if(0!==Wa){if(!Ga.length)return sa(1e4);!function Nu(){const E=Ga.splice(0,1e3),v=E.map(K=>({source_extension_json_proto3:K.message,event_time_ms:String(K.eventTime)}));(function ad(E,v){return function ci(E){const v=Bi.getInstance().getFlTransportFullUrl();return fetch(v,{method:"POST",body:JSON.stringify(E)})}(E).then(S=>(S.ok||Pi.info("Call to Firebase backend failed."),S.json())).then(S=>{const K=Number(S.nextRequestWaitMillis);let re=1e4;isNaN(K)||(re=Math.max(K,re));const Ve=S.logResponseDetails;Array.isArray(Ve)&&Ve.length>0&&"RETRY_REQUEST_LATER"===Ve[0].responseAction&&(Ga=[...v,...Ga],Pi.info("Retry transport request later.")),Wa=3,sa(re)})})({request_time_ms:String(Date.now()),client_info:{client_type:1,js_client_info:{}},log_source:Bi.getInstance().logSource,log_event:v},E).catch(()=>{Ga=[...E,...Ga],Wa--,Pi.info(`Tries left: ${Wa}.`),sa(1e4)})}()}},E)}function Uo(E,v){ya||(ya=function ud(E){return(...v)=>{!function _a(E){if(!E.eventTime||!E.message)throw Gi.create("invalid cc log");Ga=[...Ga,E]}({message:E(...v),eventTime:Date.now()})}}(ho)),ya(E,v)}function Cs(E){const v=Bi.getInstance();!v.instrumentationEnabled&&E.isAuto||!v.dataCollectionEnabled&&!E.isAuto||!wr.getInstance().requiredApisAvailable()||E.isAuto&&Ni()!==Fs.VISIBLE||(function Rl(){return 3===co}()?gu(E):Ru(E.performanceController).then(()=>gu(E),()=>gu(E)))}function gu(E){if(!Jl())return;const v=Bi.getInstance();!v.loggingEnabled||!v.logTraceAfterSampling||setTimeout(()=>Uo(E,1),0)}function ho(E,v){return 0===v?function Bo(E){const v={url:E.url,http_method:E.httpMethod||0,http_response_code:200,response_payload_bytes:E.responsePayloadBytes,client_start_time_us:E.startTimeUs,time_to_response_initiated_us:E.timeToResponseInitiatedUs,time_to_response_completed_us:E.timeToResponseCompletedUs},S={application_info:va(E.performanceController.app),network_request_metric:v};return JSON.stringify(S)}(E):function Ou(E){const v={name:E.name,is_auto:E.isAuto,client_start_time_us:E.startTimeUs,duration_us:E.durationUs};0!==Object.keys(E.counters).length&&(v.counters=E.counters);const S=E.getAttributes();0!==Object.keys(S).length&&(v.custom_attributes=S);const K={application_info:va(E.performanceController.app),trace_metric:v};return JSON.stringify(K)}(E)}function va(E){return{google_app_id:ws(E),app_instance_id:Jl(),web_app_info:{sdk_version:"0.5.7",page_url:wr.getInstance().getUrl(),service_worker_status:lo(),visibility_state:Ni(),effective_connection_type:Ys()},application_process_state:0}}const bs=["_fp","_fcp","_fid"];class Ia{constructor(v,S,K=!1,re){this.performanceController=v,this.name=S,this.isAuto=K,this.state=1,this.customAttributes={},this.counters={},this.api=wr.getInstance(),this.randomId=Math.floor(1e6*Math.random()),this.isAuto||(this.traceStartMark=`FB-PERF-TRACE-START-${this.randomId}-${this.name}`,this.traceStopMark=`FB-PERF-TRACE-STOP-${this.randomId}-${this.name}`,this.traceMeasure=re||`${jn}-${this.randomId}-${this.name}`,re&&this.calculateTraceMetrics())}start(){if(1!==this.state)throw Gi.create("trace started",{traceName:this.name});this.api.mark(this.traceStartMark),this.state=2}stop(){if(2!==this.state)throw Gi.create("trace stopped",{traceName:this.name});this.state=3,this.api.mark(this.traceStopMark),this.api.measure(this.traceMeasure,this.traceStartMark,this.traceStopMark),this.calculateTraceMetrics(),Cs(this)}record(v,S,K){if(v<=0)throw Gi.create("nonpositive trace startTime",{traceName:this.name});if(S<=0)throw Gi.create("nonpositive trace duration",{traceName:this.name});if(this.durationUs=Math.floor(1e3*S),this.startTimeUs=Math.floor(1e3*v),K&&K.attributes&&(this.customAttributes=Object.assign({},K.attributes)),K&&K.metrics)for(const re of Object.keys(K.metrics))isNaN(Number(K.metrics[re]))||(this.counters[re]=Math.floor(Number(K.metrics[re])));Cs(this)}incrementMetric(v,S=1){this.putMetric(v,void 0===this.counters[v]?S:this.counters[v]+S)}putMetric(v,S){if(!function wa(E,v){return!(0===E.length||E.length>100)&&(v&&v.startsWith("_wt_")&&bs.indexOf(E)>-1||!E.startsWith("_"))}(v,this.name))throw Gi.create("invalid custom metric name",{customMetricName:v});this.counters[v]=function za(E){const v=Math.floor(E);return v<E&&Pi.info(`Metric value should be an Integer, setting the value as : ${v}.`),v}(null!=S?S:0)}getMetric(v){return this.counters[v]||0}putAttribute(v,S){const K=function el(E){return!(0===E.length||E.length>40||ji.some(S=>E.startsWith(S))||!E.match(_s))}(v),re=function hu(E){return 0!==E.length&&E.length<=100}(S);if(K&&re)this.customAttributes[v]=S;else{if(!K)throw Gi.create("invalid attribute name",{attributeName:v});if(!re)throw Gi.create("invalid attribute value",{attributeValue:S})}}getAttribute(v){return this.customAttributes[v]}removeAttribute(v){void 0!==this.customAttributes[v]&&delete this.customAttributes[v]}getAttributes(){return Object.assign({},this.customAttributes)}setStartTime(v){this.startTimeUs=v}setDuration(v){this.durationUs=v}calculateTraceMetrics(){const v=this.api.getEntriesByName(this.traceMeasure),S=v&&v[0];S&&(this.durationUs=Math.floor(1e3*S.duration),this.startTimeUs=Math.floor(1e3*(S.startTime+this.api.getTimeOrigin())))}static createOobTrace(v,S,K,re){const Ve=wr.getInstance().getUrl();if(!Ve)return;const vt=new Ia(v,"_wt_"+Ve,!0),qt=Math.floor(1e3*wr.getInstance().getTimeOrigin());if(vt.setStartTime(qt),S&&S[0]&&(vt.setDuration(Math.floor(1e3*S[0].duration)),vt.putMetric("domInteractive",Math.floor(1e3*S[0].domInteractive)),vt.putMetric("domContentLoadedEventEnd",Math.floor(1e3*S[0].domContentLoadedEventEnd)),vt.putMetric("loadEventEnd",Math.floor(1e3*S[0].loadEventEnd))),K){const pr=K.find(Mr=>"first-paint"===Mr.name);pr&&pr.startTime&&vt.putMetric("_fp",Math.floor(1e3*pr.startTime));const qr=K.find(Mr=>"first-contentful-paint"===Mr.name);qr&&qr.startTime&&vt.putMetric("_fcp",Math.floor(1e3*qr.startTime)),re&&vt.putMetric("_fid",Math.floor(1e3*re))}Cs(vt)}static createUserTimingTrace(v,S){Cs(new Ia(v,S,!1,S))}}function Fu(E,v){const S=v;if(!S||void 0===S.responseStart)return;const K=wr.getInstance().getTimeOrigin(),re=Math.floor(1e3*(S.startTime+K)),Ve=S.responseStart?Math.floor(1e3*(S.responseStart-S.startTime)):void 0,vt=Math.floor(1e3*(S.responseEnd-S.startTime));!function Vo(E){const v=Bi.getInstance();if(!v.instrumentationEnabled)return;const S=E.url,K=v.logEndPointUrl.split("?")[0],re=v.flTransportEndpointUrl.split("?")[0];S===K||S===re||!v.loggingEnabled||!v.logNetworkAfterSampling||setTimeout(()=>Uo(E,0),0)}({performanceController:E,url:S.name&&S.name.split("?")[0],responsePayloadBytes:S.transferSize,startTimeUs:re,timeToResponseInitiatedUs:Ve,timeToResponseCompletedUs:vt})}function Ca(E){!Jl()||(setTimeout(()=>function ld(E){const v=wr.getInstance(),S=v.getEntriesByType("navigation"),K=v.getEntriesByType("paint");if(v.onFirstInputDelay){let re=setTimeout(()=>{Ia.createOobTrace(E,S,K),re=void 0},5e3);v.onFirstInputDelay(Ve=>{re&&(clearTimeout(re),Ia.createOobTrace(E,S,K,Ve))})}else Ia.createOobTrace(E,S,K)}(E),0),setTimeout(()=>function Lu(E){const v=wr.getInstance(),S=v.getEntriesByType("resource");for(const K of S)Fu(E,K);v.setupObserver("resource",K=>Fu(E,K))}(E),0),setTimeout(()=>function Uu(E){const v=wr.getInstance(),S=v.getEntriesByType("measure");for(const K of S)mu(E,K);v.setupObserver("measure",K=>mu(E,K))}(E),0))}function mu(E,v){const S=v.name;S.substring(0,jn.length)!==jn&&Ia.createUserTimingTrace(E,S)}class oa{constructor(v,S){this.app=v,this.installations=S,this.initialized=!1}_init(v){this.initialized||(void 0!==(null==v?void 0:v.dataCollectionEnabled)&&(this.dataCollectionEnabled=v.dataCollectionEnabled),void 0!==(null==v?void 0:v.instrumentationEnabled)&&(this.instrumentationEnabled=v.instrumentationEnabled),wr.getInstance().requiredApisAvailable()?(0,ui.eu)().then(S=>{S&&(function od(){Pu||(sa(5500),Pu=!0)}(),Ru(this).then(()=>Ca(this),()=>Ca(this)),this.initialized=!0)}).catch(S=>{Pi.info(`Environment doesn't support IndexedDB: ${S}`)}):Pi.info('Firebase Performance cannot start if the browser does not support "Fetch" and "Promise", or cookies are disabled.'))}set instrumentationEnabled(v){Bi.getInstance().instrumentationEnabled=v}get instrumentationEnabled(){return Bi.getInstance().instrumentationEnabled}set dataCollectionEnabled(v){Bi.getInstance().dataCollectionEnabled=v}get dataCollectionEnabled(){return Bi.getInstance().dataCollectionEnabled}}function cd(E=(0,Si.getApp)()){return E=(0,ui.m9)(E),(0,Si._getProvider)(E,"performance").getImmediate()}const Co=(E,{options:v})=>{const S=E.getProvider("app").getImmediate(),K=E.getProvider("installations-internal").getImmediate();if("[DEFAULT]"!==S.name)throw Gi.create("FB not default");if("undefined"==typeof window)throw Gi.create("no window");!function Va(E){na=E}(window);const re=new oa(S,K);return re._init(v),re};!function Us(){(0,Si._registerComponent)(new Oo.wA("performance",Co,"PUBLIC")),(0,Si.registerVersion)(Te,Ue),(0,Si.registerVersion)(Te,Ue,"esm2017")}();class Bu{constructor(v){return v}}const ss="performance",ba=new T.OlP("angularfire2.performance-instances");function os(E){return(v,S,K)=>{if(!(0,f.NF)(S))return null;const re=v.runOutsideAngular(()=>E(K));return new Bu(re)}}const tc={provide:class Ac{constructor(){return(0,Ut.vb)(ss)}},deps:[[new T.FiY,ba]]},Sc={provide:Bu,useFactory:function nl(E,v,S){if(!(0,f.NF)(S))return null;const K=(0,Ut.JM)(ss,E,v);return K&&new Bu(K)},deps:[[new T.FiY,ba],Ht.Ot,T.Lbi]};let $i=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"perf")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[Sc,tc]}),E})();function Pl(E,...v){return{ngModule:$i,providers:[{provide:ba,useFactory:os(E),multi:!0,deps:[T.R0b,T.Lbi,T.zs3,Ut.HU,Ht.z6,...v]}]}}const Ya=(0,Ut.u3)(cd,!0);var Qa=N(3226);class _u{constructor(v){return v}}const nc="remote-config",al=new T.OlP("angularfire2.remote-config-instances");function D(E){return(v,S)=>{if(!Ut._J.sync())return null;const K=v.runOutsideAngular(()=>E(S));return new _u(K)}}const g={provide:class rc{constructor(){return(0,Ut.vb)(nc)}},deps:[[new T.FiY,al]]},y={provide:_u,useFactory:function hd(E,v){if(!Ut._J.sync())return null;const S=(0,Ut.JM)(nc,E,v);return S&&new _u(S)},deps:[[new T.FiY,al],Ht.Ot]};let M=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"rc")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[y,g,{provide:T.ip1,useValue:Ut._J.async,multi:!0}]}),E})();function ee(E,...v){return{ngModule:M,providers:[{provide:al,useFactory:D(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,...v]}]}}const Vr=(0,Ut.u3)(Qa.sN,!0),Xa="firebasestorage.googleapis.com";class _i extends ui.ZR{constructor(v,S){super(Nl(v),`Firebase Storage: ${S} (${Nl(v)})`),this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,_i.prototype)}_codeEquals(v){return Nl(v)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(v){this.customData.serverResponse=v,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}function Nl(E){return"storage/"+E}function Ds(E){return new _i("invalid-argument",E)}function Wu(){return new _i("app-deleted","The Firebase app was deleted.")}class zi{constructor(v,S){this.bucket=v,this.path_=S}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const v=encodeURIComponent;return"/b/"+v(this.bucket)+"/o/"+v(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(v,S){let K;try{K=zi.makeFromUrl(v,S)}catch(re){return new zi(v,"")}if(""===K.path)return K;throw function vu(E){return new _i("invalid-default-bucket","Invalid default bucket '"+E+"'.")}(v)}static makeFromUrl(v,S){let K=null;const re="([A-Za-z0-9.\\-_]+)",qt=new RegExp("^gs://"+re+"(/(.*))?$","i");function ar(mo){mo.path_=decodeURIComponent(mo.path)}const qr=S.replace(/[.]/g,"\\."),go=[{regex:qt,indices:{bucket:1,path:3},postModify:function Ve(mo){"/"===mo.path.charAt(mo.path.length-1)&&(mo.path_=mo.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${qr}/v[A-Za-z0-9_]+/b/${re}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:ar},{regex:new RegExp(`^https?://${S===Xa?"(?:storage.googleapis.com|storage.cloud.google.com)":S}/${re}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:ar}];for(let mo=0;mo<go.length;mo++){const jc=go[mo],Js=jc.regex.exec(v);if(Js){let yc=Js[jc.indices.path];yc||(yc=""),K=new zi(Js[jc.indices.bucket],yc),jc.postModify(K);break}}if(null==K)throw function Ts(E){return new _i("invalid-url","Invalid URL '"+E+"'.")}(v);return K}}class hl{constructor(v){this.promise_=Promise.reject(v)}getPromise(){return this.promise_}cancel(v=!1){}}function yd(E,v,S,K){if(K<v)throw Ds(`Invalid value for '${E}'. Expected ${v} or greater.`);if(K>S)throw Ds(`Invalid value for '${E}'. Expected ${S} or less.`)}var bo=(()=>{return(E=bo||(bo={}))[E.NO_ERROR=0]="NO_ERROR",E[E.NETWORK_ERROR=1]="NETWORK_ERROR",E[E.ABORT=2]="ABORT",bo;var E})();class vd{constructor(v,S,K,re,Ve,vt,qt,cn,ar,pr,qr){this.url_=v,this.method_=S,this.headers_=K,this.body_=re,this.successCodes_=Ve,this.additionalRetryCodes_=vt,this.callback_=qt,this.errorCallback_=cn,this.timeout_=ar,this.progressCallback_=pr,this.connectionFactory_=qr,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((Mr,Zr)=>{this.resolve_=Mr,this.reject_=Zr,this.start_()})}start_(){const S=(K,re)=>{const Ve=this.resolve_,vt=this.reject_,qt=re.connection;if(re.wasSuccessCode)try{const cn=this.callback_(qt,qt.getResponse());!function Bd(E){return void 0!==E}(cn)?Ve():Ve(cn)}catch(cn){vt(cn)}else if(null!==qt){const cn=function sc(){return new _i("unknown","An unknown error occurred, please check the error payload for server response.")}();cn.serverResponse=qt.getErrorText(),vt(this.errorCallback_?this.errorCallback_(qt,cn):cn)}else vt(re.canceled?this.appDelete_?Wu():function pd(){return new _i("canceled","User canceled the upload/download.")}():function Hu(){return new _i("retry-limit-exceeded","Max retry time for operation exceeded, please try again.")}())};this.canceled_?S(0,new Rc(!1,null,!0)):this.backoffId_=function kl(E,v,S){let K=1,re=null,Ve=null,vt=!1,qt=0;function cn(){return 2===qt}let ar=!1;function pr(...Yr){ar||(ar=!0,v.apply(null,Yr))}function qr(Yr){re=setTimeout(()=>{re=null,E(Zr,cn())},Yr)}function Mr(){Ve&&clearTimeout(Ve)}function Zr(Yr,...To){if(ar)return void Mr();if(Yr)return Mr(),void pr.call(null,Yr,...To);if(cn()||vt)return Mr(),void pr.call(null,Yr,...To);let go;K<64&&(K*=2),1===qt?(qt=2,go=0):go=1e3*(K+Math.random()),qr(go)}let Br=!1;function Fi(Yr){Br||(Br=!0,Mr(),!ar&&(null!==re?(Yr||(qt=2),clearTimeout(re),qr(0)):Yr||(qt=1)))}return qr(0),Ve=setTimeout(()=>{vt=!0,Fi(!0)},S),Fi}((K,re)=>{if(re)return void K(!1,new Rc(!1,null,!0));const Ve=this.connectionFactory_();this.pendingConnection_=Ve;const vt=qt=>{null!==this.progressCallback_&&this.progressCallback_(qt.loaded,qt.lengthComputable?qt.total:-1)};null!==this.progressCallback_&&Ve.addUploadProgressListener(vt),Ve.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&Ve.removeUploadProgressListener(vt),this.pendingConnection_=null;const qt=Ve.getErrorCode()===bo.NO_ERROR,cn=Ve.getStatus();if(!qt||this.isRetryStatusCode_(cn)){const pr=Ve.getErrorCode()===bo.ABORT;return void K(!1,new Rc(!1,null,pr))}const ar=-1!==this.successCodes_.indexOf(cn);K(!0,new Rc(ar,Ve))})},S,this.timeout_)}getPromise(){return this.promise_}cancel(v){this.canceled_=!0,this.appDelete_=v||!1,null!==this.backoffId_&&function md(E){E(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}isRetryStatusCode_(v){const S=v>=500&&v<600,re=-1!==[408,429].indexOf(v),Ve=-1!==this.additionalRetryCodes_.indexOf(v);return S||re||Ve}}class Rc{constructor(v,S,K){this.wasSuccessCode=v,this.connection=S,this.canceled=!!K}}class gc{constructor(v,S){this._service=v,this._location=S instanceof zi?S:zi.makeFromUrl(S,v.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(v,S){return new gc(v,S)}get root(){const v=new zi(this._location.bucket,"");return this._newRef(this._service,v)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return function Pc(E){const v=E.lastIndexOf("/",E.length-2);return-1===v?E:E.slice(v+1)}(this._location.path)}get storage(){return this._service}get parent(){const v=function af(E){if(0===E.length)return null;const v=E.lastIndexOf("/");return-1===v?"":E.slice(0,v)}(this._location.path);if(null===v)return null;const S=new zi(this._location.bucket,v);return new gc(this._service,S)}_throwIfRoot(v){if(""===this._location.path)throw function gd(E){return new _i("invalid-root-operation","The operation '"+E+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}(v)}}function mc(E,v){const S=null==v?void 0:v.storageBucket;return null==S?null:zi.makeFromBucketSpec(S,E)}class dr{constructor(v,S,K,re,Ve){this.app=v,this._authProvider=S,this._appCheckProvider=K,this._url=re,this._firebaseVersion=Ve,this._bucket=null,this._host=Xa,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=re?zi.makeFromBucketSpec(re,this._host):mc(this._host,this.app.options)}get host(){return this._host}set host(v){this._host=v,this._bucket=null!=this._url?zi.makeFromBucketSpec(this._url,v):mc(v,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(v){yd("time",0,Number.POSITIVE_INFINITY,v),this._maxUploadRetryTime=v}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(v){yd("time",0,Number.POSITIVE_INFINITY,v),this._maxOperationRetryTime=v}_getAuthToken(){var v=this;return(0,Yo.Z)(function*(){if(v._overrideAuthToken)return v._overrideAuthToken;const S=v._authProvider.getImmediate({optional:!0});if(S){const K=yield S.getToken();if(null!==K)return K.accessToken}return null})()}_getAppCheckToken(){var v=this;return(0,Yo.Z)(function*(){const S=v._appCheckProvider.getImmediate({optional:!0});return S?(yield S.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(v=>v.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(v){return new gc(this,v)}_makeRequest(v,S,K,re){if(this._deleted)return new hl(Wu());{const Ve=function $d(E,v,S,K,re,Ve){const vt=function fl(E){const v=encodeURIComponent;let S="?";for(const K in E)E.hasOwnProperty(K)&&(S=S+(v(K)+"=")+v(E[K])+"&");return S=S.slice(0,-1),S}(E.urlParams),qt=E.url+vt,cn=Object.assign({},E.headers);return function As(E,v){v&&(E["X-Firebase-GMPID"]=v)}(cn,v),function Ih(E,v){null!==v&&v.length>0&&(E.Authorization="Firebase "+v)}(cn,S),function lc(E,v){E["X-Firebase-Storage-Version"]="webjs/"+(null!=v?v:"AppManager")}(cn,Ve),function Ch(E,v){null!==v&&(E["X-Firebase-AppCheck"]=v)}(cn,K),new vd(qt,E.method,cn,E.body,E.successCodes,E.additionalRetryCodes,E.handler,E.errorHandler,E.timeout,E.progressCallback,re)}(v,this._appId,K,re,S,this._firebaseVersion);return this._requests.add(Ve),Ve.getPromise().then(()=>this._requests.delete(Ve),()=>this._requests.delete(Ve)),Ve}}makeRequestWithTokens(v,S){var K=this;return(0,Yo.Z)(function*(){const[re,Ve]=yield Promise.all([K._getAuthToken(),K._getAppCheckToken()]);return K._makeRequest(v,S,re,Ve).getPromise()})()}}const wl="@firebase/storage",nh="storage";function Dd(E=(0,Si.getApp)(),v){return E=(0,ui.m9)(E),(0,Si._getProvider)(E,nh).getImmediate({identifier:v})}function Ad(E,{instanceIdentifier:v}){const S=E.getProvider("app").getImmediate(),K=E.getProvider("auth-internal"),re=E.getProvider("app-check-internal");return new dr(S,K,re,v,Si.SDK_VERSION)}!function ih(){(0,Si._registerComponent)(new Oo.wA(nh,Ad,"PUBLIC").setMultipleInstances(!0)),(0,Si.registerVersion)(wl,"0.9.4",""),(0,Si.registerVersion)(wl,"0.9.4","esm2017")}();class Bc{constructor(v){return v}}const sh="storage",Sd=new T.OlP("angularfire2.storage-instances");function pf(E){return(v,S)=>{const K=v.runOutsideAngular(()=>E(S));return new Bc(K)}}const pp={provide:class fp{constructor(){return(0,Ut.vb)(sh)}},deps:[[new T.FiY,Sd]]},oh={provide:Bc,useFactory:function Fg(E,v){const S=(0,Ut.JM)(sh,E,v);return S&&new Bc(S)},deps:[[new T.FiY,Sd],Ht.Ot]};let gf=(()=>{class E{constructor(){(0,er.KN)("angularfire",Ut.q4.full,"gcs")}}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({providers:[oh,pp]}),E})();function mf(E,...v){return{ngModule:gf,providers:[{provide:Sd,useFactory:pf(E),multi:!0,deps:[T.R0b,T.zs3,Ut.HU,Ht.z6,[new T.FiY,_r.dh],[new T.FiY,Lr.nm],...v]}]}}const mp=(0,Ut.u3)(Dd,!0);var Ss=N(8528),yp=N(2140);let Bl=(()=>{class E{}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E}),E.\u0275inj=T.cJS({imports:[[f.ez,yt]]}),E})();var If=N(4466),vp=N(1674),Fh=N(2029),Ep=N(2011),lh=N(3290),Cf=N(5019);let bf=(()=>{class E{}return E.\u0275fac=function(S){return new(S||E)},E.\u0275mod=T.oAB({type:E,bootstrap:[pt]}),E.\u0275inj=T.cJS({providers:[Ci,ni],imports:[[xn,yt,(0,Ht.hX)(()=>(0,Ht.ZF)(_n_firebase)),Di(()=>en()),(0,_r.AR)(()=>(0,_r.v0)()),hs(()=>zr()),(0,Zo.Cm)(()=>(0,Zo.ad)()),In(()=>nn()),gs(()=>b()),Pl(()=>Ya()),ee(()=>Vr()),mf(()=>mp()),Ss.D,yp.u,Bl,If.m,vp.AuthModule,Fh.ItemsModule,Ep.hO.initializeApp(_n_firebase),lh.yb,Cf.JS]]}),E})();(0,T.G48)(),Qn().bootstrapModule(bf).catch(E=>console.error(E))},6148:(rn,et,N)=>{N.d(et,{IH:()=>hr,Gb:()=>Bn,Kz:()=>ue,Iv:()=>Fn});var f=N(5861),T=N(9681),P=N(1877),Z=N(2090),we=N(4859);N(2833);const Pe="analytics",he="firebase_id",ve="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",De="https://www.googletagmanager.com/gtag/js",ot=new P.Yd("@firebase/analytics");function at(de){return Promise.all(de.map(Me=>Me.catch(Ge=>Ge)))}function dt(de,Me){const Ge=document.createElement("script");Ge.src=`${De}?l=${de}&id=${Me}`,Ge.async=!0,document.head.appendChild(Ge)}function be(de,Me,Ge,le,oe,Ee){return mt.apply(this,arguments)}function mt(){return(mt=(0,f.Z)(function*(de,Me,Ge,le,oe,Ee){const qe=le[oe];try{if(qe)yield Me[qe];else{const ge=(yield at(Ge)).find(ye=>ye.measurementId===oe);ge&&(yield Me[ge.appId])}}catch(se){ot.error(se)}de("config",oe,Ee)})).apply(this,arguments)}function Mt(de,Me,Ge,le,oe){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(de,Me,Ge,le,oe){try{let Ee=[];if(oe&&oe.send_to){let qe=oe.send_to;Array.isArray(qe)||(qe=[qe]);const se=yield at(Ge);for(const ge of qe){const ye=se.find(yt=>yt.measurementId===ge),lt=ye&&Me[ye.appId];if(!lt){Ee=[];break}Ee.push(lt)}}0===Ee.length&&(Ee=Object.values(Me)),yield Promise.all(Ee),de("event",le,oe||{})}catch(Ee){ot.error(Ee)}})).apply(this,arguments)}function ht(){const de=window.document.getElementsByTagName("script");for(const Me of Object.values(de))if(Me.src&&Me.src.includes(De))return Me;return null}const fe=new Z.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.'}),xe=new class it{constructor(Me={},Ge=1e3){this.throttleMetadata=Me,this.intervalMillis=Ge}getThrottleMetadata(Me){return this.throttleMetadata[Me]}setThrottleMetadata(Me,Ge){this.throttleMetadata[Me]=Ge}deleteThrottleMetadata(Me){delete this.throttleMetadata[Me]}};function We(de){return new Headers({Accept:"application/json","x-goog-api-key":de})}function Qe(de){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*(de){var Me;const{appId:Ge,apiKey:le}=de,oe={method:"GET",headers:We(le)},Ee=ve.replace("{app-id}",Ge),qe=yield fetch(Ee,oe);if(200!==qe.status&&304!==qe.status){let se="";try{const ge=yield qe.json();(null===(Me=ge.error)||void 0===Me?void 0:Me.message)&&(se=ge.error.message)}catch(ge){}throw fe.create("config-fetch-failed",{httpStatus:qe.status,responseMessage:se})}return qe.json()})).apply(this,arguments)}function dn(de){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*(de,Me=xe,Ge){const{appId:le,apiKey:oe,measurementId:Ee}=de.options;if(!le)throw fe.create("no-app-id");if(!oe){if(Ee)return{measurementId:Ee,appId:le};throw fe.create("no-api-key")}const qe=Me.getThrottleMetadata(le)||{backoffCount:0,throttleEndTimeMillis:Date.now()},se=new an;return setTimeout((0,f.Z)(function*(){se.abort()}),void 0!==Ge?Ge:6e4),ut({appId:le,apiKey:oe,measurementId:Ee},qe,se,Me)})).apply(this,arguments)}function ut(de,Me,Ge){return nt.apply(this,arguments)}function nt(){return(nt=(0,f.Z)(function*(de,{throttleEndTimeMillis:Me,backoffCount:Ge},le,oe=xe){const{appId:Ee,measurementId:qe}=de;try{yield Ce(le,Me)}catch(se){if(qe)return ot.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${se.message}]`),{appId:Ee,measurementId:qe};throw se}try{const se=yield Qe(de);return oe.deleteThrottleMetadata(Ee),se}catch(se){if(!$t(se)){if(oe.deleteThrottleMetadata(Ee),qe)return ot.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${qe} provided in the "measurementId" field in the local Firebase config. [${se.message}]`),{appId:Ee,measurementId:qe};throw se}const ge=503===Number(se.customData.httpStatus)?(0,Z.$s)(Ge,oe.intervalMillis,30):(0,Z.$s)(Ge,oe.intervalMillis),ye={throttleEndTimeMillis:Date.now()+ge,backoffCount:Ge+1};return oe.setThrottleMetadata(Ee,ye),ot.debug(`Calling attemptFetch again in ${ge} millis`),ut(de,ye,le,oe)}})).apply(this,arguments)}function Ce(de,Me){return new Promise((Ge,le)=>{const oe=Math.max(Me-Date.now(),0),Ee=setTimeout(Ge,oe);de.addEventListener(()=>{clearTimeout(Ee),le(fe.create("fetch-throttle",{throttleEndTimeMillis:Me}))})})}function $t(de){if(!(de instanceof Z.ZR&&de.customData))return!1;const Me=Number(de.customData.httpStatus);return 429===Me||500===Me||503===Me||504===Me}class an{constructor(){this.listeners=[]}addEventListener(Me){this.listeners.push(Me)}abort(){this.listeners.forEach(Me=>Me())}}function Rn(){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*(){if(!(0,Z.hl)())return ot.warn(fe.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,Z.eu)()}catch(de){return ot.warn(fe.create("indexeddb-unavailable",{errorInfo:de}).message),!1}return!0})).apply(this,arguments)}function St(){return(St=(0,f.Z)(function*(de,Me,Ge,le,oe,Ee,qe){var se;const ge=dn(de);ge.then(bn=>{Ge[bn.measurementId]=bn.appId,de.options.measurementId&&bn.measurementId!==de.options.measurementId&&ot.warn(`The measurement ID in the local Firebase config (${de.options.measurementId}) does not match the measurement ID fetched from the server (${bn.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(bn=>ot.error(bn)),Me.push(ge);const ye=Rn().then(bn=>{if(bn)return le.getId()}),[lt,yt]=yield Promise.all([ge,ye]);ht()||dt(Ee,lt.measurementId),oe("js",new Date);const Qt=null!==(se=null==qe?void 0:qe.config)&&void 0!==se?se:{};return Qt.origin="firebase",Qt.update=!0,null!=yt&&(Qt[he]=yt),oe("config",lt.measurementId,Qt),lt.measurementId})).apply(this,arguments)}class Yt{constructor(Me){this.app=Me}_delete(){return delete Kt[this.app.options.appId],Promise.resolve()}}let Kt={},gn=[];const Cn={};let zn,xn,Pn="dataLayer",sr=!1;function It(de,Me,Ge){!function Xe(){const de=[];if((0,Z.ru)()&&de.push("This is a browser extension environment."),(0,Z.zI)()||de.push("Cookies are not available."),de.length>0){const Me=de.map((le,oe)=>`(${oe+1}) ${le}`).join(" "),Ge=fe.create("invalid-analytics-context",{errorInfo:Me});ot.warn(Ge.message)}}();const le=de.options.appId;if(!le)throw fe.create("no-app-id");if(!de.options.apiKey){if(!de.options.measurementId)throw fe.create("no-api-key");ot.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${de.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Kt[le])throw fe.create("already-exists",{id:le});if(!sr){!function Ct(de){let Me=[];Array.isArray(window[de])?Me=window[de]:window[de]=Me}(Pn);const{wrappedGtag:Ee,gtagCore:qe}=function rt(de,Me,Ge,le,oe){let Ee=function(...qe){window[le].push(arguments)};return window[oe]&&"function"==typeof window[oe]&&(Ee=window[oe]),window[oe]=function st(de,Me,Ge,le){function Ee(){return(Ee=(0,f.Z)(function*(qe,se,ge){try{"event"===qe?yield Mt(de,Me,Ge,se,ge):"config"===qe?yield be(de,Me,Ge,le,se,ge):de("set",se)}catch(ye){ot.error(ye)}})).apply(this,arguments)}return function oe(qe,se,ge){return Ee.apply(this,arguments)}}(Ee,de,Me,Ge),{gtagCore:Ee,wrappedGtag:window[oe]}}(Kt,gn,Cn,Pn,"gtag");xn=Ee,zn=qe,sr=!0}return Kt[le]=function un(de,Me,Ge,le,oe,Ee,qe){return St.apply(this,arguments)}(de,gn,Cn,Me,zn,Pn,Ge),new Yt(de)}function pn(){return(pn=(0,f.Z)(function*(de,Me,Ge,le,oe){if(oe&&oe.global)de("event",Ge,le);else{const Ee=yield Me;de("event",Ge,Object.assign(Object.assign({},le),{send_to:Ee}))}})).apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(de,Me,Ge,le){if(le&&le.global)return de("set",{user_id:Ge}),Promise.resolve();de("config",yield Me,{update:!0,user_id:Ge})})).apply(this,arguments)}function hr(de=(0,T.getApp)()){de=(0,Z.m9)(de);const Me=(0,T._getProvider)(de,Pe);return Me.isInitialized()?Me.getImmediate():function Tr(de,Me={}){const Ge=(0,T._getProvider)(de,Pe);if(Ge.isInitialized()){const oe=Ge.getImmediate();if((0,Z.vZ)(Me,Ge.getOptions()))return oe;throw fe.create("already-initialized")}return Ge.initialize({options:Me})}(de)}function Bn(){return Ar.apply(this,arguments)}function Ar(){return(Ar=(0,f.Z)(function*(){if((0,Z.ru)()||!(0,Z.zI)()||!(0,Z.hl)())return!1;try{return yield(0,Z.eu)()}catch(de){return!1}})).apply(this,arguments)}function Fn(de,Me,Ge){de=(0,Z.m9)(de),function Dn(de,Me,Ge,le){return Hn.apply(this,arguments)}(xn,Kt[de.app.options.appId],Me,Ge).catch(le=>ot.error(le))}function ue(de,Me,Ge,le){de=(0,Z.m9)(de),function Rt(de,Me,Ge,le,oe){return pn.apply(this,arguments)}(xn,Kt[de.app.options.appId],Me,Ge,le).catch(oe=>ot.error(oe))}const $="@firebase/analytics",z="0.7.7";!function me(){(0,T._registerComponent)(new we.wA(Pe,(Me,{options:Ge})=>It(Me.getProvider("app").getImmediate(),Me.getProvider("installations-internal").getImmediate(),Ge),"PUBLIC")),(0,T._registerComponent)(new we.wA("analytics-internal",function de(Me){try{const Ge=Me.getProvider(Pe).getImmediate();return{logEvent:(le,oe,Ee)=>ue(Ge,le,oe,Ee)}}catch(Ge){throw fe.create("interop-component-reg-failed",{reason:Ge})}},"PRIVATE")),(0,T.registerVersion)($,z),(0,T.registerVersion)($,z,"esm2017")}()},5867:(rn,et,N)=>{N.d(et,{Mq:()=>f.getApp,C6:()=>f.getApps,ZF:()=>f.initializeApp,KN:()=>f.registerVersion});var f=N(9681);(0,f.registerVersion)("firebase","9.6.10","app")},127:(rn,et,N)=>{N.d(et,{Z:()=>f.Z});var f=N(3942);f.Z.registerVersion("firebase","9.6.10","app-compat")},5881:(rn,et,N)=>{N.r(et);var f=N(5861),T=N(3942),P=N(424),Z=N(2090),Pe=(N(9681),N(1877),N(4859));function he(){return window}function ve(){return(ve=(0,f.Z)(function*(se,ge,ye){var lt;const{BuildInfo:yt}=he();(0,P.ap)(ge.sessionId,"AuthEvent did not contain a session ID");const Qt=yield mt(ge.sessionId),bn={};return(0,P.aq)()?bn.ibi=yt.packageName:(0,P.ar)()?bn.apn=yt.packageName:(0,P.as)(se,"operation-not-supported-in-this-environment"),yt.displayName&&(bn.appDisplayName=yt.displayName),bn.sessionId=Qt,(0,P.at)(se,ye,ge.type,void 0,null!==(lt=ge.eventId)&&void 0!==lt?lt:void 0,bn)})).apply(this,arguments)}function ot(){return(ot=(0,f.Z)(function*(se){const{BuildInfo:ge}=he(),ye={};(0,P.aq)()?ye.iosBundleId=ge.packageName:(0,P.ar)()?ye.androidPackageName=ge.packageName:(0,P.as)(se,"operation-not-supported-in-this-environment"),yield(0,P.au)(se,ye)})).apply(this,arguments)}function Ct(){return(Ct=(0,f.Z)(function*(se,ge,ye){const{cordova:lt}=he();let yt=()=>{};try{yield new Promise((Qt,bn)=>{let fn=null;function On(){var or;Qt();const $e=null===(or=lt.plugins.browsertab)||void 0===or?void 0:or.close;"function"==typeof $e&&$e(),"function"==typeof(null==ye?void 0:ye.close)&&ye.close()}function mr(){fn||(fn=window.setTimeout(()=>{bn((0,P.av)(se,"redirect-cancelled-by-user"))},2e3))}function Rr(){"visible"===(null==document?void 0:document.visibilityState)&&mr()}ge.addPassiveListener(On),document.addEventListener("resume",mr,!1),(0,P.ar)()&&document.addEventListener("visibilitychange",Rr,!1),yt=()=>{ge.removePassiveListener(On),document.removeEventListener("resume",mr,!1),document.removeEventListener("visibilitychange",Rr,!1),fn&&window.clearTimeout(fn)}})}finally{yt()}})).apply(this,arguments)}function mt(se){return Mt.apply(this,arguments)}function Mt(){return(Mt=(0,f.Z)(function*(se){const ge=Pt(se),ye=yield crypto.subtle.digest("SHA-256",ge);return Array.from(new Uint8Array(ye)).map(yt=>yt.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}function Pt(se){if((0,P.ap)(/[0-9a-zA-Z]+/.test(se),"Can only convert alpha-numeric strings"),"undefined"!=typeof TextEncoder)return(new TextEncoder).encode(se);const ge=new ArrayBuffer(se.length),ye=new Uint8Array(ge);for(let lt=0;lt<se.length;lt++)ye[lt]=se.charCodeAt(lt);return ye}class rt extends P.az{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(ge=>{this.resolveInialized=ge})}addPassiveListener(ge){this.passiveListeners.add(ge)}removePassiveListener(ge){this.passiveListeners.delete(ge)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(ge){return this.resolveInialized(),this.passiveListeners.forEach(ye=>ye(ge)),super.onEvent(ge)}initialized(){var ge=this;return(0,f.Z)(function*(){yield ge.initPromise})()}}function fe(se){return Lt.apply(this,arguments)}function Lt(){return(Lt=(0,f.Z)(function*(se){const ge=yield xe()._get(We(se));return ge&&(yield xe()._remove(We(se))),ge})).apply(this,arguments)}function it(){const se=[],ge="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let ye=0;ye<20;ye++){const lt=Math.floor(Math.random()*ge.length);se.push(ge.charAt(lt))}return se.join("")}function xe(){return(0,P.ax)(P.b)}function We(se){return(0,P.ay)("authEvent",se.config.apiKey,se.name)}function dn(se){if(!(null==se?void 0:se.includes("?")))return{};const[ge,...ye]=se.split("?");return(0,Z.zd)(ye.join("?"))}function Ce(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:(0,P.av)("no-auth-event")}}function un(){var se;return(null===(se=null==self?void 0:self.location)||void 0===se?void 0:se.protocol)||null}function Yt(se=(0,Z.z$)()){return!("file:"!==un()&&"ionic:"!==un()||!se.toLowerCase().match(/iphone|ipad|ipod|android/))}function Qn(){try{const se=self.localStorage,ge=P.aG();if(se)return se.setItem(ge,"1"),se.removeItem(ge),!function Pn(se=(0,Z.z$)()){return function gn(){return(0,Z.w1)()&&11===(null==document?void 0:document.documentMode)}()||function Cn(se=(0,Z.z$)()){return/Edge\/\d+/.test(se)}(se)}()||(0,Z.hl)()}catch(se){return zn()&&(0,Z.hl)()}return!1}function zn(){return"undefined"!=typeof global&&"WorkerGlobalScope"in global&&"importScripts"in global}function xn(){return(function St(){return"http:"===un()||"https:"===un()}()||(0,Z.ru)()||Yt())&&!function Kt(){return(0,Z.b$)()||(0,Z.UG)()}()&&Qn()&&!zn()}function sr(){return Yt()&&"undefined"!=typeof document}function Xe(){return(Xe=(0,f.Z)(function*(){return!!sr()&&new Promise(se=>{const ge=setTimeout(()=>{se(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(ge),se(!0)})})})).apply(this,arguments)}const Rt={LOCAL:"local",NONE:"none",SESSION:"session"},pn=P.aw,Nn="persistence";function Dn(se){return Hn.apply(this,arguments)}function Hn(){return(Hn=(0,f.Z)(function*(se){yield se._initializationPromise;const ge=Ot(),ye=P.ay(Nn,se.config.apiKey,se.name);ge&&ge.setItem(ye,se._getPersistence())})).apply(this,arguments)}function Ot(){var se;try{return(null===(se=function It(){return"undefined"!=typeof window?window:null}())||void 0===se?void 0:se.sessionStorage)||null}catch(ge){return null}}const hn=P.aw;class Gt{constructor(){this.browserResolver=P.ax(P.k),this.cordovaResolver=P.ax(class ut{constructor(){this._redirectPersistence=P.a,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=P.aA}_initialize(ge){var ye=this;return(0,f.Z)(function*(){const lt=ge._key();let yt=ye.eventManagers.get(lt);return yt||(yt=new rt(ge),ye.eventManagers.set(lt,yt),ye.attachCallbackListeners(ge,yt)),yt})()}_openPopup(ge){(0,P.as)(ge,"operation-not-supported-in-this-environment")}_openRedirect(ge,ye,lt,yt){var Qt=this;return(0,f.Z)(function*(){!function be(se){var ge,ye,lt,yt,Qt,bn,fn,On,mr,Rr;const or=he();(0,P.aw)("function"==typeof(null===(ge=null==or?void 0:or.universalLinks)||void 0===ge?void 0:ge.subscribe),se,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),(0,P.aw)(void 0!==(null===(ye=null==or?void 0:or.BuildInfo)||void 0===ye?void 0:ye.packageName),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),(0,P.aw)("function"==typeof(null===(Qt=null===(yt=null===(lt=null==or?void 0:or.cordova)||void 0===lt?void 0:lt.plugins)||void 0===yt?void 0:yt.browsertab)||void 0===Qt?void 0:Qt.openUrl),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(On=null===(fn=null===(bn=null==or?void 0:or.cordova)||void 0===bn?void 0:bn.plugins)||void 0===fn?void 0:fn.browsertab)||void 0===On?void 0:On.isAvailable),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),(0,P.aw)("function"==typeof(null===(Rr=null===(mr=null==or?void 0:or.cordova)||void 0===mr?void 0:mr.InAppBrowser)||void 0===Rr?void 0:Rr.open),se,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(ge);const bn=yield Qt._initialize(ge);yield bn.initialized(),bn.resetRedirect(),(0,P.aB)(),yield Qt._originValidation(ge);const fn=function ht(se,ge,ye=null){return{type:ge,eventId:ye,urlResponse:null,sessionId:it(),postBody:null,tenantId:se.tenantId,error:(0,P.av)(se,"no-auth-event")}}(ge,lt,yt);yield function ke(se,ge){return xe()._set(We(se),ge)}(ge,fn);const On=yield function ae(se,ge,ye){return ve.apply(this,arguments)}(ge,fn,ye),mr=yield function at(se){const{cordova:ge}=he();return new Promise(ye=>{ge.plugins.browsertab.isAvailable(lt=>{let yt=null;lt?ge.plugins.browsertab.openUrl(se):yt=ge.InAppBrowser.open(se,(0,P.ao)()?"_blank":"_system","location=yes"),ye(yt)})})}(On);return function dt(se,ge,ye){return Ct.apply(this,arguments)}(ge,bn,mr)})()}_isIframeWebStorageSupported(ge,ye){throw new Error("Method not implemented.")}_originValidation(ge){const ye=ge._key();return this.originValidationPromises[ye]||(this.originValidationPromises[ye]=function De(se){return ot.apply(this,arguments)}(ge)),this.originValidationPromises[ye]}attachCallbackListeners(ge,ye){const{universalLinks:lt,handleOpenURL:yt,BuildInfo:Qt}=he(),bn=setTimeout((0,f.Z)(function*(){yield fe(ge),ye.onEvent(Ce())}),500),fn=function(){var Rr=(0,f.Z)(function*(or){clearTimeout(bn);const $e=yield fe(ge);let pt=null;$e&&(null==or?void 0:or.url)&&(pt=function Ke(se,ge){var ye,lt;const yt=function Ne(se){const ge=dn(se),ye=ge.link?decodeURIComponent(ge.link):void 0,lt=dn(ye).link,yt=ge.deep_link_id?decodeURIComponent(ge.deep_link_id):void 0;return dn(yt).link||yt||lt||ye||se}(ge);if(yt.includes("/__/auth/callback")){const Qt=dn(yt),bn=Qt.firebaseError?function Qe(se){try{return JSON.parse(se)}catch(ge){return null}}(decodeURIComponent(Qt.firebaseError)):null,fn=null===(lt=null===(ye=null==bn?void 0:bn.code)||void 0===ye?void 0:ye.split("auth/"))||void 0===lt?void 0:lt[1],On=fn?(0,P.av)(fn):null;return On?{type:se.type,eventId:se.eventId,tenantId:se.tenantId,error:On,urlResponse:null,sessionId:null,postBody:null}:{type:se.type,eventId:se.eventId,tenantId:se.tenantId,sessionId:se.sessionId,urlResponse:yt,postBody:null}}return null}($e,or.url)),ye.onEvent(pt||Ce())});return function($e){return Rr.apply(this,arguments)}}();void 0!==lt&&"function"==typeof lt.subscribe&&lt.subscribe(null,fn);const On=yt,mr=`${Qt.packageName.toLowerCase()}://`;he().handleOpenURL=function(){var Rr=(0,f.Z)(function*(or){if(or.toLowerCase().startsWith(mr)&&fn({url:or}),"function"==typeof On)try{On(or)}catch($e){console.error($e)}});return function(or){return Rr.apply(this,arguments)}}()}}),this.underlyingResolver=null,this._redirectPersistence=P.a,this._completeRedirectFn=P.aA}_initialize(ge){var ye=this;return(0,f.Z)(function*(){return yield ye.selectUnderlyingResolver(),ye.assertedUnderlyingResolver._initialize(ge)})()}_openPopup(ge,ye,lt,yt){var Qt=this;return(0,f.Z)(function*(){return yield Qt.selectUnderlyingResolver(),Qt.assertedUnderlyingResolver._openPopup(ge,ye,lt,yt)})()}_openRedirect(ge,ye,lt,yt){var Qt=this;return(0,f.Z)(function*(){return yield Qt.selectUnderlyingResolver(),Qt.assertedUnderlyingResolver._openRedirect(ge,ye,lt,yt)})()}_isIframeWebStorageSupported(ge,ye){this.assertedUnderlyingResolver._isIframeWebStorageSupported(ge,ye)}_originValidation(ge){return this.assertedUnderlyingResolver._originValidation(ge)}get _shouldInitProactively(){return sr()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return hn(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var ge=this;return(0,f.Z)(function*(){if(ge.underlyingResolver)return;const ye=yield function wt(){return Xe.apply(this,arguments)}();ge.underlyingResolver=ye?ge.cordovaResolver:ge.browserResolver})()}}function hr(se){return se.unwrap()}function Bn(se){return Jn(se)}function Jn(se){const{_tokenResponse:ge}=se instanceof Z.ZR?se.customData:se;if(!ge)return null;if(!(se instanceof Z.ZR)&&"temporaryProof"in ge&&"phoneNumber"in ge)return P.P.credentialFromResult(se);const ye=ge.providerId;if(!ye||ye===P.o.PASSWORD)return null;let lt;switch(ye){case P.o.GOOGLE:lt=P.N;break;case P.o.FACEBOOK:lt=P.M;break;case P.o.GITHUB:lt=P.Q;break;case P.o.TWITTER:lt=P.V;break;default:const{oauthIdToken:yt,oauthAccessToken:Qt,oauthTokenSecret:bn,pendingToken:fn,nonce:On}=ge;return Qt||bn||yt||fn?fn?ye.startsWith("saml.")?P.aJ._create(ye,fn):P.I._fromParams({providerId:ye,signInMethod:ye,pendingToken:fn,idToken:yt,accessToken:Qt}):new P.T(ye).credential({idToken:yt,accessToken:Qt,rawNonce:On}):null}return se instanceof Z.ZR?lt.credentialFromError(se):lt.credentialFromResult(se)}function Fn(se,ge){return ge.catch(ye=>{throw ye instanceof Z.ZR&&function Ar(se,ge){var ye;const lt=null===(ye=ge.customData)||void 0===ye?void 0:ye._tokenResponse;if("auth/multi-factor-auth-required"===ge.code)ge.resolver=new ue(se,P.am(se,ge));else if(lt){const yt=Jn(ge),Qt=ge;yt&&(Qt.credential=yt,Qt.tenantId=lt.tenantId||void 0,Qt.email=lt.email||void 0,Qt.phoneNumber=lt.phoneNumber||void 0)}}(se,ye),ye}).then(ye=>{const yt=ye.user;return{operationType:ye.operationType,credential:Bn(ye),additionalUserInfo:P.ak(ye),user:$.getOrCreate(yt)}})}function Ye(se,ge){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,f.Z)(function*(se,ge){const ye=yield ge;return{verificationId:ye.verificationId,confirm:lt=>Fn(se,ye.confirm(lt))}})).apply(this,arguments)}class ue{constructor(ge,ye){this.resolver=ye,this.auth=function Tr(se){return se.wrapped()}(ge)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(ge){return Fn(hr(this.auth),this.resolver.resolveSignIn(ge))}}class ${constructor(ge){this._delegate=ge,this.multiFactor=P.an(ge)}static getOrCreate(ge){return $.USER_MAP.has(ge)||$.USER_MAP.set(ge,new $(ge)),$.USER_MAP.get(ge)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(ge){return this._delegate.getIdTokenResult(ge)}getIdToken(ge){return this._delegate.getIdToken(ge)}linkAndRetrieveDataWithCredential(ge){return this.linkWithCredential(ge)}linkWithCredential(ge){var ye=this;return(0,f.Z)(function*(){return Fn(ye.auth,P.Y(ye._delegate,ge))})()}linkWithPhoneNumber(ge,ye){var lt=this;return(0,f.Z)(function*(){return Ye(lt.auth,P.l(lt._delegate,ge,ye))})()}linkWithPopup(ge){var ye=this;return(0,f.Z)(function*(){return Fn(ye.auth,P.d(ye._delegate,ge,Gt))})()}linkWithRedirect(ge){var ye=this;return(0,f.Z)(function*(){return yield Dn(P.aC(ye.auth)),P.g(ye._delegate,ge,Gt)})()}reauthenticateAndRetrieveDataWithCredential(ge){return this.reauthenticateWithCredential(ge)}reauthenticateWithCredential(ge){var ye=this;return(0,f.Z)(function*(){return Fn(ye.auth,P.Z(ye._delegate,ge))})()}reauthenticateWithPhoneNumber(ge,ye){return Ye(this.auth,P.r(this._delegate,ge,ye))}reauthenticateWithPopup(ge){return Fn(this.auth,P.e(this._delegate,ge,Gt))}reauthenticateWithRedirect(ge){var ye=this;return(0,f.Z)(function*(){return yield Dn(P.aC(ye.auth)),P.h(ye._delegate,ge,Gt)})()}sendEmailVerification(ge){return P.aa(this._delegate,ge)}unlink(ge){var ye=this;return(0,f.Z)(function*(){return yield P.aj(ye._delegate,ge),ye})()}updateEmail(ge){return P.af(this._delegate,ge)}updatePassword(ge){return P.ag(this._delegate,ge)}updatePhoneNumber(ge){return P.u(this._delegate,ge)}updateProfile(ge){return P.ae(this._delegate,ge)}verifyBeforeUpdateEmail(ge,ye){return P.ab(this._delegate,ge,ye)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}$.USER_MAP=new WeakMap;const z=P.aw;let me=(()=>{class se{constructor(ye,lt){if(this.app=ye,lt.isInitialized())return this._delegate=lt.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:yt}=ye.options;z(yt,"invalid-api-key",{appName:ye.name}),z(yt,"invalid-api-key",{appName:ye.name});const Qt="undefined"!=typeof window?Gt:void 0;this._delegate=lt.initialize({options:{persistence:Me(yt,ye.name),popupRedirectResolver:Qt}}),this._delegate._updateErrorMap(P.z),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?$.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(ye){this._delegate.languageCode=ye}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(ye){this._delegate.tenantId=ye}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(ye,lt){P.E(this._delegate,ye,lt)}applyActionCode(ye){return P.a1(this._delegate,ye)}checkActionCode(ye){return P.a2(this._delegate,ye)}confirmPasswordReset(ye,lt){return P.a0(this._delegate,ye,lt)}createUserWithEmailAndPassword(ye,lt){var yt=this;return(0,f.Z)(function*(){return Fn(yt._delegate,P.a4(yt._delegate,ye,lt))})()}fetchProvidersForEmail(ye){return this.fetchSignInMethodsForEmail(ye)}fetchSignInMethodsForEmail(ye){return P.a9(this._delegate,ye)}isSignInWithEmailLink(ye){return P.a7(this._delegate,ye)}getRedirectResult(){var ye=this;return(0,f.Z)(function*(){z(xn(),ye._delegate,"operation-not-supported-in-this-environment");const lt=yield P.j(ye._delegate,Gt);return lt?Fn(ye._delegate,Promise.resolve(lt)):{credential:null,user:null}})()}addFrameworkForLogging(ye){!function $t(se,ge){(0,P.aC)(se)._logFramework(ge)}(this._delegate,ye)}onAuthStateChanged(ye,lt,yt){const{next:Qt,error:bn,complete:fn}=de(ye,lt,yt);return this._delegate.onAuthStateChanged(Qt,bn,fn)}onIdTokenChanged(ye,lt,yt){const{next:Qt,error:bn,complete:fn}=de(ye,lt,yt);return this._delegate.onIdTokenChanged(Qt,bn,fn)}sendSignInLinkToEmail(ye,lt){return P.a6(this._delegate,ye,lt)}sendPasswordResetEmail(ye,lt){return P.$(this._delegate,ye,lt||void 0)}setPersistence(ye){var lt=this;return(0,f.Z)(function*(){let yt;switch(function Vn(se,ge){pn(Object.values(Rt).includes(ge),se,"invalid-persistence-type"),(0,Z.b$)()?pn(ge!==Rt.SESSION,se,"unsupported-persistence-type"):(0,Z.UG)()?pn(ge===Rt.NONE,se,"unsupported-persistence-type"):zn()?pn(ge===Rt.NONE||ge===Rt.LOCAL&&(0,Z.hl)(),se,"unsupported-persistence-type"):pn(ge===Rt.NONE||Qn(),se,"unsupported-persistence-type")}(lt._delegate,ye),ye){case Rt.SESSION:yt=P.a;break;case Rt.LOCAL:yt=(yield P.ax(P.i)._isAvailable())?P.i:P.b;break;case Rt.NONE:yt=P.K;break;default:return P.as("argument-error",{appName:lt._delegate.name})}return lt._delegate.setPersistence(yt)})()}signInAndRetrieveDataWithCredential(ye){return this.signInWithCredential(ye)}signInAnonymously(){return Fn(this._delegate,P.W(this._delegate))}signInWithCredential(ye){return Fn(this._delegate,P.X(this._delegate,ye))}signInWithCustomToken(ye){return Fn(this._delegate,P._(this._delegate,ye))}signInWithEmailAndPassword(ye,lt){return Fn(this._delegate,P.a5(this._delegate,ye,lt))}signInWithEmailLink(ye,lt){return Fn(this._delegate,P.a8(this._delegate,ye,lt))}signInWithPhoneNumber(ye,lt){return Ye(this._delegate,P.s(this._delegate,ye,lt))}signInWithPopup(ye){var lt=this;return(0,f.Z)(function*(){return z(xn(),lt._delegate,"operation-not-supported-in-this-environment"),Fn(lt._delegate,P.c(lt._delegate,ye,Gt))})()}signInWithRedirect(ye){var lt=this;return(0,f.Z)(function*(){return z(xn(),lt._delegate,"operation-not-supported-in-this-environment"),yield Dn(lt._delegate),P.f(lt._delegate,ye,Gt)})()}updateCurrentUser(ye){return this._delegate.updateCurrentUser(ye)}verifyPasswordResetCode(ye){return P.a3(this._delegate,ye)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return se.Persistence=Rt,se})();function de(se,ge,ye){let lt=se;"function"!=typeof se&&({next:lt,error:ge,complete:ye}=se);const yt=lt;return{next:bn=>yt(bn&&$.getOrCreate(bn)),error:ge,complete:ye}}function Me(se,ge){const ye=function Kn(se,ge){const ye=Ot();if(!ye)return[];const lt=P.ay(Nn,se,ge);switch(ye.getItem(lt)){case Rt.NONE:return[P.K];case Rt.LOCAL:return[P.i,P.a];case Rt.SESSION:return[P.a];default:return[]}}(se,ge);if("undefined"!=typeof self&&!ye.includes(P.i)&&ye.push(P.i),"undefined"!=typeof window)for(const lt of[P.b,P.a])ye.includes(lt)||ye.push(lt);return ye.includes(P.K)||ye.push(P.K),ye}class Ge{constructor(){this.providerId="phone",this._delegate=new P.P(hr(T.Z.auth()))}static credential(ge,ye){return P.P.credential(ge,ye)}verifyPhoneNumber(ge,ye){return this._delegate.verifyPhoneNumber(ge,ye)}unwrap(){return this._delegate}}Ge.PHONE_SIGN_IN_METHOD=P.P.PHONE_SIGN_IN_METHOD,Ge.PROVIDER_ID=P.P.PROVIDER_ID;const le=P.aw;class oe{constructor(ge,ye,lt=T.Z.app()){var yt;le(null===(yt=lt.options)||void 0===yt?void 0:yt.apiKey,"invalid-api-key",{appName:lt.name}),this._delegate=new P.R(ge,ye,lt.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function qe(se){se.INTERNAL.registerComponent(new Pe.wA("auth-compat",ge=>{const ye=ge.getProvider("app-compat").getImmediate(),lt=ge.getProvider("auth");return new me(ye,lt)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:P.A.EMAIL_SIGNIN,PASSWORD_RESET:P.A.PASSWORD_RESET,RECOVER_EMAIL:P.A.RECOVER_EMAIL,REVERT_SECOND_FACTOR_ADDITION:P.A.REVERT_SECOND_FACTOR_ADDITION,VERIFY_AND_CHANGE_EMAIL:P.A.VERIFY_AND_CHANGE_EMAIL,VERIFY_EMAIL:P.A.VERIFY_EMAIL}},EmailAuthProvider:P.L,FacebookAuthProvider:P.M,GithubAuthProvider:P.Q,GoogleAuthProvider:P.N,OAuthProvider:P.T,SAMLAuthProvider:P.U,PhoneAuthProvider:Ge,PhoneMultiFactorGenerator:P.m,RecaptchaVerifier:oe,TwitterAuthProvider:P.V,Auth:me,AuthCredential:P.G,Error:Z.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),se.registerVersion("@firebase/auth-compat","0.2.11")}(T.Z)},2375:(rn,et,N)=>{N.d(et,{KL:()=>fn,Gb:()=>ye});var f=N(5861),P=(N(2833),N(4859)),Z=N(2090),we=N(9681);const Se="/firebase-messaging-sw.js",Pe="/firebase-cloud-messaging-push-scope",he="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",ae="google.c.a.c_id",ve="google.c.a.c_l",De="google.c.a.ts",ot="google.c.a.e";var dt=(()=>{return($e=dt||(dt={})).PUSH_RECEIVED="push-received",$e.NOTIFICATION_CLICKED="notification-clicked",dt;var $e})();function Ct($e){const pt=new Uint8Array($e);return btoa(String.fromCharCode(...pt)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function be($e){const Ht=($e+"=".repeat((4-$e.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),_n=atob(Ht),Ut=new Uint8Array(_n.length);for(let _e=0;_e<_n.length;++_e)Ut[_e]=_n.charCodeAt(_e);return Ut}const mt="fcm_token_details_db",Pt="fcm_token_object_Store";function st($e){return rt.apply(this,arguments)}function rt(){return rt=(0,f.Z)(function*($e){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(_e=>_e.name).includes(mt))return null;let pt=null;return(yield(0,Z.X3)(mt,5,function(){var _n=(0,f.Z)(function*(Ut,_e,Je,xt){var mn;if(_e<2||!Ut.objectStoreNames.contains(Pt))return;const yr=xt.objectStore(Pt),Wn=yield yr.index("fcmSenderId").get($e);if(yield yr.clear(),Wn)if(2===_e){const kn=Wn;if(!kn.auth||!kn.p256dh||!kn.endpoint)return;pt={token:kn.fcmToken,createTime:null!==(mn=kn.createTime)&&void 0!==mn?mn:Date.now(),subscriptionOptions:{auth:kn.auth,p256dh:kn.p256dh,endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:"string"==typeof kn.vapidKey?kn.vapidKey:Ct(kn.vapidKey)}}}else if(3===_e){const kn=Wn;pt={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Ct(kn.auth),p256dh:Ct(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Ct(kn.vapidKey)}}}else if(4===_e){const kn=Wn;pt={token:kn.fcmToken,createTime:kn.createTime,subscriptionOptions:{auth:Ct(kn.auth),p256dh:Ct(kn.p256dh),endpoint:kn.endpoint,swScope:kn.swScope,vapidKey:Ct(kn.vapidKey)}}}});return function(Ut,_e,Je,xt){return _n.apply(this,arguments)}}())).close(),yield(0,Z.Lj)(mt),yield(0,Z.Lj)("fcm_vapid_details_db"),yield(0,Z.Lj)("undefined"),ht(pt)?pt:null}),rt.apply(this,arguments)}function ht($e){if(!$e||!$e.subscriptionOptions)return!1;const{subscriptionOptions:pt}=$e;return"number"==typeof $e.createTime&&$e.createTime>0&&"string"==typeof $e.token&&$e.token.length>0&&"string"==typeof pt.auth&&pt.auth.length>0&&"string"==typeof pt.p256dh&&pt.p256dh.length>0&&"string"==typeof pt.endpoint&&pt.endpoint.length>0&&"string"==typeof pt.swScope&&pt.swScope.length>0&&"string"==typeof pt.vapidKey&&pt.vapidKey.length>0}const Lt="firebase-messaging-store";let Ke=null;function it(){return Ke||(Ke=(0,Z.X3)("firebase-messaging-database",1,($e,pt)=>{0===pt&&$e.createObjectStore(Lt)})),Ke}function xe($e){return We.apply(this,arguments)}function We(){return(We=(0,f.Z)(function*($e){const pt=ut($e),_n=yield(yield it()).transaction(Lt).objectStore(Lt).get(pt);if(_n)return _n;{const Ut=yield st($e.appConfig.senderId);if(Ut)return yield Qe($e,Ut),Ut}})).apply(this,arguments)}function Qe($e,pt){return Ne.apply(this,arguments)}function Ne(){return(Ne=(0,f.Z)(function*($e,pt){const Ht=ut($e),Ut=(yield it()).transaction(Lt,"readwrite");return yield Ut.objectStore(Lt).put(pt,Ht),yield Ut.complete,pt})).apply(this,arguments)}function dn($e){return Wt.apply(this,arguments)}function Wt(){return(Wt=(0,f.Z)(function*($e){const pt=ut($e),_n=(yield it()).transaction(Lt,"readwrite");yield _n.objectStore(Lt).delete(pt),yield _n.complete})).apply(this,arguments)}function ut({appConfig:$e}){return $e.appId}const Ce=new Z.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function $t($e,pt){return an.apply(this,arguments)}function an(){return(an=(0,f.Z)(function*($e,pt){const Ht=yield Kt($e),_n=Cn(pt),Ut={method:"POST",headers:Ht,body:JSON.stringify(_n)};let _e;try{_e=yield(yield fetch(Yt($e.appConfig),Ut)).json()}catch(Je){throw Ce.create("token-subscribe-failed",{errorInfo:Je})}if(_e.error)throw Ce.create("token-subscribe-failed",{errorInfo:_e.error.message});if(!_e.token)throw Ce.create("token-subscribe-no-token");return _e.token})).apply(this,arguments)}function Rn($e,pt){return sn.apply(this,arguments)}function sn(){return(sn=(0,f.Z)(function*($e,pt){const Ht=yield Kt($e),_n=Cn(pt.subscriptionOptions),Ut={method:"PATCH",headers:Ht,body:JSON.stringify(_n)};let _e;try{_e=yield(yield fetch(`${Yt($e.appConfig)}/${pt.token}`,Ut)).json()}catch(Je){throw Ce.create("token-update-failed",{errorInfo:Je})}if(_e.error)throw Ce.create("token-update-failed",{errorInfo:_e.error.message});if(!_e.token)throw Ce.create("token-update-no-token");return _e.token})).apply(this,arguments)}function un($e,pt){return St.apply(this,arguments)}function St(){return(St=(0,f.Z)(function*($e,pt){const _n={method:"DELETE",headers:yield Kt($e)};try{const _e=yield(yield fetch(`${Yt($e.appConfig)}/${pt}`,_n)).json();if(_e.error)throw Ce.create("token-unsubscribe-failed",{errorInfo:_e.error.message})}catch(Ut){throw Ce.create("token-unsubscribe-failed",{errorInfo:Ut})}})).apply(this,arguments)}function Yt({projectId:$e}){return`https://fcmregistrations.googleapis.com/v1/projects/${$e}/registrations`}function Kt($e){return gn.apply(this,arguments)}function gn(){return(gn=(0,f.Z)(function*({appConfig:$e,installations:pt}){const Ht=yield pt.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":$e.apiKey,"x-goog-firebase-installations-auth":`FIS ${Ht}`})})).apply(this,arguments)}function Cn({p256dh:$e,auth:pt,endpoint:Ht,vapidKey:_n}){const Ut={web:{endpoint:Ht,auth:pt,p256dh:$e}};return _n!==he&&(Ut.web.applicationPubKey=_n),Ut}const Pn=6048e5;function Qn($e){return zn.apply(this,arguments)}function zn(){return(zn=(0,f.Z)(function*($e){const pt=yield pn($e.swRegistration,$e.vapidKey),Ht={vapidKey:$e.vapidKey,swScope:$e.swRegistration.scope,endpoint:pt.endpoint,auth:Ct(pt.getKey("auth")),p256dh:Ct(pt.getKey("p256dh"))},_n=yield xe($e.firebaseDependencies);if(_n){if(Vn(_n.subscriptionOptions,Ht))return Date.now()>=_n.createTime+Pn?wt($e,{token:_n.token,createTime:Date.now(),subscriptionOptions:Ht}):_n.token;try{yield un($e.firebaseDependencies,_n.token)}catch(Ut){console.warn(Ut)}return It($e.firebaseDependencies,Ht)}return It($e.firebaseDependencies,Ht)})).apply(this,arguments)}function xn($e){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*($e){const pt=yield xe($e.firebaseDependencies);pt&&(yield un($e.firebaseDependencies,pt.token),yield dn($e.firebaseDependencies));const Ht=yield $e.swRegistration.pushManager.getSubscription();return!Ht||Ht.unsubscribe()})).apply(this,arguments)}function wt($e,pt){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,f.Z)(function*($e,pt){try{const Ht=yield Rn($e.firebaseDependencies,pt),_n=Object.assign(Object.assign({},pt),{token:Ht,createTime:Date.now()});return yield Qe($e.firebaseDependencies,_n),Ht}catch(Ht){throw yield xn($e),Ht}})).apply(this,arguments)}function It($e,pt){return Rt.apply(this,arguments)}function Rt(){return(Rt=(0,f.Z)(function*($e,pt){const _n={token:yield $t($e,pt),createTime:Date.now(),subscriptionOptions:pt};return yield Qe($e,_n),_n.token})).apply(this,arguments)}function pn($e,pt){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,f.Z)(function*($e,pt){return(yield $e.pushManager.getSubscription())||$e.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:be(pt)})})).apply(this,arguments)}function Vn($e,pt){return pt.vapidKey===$e.vapidKey&&pt.endpoint===$e.endpoint&&pt.auth===$e.auth&&pt.p256dh===$e.p256dh}function Dn($e){const pt={from:$e.from,collapseKey:$e.collapse_key,messageId:$e.fcmMessageId};return function Hn($e,pt){if(!pt.notification)return;$e.notification={};const Ht=pt.notification.title;Ht&&($e.notification.title=Ht);const _n=pt.notification.body;_n&&($e.notification.body=_n);const Ut=pt.notification.image;Ut&&($e.notification.image=Ut)}(pt,$e),function Kn($e,pt){!pt.data||($e.data=pt.data)}(pt,$e),function Ot($e,pt){if(!pt.fcmOptions)return;$e.fcmOptions={};const Ht=pt.fcmOptions.link;Ht&&($e.fcmOptions.link=Ht);const _n=pt.fcmOptions.analytics_label;_n&&($e.fcmOptions.analyticsLabel=_n)}(pt,$e),pt}function hn($e){return"object"==typeof $e&&!!$e&&ae in $e}function Gt($e,pt){const Ht=[];for(let _n=0;_n<$e.length;_n++)Ht.push($e.charAt(_n)),_n<pt.length&&Ht.push(pt.charAt(_n));return Ht.join("")}function Tr($e){return Ce.create("missing-app-config-values",{valueName:$e})}Gt("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Gt("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bn{constructor(pt,Ht,_n){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const Ut=function hr($e){if(!$e||!$e.options)throw Tr("App Configuration Object");if(!$e.name)throw Tr("App Name");const pt=["projectId","apiKey","appId","messagingSenderId"],{options:Ht}=$e;for(const _n of pt)if(!Ht[_n])throw Tr(_n);return{appName:$e.name,projectId:Ht.projectId,apiKey:Ht.apiKey,appId:Ht.appId,senderId:Ht.messagingSenderId}}(pt);this.firebaseDependencies={app:pt,appConfig:Ut,installations:Ht,analyticsProvider:_n}}_delete(){return Promise.resolve()}}function Ar($e){return Jn.apply(this,arguments)}function Jn(){return(Jn=(0,f.Z)(function*($e){try{$e.swRegistration=yield navigator.serviceWorker.register(Se,{scope:Pe}),$e.swRegistration.update().catch(()=>{})}catch(pt){throw Ce.create("failed-service-worker-registration",{browserErrorMessage:pt.message})}})).apply(this,arguments)}function Fn($e,pt){return Ye.apply(this,arguments)}function Ye(){return(Ye=(0,f.Z)(function*($e,pt){if(!pt&&!$e.swRegistration&&(yield Ar($e)),pt||!$e.swRegistration){if(!(pt instanceof ServiceWorkerRegistration))throw Ce.create("invalid-sw-registration");$e.swRegistration=pt}})).apply(this,arguments)}function Fe($e,pt){return ue.apply(this,arguments)}function ue(){return(ue=(0,f.Z)(function*($e,pt){pt?$e.vapidKey=pt:$e.vapidKey||($e.vapidKey=he)})).apply(this,arguments)}function z(){return(z=(0,f.Z)(function*($e,pt){if(!navigator)throw Ce.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw Ce.create("permission-blocked");return yield Fe($e,null==pt?void 0:pt.vapidKey),yield Fn($e,null==pt?void 0:pt.serviceWorkerRegistration),Qn($e)})).apply(this,arguments)}function me($e,pt,Ht){return de.apply(this,arguments)}function de(){return(de=(0,f.Z)(function*($e,pt,Ht){const _n=Me(pt);(yield $e.firebaseDependencies.analyticsProvider.get()).logEvent(_n,{message_id:Ht[ae],message_name:Ht[ve],message_time:Ht[De],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Me($e){switch($e){case dt.NOTIFICATION_CLICKED:return"notification_open";case dt.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}function le(){return(le=(0,f.Z)(function*($e,pt){const Ht=pt.data;if(!Ht.isFirebaseMessaging)return;$e.onMessageHandler&&Ht.messageType===dt.PUSH_RECEIVED&&("function"==typeof $e.onMessageHandler?$e.onMessageHandler(Dn(Ht)):$e.onMessageHandler.next(Dn(Ht)));const _n=Ht.data;hn(_n)&&"1"===_n[ot]&&(yield me($e,Ht.messageType,_n))})).apply(this,arguments)}const oe="@firebase/messaging",qe=$e=>{const pt=new Bn($e.getProvider("app").getImmediate(),$e.getProvider("installations-internal").getImmediate(),$e.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",Ht=>function Ge($e,pt){return le.apply(this,arguments)}(pt,Ht)),pt},se=$e=>{const pt=$e.getProvider("messaging").getImmediate();return{getToken:_n=>function $($e,pt){return z.apply(this,arguments)}(pt,_n)}};function ye(){return lt.apply(this,arguments)}function lt(){return(lt=(0,f.Z)(function*(){try{yield(0,Z.eu)()}catch($e){return!1}return"undefined"!=typeof window&&(0,Z.hl)()&&(0,Z.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}function fn($e=(0,we.getApp)()){return ye().then(pt=>{if(!pt)throw Ce.create("unsupported-browser")},pt=>{throw Ce.create("indexed-db-unsupported")}),(0,we._getProvider)((0,Z.m9)($e),"messaging").getImmediate()}!function ge(){(0,we._registerComponent)(new P.wA("messaging",qe,"PUBLIC")),(0,we._registerComponent)(new P.wA("messaging-internal",se,"PRIVATE")),(0,we.registerVersion)(oe,"0.9.11"),(0,we.registerVersion)(oe,"0.9.11","esm2017")}()},3226:(rn,et,N)=>{N.d(et,{sN:()=>Mt,Gb:()=>xn});var f=N(5861),T=N(9681),P=N(2090),Z=N(4859),we=N(1877);N(2833);const Pe="@firebase/remote-config",ae="remote-config",De=new P.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});function Mt(wt=(0,T.getApp)()){return wt=(0,P.m9)(wt),(0,T._getProvider)(wt,ae).getImmediate()}class Ne{constructor(Xe,It,Rt,pn){this.client=Xe,this.storage=It,this.storageCache=Rt,this.logger=pn}isCachedDataFresh(Xe,It){if(!It)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const Rt=Date.now()-It,pn=Rt<=Xe;return this.logger.debug(`Config fetch cache check. Cache age millis: ${Rt}. Cache max age millis (minimumFetchIntervalMillis setting): ${Xe}. Is cache hit: ${pn}.`),pn}fetch(Xe){var It=this;return(0,f.Z)(function*(){const[Rt,pn]=yield Promise.all([It.storage.getLastSuccessfulFetchTimestampMillis(),It.storage.getLastSuccessfulFetchResponse()]);if(pn&&It.isCachedDataFresh(Xe.cacheMaxAgeMillis,Rt))return pn;Xe.eTag=pn&&pn.eTag;const Nn=yield It.client.fetch(Xe),Vn=[It.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Nn.status&&Vn.push(It.storage.setLastSuccessfulFetchResponse(Nn)),yield Promise.all(Vn),Nn})()}}function dn(wt=navigator){return wt.languages&&wt.languages[0]||wt.language}class Wt{constructor(Xe,It,Rt,pn,Nn,Vn){this.firebaseInstallations=Xe,this.sdkVersion=It,this.namespace=Rt,this.projectId=pn,this.apiKey=Nn,this.appId=Vn}fetch(Xe){var It=this;return(0,f.Z)(function*(){const[Rt,pn]=yield Promise.all([It.firebaseInstallations.getId(),It.firebaseInstallations.getToken()]),Vn=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${It.projectId}/namespaces/${It.namespace}:fetch?key=${It.apiKey}`,Dn={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":Xe.eTag||"*"},Hn={sdk_version:It.sdkVersion,app_instance_id:Rt,app_instance_id_token:pn,app_id:It.appId,language_code:dn()},Kn={method:"POST",headers:Dn,body:JSON.stringify(Hn)},Ot=fetch(Vn,Kn),hn=new Promise((Jn,Fn)=>{Xe.signal.addEventListener(()=>{const Ye=new Error("The operation was aborted.");Ye.name="AbortError",Fn(Ye)})});let Gt;try{yield Promise.race([Ot,hn]),Gt=yield Ot}catch(Jn){let Fn="fetch-client-network";throw"AbortError"===Jn.name&&(Fn="fetch-timeout"),De.create(Fn,{originalErrorMessage:Jn.message})}let hr=Gt.status;const Tr=Gt.headers.get("ETag")||void 0;let Bn,Ar;if(200===Gt.status){let Jn;try{Jn=yield Gt.json()}catch(Fn){throw De.create("fetch-client-parse",{originalErrorMessage:Fn.message})}Bn=Jn.entries,Ar=Jn.state}if("INSTANCE_STATE_UNSPECIFIED"===Ar?hr=500:"NO_CHANGE"===Ar?hr=304:("NO_TEMPLATE"===Ar||"EMPTY_CONFIG"===Ar)&&(Bn={}),304!==hr&&200!==hr)throw De.create("fetch-status",{httpStatus:hr});return{status:hr,eTag:Tr,config:Bn}})()}}class Ce{constructor(Xe,It){this.client=Xe,this.storage=It}fetch(Xe){var It=this;return(0,f.Z)(function*(){const Rt=(yield It.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return It.attemptFetch(Xe,Rt)})()}attemptFetch(Xe,{throttleEndTimeMillis:It,backoffCount:Rt}){var pn=this;return(0,f.Z)(function*(){yield function ut(wt,Xe){return new Promise((It,Rt)=>{const pn=Math.max(Xe-Date.now(),0),Nn=setTimeout(It,pn);wt.addEventListener(()=>{clearTimeout(Nn),Rt(De.create("fetch-throttle",{throttleEndTimeMillis:Xe}))})})}(Xe.signal,It);try{const Nn=yield pn.client.fetch(Xe);return yield pn.storage.deleteThrottleMetadata(),Nn}catch(Nn){if(!function nt(wt){if(!(wt instanceof P.ZR&&wt.customData))return!1;const Xe=Number(wt.customData.httpStatus);return 429===Xe||500===Xe||503===Xe||504===Xe}(Nn))throw Nn;const Vn={throttleEndTimeMillis:Date.now()+(0,P.$s)(Rt),backoffCount:Rt+1};return yield pn.storage.setThrottleMetadata(Vn),pn.attemptFetch(Xe,Vn)}})()}}class Rn{constructor(Xe,It,Rt,pn,Nn){this.app=Xe,this._client=It,this._storageCache=Rt,this._storage=pn,this._logger=Nn,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function sn(wt,Xe){const It=wt.target.error||void 0;return De.create(Xe,{originalErrorMessage:It&&It.message})}const un="app_namespace_store";class gn{constructor(Xe,It,Rt,pn=function Kt(){return new Promise((wt,Xe)=>{try{const It=indexedDB.open("firebase_remote_config",1);It.onerror=Rt=>{Xe(sn(Rt,"storage-open"))},It.onsuccess=Rt=>{wt(Rt.target.result)},It.onupgradeneeded=Rt=>{0===Rt.oldVersion&&Rt.target.result.createObjectStore(un,{keyPath:"compositeKey"})}}catch(It){Xe(De.create("storage-open",{originalErrorMessage:It}))}})}()){this.appId=Xe,this.appName=It,this.namespace=Rt,this.openDbPromise=pn}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(Xe){return this.set("last_fetch_status",Xe)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(Xe){return this.set("last_successful_fetch_timestamp_millis",Xe)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(Xe){return this.set("last_successful_fetch_response",Xe)}getActiveConfig(){return this.get("active_config")}setActiveConfig(Xe){return this.set("active_config",Xe)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(Xe){return this.set("active_config_etag",Xe)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(Xe){return this.set("throttle_metadata",Xe)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(Xe){var It=this;return(0,f.Z)(function*(){const Rt=yield It.openDbPromise;return new Promise((pn,Nn)=>{const Dn=Rt.transaction([un],"readonly").objectStore(un),Hn=It.createCompositeKey(Xe);try{const Kn=Dn.get(Hn);Kn.onerror=Ot=>{Nn(sn(Ot,"storage-get"))},Kn.onsuccess=Ot=>{const hn=Ot.target.result;pn(hn?hn.value:void 0)}}catch(Kn){Nn(De.create("storage-get",{originalErrorMessage:Kn&&Kn.message}))}})})()}set(Xe,It){var Rt=this;return(0,f.Z)(function*(){const pn=yield Rt.openDbPromise;return new Promise((Nn,Vn)=>{const Hn=pn.transaction([un],"readwrite").objectStore(un),Kn=Rt.createCompositeKey(Xe);try{const Ot=Hn.put({compositeKey:Kn,value:It});Ot.onerror=hn=>{Vn(sn(hn,"storage-set"))},Ot.onsuccess=()=>{Nn()}}catch(Ot){Vn(De.create("storage-set",{originalErrorMessage:Ot&&Ot.message}))}})})()}delete(Xe){var It=this;return(0,f.Z)(function*(){const Rt=yield It.openDbPromise;return new Promise((pn,Nn)=>{const Dn=Rt.transaction([un],"readwrite").objectStore(un),Hn=It.createCompositeKey(Xe);try{const Kn=Dn.delete(Hn);Kn.onerror=Ot=>{Nn(sn(Ot,"storage-delete"))},Kn.onsuccess=()=>{pn()}}catch(Kn){Nn(De.create("storage-delete",{originalErrorMessage:Kn&&Kn.message}))}})})()}createCompositeKey(Xe){return[this.appId,this.appName,this.namespace,Xe].join()}}class Cn{constructor(Xe){this.storage=Xe}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var Xe=this;return(0,f.Z)(function*(){const It=Xe.storage.getLastFetchStatus(),Rt=Xe.storage.getLastSuccessfulFetchTimestampMillis(),pn=Xe.storage.getActiveConfig(),Nn=yield It;Nn&&(Xe.lastFetchStatus=Nn);const Vn=yield Rt;Vn&&(Xe.lastSuccessfulFetchTimestampMillis=Vn);const Dn=yield pn;Dn&&(Xe.activeConfig=Dn)})()}setLastFetchStatus(Xe){return this.lastFetchStatus=Xe,this.storage.setLastFetchStatus(Xe)}setLastSuccessfulFetchTimestampMillis(Xe){return this.lastSuccessfulFetchTimestampMillis=Xe,this.storage.setLastSuccessfulFetchTimestampMillis(Xe)}setActiveConfig(Xe){return this.activeConfig=Xe,this.storage.setActiveConfig(Xe)}}function xn(){return sr.apply(this,arguments)}function sr(){return(sr=(0,f.Z)(function*(){if(!(0,P.hl)())return!1;try{return yield(0,P.eu)()}catch(wt){return!1}})).apply(this,arguments)}!function Pn(){(0,T._registerComponent)(new Z.wA(ae,function wt(Xe,{instanceIdentifier:It}){const Rt=Xe.getProvider("app").getImmediate(),pn=Xe.getProvider("installations-internal").getImmediate();if("undefined"==typeof window)throw De.create("registration-window");if(!(0,P.hl)())throw De.create("indexed-db-unavailable");const{projectId:Nn,apiKey:Vn,appId:Dn}=Rt.options;if(!Nn)throw De.create("registration-project-id");if(!Vn)throw De.create("registration-api-key");if(!Dn)throw De.create("registration-app-id");const Hn=new gn(Dn,Rt.name,It=It||"firebase"),Kn=new Cn(Hn),Ot=new we.Yd(Pe);Ot.logLevel=we.in.ERROR;const hn=new Wt(pn,T.SDK_VERSION,It,Nn,Vn,Dn),Gt=new Ce(hn,Hn),hr=new Ne(Gt,Hn,Kn,Ot),Tr=new Rn(Rt,hr,Kn,Hn,Ot);return function rt(wt){const Xe=(0,P.m9)(wt);Xe._initializePromise||(Xe._initializePromise=Xe._storageCache.loadFromStorage().then(()=>{Xe._isInitializationComplete=!0}))}(Tr),Tr},"PUBLIC").setMultipleInstances(!0)),(0,T.registerVersion)(Pe,"0.3.6"),(0,T.registerVersion)(Pe,"0.3.6","esm2017")}()},8306:(rn,et,N)=>{N.d(et,{y:()=>ae});var f=N(930),T=N(727),P=N(8822),Z=N(4671);var Pe=N(2416),he=N(576),He=N(2806);let ae=(()=>{class at{constructor(Ct){Ct&&(this._subscribe=Ct)}lift(Ct){const be=new at;return be.source=this,be.operator=Ct,be}subscribe(Ct,be,mt){const Mt=function ot(at){return at&&at instanceof f.Lv||function De(at){return at&&(0,he.m)(at.next)&&(0,he.m)(at.error)&&(0,he.m)(at.complete)}(at)&&(0,T.Nn)(at)}(Ct)?Ct:new f.Hp(Ct,be,mt);return(0,He.x)(()=>{const{operator:Pt,source:st}=this;Mt.add(Pt?Pt.call(Mt,st):st?this._subscribe(Mt):this._trySubscribe(Mt))}),Mt}_trySubscribe(Ct){try{return this._subscribe(Ct)}catch(be){Ct.error(be)}}forEach(Ct,be){return new(be=ve(be))((mt,Mt)=>{const Pt=new f.Hp({next:st=>{try{Ct(st)}catch(rt){Mt(rt),Pt.unsubscribe()}},error:Mt,complete:mt});this.subscribe(Pt)})}_subscribe(Ct){var be;return null===(be=this.source)||void 0===be?void 0:be.subscribe(Ct)}[P.L](){return this}pipe(...Ct){return function Se(at){return 0===at.length?Z.y:1===at.length?at[0]:function(Ct){return at.reduce((be,mt)=>mt(be),Ct)}}(Ct)(this)}toPromise(Ct){return new(Ct=ve(Ct))((be,mt)=>{let Mt;this.subscribe(Pt=>Mt=Pt,Pt=>mt(Pt),()=>be(Mt))})}}return at.create=dt=>new at(dt),at})();function ve(at){var dt;return null!==(dt=null!=at?at:Pe.v.Promise)&&void 0!==dt?dt:Promise}},7579:(rn,et,N)=>{N.d(et,{x:()=>Pe});var f=N(8306),T=N(727);const Z=(0,N(3888).d)(He=>function(){He(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var we=N(8737),Se=N(2806);let Pe=(()=>{class He extends f.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(ve){const De=new he(this,this);return De.operator=ve,De}_throwIfClosed(){if(this.closed)throw new Z}next(ve){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const De of this.currentObservers)De.next(ve)}})}error(ve){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=ve;const{observers:De}=this;for(;De.length;)De.shift().error(ve)}})}complete(){(0,Se.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:ve}=this;for(;ve.length;)ve.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var ve;return(null===(ve=this.observers)||void 0===ve?void 0:ve.length)>0}_trySubscribe(ve){return this._throwIfClosed(),super._trySubscribe(ve)}_subscribe(ve){return this._throwIfClosed(),this._checkFinalizedStatuses(ve),this._innerSubscribe(ve)}_innerSubscribe(ve){const{hasError:De,isStopped:ot,observers:at}=this;return De||ot?T.Lc:(this.currentObservers=null,at.push(ve),new T.w0(()=>{this.currentObservers=null,(0,we.P)(at,ve)}))}_checkFinalizedStatuses(ve){const{hasError:De,thrownError:ot,isStopped:at}=this;De?ve.error(ot):at&&ve.complete()}asObservable(){const ve=new f.y;return ve.source=this,ve}}return He.create=(ae,ve)=>new he(ae,ve),He})();class he extends Pe{constructor(ae,ve){super(),this.destination=ae,this.source=ve}next(ae){var ve,De;null===(De=null===(ve=this.destination)||void 0===ve?void 0:ve.next)||void 0===De||De.call(ve,ae)}error(ae){var ve,De;null===(De=null===(ve=this.destination)||void 0===ve?void 0:ve.error)||void 0===De||De.call(ve,ae)}complete(){var ae,ve;null===(ve=null===(ae=this.destination)||void 0===ae?void 0:ae.complete)||void 0===ve||ve.call(ae)}_subscribe(ae){var ve,De;return null!==(De=null===(ve=this.source)||void 0===ve?void 0:ve.subscribe(ae))&&void 0!==De?De:T.Lc}}},930:(rn,et,N)=>{N.d(et,{Hp:()=>Ct,Lv:()=>De});var f=N(576),T=N(727),P=N(2416),Z=N(7849),we=N(5032);const Se=He("C",void 0,void 0);function He(st,rt,ht){return{kind:st,value:rt,error:ht}}var ae=N(3410),ve=N(2806);class De extends T.w0{constructor(rt){super(),this.isStopped=!1,rt?(this.destination=rt,(0,T.Nn)(rt)&&rt.add(this)):this.destination=Pt}static create(rt,ht,ke){return new Ct(rt,ht,ke)}next(rt){this.isStopped?Mt(function he(st){return He("N",st,void 0)}(rt),this):this._next(rt)}error(rt){this.isStopped?Mt(function Pe(st){return He("E",void 0,st)}(rt),this):(this.isStopped=!0,this._error(rt))}complete(){this.isStopped?Mt(Se,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(rt){this.destination.next(rt)}_error(rt){try{this.destination.error(rt)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const ot=Function.prototype.bind;function at(st,rt){return ot.call(st,rt)}class dt{constructor(rt){this.partialObserver=rt}next(rt){const{partialObserver:ht}=this;if(ht.next)try{ht.next(rt)}catch(ke){be(ke)}}error(rt){const{partialObserver:ht}=this;if(ht.error)try{ht.error(rt)}catch(ke){be(ke)}else be(rt)}complete(){const{partialObserver:rt}=this;if(rt.complete)try{rt.complete()}catch(ht){be(ht)}}}class Ct extends De{constructor(rt,ht,ke){let fe;if(super(),(0,f.m)(rt)||!rt)fe={next:null!=rt?rt:void 0,error:null!=ht?ht:void 0,complete:null!=ke?ke:void 0};else{let Lt;this&&P.v.useDeprecatedNextContext?(Lt=Object.create(rt),Lt.unsubscribe=()=>this.unsubscribe(),fe={next:rt.next&&at(rt.next,Lt),error:rt.error&&at(rt.error,Lt),complete:rt.complete&&at(rt.complete,Lt)}):fe=rt}this.destination=new dt(fe)}}function be(st){P.v.useDeprecatedSynchronousErrorHandling?(0,ve.O)(st):(0,Z.h)(st)}function Mt(st,rt){const{onStoppedNotification:ht}=P.v;ht&&ae.z.setTimeout(()=>ht(st,rt))}const Pt={closed:!0,next:we.Z,error:function mt(st){throw st},complete:we.Z}},727:(rn,et,N)=>{N.d(et,{Lc:()=>Se,w0:()=>we,Nn:()=>Pe});var f=N(576);const P=(0,N(3888).d)(He=>function(ve){He(this),this.message=ve?`${ve.length} errors occurred during unsubscription:\n${ve.map((De,ot)=>`${ot+1}) ${De.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=ve});var Z=N(8737);class we{constructor(ae){this.initialTeardown=ae,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let ae;if(!this.closed){this.closed=!0;const{_parentage:ve}=this;if(ve)if(this._parentage=null,Array.isArray(ve))for(const at of ve)at.remove(this);else ve.remove(this);const{initialTeardown:De}=this;if((0,f.m)(De))try{De()}catch(at){ae=at instanceof P?at.errors:[at]}const{_finalizers:ot}=this;if(ot){this._finalizers=null;for(const at of ot)try{he(at)}catch(dt){ae=null!=ae?ae:[],dt instanceof P?ae=[...ae,...dt.errors]:ae.push(dt)}}if(ae)throw new P(ae)}}add(ae){var ve;if(ae&&ae!==this)if(this.closed)he(ae);else{if(ae instanceof we){if(ae.closed||ae._hasParent(this))return;ae._addParent(this)}(this._finalizers=null!==(ve=this._finalizers)&&void 0!==ve?ve:[]).push(ae)}}_hasParent(ae){const{_parentage:ve}=this;return ve===ae||Array.isArray(ve)&&ve.includes(ae)}_addParent(ae){const{_parentage:ve}=this;this._parentage=Array.isArray(ve)?(ve.push(ae),ve):ve?[ve,ae]:ae}_removeParent(ae){const{_parentage:ve}=this;ve===ae?this._parentage=null:Array.isArray(ve)&&(0,Z.P)(ve,ae)}remove(ae){const{_finalizers:ve}=this;ve&&(0,Z.P)(ve,ae),ae instanceof we&&ae._removeParent(this)}}we.EMPTY=(()=>{const He=new we;return He.closed=!0,He})();const Se=we.EMPTY;function Pe(He){return He instanceof we||He&&"closed"in He&&(0,f.m)(He.remove)&&(0,f.m)(He.add)&&(0,f.m)(He.unsubscribe)}function he(He){(0,f.m)(He)?He():He.unsubscribe()}},2416:(rn,et,N)=>{N.d(et,{v:()=>f});const f={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},7272:(rn,et,N)=>{N.d(et,{z:()=>we});var f=N(8189),P=N(7669),Z=N(8996);function we(...Se){return function T(){return(0,f.J)(1)}()((0,Z.D)(Se,(0,P.yG)(Se)))}},515:(rn,et,N)=>{N.d(et,{E:()=>T});const T=new(N(8306).y)(we=>we.complete())},8996:(rn,et,N)=>{N.d(et,{D:()=>rt});var f=N(8421),T=N(5363),P=N(9468),Se=N(8306),he=N(2202),He=N(576),ae=N(9672);function De(ht,ke){if(!ht)throw new Error("Iterable cannot be null");return new Se.y(fe=>{(0,ae.f)(fe,ke,()=>{const Lt=ht[Symbol.asyncIterator]();(0,ae.f)(fe,ke,()=>{Lt.next().then(Ke=>{Ke.done?fe.complete():fe.next(Ke.value)})},0,!0)})})}var ot=N(3670),at=N(8239),dt=N(1144),Ct=N(6495),be=N(2206),mt=N(4532),Mt=N(3260);function rt(ht,ke){return ke?function st(ht,ke){if(null!=ht){if((0,ot.c)(ht))return function Z(ht,ke){return(0,f.Xf)(ht).pipe((0,P.R)(ke),(0,T.Q)(ke))}(ht,ke);if((0,dt.z)(ht))return function Pe(ht,ke){return new Se.y(fe=>{let Lt=0;return ke.schedule(function(){Lt===ht.length?fe.complete():(fe.next(ht[Lt++]),fe.closed||this.schedule())})})}(ht,ke);if((0,at.t)(ht))return function we(ht,ke){return(0,f.Xf)(ht).pipe((0,P.R)(ke),(0,T.Q)(ke))}(ht,ke);if((0,be.D)(ht))return De(ht,ke);if((0,Ct.T)(ht))return function ve(ht,ke){return new Se.y(fe=>{let Lt;return(0,ae.f)(fe,ke,()=>{Lt=ht[he.h](),(0,ae.f)(fe,ke,()=>{let Ke,it;try{({value:Ke,done:it}=Lt.next())}catch(xe){return void fe.error(xe)}it?fe.complete():fe.next(Ke)},0,!0)}),()=>(0,He.m)(null==Lt?void 0:Lt.return)&&Lt.return()})}(ht,ke);if((0,Mt.L)(ht))return function Pt(ht,ke){return De((0,Mt.Q)(ht),ke)}(ht,ke)}throw(0,mt.z)(ht)}(ht,ke):(0,f.Xf)(ht)}},8421:(rn,et,N)=>{N.d(et,{Xf:()=>ot});var f=N(655),T=N(1144),P=N(8239),Z=N(8306),we=N(3670),Se=N(2206),Pe=N(4532),he=N(6495),He=N(3260),ae=N(576),ve=N(7849),De=N(8822);function ot(st){if(st instanceof Z.y)return st;if(null!=st){if((0,we.c)(st))return function at(st){return new Z.y(rt=>{const ht=st[De.L]();if((0,ae.m)(ht.subscribe))return ht.subscribe(rt);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(st);if((0,T.z)(st))return function dt(st){return new Z.y(rt=>{for(let ht=0;ht<st.length&&!rt.closed;ht++)rt.next(st[ht]);rt.complete()})}(st);if((0,P.t)(st))return function Ct(st){return new Z.y(rt=>{st.then(ht=>{rt.closed||(rt.next(ht),rt.complete())},ht=>rt.error(ht)).then(null,ve.h)})}(st);if((0,Se.D)(st))return mt(st);if((0,he.T)(st))return function be(st){return new Z.y(rt=>{for(const ht of st)if(rt.next(ht),rt.closed)return;rt.complete()})}(st);if((0,He.L)(st))return function Mt(st){return mt((0,He.Q)(st))}(st)}throw(0,Pe.z)(st)}function mt(st){return new Z.y(rt=>{(function Pt(st,rt){var ht,ke,fe,Lt;return(0,f.mG)(this,void 0,void 0,function*(){try{for(ht=(0,f.KL)(st);!(ke=yield ht.next()).done;)if(rt.next(ke.value),rt.closed)return}catch(Ke){fe={error:Ke}}finally{try{ke&&!ke.done&&(Lt=ht.return)&&(yield Lt.call(ht))}finally{if(fe)throw fe.error}}rt.complete()})})(st,rt).catch(ht=>rt.error(ht))})}},6451:(rn,et,N)=>{N.d(et,{T:()=>Se});var f=N(8189),T=N(8421),P=N(515),Z=N(7669),we=N(8996);function Se(...Pe){const he=(0,Z.yG)(Pe),He=(0,Z._6)(Pe,1/0),ae=Pe;return ae.length?1===ae.length?(0,T.Xf)(ae[0]):(0,f.J)(He)((0,we.D)(ae,he)):P.E}},9646:(rn,et,N)=>{N.d(et,{of:()=>P});var f=N(7669),T=N(8996);function P(...Z){const we=(0,f.yG)(Z);return(0,T.D)(Z,we)}},5403:(rn,et,N)=>{N.d(et,{x:()=>T,Q:()=>P});var f=N(930);function T(Z,we,Se,Pe,he){return new P(Z,we,Se,Pe,he)}class P extends f.Lv{constructor(we,Se,Pe,he,He,ae){super(we),this.onFinalize=He,this.shouldUnsubscribe=ae,this._next=Se?function(ve){try{Se(ve)}catch(De){we.error(De)}}:super._next,this._error=he?function(ve){try{he(ve)}catch(De){we.error(De)}finally{this.unsubscribe()}}:super._error,this._complete=Pe?function(){try{Pe()}catch(ve){we.error(ve)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var we;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:Se}=this;super.unsubscribe(),!Se&&(null===(we=this.onFinalize)||void 0===we||we.call(this))}}}},6590:(rn,et,N)=>{N.d(et,{d:()=>P});var f=N(4482),T=N(5403);function P(Z){return(0,f.e)((we,Se)=>{let Pe=!1;we.subscribe((0,T.x)(Se,he=>{Pe=!0,Se.next(he)},()=>{Pe||Se.next(Z),Se.complete()}))})}},1884:(rn,et,N)=>{N.d(et,{x:()=>Z});var f=N(4671),T=N(4482),P=N(5403);function Z(Se,Pe=f.y){return Se=null!=Se?Se:we,(0,T.e)((he,He)=>{let ae,ve=!0;he.subscribe((0,P.x)(He,De=>{const ot=Pe(De);(ve||!Se(ae,ot))&&(ve=!1,ae=ot,He.next(De))}))})}function we(Se,Pe){return Se===Pe}},9300:(rn,et,N)=>{N.d(et,{h:()=>P});var f=N(4482),T=N(5403);function P(Z,we){return(0,f.e)((Se,Pe)=>{let he=0;Se.subscribe((0,T.x)(Pe,He=>Z.call(we,He,he++)&&Pe.next(He)))})}},590:(rn,et,N)=>{N.d(et,{P:()=>Pe});var f=N(6805),T=N(9300),P=N(5698),Z=N(6590),we=N(8068),Se=N(4671);function Pe(he,He){const ae=arguments.length>=2;return ve=>ve.pipe(he?(0,T.h)((De,ot)=>he(De,ot,ve)):Se.y,(0,P.q)(1),ae?(0,Z.d)(He):(0,we.T)(()=>new f.K))}},4004:(rn,et,N)=>{N.d(et,{U:()=>P});var f=N(4482),T=N(5403);function P(Z,we){return(0,f.e)((Se,Pe)=>{let he=0;Se.subscribe((0,T.x)(Pe,He=>{Pe.next(Z.call(we,He,he++))}))})}},8189:(rn,et,N)=>{N.d(et,{J:()=>P});var f=N(5577),T=N(4671);function P(Z=1/0){return(0,f.z)(T.y,Z)}},5577:(rn,et,N)=>{N.d(et,{z:()=>he});var f=N(4004),T=N(8421),P=N(4482),Z=N(9672),we=N(5403),Pe=N(576);function he(He,ae,ve=1/0){return(0,Pe.m)(ae)?he((De,ot)=>(0,f.U)((at,dt)=>ae(De,at,ot,dt))((0,T.Xf)(He(De,ot))),ve):("number"==typeof ae&&(ve=ae),(0,P.e)((De,ot)=>function Se(He,ae,ve,De,ot,at,dt,Ct){const be=[];let mt=0,Mt=0,Pt=!1;const st=()=>{Pt&&!be.length&&!mt&&ae.complete()},rt=ke=>mt<De?ht(ke):be.push(ke),ht=ke=>{at&&ae.next(ke),mt++;let fe=!1;(0,T.Xf)(ve(ke,Mt++)).subscribe((0,we.x)(ae,Lt=>{null==ot||ot(Lt),at?rt(Lt):ae.next(Lt)},()=>{fe=!0},void 0,()=>{if(fe)try{for(mt--;be.length&&mt<De;){const Lt=be.shift();dt?(0,Z.f)(ae,dt,()=>ht(Lt)):ht(Lt)}st()}catch(Lt){ae.error(Lt)}}))};return He.subscribe((0,we.x)(ae,rt,()=>{Pt=!0,st()})),()=>{null==Ct||Ct()}}(De,ot,He,ve)))}},5363:(rn,et,N)=>{N.d(et,{Q:()=>Z});var f=N(9672),T=N(4482),P=N(5403);function Z(we,Se=0){return(0,T.e)((Pe,he)=>{Pe.subscribe((0,P.x)(he,He=>(0,f.f)(he,we,()=>he.next(He),Se),()=>(0,f.f)(he,we,()=>he.complete(),Se),He=>(0,f.f)(he,we,()=>he.error(He),Se)))})}},1520:(rn,et,N)=>{N.d(et,{G:()=>P});var f=N(4482),T=N(5403);function P(){return(0,f.e)((Z,we)=>{let Se,Pe=!1;Z.subscribe((0,T.x)(we,he=>{const He=Se;Se=he,Pe&&we.next([He,he]),Pe=!0}))})}},5026:(rn,et,N)=>{N.d(et,{R:()=>Z});var f=N(4482),T=N(5403);function P(we,Se,Pe,he,He){return(ae,ve)=>{let De=Pe,ot=Se,at=0;ae.subscribe((0,T.x)(ve,dt=>{const Ct=at++;ot=De?we(ot,dt,Ct):(De=!0,dt),he&&ve.next(ot)},He&&(()=>{De&&ve.next(ot),ve.complete()})))}}function Z(we,Se){return(0,f.e)(P(we,Se,arguments.length>=2,!0))}},3099:(rn,et,N)=>{N.d(et,{B:()=>Se});var f=N(8996),T=N(5698),P=N(7579),Z=N(930),we=N(4482);function Se(he={}){const{connector:He=(()=>new P.x),resetOnError:ae=!0,resetOnComplete:ve=!0,resetOnRefCountZero:De=!0}=he;return ot=>{let at=null,dt=null,Ct=null,be=0,mt=!1,Mt=!1;const Pt=()=>{null==dt||dt.unsubscribe(),dt=null},st=()=>{Pt(),at=Ct=null,mt=Mt=!1},rt=()=>{const ht=at;st(),null==ht||ht.unsubscribe()};return(0,we.e)((ht,ke)=>{be++,!Mt&&!mt&&Pt();const fe=Ct=null!=Ct?Ct:He();ke.add(()=>{be--,0===be&&!Mt&&!mt&&(dt=Pe(rt,De))}),fe.subscribe(ke),at||(at=new Z.Hp({next:Lt=>fe.next(Lt),error:Lt=>{Mt=!0,Pt(),dt=Pe(st,ae,Lt),fe.error(Lt)},complete:()=>{mt=!0,Pt(),dt=Pe(st,ve),fe.complete()}}),(0,f.D)(ht).subscribe(at))})(ot)}}function Pe(he,He,...ae){return!0===He?(he(),null):!1===He?null:He(...ae).pipe((0,T.q)(1)).subscribe(()=>he())}},8675:(rn,et,N)=>{N.d(et,{O:()=>Z});var f=N(7272),T=N(7669),P=N(4482);function Z(...we){const Se=(0,T.yG)(we);return(0,P.e)((Pe,he)=>{(Se?(0,f.z)(we,Pe,Se):(0,f.z)(we,Pe)).subscribe(he)})}},9468:(rn,et,N)=>{N.d(et,{R:()=>T});var f=N(4482);function T(P,Z=0){return(0,f.e)((we,Se)=>{Se.add(P.schedule(()=>we.subscribe(Se),Z))})}},3900:(rn,et,N)=>{N.d(et,{w:()=>Z});var f=N(8421),T=N(4482),P=N(5403);function Z(we,Se){return(0,T.e)((Pe,he)=>{let He=null,ae=0,ve=!1;const De=()=>ve&&!He&&he.complete();Pe.subscribe((0,P.x)(he,ot=>{null==He||He.unsubscribe();let at=0;const dt=ae++;(0,f.Xf)(we(ot,dt)).subscribe(He=(0,P.x)(he,Ct=>he.next(Se?Se(ot,Ct,dt,at++):Ct),()=>{He=null,De()}))},()=>{ve=!0,De()}))})}},5698:(rn,et,N)=>{N.d(et,{q:()=>Z});var f=N(515),T=N(4482),P=N(5403);function Z(we){return we<=0?()=>f.E:(0,T.e)((Se,Pe)=>{let he=0;Se.subscribe((0,P.x)(Pe,He=>{++he<=we&&(Pe.next(He),we<=he&&Pe.complete())}))})}},8505:(rn,et,N)=>{N.d(et,{b:()=>we});var f=N(576),T=N(4482),P=N(5403),Z=N(4671);function we(Se,Pe,he){const He=(0,f.m)(Se)||Pe||he?{next:Se,error:Pe,complete:he}:Se;return He?(0,T.e)((ae,ve)=>{var De;null===(De=He.subscribe)||void 0===De||De.call(He);let ot=!0;ae.subscribe((0,P.x)(ve,at=>{var dt;null===(dt=He.next)||void 0===dt||dt.call(He,at),ve.next(at)},()=>{var at;ot=!1,null===(at=He.complete)||void 0===at||at.call(He),ve.complete()},at=>{var dt;ot=!1,null===(dt=He.error)||void 0===dt||dt.call(He,at),ve.error(at)},()=>{var at,dt;ot&&(null===(at=He.unsubscribe)||void 0===at||at.call(He)),null===(dt=He.finalize)||void 0===dt||dt.call(He)}))}):Z.y}},8068:(rn,et,N)=>{N.d(et,{T:()=>Z});var f=N(6805),T=N(4482),P=N(5403);function Z(Se=we){return(0,T.e)((Pe,he)=>{let He=!1;Pe.subscribe((0,P.x)(he,ae=>{He=!0,he.next(ae)},()=>He?he.complete():he.error(Se())))})}function we(){return new f.K}},4408:(rn,et,N)=>{N.d(et,{o:()=>we});var f=N(727);class T extends f.w0{constructor(Pe,he){super()}schedule(Pe,he=0){return this}}const P={setInterval(Se,Pe,...he){const{delegate:He}=P;return(null==He?void 0:He.setInterval)?He.setInterval(Se,Pe,...he):setInterval(Se,Pe,...he)},clearInterval(Se){const{delegate:Pe}=P;return((null==Pe?void 0:Pe.clearInterval)||clearInterval)(Se)},delegate:void 0};var Z=N(8737);class we extends T{constructor(Pe,he){super(Pe,he),this.scheduler=Pe,this.work=he,this.pending=!1}schedule(Pe,he=0){if(this.closed)return this;this.state=Pe;const He=this.id,ae=this.scheduler;return null!=He&&(this.id=this.recycleAsyncId(ae,He,he)),this.pending=!0,this.delay=he,this.id=this.id||this.requestAsyncId(ae,this.id,he),this}requestAsyncId(Pe,he,He=0){return P.setInterval(Pe.flush.bind(Pe,this),He)}recycleAsyncId(Pe,he,He=0){if(null!=He&&this.delay===He&&!1===this.pending)return he;P.clearInterval(he)}execute(Pe,he){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const He=this._execute(Pe,he);if(He)return He;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(Pe,he){let ae,He=!1;try{this.work(Pe)}catch(ve){He=!0,ae=ve||new Error("Scheduled action threw falsy error")}if(He)return this.unsubscribe(),ae}unsubscribe(){if(!this.closed){const{id:Pe,scheduler:he}=this,{actions:He}=he;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Z.P)(He,this),null!=Pe&&(this.id=this.recycleAsyncId(he,Pe,null)),this.delay=null,super.unsubscribe()}}}},7565:(rn,et,N)=>{N.d(et,{v:()=>P});var f=N(6063);class T{constructor(we,Se=T.now){this.schedulerActionCtor=we,this.now=Se}schedule(we,Se=0,Pe){return new this.schedulerActionCtor(this,we).schedule(Pe,Se)}}T.now=f.l.now;class P extends T{constructor(we,Se=T.now){super(we,Se),this.actions=[],this._active=!1,this._scheduled=void 0}flush(we){const{actions:Se}=this;if(this._active)return void Se.push(we);let Pe;this._active=!0;do{if(Pe=we.execute(we.state,we.delay))break}while(we=Se.shift());if(this._active=!1,Pe){for(;we=Se.shift();)we.unsubscribe();throw Pe}}}},4986:(rn,et,N)=>{N.d(et,{z:()=>P});var f=N(4408);const P=new(N(7565).v)(f.o)},6063:(rn,et,N)=>{N.d(et,{l:()=>f});const f={now:()=>(f.delegate||Date).now(),delegate:void 0}},3410:(rn,et,N)=>{N.d(et,{z:()=>f});const f={setTimeout(T,P,...Z){const{delegate:we}=f;return(null==we?void 0:we.setTimeout)?we.setTimeout(T,P,...Z):setTimeout(T,P,...Z)},clearTimeout(T){const{delegate:P}=f;return((null==P?void 0:P.clearTimeout)||clearTimeout)(T)},delegate:void 0}},2202:(rn,et,N)=>{N.d(et,{h:()=>T});const T=function f(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},8822:(rn,et,N)=>{N.d(et,{L:()=>f});const f="function"==typeof Symbol&&Symbol.observable||"@@observable"},6805:(rn,et,N)=>{N.d(et,{K:()=>T});const T=(0,N(3888).d)(P=>function(){P(this),this.name="EmptyError",this.message="no elements in sequence"})},7669:(rn,et,N)=>{N.d(et,{_6:()=>Se,jO:()=>Z,yG:()=>we});var f=N(576);function P(Pe){return Pe[Pe.length-1]}function Z(Pe){return(0,f.m)(P(Pe))?Pe.pop():void 0}function we(Pe){return function T(Pe){return Pe&&(0,f.m)(Pe.schedule)}(P(Pe))?Pe.pop():void 0}function Se(Pe,he){return"number"==typeof P(Pe)?Pe.pop():he}},4742:(rn,et,N)=>{N.d(et,{D:()=>we});const{isArray:f}=Array,{getPrototypeOf:T,prototype:P,keys:Z}=Object;function we(Pe){if(1===Pe.length){const he=Pe[0];if(f(he))return{args:he,keys:null};if(function Se(Pe){return Pe&&"object"==typeof Pe&&T(Pe)===P}(he)){const He=Z(he);return{args:He.map(ae=>he[ae]),keys:He}}}return{args:Pe,keys:null}}},8737:(rn,et,N)=>{function f(T,P){if(T){const Z=T.indexOf(P);0<=Z&&T.splice(Z,1)}}N.d(et,{P:()=>f})},3888:(rn,et,N)=>{function f(T){const Z=T(we=>{Error.call(we),we.stack=(new Error).stack});return Z.prototype=Object.create(Error.prototype),Z.prototype.constructor=Z,Z}N.d(et,{d:()=>f})},1810:(rn,et,N)=>{function f(T,P){return T.reduce((Z,we,Se)=>(Z[we]=P[Se],Z),{})}N.d(et,{n:()=>f})},2806:(rn,et,N)=>{N.d(et,{x:()=>P,O:()=>Z});var f=N(2416);let T=null;function P(we){if(f.v.useDeprecatedSynchronousErrorHandling){const Se=!T;if(Se&&(T={errorThrown:!1,error:null}),we(),Se){const{errorThrown:Pe,error:he}=T;if(T=null,Pe)throw he}}else we()}function Z(we){f.v.useDeprecatedSynchronousErrorHandling&&T&&(T.errorThrown=!0,T.error=we)}},9672:(rn,et,N)=>{function f(T,P,Z,we=0,Se=!1){const Pe=P.schedule(function(){Z(),Se?T.add(this.schedule(null,we)):this.unsubscribe()},we);if(T.add(Pe),!Se)return Pe}N.d(et,{f:()=>f})},4671:(rn,et,N)=>{function f(T){return T}N.d(et,{y:()=>f})},1144:(rn,et,N)=>{N.d(et,{z:()=>f});const f=T=>T&&"number"==typeof T.length&&"function"!=typeof T},2206:(rn,et,N)=>{N.d(et,{D:()=>T});var f=N(576);function T(P){return Symbol.asyncIterator&&(0,f.m)(null==P?void 0:P[Symbol.asyncIterator])}},576:(rn,et,N)=>{function f(T){return"function"==typeof T}N.d(et,{m:()=>f})},3670:(rn,et,N)=>{N.d(et,{c:()=>P});var f=N(8822),T=N(576);function P(Z){return(0,T.m)(Z[f.L])}},6495:(rn,et,N)=>{N.d(et,{T:()=>P});var f=N(2202),T=N(576);function P(Z){return(0,T.m)(null==Z?void 0:Z[f.h])}},8239:(rn,et,N)=>{N.d(et,{t:()=>T});var f=N(576);function T(P){return(0,f.m)(null==P?void 0:P.then)}},3260:(rn,et,N)=>{N.d(et,{Q:()=>P,L:()=>Z});var f=N(655),T=N(576);function P(we){return(0,f.FC)(this,arguments,function*(){const Pe=we.getReader();try{for(;;){const{value:he,done:He}=yield(0,f.qq)(Pe.read());if(He)return yield(0,f.qq)(void 0);yield yield(0,f.qq)(he)}}finally{Pe.releaseLock()}})}function Z(we){return(0,T.m)(null==we?void 0:we.getReader)}},4482:(rn,et,N)=>{N.d(et,{A:()=>T,e:()=>P});var f=N(576);function T(Z){return(0,f.m)(null==Z?void 0:Z.lift)}function P(Z){return we=>{if(T(we))return we.lift(function(Se){try{return Z(Se,this)}catch(Pe){this.error(Pe)}});throw new TypeError("Unable to lift unknown Observable type")}}},3268:(rn,et,N)=>{N.d(et,{Z:()=>Z});var f=N(4004);const{isArray:T}=Array;function Z(we){return(0,f.U)(Se=>function P(we,Se){return T(Se)?we(...Se):we(Se)}(we,Se))}},5032:(rn,et,N)=>{function f(){}N.d(et,{Z:()=>f})},7849:(rn,et,N)=>{N.d(et,{h:()=>P});var f=N(2416),T=N(3410);function P(Z){T.z.setTimeout(()=>{const{onUnhandledError:we}=f.v;if(!we)throw Z;we(Z)})}},4532:(rn,et,N)=>{function f(T){return new TypeError(`You provided ${null!==T&&"object"==typeof T?"an invalid object":`'${T}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}N.d(et,{z:()=>f})},655:(rn,et,N)=>{function Z(Ke,it){var xe={};for(var We in Ke)Object.prototype.hasOwnProperty.call(Ke,We)&&it.indexOf(We)<0&&(xe[We]=Ke[We]);if(null!=Ke&&"function"==typeof Object.getOwnPropertySymbols){var Qe=0;for(We=Object.getOwnPropertySymbols(Ke);Qe<We.length;Qe++)it.indexOf(We[Qe])<0&&Object.prototype.propertyIsEnumerable.call(Ke,We[Qe])&&(xe[We[Qe]]=Ke[We[Qe]])}return xe}function he(Ke,it,xe,We){return new(xe||(xe=Promise))(function(Ne,dn){function Wt(Ce){try{nt(We.next(Ce))}catch($t){dn($t)}}function ut(Ce){try{nt(We.throw(Ce))}catch($t){dn($t)}}function nt(Ce){Ce.done?Ne(Ce.value):function Qe(Ne){return Ne instanceof xe?Ne:new xe(function(dn){dn(Ne)})}(Ce.value).then(Wt,ut)}nt((We=We.apply(Ke,it||[])).next())})}function be(Ke){return this instanceof be?(this.v=Ke,this):new be(Ke)}function mt(Ke,it,xe){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Qe,We=xe.apply(Ke,it||[]),Ne=[];return Qe={},dn("next"),dn("throw"),dn("return"),Qe[Symbol.asyncIterator]=function(){return this},Qe;function dn(an){We[an]&&(Qe[an]=function(Rn){return new Promise(function(sn,un){Ne.push([an,Rn,sn,un])>1||Wt(an,Rn)})})}function Wt(an,Rn){try{!function ut(an){an.value instanceof be?Promise.resolve(an.value.v).then(nt,Ce):$t(Ne[0][2],an)}(We[an](Rn))}catch(sn){$t(Ne[0][3],sn)}}function nt(an){Wt("next",an)}function Ce(an){Wt("throw",an)}function $t(an,Rn){an(Rn),Ne.shift(),Ne.length&&Wt(Ne[0][0],Ne[0][1])}}function Pt(Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var xe,it=Ke[Symbol.asyncIterator];return it?it.call(Ke):(Ke=function De(Ke){var it="function"==typeof Symbol&&Symbol.iterator,xe=it&&Ke[it],We=0;if(xe)return xe.call(Ke);if(Ke&&"number"==typeof Ke.length)return{next:function(){return Ke&&We>=Ke.length&&(Ke=void 0),{value:Ke&&Ke[We++],done:!Ke}}};throw new TypeError(it?"Object is not iterable.":"Symbol.iterator is not defined.")}(Ke),xe={},We("next"),We("throw"),We("return"),xe[Symbol.asyncIterator]=function(){return this},xe);function We(Ne){xe[Ne]=Ke[Ne]&&function(dn){return new Promise(function(Wt,ut){!function Qe(Ne,dn,Wt,ut){Promise.resolve(ut).then(function(nt){Ne({value:nt,done:Wt})},dn)}(Wt,ut,(dn=Ke[Ne](dn)).done,dn.value)})}}}N.d(et,{_T:()=>Z,mG:()=>he,qq:()=>be,FC:()=>mt,KL:()=>Pt})},9808:(rn,et,N)=>{N.d(et,{mr:()=>Mt,Ov:()=>_o,ez:()=>yo,K0:()=>Pe,uU:()=>Xi,Do:()=>st,V_:()=>ae,Ye:()=>rt,S$:()=>be,sg:()=>$n,O5:()=>Oe,b0:()=>Pt,lw:()=>he,EM:()=>Ko,JF:()=>Ir,NF:()=>Gr,PM:()=>ds,w_:()=>Se,bD:()=>Di,q:()=>P,Mx:()=>yi,HT:()=>we});var f=N(5e3);let T=null;function P(){return T}function we(B){T||(T=B)}class Se{}const Pe=new f.OlP("DocumentToken");let he=(()=>{class B{historyGo(j){throw new Error("Not implemented")}}return B.\u0275fac=function(j){return new(j||B)},B.\u0275prov=f.Yz7({token:B,factory:function(){return function He(){return(0,f.LFG)(ve)}()},providedIn:"platform"}),B})();const ae=new f.OlP("Location Initialized");let ve=(()=>{class B extends he{constructor(j){super(),this._doc=j,this._init()}_init(){this.location=window.location,this._history=window.history}getBaseHrefFromDOM(){return P().getBaseHref(this._doc)}onPopState(j){const ie=P().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("popstate",j,!1),()=>ie.removeEventListener("popstate",j)}onHashChange(j){const ie=P().getGlobalEventTarget(this._doc,"window");return ie.addEventListener("hashchange",j,!1),()=>ie.removeEventListener("hashchange",j)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(j){this.location.pathname=j}pushState(j,ie,je){De()?this._history.pushState(j,ie,je):this.location.hash=je}replaceState(j,ie,je){De()?this._history.replaceState(j,ie,je):this.location.hash=je}forward(){this._history.forward()}back(){this._history.back()}historyGo(j=0){this._history.go(j)}getState(){return this._history.state}}return B.\u0275fac=function(j){return new(j||B)(f.LFG(Pe))},B.\u0275prov=f.Yz7({token:B,factory:function(){return function ot(){return new ve((0,f.LFG)(Pe))}()},providedIn:"platform"}),B})();function De(){return!!window.history.pushState}function at(B,J){if(0==B.length)return J;if(0==J.length)return B;let j=0;return B.endsWith("/")&&j++,J.startsWith("/")&&j++,2==j?B+J.substring(1):1==j?B+J:B+"/"+J}function dt(B){const J=B.match(/#|\?|$/),j=J&&J.index||B.length;return B.slice(0,j-("/"===B[j-1]?1:0))+B.slice(j)}function Ct(B){return B&&"?"!==B[0]?"?"+B:B}let be=(()=>{class B{historyGo(j){throw new Error("Not implemented")}}return B.\u0275fac=function(j){return new(j||B)},B.\u0275prov=f.Yz7({token:B,factory:function(){return function mt(B){const J=(0,f.LFG)(Pe).location;return new Pt((0,f.LFG)(he),J&&J.origin||"")}()},providedIn:"root"}),B})();const Mt=new f.OlP("appBaseHref");let Pt=(()=>{class B extends be{constructor(j,ie){if(super(),this._platformLocation=j,this._removeListenerFns=[],null==ie&&(ie=this._platformLocation.getBaseHrefFromDOM()),null==ie)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=ie}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}prepareExternalUrl(j){return at(this._baseHref,j)}path(j=!1){const ie=this._platformLocation.pathname+Ct(this._platformLocation.search),je=this._platformLocation.hash;return je&&j?`${ie}${je}`:ie}pushState(j,ie,je,gt){const Vt=this.prepareExternalUrl(je+Ct(gt));this._platformLocation.pushState(j,ie,Vt)}replaceState(j,ie,je,gt){const Vt=this.prepareExternalUrl(je+Ct(gt));this._platformLocation.replaceState(j,ie,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ie,je;null===(je=(ie=this._platformLocation).historyGo)||void 0===je||je.call(ie,j)}}return B.\u0275fac=function(j){return new(j||B)(f.LFG(he),f.LFG(Mt,8))},B.\u0275prov=f.Yz7({token:B,factory:B.\u0275fac}),B})(),st=(()=>{class B extends be{constructor(j,ie){super(),this._platformLocation=j,this._baseHref="",this._removeListenerFns=[],null!=ie&&(this._baseHref=ie)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(j){this._removeListenerFns.push(this._platformLocation.onPopState(j),this._platformLocation.onHashChange(j))}getBaseHref(){return this._baseHref}path(j=!1){let ie=this._platformLocation.hash;return null==ie&&(ie="#"),ie.length>0?ie.substring(1):ie}prepareExternalUrl(j){const ie=at(this._baseHref,j);return ie.length>0?"#"+ie:ie}pushState(j,ie,je,gt){let Vt=this.prepareExternalUrl(je+Ct(gt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.pushState(j,ie,Vt)}replaceState(j,ie,je,gt){let Vt=this.prepareExternalUrl(je+Ct(gt));0==Vt.length&&(Vt=this._platformLocation.pathname),this._platformLocation.replaceState(j,ie,Vt)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}historyGo(j=0){var ie,je;null===(je=(ie=this._platformLocation).historyGo)||void 0===je||je.call(ie,j)}}return B.\u0275fac=function(j){return new(j||B)(f.LFG(he),f.LFG(Mt,8))},B.\u0275prov=f.Yz7({token:B,factory:B.\u0275fac}),B})(),rt=(()=>{class B{constructor(j,ie){this._subject=new f.vpe,this._urlChangeListeners=[],this._platformStrategy=j;const je=this._platformStrategy.getBaseHref();this._platformLocation=ie,this._baseHref=dt(fe(je)),this._platformStrategy.onPopState(gt=>{this._subject.emit({url:this.path(!0),pop:!0,state:gt.state,type:gt.type})})}path(j=!1){return this.normalize(this._platformStrategy.path(j))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(j,ie=""){return this.path()==this.normalize(j+Ct(ie))}normalize(j){return B.stripTrailingSlash(function ke(B,J){return B&&J.startsWith(B)?J.substring(B.length):J}(this._baseHref,fe(j)))}prepareExternalUrl(j){return j&&"/"!==j[0]&&(j="/"+j),this._platformStrategy.prepareExternalUrl(j)}go(j,ie="",je=null){this._platformStrategy.pushState(je,"",j,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Ct(ie)),je)}replaceState(j,ie="",je=null){this._platformStrategy.replaceState(je,"",j,ie),this._notifyUrlChangeListeners(this.prepareExternalUrl(j+Ct(ie)),je)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}historyGo(j=0){var ie,je;null===(je=(ie=this._platformStrategy).historyGo)||void 0===je||je.call(ie,j)}onUrlChange(j){this._urlChangeListeners.push(j),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(ie=>{this._notifyUrlChangeListeners(ie.url,ie.state)}))}_notifyUrlChangeListeners(j="",ie){this._urlChangeListeners.forEach(je=>je(j,ie))}subscribe(j,ie,je){return this._subject.subscribe({next:j,error:ie,complete:je})}}return B.normalizeQueryParams=Ct,B.joinWithSlash=at,B.stripTrailingSlash=dt,B.\u0275fac=function(j){return new(j||B)(f.LFG(be),f.LFG(he))},B.\u0275prov=f.Yz7({token:B,factory:function(){return function ht(){return new rt((0,f.LFG)(be),(0,f.LFG)(he))}()},providedIn:"root"}),B})();function fe(B){return B.replace(/\/index.html$/,"")}var xe=(()=>((xe=xe||{})[xe.Format=0]="Format",xe[xe.Standalone=1]="Standalone",xe))(),We=(()=>((We=We||{})[We.Narrow=0]="Narrow",We[We.Abbreviated=1]="Abbreviated",We[We.Wide=2]="Wide",We[We.Short=3]="Short",We))(),Qe=(()=>((Qe=Qe||{})[Qe.Short=0]="Short",Qe[Qe.Medium=1]="Medium",Qe[Qe.Long=2]="Long",Qe[Qe.Full=3]="Full",Qe))(),Ne=(()=>((Ne=Ne||{})[Ne.Decimal=0]="Decimal",Ne[Ne.Group=1]="Group",Ne[Ne.List=2]="List",Ne[Ne.PercentSign=3]="PercentSign",Ne[Ne.PlusSign=4]="PlusSign",Ne[Ne.MinusSign=5]="MinusSign",Ne[Ne.Exponential=6]="Exponential",Ne[Ne.SuperscriptingExponent=7]="SuperscriptingExponent",Ne[Ne.PerMille=8]="PerMille",Ne[Ne.Infinity=9]="Infinity",Ne[Ne.NaN=10]="NaN",Ne[Ne.TimeSeparator=11]="TimeSeparator",Ne[Ne.CurrencyDecimal=12]="CurrencyDecimal",Ne[Ne.CurrencyGroup=13]="CurrencyGroup",Ne))();function sn(B,J){return It((0,f.cg1)(B)[f.wAp.DateFormat],J)}function un(B,J){return It((0,f.cg1)(B)[f.wAp.TimeFormat],J)}function St(B,J){return It((0,f.cg1)(B)[f.wAp.DateTimeFormat],J)}function Yt(B,J){const j=(0,f.cg1)(B),ie=j[f.wAp.NumberSymbols][J];if(void 0===ie){if(J===Ne.CurrencyDecimal)return j[f.wAp.NumberSymbols][Ne.Decimal];if(J===Ne.CurrencyGroup)return j[f.wAp.NumberSymbols][Ne.Group]}return ie}function xn(B){if(!B[f.wAp.ExtraData])throw new Error(`Missing extra locale data for the locale "${B[f.wAp.LocaleId]}". Use "registerLocaleData" to load new data. See the "I18n guide" on angular.io to know more.`)}function It(B,J){for(let j=J;j>-1;j--)if(void 0!==B[j])return B[j];throw new Error("Locale data API: locale data undefined")}function Rt(B){const[J,j]=B.split(":");return{hours:+J,minutes:+j}}const Dn=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/,Hn={},Kn=/((?:[^BEGHLMOSWYZabcdhmswyz']+)|(?:'(?:[^']|'')*')|(?:G{1,5}|y{1,4}|Y{1,4}|M{1,5}|L{1,5}|w{1,2}|W{1}|d{1,2}|E{1,6}|c{1,6}|a{1,5}|b{1,5}|B{1,5}|h{1,2}|H{1,2}|m{1,2}|s{1,2}|S{1,3}|z{1,4}|Z{1,5}|O{1,4}))([\s\S]*)/;var Ot=(()=>((Ot=Ot||{})[Ot.Short=0]="Short",Ot[Ot.ShortGMT=1]="ShortGMT",Ot[Ot.Long=2]="Long",Ot[Ot.Extended=3]="Extended",Ot))(),hn=(()=>((hn=hn||{})[hn.FullYear=0]="FullYear",hn[hn.Month=1]="Month",hn[hn.Date=2]="Date",hn[hn.Hours=3]="Hours",hn[hn.Minutes=4]="Minutes",hn[hn.Seconds=5]="Seconds",hn[hn.FractionalSeconds=6]="FractionalSeconds",hn[hn.Day=7]="Day",hn))(),Gt=(()=>((Gt=Gt||{})[Gt.DayPeriods=0]="DayPeriods",Gt[Gt.Days=1]="Days",Gt[Gt.Months=2]="Months",Gt[Gt.Eras=3]="Eras",Gt))();function hr(B,J,j,ie){let je=function lt(B){if(Qt(B))return B;if("number"==typeof B&&!isNaN(B))return new Date(B);if("string"==typeof B){if(B=B.trim(),/^(\d{4}(-\d{1,2}(-\d{1,2})?)?)$/.test(B)){const[je,gt=1,Vt=1]=B.split("-").map(Un=>+Un);return Tr(je,gt-1,Vt)}const j=parseFloat(B);if(!isNaN(B-j))return new Date(j);let ie;if(ie=B.match(Dn))return function yt(B){const J=new Date(0);let j=0,ie=0;const je=B[8]?J.setUTCFullYear:J.setFullYear,gt=B[8]?J.setUTCHours:J.setHours;B[9]&&(j=Number(B[9]+B[10]),ie=Number(B[9]+B[11])),je.call(J,Number(B[1]),Number(B[2])-1,Number(B[3]));const Vt=Number(B[4]||0)-j,Un=Number(B[5]||0)-ie,kr=Number(B[6]||0),Sr=Math.floor(1e3*parseFloat("0."+(B[7]||0)));return gt.call(J,Vt,Un,kr,Sr),J}(ie)}const J=new Date(B);if(!Qt(J))throw new Error(`Unable to convert "${B}" into a date`);return J}(B);J=Bn(j,J)||J;let Un,Vt=[];for(;J;){if(Un=Kn.exec(J),!Un){Vt.push(J);break}{Vt=Vt.concat(Un.slice(1));const lr=Vt.pop();if(!lr)break;J=lr}}let kr=je.getTimezoneOffset();ie&&(kr=se(ie,kr),je=function ye(B,J,j){const ie=j?-1:1,je=B.getTimezoneOffset();return function ge(B,J){return(B=new Date(B.getTime())).setMinutes(B.getMinutes()+J),B}(B,ie*(se(J,je)-je))}(je,ie,!0));let Sr="";return Vt.forEach(lr=>{const Cr=function qe(B){if(Ee[B])return Ee[B];let J;switch(B){case"G":case"GG":case"GGG":J=ue(Gt.Eras,We.Abbreviated);break;case"GGGG":J=ue(Gt.Eras,We.Wide);break;case"GGGGG":J=ue(Gt.Eras,We.Narrow);break;case"y":J=Ye(hn.FullYear,1,0,!1,!0);break;case"yy":J=Ye(hn.FullYear,2,0,!0,!0);break;case"yyy":J=Ye(hn.FullYear,3,0,!1,!0);break;case"yyyy":J=Ye(hn.FullYear,4,0,!1,!0);break;case"Y":J=oe(1);break;case"YY":J=oe(2,!0);break;case"YYY":J=oe(3);break;case"YYYY":J=oe(4);break;case"M":case"L":J=Ye(hn.Month,1,1);break;case"MM":case"LL":J=Ye(hn.Month,2,1);break;case"MMM":J=ue(Gt.Months,We.Abbreviated);break;case"MMMM":J=ue(Gt.Months,We.Wide);break;case"MMMMM":J=ue(Gt.Months,We.Narrow);break;case"LLL":J=ue(Gt.Months,We.Abbreviated,xe.Standalone);break;case"LLLL":J=ue(Gt.Months,We.Wide,xe.Standalone);break;case"LLLLL":J=ue(Gt.Months,We.Narrow,xe.Standalone);break;case"w":J=le(1);break;case"ww":J=le(2);break;case"W":J=le(1,!0);break;case"d":J=Ye(hn.Date,1);break;case"dd":J=Ye(hn.Date,2);break;case"c":case"cc":J=Ye(hn.Day,1);break;case"ccc":J=ue(Gt.Days,We.Abbreviated,xe.Standalone);break;case"cccc":J=ue(Gt.Days,We.Wide,xe.Standalone);break;case"ccccc":J=ue(Gt.Days,We.Narrow,xe.Standalone);break;case"cccccc":J=ue(Gt.Days,We.Short,xe.Standalone);break;case"E":case"EE":case"EEE":J=ue(Gt.Days,We.Abbreviated);break;case"EEEE":J=ue(Gt.Days,We.Wide);break;case"EEEEE":J=ue(Gt.Days,We.Narrow);break;case"EEEEEE":J=ue(Gt.Days,We.Short);break;case"a":case"aa":case"aaa":J=ue(Gt.DayPeriods,We.Abbreviated);break;case"aaaa":J=ue(Gt.DayPeriods,We.Wide);break;case"aaaaa":J=ue(Gt.DayPeriods,We.Narrow);break;case"b":case"bb":case"bbb":J=ue(Gt.DayPeriods,We.Abbreviated,xe.Standalone,!0);break;case"bbbb":J=ue(Gt.DayPeriods,We.Wide,xe.Standalone,!0);break;case"bbbbb":J=ue(Gt.DayPeriods,We.Narrow,xe.Standalone,!0);break;case"B":case"BB":case"BBB":J=ue(Gt.DayPeriods,We.Abbreviated,xe.Format,!0);break;case"BBBB":J=ue(Gt.DayPeriods,We.Wide,xe.Format,!0);break;case"BBBBB":J=ue(Gt.DayPeriods,We.Narrow,xe.Format,!0);break;case"h":J=Ye(hn.Hours,1,-12);break;case"hh":J=Ye(hn.Hours,2,-12);break;case"H":J=Ye(hn.Hours,1);break;case"HH":J=Ye(hn.Hours,2);break;case"m":J=Ye(hn.Minutes,1);break;case"mm":J=Ye(hn.Minutes,2);break;case"s":J=Ye(hn.Seconds,1);break;case"ss":J=Ye(hn.Seconds,2);break;case"S":J=Ye(hn.FractionalSeconds,1);break;case"SS":J=Ye(hn.FractionalSeconds,2);break;case"SSS":J=Ye(hn.FractionalSeconds,3);break;case"Z":case"ZZ":case"ZZZ":J=z(Ot.Short);break;case"ZZZZZ":J=z(Ot.Extended);break;case"O":case"OO":case"OOO":case"z":case"zz":case"zzz":J=z(Ot.ShortGMT);break;case"OOOO":case"ZZZZ":case"zzzz":J=z(Ot.Long);break;default:return null}return Ee[B]=J,J}(lr);Sr+=Cr?Cr(je,j,kr):"''"===lr?"'":lr.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),Sr}function Tr(B,J,j){const ie=new Date(0);return ie.setFullYear(B,J,j),ie.setHours(0,0,0),ie}function Bn(B,J){const j=function Wt(B){return(0,f.cg1)(B)[f.wAp.LocaleId]}(B);if(Hn[j]=Hn[j]||{},Hn[j][J])return Hn[j][J];let ie="";switch(J){case"shortDate":ie=sn(B,Qe.Short);break;case"mediumDate":ie=sn(B,Qe.Medium);break;case"longDate":ie=sn(B,Qe.Long);break;case"fullDate":ie=sn(B,Qe.Full);break;case"shortTime":ie=un(B,Qe.Short);break;case"mediumTime":ie=un(B,Qe.Medium);break;case"longTime":ie=un(B,Qe.Long);break;case"fullTime":ie=un(B,Qe.Full);break;case"short":const je=Bn(B,"shortTime"),gt=Bn(B,"shortDate");ie=Ar(St(B,Qe.Short),[je,gt]);break;case"medium":const Vt=Bn(B,"mediumTime"),Un=Bn(B,"mediumDate");ie=Ar(St(B,Qe.Medium),[Vt,Un]);break;case"long":const kr=Bn(B,"longTime"),Sr=Bn(B,"longDate");ie=Ar(St(B,Qe.Long),[kr,Sr]);break;case"full":const lr=Bn(B,"fullTime"),Cr=Bn(B,"fullDate");ie=Ar(St(B,Qe.Full),[lr,Cr])}return ie&&(Hn[j][J]=ie),ie}function Ar(B,J){return J&&(B=B.replace(/\{([^}]+)}/g,function(j,ie){return null!=J&&ie in J?J[ie]:j})),B}function Jn(B,J,j="-",ie,je){let gt="";(B<0||je&&B<=0)&&(je?B=1-B:(B=-B,gt=j));let Vt=String(B);for(;Vt.length<J;)Vt="0"+Vt;return ie&&(Vt=Vt.substr(Vt.length-J)),gt+Vt}function Ye(B,J,j=0,ie=!1,je=!1){return function(gt,Vt){let Un=function Fe(B,J){switch(B){case hn.FullYear:return J.getFullYear();case hn.Month:return J.getMonth();case hn.Date:return J.getDate();case hn.Hours:return J.getHours();case hn.Minutes:return J.getMinutes();case hn.Seconds:return J.getSeconds();case hn.FractionalSeconds:return J.getMilliseconds();case hn.Day:return J.getDay();default:throw new Error(`Unknown DateType value "${B}".`)}}(B,gt);if((j>0||Un>-j)&&(Un+=j),B===hn.Hours)0===Un&&-12===j&&(Un=12);else if(B===hn.FractionalSeconds)return function Fn(B,J){return Jn(B,3).substr(0,J)}(Un,J);const kr=Yt(Vt,Ne.MinusSign);return Jn(Un,J,kr,ie,je)}}function ue(B,J,j=xe.Format,ie=!1){return function(je,gt){return function $(B,J,j,ie,je,gt){switch(j){case Gt.Months:return function Ce(B,J,j){const ie=(0,f.cg1)(B),gt=It([ie[f.wAp.MonthsFormat],ie[f.wAp.MonthsStandalone]],J);return It(gt,j)}(J,je,ie)[B.getMonth()];case Gt.Days:return function nt(B,J,j){const ie=(0,f.cg1)(B),gt=It([ie[f.wAp.DaysFormat],ie[f.wAp.DaysStandalone]],J);return It(gt,j)}(J,je,ie)[B.getDay()];case Gt.DayPeriods:const Vt=B.getHours(),Un=B.getMinutes();if(gt){const Sr=function sr(B){const J=(0,f.cg1)(B);return xn(J),(J[f.wAp.ExtraData][2]||[]).map(ie=>"string"==typeof ie?Rt(ie):[Rt(ie[0]),Rt(ie[1])])}(J),lr=function wt(B,J,j){const ie=(0,f.cg1)(B);xn(ie);const gt=It([ie[f.wAp.ExtraData][0],ie[f.wAp.ExtraData][1]],J)||[];return It(gt,j)||[]}(J,je,ie),Cr=Sr.findIndex(ti=>{if(Array.isArray(ti)){const[Ur,zr]=ti,fs=Vt>=Ur.hours&&Un>=Ur.minutes,Hi=Vt<zr.hours||Vt===zr.hours&&Un<zr.minutes;if(Ur.hours<zr.hours){if(fs&&Hi)return!0}else if(fs||Hi)return!0}else if(ti.hours===Vt&&ti.minutes===Un)return!0;return!1});if(-1!==Cr)return lr[Cr]}return function ut(B,J,j){const ie=(0,f.cg1)(B),gt=It([ie[f.wAp.DayPeriodsFormat],ie[f.wAp.DayPeriodsStandalone]],J);return It(gt,j)}(J,je,ie)[Vt<12?0:1];case Gt.Eras:return function $t(B,J){return It((0,f.cg1)(B)[f.wAp.Eras],J)}(J,ie)[B.getFullYear()<=0?0:1];default:throw new Error(`unexpected translation type ${j}`)}}(je,gt,B,J,j,ie)}}function z(B){return function(J,j,ie){const je=-1*ie,gt=Yt(j,Ne.MinusSign),Vt=je>0?Math.floor(je/60):Math.ceil(je/60);switch(B){case Ot.Short:return(je>=0?"+":"")+Jn(Vt,2,gt)+Jn(Math.abs(je%60),2,gt);case Ot.ShortGMT:return"GMT"+(je>=0?"+":"")+Jn(Vt,1,gt);case Ot.Long:return"GMT"+(je>=0?"+":"")+Jn(Vt,2,gt)+":"+Jn(Math.abs(je%60),2,gt);case Ot.Extended:return 0===ie?"Z":(je>=0?"+":"")+Jn(Vt,2,gt)+":"+Jn(Math.abs(je%60),2,gt);default:throw new Error(`Unknown zone width "${B}"`)}}}function Ge(B){return Tr(B.getFullYear(),B.getMonth(),B.getDate()+(4-B.getDay()))}function le(B,J=!1){return function(j,ie){let je;if(J){const gt=new Date(j.getFullYear(),j.getMonth(),1).getDay()-1,Vt=j.getDate();je=1+Math.floor((Vt+gt)/7)}else{const gt=Ge(j),Vt=function Me(B){const J=Tr(B,0,1).getDay();return Tr(B,0,1+(J<=4?4:11)-J)}(gt.getFullYear()),Un=gt.getTime()-Vt.getTime();je=1+Math.round(Un/6048e5)}return Jn(je,B,Yt(ie,Ne.MinusSign))}}function oe(B,J=!1){return function(j,ie){return Jn(Ge(j).getFullYear(),B,Yt(ie,Ne.MinusSign),J)}}const Ee={};function se(B,J){B=B.replace(/:/g,"");const j=Date.parse("Jan 01, 1970 00:00:00 "+B)/6e4;return isNaN(j)?J:j}function Qt(B){return B instanceof Date&&!isNaN(B.valueOf())}function yi(B,J){J=encodeURIComponent(J);for(const j of B.split(";")){const ie=j.indexOf("="),[je,gt]=-1==ie?[j,""]:[j.slice(0,ie),j.slice(ie+1)];if(je.trim()===J)return decodeURIComponent(gt)}return null}class er{constructor(J,j,ie,je){this.$implicit=J,this.ngForOf=j,this.index=ie,this.count=je}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let $n=(()=>{class B{constructor(j,ie,je){this._viewContainer=j,this._template=ie,this._differs=je,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForOf(j){this._ngForOf=j,this._ngForOfDirty=!0}set ngForTrackBy(j){this._trackByFn=j}get ngForTrackBy(){return this._trackByFn}set ngForTemplate(j){j&&(this._template=j)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const j=this._ngForOf;!this._differ&&j&&(this._differ=this._differs.find(j).create(this.ngForTrackBy))}if(this._differ){const j=this._differ.diff(this._ngForOf);j&&this._applyChanges(j)}}_applyChanges(j){const ie=this._viewContainer;j.forEachOperation((je,gt,Vt)=>{if(null==je.previousIndex)ie.createEmbeddedView(this._template,new er(je.item,this._ngForOf,-1,-1),null===Vt?void 0:Vt);else if(null==Vt)ie.remove(null===gt?void 0:gt);else if(null!==gt){const Un=ie.get(gt);ie.move(Un,Vt),Ln(Un,je)}});for(let je=0,gt=ie.length;je<gt;je++){const Un=ie.get(je).context;Un.index=je,Un.count=gt,Un.ngForOf=this._ngForOf}j.forEachIdentityChange(je=>{Ln(ie.get(je.currentIndex),je)})}static ngTemplateContextGuard(j,ie){return!0}}return B.\u0275fac=function(j){return new(j||B)(f.Y36(f.s_b),f.Y36(f.Rgc),f.Y36(f.ZZ4))},B.\u0275dir=f.lG2({type:B,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}}),B})();function Ln(B,J){B.context.$implicit=J.item}let Oe=(()=>{class B{constructor(j,ie){this._viewContainer=j,this._context=new Le,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=ie}set ngIf(j){this._context.$implicit=this._context.ngIf=j,this._updateView()}set ngIfThen(j){_t("ngIfThen",j),this._thenTemplateRef=j,this._thenViewRef=null,this._updateView()}set ngIfElse(j){_t("ngIfElse",j),this._elseTemplateRef=j,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(j,ie){return!0}}return B.\u0275fac=function(j){return new(j||B)(f.Y36(f.s_b),f.Y36(f.Rgc))},B.\u0275dir=f.lG2({type:B,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),B})();class Le{constructor(){this.$implicit=null,this.ngIf=null}}function _t(B,J){if(J&&!J.createEmbeddedView)throw new Error(`${B} must be a TemplateRef, but received '${(0,f.AaK)(J)}'.`)}function ni(B,J){return new f.vHH(2100,"")}class xa{createSubscription(J,j){return J.subscribe({next:j,error:ie=>{throw ie}})}dispose(J){J.unsubscribe()}onDestroy(J){J.unsubscribe()}}class fi{createSubscription(J,j){return J.then(j,ie=>{throw ie})}dispose(J){}onDestroy(J){}}const So=new fi,Ji=new xa;let _o=(()=>{class B{constructor(j){this._ref=j,this._latestValue=null,this._subscription=null,this._obj=null,this._strategy=null}ngOnDestroy(){this._subscription&&this._dispose()}transform(j){return this._obj?j!==this._obj?(this._dispose(),this.transform(j)):this._latestValue:(j&&this._subscribe(j),this._latestValue)}_subscribe(j){this._obj=j,this._strategy=this._selectStrategy(j),this._subscription=this._strategy.createSubscription(j,ie=>this._updateLatestValue(j,ie))}_selectStrategy(j){if((0,f.QGY)(j))return So;if((0,f.F4k)(j))return Ji;throw ni()}_dispose(){this._strategy.dispose(this._subscription),this._latestValue=null,this._subscription=null,this._obj=null}_updateLatestValue(j,ie){j===this._obj&&(this._latestValue=ie,this._ref.markForCheck())}}return B.\u0275fac=function(j){return new(j||B)(f.Y36(f.sBO,16))},B.\u0275pipe=f.Yjl({name:"async",type:B,pure:!1}),B})();const ca=new f.OlP("DATE_PIPE_DEFAULT_TIMEZONE");let Xi=(()=>{class B{constructor(j,ie){this.locale=j,this.defaultTimezone=ie}transform(j,ie="mediumDate",je,gt){var Vt;if(null==j||""===j||j!=j)return null;try{return hr(j,ie,gt||this.locale,null!==(Vt=null!=je?je:this.defaultTimezone)&&void 0!==Vt?Vt:void 0)}catch(Un){throw ni()}}}return B.\u0275fac=function(j){return new(j||B)(f.Y36(f.soG,16),f.Y36(ca,24))},B.\u0275pipe=f.Yjl({name:"date",type:B,pure:!0}),B})(),yo=(()=>{class B{}return B.\u0275fac=function(j){return new(j||B)},B.\u0275mod=f.oAB({type:B}),B.\u0275inj=f.cJS({}),B})();const Di="browser";function Gr(B){return B===Di}function ds(B){return"server"===B}let Ko=(()=>{class B{}return B.\u0275prov=(0,f.Yz7)({token:B,providedIn:"root",factory:()=>new Po((0,f.LFG)(Pe),window)}),B})();class Po{constructor(J,j){this.document=J,this.window=j,this.offset=()=>[0,0]}setOffset(J){this.offset=Array.isArray(J)?()=>J:J}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(J){this.supportsScrolling()&&this.window.scrollTo(J[0],J[1])}scrollToAnchor(J){if(!this.supportsScrolling())return;const j=function Ws(B,J){const j=B.getElementById(J)||B.getElementsByName(J)[0];if(j)return j;if("function"==typeof B.createTreeWalker&&B.body&&(B.body.createShadowRoot||B.body.attachShadow)){const ie=B.createTreeWalker(B.body,NodeFilter.SHOW_ELEMENT);let je=ie.currentNode;for(;je;){const gt=je.shadowRoot;if(gt){const Vt=gt.getElementById(J)||gt.querySelector(`[name="${J}"]`);if(Vt)return Vt}je=ie.nextNode()}}return null}(this.document,J);j&&(this.scrollToElement(j),j.focus())}setHistoryScrollRestoration(J){if(this.supportScrollRestoration()){const j=this.window.history;j&&j.scrollRestoration&&(j.scrollRestoration=J)}}scrollToElement(J){const j=J.getBoundingClientRect(),ie=j.left+this.window.pageXOffset,je=j.top+this.window.pageYOffset,gt=this.offset();this.window.scrollTo(ie-gt[0],je-gt[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const J=Zi(this.window.history)||Zi(Object.getPrototypeOf(this.window.history));return!(!J||!J.writable&&!J.set)}catch(J){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(J){return!1}}}function Zi(B){return Object.getOwnPropertyDescriptor(B,"scrollRestoration")}class Ir{}},5e3:(rn,et,N)=>{N.d(et,{deG:()=>Va,tb:()=>M0,AFp:()=>D0,ip1:()=>T0,CZH:()=>vy,hGG:()=>ZI,z2F:()=>Dy,sBO:()=>NI,Sil:()=>fI,_Vd:()=>Jm,EJc:()=>dI,SBq:()=>Sg,qLn:()=>lc,vpe:()=>id,tBr:()=>ho,XFs:()=>wt,OlP:()=>wr,zs3:()=>qu,ZZ4:()=>Py,aQg:()=>Ny,soG:()=>wy,YKP:()=>Vv,h0i:()=>ip,PXZ:()=>TI,R0b:()=>Ic,FiY:()=>Bo,Lbi:()=>x0,g9A:()=>S0,Qsj:()=>ow,FYo:()=>Ov,JOm:()=>nu,tp0:()=>va,Rgc:()=>Pg,dDg:()=>O0,q4F:()=>Fv,GfV:()=>kv,s_b:()=>t_,ifc:()=>Ot,eFA:()=>L0,G48:()=>PI,Gpc:()=>ve,X6Q:()=>RI,_c5:()=>qI,VLi:()=>II,c2e:()=>R0,zSh:()=>Bh,wAp:()=>br,vHH:()=>dt,cg1:()=>Y_,kL8:()=>iv,dqk:()=>Bn,sIi:()=>Pd,CqO:()=>fg,QGY:()=>Jh,F4k:()=>Kf,RDi:()=>Zi,AaK:()=>he,qOj:()=>Vf,TTD:()=>cs,_Bn:()=>Rv,xp6:()=>wl,uIk:()=>zh,ekj:()=>Jf,Suo:()=>r0,Xpm:()=>Ge,lG2:()=>lt,Yz7:()=>sn,cJS:()=>St,oAB:()=>se,Yjl:()=>yt,Y36:()=>Yh,_UZ:()=>mh,qZA:()=>Gl,TgZ:()=>Gf,EpF:()=>Dm,n5z:()=>Os,LFG:()=>ci,$8M:()=>Ua,$Z:()=>Cm,NdJ:()=>wc,CRH:()=>s0,oxw:()=>Xh,ALo:()=>qv,lcZ:()=>Zv,xi3:()=>Yv,Q6J:()=>$f,s9C:()=>mg,MGl:()=>Fd,iGM:()=>n0,CHM:()=>Sn,LSH:()=>Ol,YNc:()=>hm,_uU:()=>Gm,Oqu:()=>zm,hij:()=>Ig});var f=N(7579),T=N(727),P=N(8306),Z=N(6451),we=N(3099);function Se(t){for(let r in t)if(t[r]===Se)return r;throw Error("Could not find renamed property on target object.")}function Pe(t,r){for(const s in r)r.hasOwnProperty(s)&&!t.hasOwnProperty(s)&&(t[s]=r[s])}function he(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(he).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const r=t.toString();if(null==r)return""+r;const s=r.indexOf("\n");return-1===s?r:r.substring(0,s)}function He(t,r){return null==t||""===t?null===r?"":r:null==r||""===r?t:t+" "+r}const ae=Se({__forward_ref__:Se});function ve(t){return t.__forward_ref__=ve,t.toString=function(){return he(this())},t}function De(t){return ot(t)?t():t}function ot(t){return"function"==typeof t&&t.hasOwnProperty(ae)&&t.__forward_ref__===ve}class dt extends Error{constructor(r,s){super(function Ct(t,r){return`NG0${Math.abs(t)}${r?": "+r:""}`}(r,s)),this.code=r}}function be(t){return"string"==typeof t?t:null==t?"":String(t)}function mt(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():be(t)}function rt(t,r){const s=r?` in ${r}`:"";throw new dt(-201,`No provider for ${mt(t)} found${s}`)}function nt(t,r){null==t&&function Ce(t,r,s,a){throw new Error(`ASSERTION ERROR: ${t}`+(null==a?"":` [Expected=> ${s} ${a} ${r} <=Actual]`))}(r,t,null,"!=")}function sn(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function St(t){return{providers:t.providers||[],imports:t.imports||[]}}function Yt(t){return Kt(t,Qn)||Kt(t,xn)}function Kt(t,r){return t.hasOwnProperty(r)?t[r]:null}function Pn(t){return t&&(t.hasOwnProperty(zn)||t.hasOwnProperty(sr))?t[zn]:null}const Qn=Se({\u0275prov:Se}),zn=Se({\u0275inj:Se}),xn=Se({ngInjectableDef:Se}),sr=Se({ngInjectorDef:Se});var wt=(()=>((wt=wt||{})[wt.Default=0]="Default",wt[wt.Host=1]="Host",wt[wt.Self=2]="Self",wt[wt.SkipSelf=4]="SkipSelf",wt[wt.Optional=8]="Optional",wt))();let Xe;function Rt(t){const r=Xe;return Xe=t,r}function pn(t,r,s){const a=Yt(t);return a&&"root"==a.providedIn?void 0===a.value?a.value=a.factory():a.value:s&wt.Optional?null:void 0!==r?r:void rt(he(t),"Injector")}function Vn(t){return{toString:t}.toString()}var Dn=(()=>((Dn=Dn||{})[Dn.OnPush=0]="OnPush",Dn[Dn.Default=1]="Default",Dn))(),Ot=(()=>{return(t=Ot||(Ot={}))[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",Ot;var t})();const hn="undefined"!=typeof globalThis&&globalThis,Gt="undefined"!=typeof window&&window,hr="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,Bn=hn||"undefined"!=typeof global&&global||Gt||hr,Fn={},Ye=[],Fe=Se({\u0275cmp:Se}),ue=Se({\u0275dir:Se}),$=Se({\u0275pipe:Se}),z=Se({\u0275mod:Se}),me=Se({\u0275fac:Se}),de=Se({__NG_ELEMENT_ID__:Se});let Me=0;function Ge(t){return Vn(()=>{const s={},a={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:s,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===Dn.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||Ye,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||Ot.Emulated,id:"c",styles:t.styles||Ye,_:null,setInput:null,schemas:t.schemas||null,tView:null},d=t.directives,p=t.features,w=t.pipes;return a.id+=Me++,a.inputs=ye(t.inputs,s),a.outputs=ye(t.outputs),p&&p.forEach(x=>x(a)),a.directiveDefs=d?()=>("function"==typeof d?d():d).map(oe):null,a.pipeDefs=w?()=>("function"==typeof w?w():w).map(Ee):null,a})}function oe(t){return Qt(t)||function bn(t){return t[ue]||null}(t)}function Ee(t){return function fn(t){return t[$]||null}(t)}const qe={};function se(t){return Vn(()=>{const r={type:t.type,bootstrap:t.bootstrap||Ye,declarations:t.declarations||Ye,imports:t.imports||Ye,exports:t.exports||Ye,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&(qe[t.id]=t.type),r})}function ye(t,r){if(null==t)return Fn;const s={};for(const a in t)if(t.hasOwnProperty(a)){let d=t[a],p=d;Array.isArray(d)&&(p=d[1],d=d[0]),s[d]=a,r&&(r[d]=p)}return s}const lt=Ge;function yt(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function Qt(t){return t[Fe]||null}function On(t,r){const s=t[z]||null;if(!s&&!0===r)throw new Error(`Type ${he(t)} does not have '\u0275mod' property.`);return s}function zt(t){return Array.isArray(t)&&"object"==typeof t[1]}function en(t){return Array.isArray(t)&&!0===t[1]}function wn(t){return 0!=(8&t.flags)}function vr(t){return 2==(2&t.flags)}function Er(t){return 1==(1&t.flags)}function Xr(t){return null!==t.template}function oi(t){return 0!=(512&t[2])}function Ci(t,r){return t.hasOwnProperty(me)?t[me]:null}class Ei{constructor(r,s,a){this.previousValue=r,this.currentValue=s,this.firstChange=a}isFirstChange(){return this.firstChange}}function cs(){return bi}function bi(t){return t.type.prototype.ngOnChanges&&(t.setInput=Ti),Hs}function Hs(){const t=Di(this),r=null==t?void 0:t.current;if(r){const s=t.previous;if(s===Fn)t.previous=r;else for(let a in r)s[a]=r[a];t.current=null,this.ngOnChanges(r)}}function Ti(t,r,s,a){const d=Di(t)||function Lr(t,r){return t[yo]=r}(t,{previous:Fn,current:null}),p=d.current||(d.current={}),w=d.previous,x=this.declaredInputs[s],k=w[x];p[x]=new Ei(k&&k.currentValue,r,w===Fn),t[a]=r}cs.ngInherit=!0;const yo="__ngSimpleChanges__";function Di(t){return t[yo]||null}let Po;function Zi(t){Po=t}function Ir(t){return!!t.listen}const B={createRenderer:(t,r)=>function Ws(){return void 0!==Po?Po:"undefined"!=typeof document?document:void 0}()};function j(t){for(;Array.isArray(t);)t=t[0];return t}function gt(t,r){return j(r[t])}function Vt(t,r){return j(r[t.index])}function kr(t,r){return t.data[r]}function Sr(t,r){return t[r]}function lr(t,r){const s=r[t];return zt(s)?s:s[0]}function Cr(t){return 4==(4&t[2])}function ti(t){return 128==(128&t[2])}function zr(t,r){return null==r?null:t[r]}function fs(t){t[18]=0}function Hi(t,r){t[5]+=r;let s=t,a=t[3];for(;null!==a&&(1===r&&1===s[5]||-1===r&&0===s[5]);)a[5]+=r,s=a,a=a[3]}const Gn={lFrame:zs(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function H(){return Gn.bindingsEnabled}function q(){return Gn.lFrame.lView}function tt(){return Gn.lFrame.tView}function Sn(t){return Gn.lFrame.contextLView=t,t[8]}function tr(){let t=ns();for(;null!==t&&64===t.type;)t=t.parent;return t}function ns(){return Gn.lFrame.currentTNode}function rs(t,r){const s=Gn.lFrame;s.currentTNode=t,s.isParent=r}function oo(){return Gn.lFrame.isParent}function Ra(){return Gn.isInCheckNoChangesMode}function Es(t){Gn.isInCheckNoChangesMode=t}function pi(){const t=Gn.lFrame;let r=t.bindingRootIndex;return-1===r&&(r=t.bindingRootIndex=t.tView.bindingStartIndex),r}function No(){return Gn.lFrame.bindingIndex++}function Yo(t,r){const s=Gn.lFrame;s.bindingIndex=s.bindingRootIndex=t,ui(r)}function ui(t){Gn.lFrame.currentDirectiveIndex=t}function Pa(){return Gn.lFrame.currentQueryIndex}function Qo(t){Gn.lFrame.currentQueryIndex=t}function Jo(t){const r=t[1];return 2===r.type?r.declTNode:1===r.type?t[6]:null}function Gs(t,r,s){if(s&wt.SkipSelf){let d=r,p=t;for(;!(d=d.parent,null!==d||s&wt.Host||(d=Jo(p),null===d||(p=p[15],10&d.type))););if(null===d)return!1;r=d,t=p}const a=Gn.lFrame=Yi();return a.currentTNode=r,a.lView=t,!0}function is(t){const r=Yi(),s=t[1];Gn.lFrame=r,r.currentTNode=s.firstChild,r.lView=t,r.tView=s,r.contextLView=t,r.bindingIndex=s.bindingStartIndex,r.inI18n=!1}function Yi(){const t=Gn.lFrame,r=null===t?null:t.child;return null===r?zs(t):r}function zs(t){const r={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=r),r}function wo(){const t=Gn.lFrame;return Gn.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const Qu=wo;function ko(){const t=wo();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function xi(){return Gn.lFrame.selectedIndex}function Ks(t){Gn.lFrame.selectedIndex=t}function li(){const t=Gn.lFrame;return kr(t.tView,t.selectedIndex)}function uo(t,r){for(let s=r.directiveStart,a=r.directiveEnd;s<a;s++){const p=t.data[s].type.prototype,{ngAfterContentInit:w,ngAfterContentChecked:x,ngAfterViewInit:k,ngAfterViewChecked:Y,ngOnDestroy:te}=p;w&&(t.contentHooks||(t.contentHooks=[])).push(-s,w),x&&((t.contentHooks||(t.contentHooks=[])).push(s,x),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(s,x)),k&&(t.viewHooks||(t.viewHooks=[])).push(-s,k),Y&&((t.viewHooks||(t.viewHooks=[])).push(s,Y),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(s,Y)),null!=te&&(t.destroyHooks||(t.destroyHooks=[])).push(s,te)}}function Fo(t,r,s){gi(t,r,3,s)}function uu(t,r,s,a){(3&t[2])===s&&gi(t,r,s,a)}function lu(t,r){let s=t[2];(3&s)===r&&(s&=2047,s+=1,t[2]=s)}function gi(t,r,s,a){const p=null!=a?a:-1,w=r.length-1;let x=0;for(let k=void 0!==a?65535&t[18]:0;k<w;k++)if("number"==typeof r[k+1]){if(x=r[k],null!=a&&x>=a)break}else r[k]<0&&(t[18]+=65536),(x<p||-1==p)&&(Su(t,s,r,k),t[18]=(4294901760&t[18])+k+2),k++}function Su(t,r,s,a){const d=s[a]<0,p=s[a+1],x=t[d?-s[a]:s[a]];if(d){if(t[2]>>11<t[18]>>16&&(3&t[2])===r){t[2]+=2048;try{p.call(x)}finally{}}}else try{p.call(x)}finally{}}class ea{constructor(r,s,a){this.factory=r,this.resolving=!1,this.canSeeViewProviders=s,this.injectImpl=a}}function qs(t,r,s){const a=Ir(t);let d=0;for(;d<s.length;){const p=s[d];if("number"==typeof p){if(0!==p)break;d++;const w=s[d++],x=s[d++],k=s[d++];a?t.setAttribute(r,x,k,w):r.setAttributeNS(w,x,k)}else{const w=p,x=s[++d];In(w)?a&&t.setProperty(r,w,x):a?t.setAttribute(r,w,x):r.setAttribute(w,x),d++}}return d}function Ju(t){return 3===t||4===t||6===t}function In(t){return 64===t.charCodeAt(0)}function Xn(t,r){if(null!==r&&0!==r.length)if(null===t||0===t.length)t=r.slice();else{let s=-1;for(let a=0;a<r.length;a++){const d=r[a];"number"==typeof d?s=d:0===s||ql(t,s,d,null,-1===s||2===s?r[++a]:null)}}return t}function ql(t,r,s,a,d){let p=0,w=t.length;if(-1===r)w=-1;else for(;p<t.length;){const x=t[p++];if("number"==typeof x){if(x===r){w=-1;break}if(x>r){w=p-1;break}}}for(;p<t.length;){const x=t[p];if("number"==typeof x)break;if(x===s){if(null===a)return void(null!==d&&(t[p+1]=d));if(a===t[p+1])return void(t[p+2]=d)}p++,null!==a&&p++,null!==d&&p++}-1!==w&&(t.splice(w,0,r),p=w+1),t.splice(p++,0,s),null!==a&&t.splice(p++,0,a),null!==d&&t.splice(p++,0,d)}function nn(t){return-1!==t}function bt(t){return 32767&t}function ii(t,r){let s=function Jt(t){return t>>16}(t),a=r;for(;s>0;)a=a[15],s--;return a}let ha=!0;function ta(t){const r=ha;return ha=t,r}let La=0;function Io(t,r){const s=gs(t,r);if(-1!==s)return s;const a=r[1];a.firstCreatePass&&(t.injectorIndex=r.length,fa(a.data,t),fa(r,null),fa(a.blueprint,null));const d=xu(t,r),p=t.injectorIndex;if(nn(d)){const w=bt(d),x=ii(d,r),k=x[1].data;for(let Y=0;Y<8;Y++)r[p+Y]=x[w+Y]|k[w+Y]}return r[p+8]=d,p}function fa(t,r){t.push(0,0,0,0,0,0,0,0,r)}function gs(t,r){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===r[t.injectorIndex+8]?-1:t.injectorIndex}function xu(t,r){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let s=0,a=null,d=r;for(;null!==d;){const p=d[1],w=p.type;if(a=2===w?p.declTNode:1===w?d[6]:null,null===a)return-1;if(s++,d=d[15],-1!==a.injectorIndex)return a.injectorIndex|s<<16}return-1}function R(t,r,s){!function du(t,r,s){let a;"string"==typeof s?a=s.charCodeAt(0)||0:s.hasOwnProperty(de)&&(a=s[de]),null==a&&(a=s[de]=La++);const d=255&a;r.data[t+(d>>5)]|=1<<d}(t,r,s)}function C(t,r,s){if(s&wt.Optional)return t;rt(r,"NodeInjector")}function V(t,r,s,a){if(s&wt.Optional&&void 0===a&&(a=null),0==(s&(wt.Self|wt.Host))){const d=t[9],p=Rt(void 0);try{return d?d.get(r,a,s&wt.Optional):pn(r,a,s&wt.Optional)}finally{Rt(p)}}return C(a,r,s)}function W(t,r,s,a=wt.Default,d){if(null!==t){const p=function Tn(t){if("string"==typeof t)return t.charCodeAt(0)||0;const r=t.hasOwnProperty(de)?t[de]:void 0;return"number"==typeof r?r>=0?255&r:Te:r}(s);if("function"==typeof p){if(!Gs(r,t,a))return a&wt.Host?C(d,s,a):V(r,s,a,d);try{const w=p(a);if(null!=w||a&wt.Optional)return w;rt(s)}finally{Qu()}}else if("number"==typeof p){let w=null,x=gs(t,r),k=-1,Y=a&wt.Host?r[16][6]:null;for((-1===x||a&wt.SkipSelf)&&(k=-1===x?xu(t,r):r[x+8],-1!==k&&rr(a,!1)?(w=r[1],x=bt(k),r=ii(k,r)):x=-1);-1!==x;){const te=r[1];if(jn(p,x,te.data)){const Ie=Ue(x,r,s,w,a,Y);if(Ie!==X)return Ie}k=r[x+8],-1!==k&&rr(a,r[1].data[x+8]===Y)&&jn(p,x,r)?(w=te,x=bt(k),r=ii(k,r)):x=-1}}}return V(r,s,a,d)}const X={};function Te(){return new Dr(tr(),q())}function Ue(t,r,s,a,d,p){const w=r[1],x=w.data[t+8],te=At(x,w,s,null==a?vr(x)&&ha:a!=w&&0!=(3&x.type),d&wt.Host&&p===x);return null!==te?En(r,w,te,x):X}function At(t,r,s,a,d){const p=t.providerIndexes,w=r.data,x=1048575&p,k=t.directiveStart,te=p>>20,ze=d?x+te:t.directiveEnd;for(let ft=a?x:x+te;ft<ze;ft++){const jt=w[ft];if(ft<k&&s===jt||ft>=k&&jt.type===s)return ft}if(d){const ft=w[k];if(ft&&Xr(ft)&&ft.type===s)return k}return null}function En(t,r,s,a){let d=t[s];const p=r.data;if(function ps(t){return t instanceof ea}(d)){const w=d;w.resolving&&function Mt(t,r){const s=r?`. Dependency path: ${r.join(" > ")} > ${t}`:"";throw new dt(-200,`Circular dependency in DI detected for ${t}${s}`)}(mt(p[s]));const x=ta(w.canSeeViewProviders);w.resolving=!0;const k=w.injectImpl?Rt(w.injectImpl):null;Gs(t,a,wt.Default);try{d=t[s]=w.factory(void 0,p,t,a),r.firstCreatePass&&s>=a.directiveStart&&function Wi(t,r,s){const{ngOnChanges:a,ngOnInit:d,ngDoCheck:p}=r.type.prototype;if(a){const w=bi(r);(s.preOrderHooks||(s.preOrderHooks=[])).push(t,w),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,w)}d&&(s.preOrderHooks||(s.preOrderHooks=[])).push(0-t,d),p&&((s.preOrderHooks||(s.preOrderHooks=[])).push(t,p),(s.preOrderCheckHooks||(s.preOrderCheckHooks=[])).push(t,p))}(s,p[s],r)}finally{null!==k&&Rt(k),ta(x),w.resolving=!1,Qu()}}return d}function jn(t,r,s){return!!(s[r+(t>>5)]&1<<t)}function rr(t,r){return!(t&wt.Self||t&wt.Host&&r)}class Dr{constructor(r,s){this._tNode=r,this._lView=s}get(r,s,a){return W(this._tNode,this._lView,r,a,s)}}function Os(t){return Vn(()=>{const r=t.prototype.constructor,s=r[me]||Kr(r),a=Object.prototype;let d=Object.getPrototypeOf(t.prototype).constructor;for(;d&&d!==a;){const p=d[me]||Kr(d);if(p&&p!==s)return p;d=Object.getPrototypeOf(d)}return p=>new p})}function Kr(t){return ot(t)?()=>{const r=Kr(De(t));return r&&r()}:Ci(t)}function Ua(t){return function b(t,r){if("class"===r)return t.classes;if("style"===r)return t.styles;const s=t.attrs;if(s){const a=s.length;let d=0;for(;d<a;){const p=s[d];if(Ju(p))break;if(0===p)d+=2;else if("number"==typeof p)for(d++;d<a&&"string"==typeof s[d];)d++;else{if(p===r)return s[d+1];d+=2}}}return null}(tr(),t)}const Fr="__parameters__";function Pi(t,r,s){return Vn(()=>{const a=function Gi(t){return function(...s){if(t){const a=t(...s);for(const d in a)this[d]=a[d]}}}(r);function d(...p){if(this instanceof d)return a.apply(this,p),this;const w=new d(...p);return x.annotation=w,x;function x(k,Y,te){const Ie=k.hasOwnProperty(Fr)?k[Fr]:Object.defineProperty(k,Fr,{value:[]})[Fr];for(;Ie.length<=te;)Ie.push(null);return(Ie[te]=Ie[te]||[]).push(w),k}}return s&&(d.prototype=Object.create(s.prototype)),d.prototype.ngMetadataName=t,d.annotationCls=d,d})}class wr{constructor(r,s){this._desc=r,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof s?this.__NG_ELEMENT_ID__=s:void 0!==s&&(this.\u0275prov=sn({token:this,providedIn:s.providedIn||"root",factory:s.factory}))}toString(){return`InjectionToken ${this._desc}`}}const Va=new wr("AnalyzeForEntryComponents");function Ni(t,r){void 0===r&&(r=t);for(let s=0;s<t.length;s++){let a=t[s];Array.isArray(a)?(r===t&&(r=t.slice(0,s)),Ni(a,r)):r!==t&&r.push(a)}return r}function Ys(t,r){t.forEach(s=>Array.isArray(s)?Ys(s,r):r(s))}function el(t,r,s){r>=t.length?t.push(s):t.splice(r,0,s)}function hu(t,r){return r>=t.length-1?t.pop():t.splice(r,1)[0]}function Is(t,r,s){let a=Ls(t,r);return a>=0?t[1|a]=s:(a=~a,function Tc(t,r,s,a){let d=t.length;if(d==r)t.push(s,a);else if(1===d)t.push(a,t[0]),t[0]=s;else{for(d--,t.push(t[d-1],t[d]);d>r;)t[d]=t[d-2],d--;t[r]=s,t[r+1]=a}}(t,a,r,s)),a}function tl(t,r){const s=Ls(t,r);if(s>=0)return t[1|s]}function Ls(t,r){return function ga(t,r,s){let a=0,d=t.length>>s;for(;d!==a;){const p=a+(d-a>>1),w=t[p<<s];if(r===w)return p<<s;w>r?d=p:a=p+1}return~(d<<s)}(t,r,1)}const Qs={},Ha="__NG_DI_FLAG__",mi="ngTempTokenPath",Wa=/\n/gm,Pu="__source",od=Se({provide:String,useValue:Se});let sa;function Nu(t){const r=sa;return sa=t,r}function ad(t,r=wt.Default){if(void 0===sa)throw new dt(203,"");return null===sa?pn(t,void 0,r):sa.get(t,r&wt.Optional?null:void 0,r)}function ci(t,r=wt.Default){return(function It(){return Xe}()||ad)(De(t),r)}const ud=ci;function ya(t){const r=[];for(let s=0;s<t.length;s++){const a=De(t[s]);if(Array.isArray(a)){if(0===a.length)throw new dt(900,"");let d,p=wt.Default;for(let w=0;w<a.length;w++){const x=a[w],k=Cs(x);"number"==typeof k?-1===k?d=x.token:p|=k:d=x}r.push(ci(d,p))}else r.push(ci(a))}return r}function Uo(t,r){return t[Ha]=r,t.prototype[Ha]=r,t}function Cs(t){return t[Ha]}const ho=Uo(Pi("Inject",t=>({token:t})),-1),Bo=Uo(Pi("Optional"),8),va=Uo(Pi("SkipSelf"),4);class Sc{constructor(r){this.changingThisBreaksApplicationSecurity=r}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}function jo(t){return t instanceof Sc?t.changingThisBreaksApplicationSecurity:t}const g=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,M=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;var $r=(()=>(($r=$r||{})[$r.NONE=0]="NONE",$r[$r.HTML=1]="HTML",$r[$r.STYLE=2]="STYLE",$r[$r.SCRIPT=3]="SCRIPT",$r[$r.URL=4]="URL",$r[$r.RESOURCE_URL=5]="RESOURCE_URL",$r))();function Ol(t){const r=function wu(){const t=q();return t&&t[12]}();return r?r.sanitize($r.URL,t)||"":function Ya(t,r){const s=function xc(t){return t instanceof Sc&&t.getTypeName()||null}(t);if(null!=s&&s!==r){if("ResourceURL"===s&&"URL"===r)return!0;throw new Error(`Required a safe ${r}, got a ${s} (see https://g.co/ng/security#xss)`)}return s===r}(t,"URL")?jo(t):function ee(t){return(t=String(t)).match(g)||t.match(M)?t:"unsafe:"+t}(be(t))}const dl="__ngContext__";function ki(t,r){t[dl]=r}function hl(t){const r=function zi(t){return t[dl]||null}(t);return r?Array.isArray(r)?r:r.lView:null}function vd(t){return t.ngOriginalError}function Ih(t,...r){t.error(...r)}class lc{constructor(){this._console=console}handleError(r){const s=this._findOriginalError(r),a=function Rc(t){return t&&t.ngErrorLogger||Ih}(r);a(this._console,"ERROR",r),s&&a(this._console,"ORIGINAL ERROR",s)}_findOriginalError(r){let s=r&&vd(r);for(;s&&vd(s);)s=vd(s);return s||null}}const zd=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(Bn))();function aa(t){return t instanceof Function?t():t}var nu=(()=>((nu=nu||{})[nu.Important=1]="Important",nu[nu.DashCase=2]="DashCase",nu))();function Nc(t,r){return undefined(t,r)}function hc(t){const r=t[3];return en(r)?r[3]:r}function Nt(t){return ua(t[13])}function gl(t){return ua(t[4])}function ua(t){for(;null!==t&&!en(t);)t=t[4];return t}function Sa(t,r,s,a,d){if(null!=a){let p,w=!1;en(a)?p=a:zt(a)&&(w=!0,a=a[0]);const x=j(a);0===t&&null!==s?null==d?Ki(r,s,x):Or(r,s,x,d||null,!0):1===t&&null!==s?Or(r,s,x,d||null,!0):2===t?function iu(t,r,s){const a=ml(t,r);a&&function Vl(t,r,s,a){Ir(t)?t.removeChild(r,s,a):r.removeChild(s)}(t,a,r,s)}(r,x,w):3===t&&r.destroyNode(x),null!=p&&function up(t,r,s,a,d){const p=s[7];p!==j(s)&&Sa(r,t,a,p,d);for(let x=10;x<s.length;x++){const k=s[x];su(k[1],k,t,r,a,p)}}(r,t,p,s,d)}}function h(t,r,s){if(Ir(t))return t.createElement(r,s);{const a=null!==s?function Ko(t){const r=t.toLowerCase();return"svg"===r?"http://www.w3.org/2000/svg":"math"===r?"http://www.w3.org/1998/MathML/":null}(s):null;return null===a?t.createElement(r):t.createElementNS(a,r)}}function ce(t,r){const s=t[9],a=s.indexOf(r),d=r[3];1024&r[2]&&(r[2]&=-1025,Hi(d,-1)),s.splice(a,1)}function Ae(t,r){if(t.length<=10)return;const s=10+r,a=t[s];if(a){const d=a[17];null!==d&&d!==t&&ce(d,a),r>0&&(t[s-1][4]=a[4]);const p=hu(t,10+r);!function l(t,r){su(t,r,r[11],2,null,null),r[0]=null,r[6]=null}(a[1],a);const w=p[19];null!==w&&w.detachView(p[1]),a[3]=null,a[4]=null,a[2]&=-129}return a}function Be(t,r){if(!(256&r[2])){const s=r[11];Ir(s)&&s.destroyNode&&su(t,r,s,3,null,null),function A(t){let r=t[13];if(!r)return Dt(t[1],t);for(;r;){let s=null;if(zt(r))s=r[13];else{const a=r[10];a&&(s=a)}if(!s){for(;r&&!r[4]&&r!==t;)zt(r)&&Dt(r[1],r),r=r[3];null===r&&(r=t),zt(r)&&Dt(r[1],r),s=r&&r[4]}r=s}}(r)}}function Dt(t,r){if(!(256&r[2])){r[2]&=-129,r[2]|=256,function Bt(t,r){let s;if(null!=t&&null!=(s=t.destroyHooks))for(let a=0;a<s.length;a+=2){const d=r[s[a]];if(!(d instanceof ea)){const p=s[a+1];if(Array.isArray(p))for(let w=0;w<p.length;w+=2){const x=d[p[w]],k=p[w+1];try{k.call(x)}finally{}}else try{p.call(d)}finally{}}}}(t,r),function Et(t,r){const s=t.cleanup,a=r[7];let d=-1;if(null!==s)for(let p=0;p<s.length-1;p+=2)if("string"==typeof s[p]){const w=s[p+1],x="function"==typeof w?w(r):j(r[w]),k=a[d=s[p+2]],Y=s[p+3];"boolean"==typeof Y?x.removeEventListener(s[p],k,Y):Y>=0?a[d=Y]():a[d=-Y].unsubscribe(),p+=2}else{const w=a[d=s[p+1]];s[p].call(w)}if(null!==a){for(let p=d+1;p<a.length;p++)a[p]();r[7]=null}}(t,r),1===r[1].type&&Ir(r[11])&&r[11].destroy();const s=r[17];if(null!==s&&en(r[3])){s!==r[3]&&ce(s,r);const a=r[19];null!==a&&a.detachView(t)}}}function Mn(t,r,s){return function qn(t,r,s){let a=r;for(;null!==a&&40&a.type;)a=(r=a).parent;if(null===a)return s[0];if(2&a.flags){const d=t.data[a.directiveStart].encapsulation;if(d===Ot.None||d===Ot.Emulated)return null}return Vt(a,s)}(t,r.parent,s)}function Or(t,r,s,a,d){Ir(t)?t.insertBefore(r,s,a,d):r.insertBefore(s,a,d)}function Ki(t,r,s){Ir(t)?t.appendChild(r,s):r.appendChild(s)}function zu(t,r,s,a,d){null!==a?Or(t,r,s,a,d):Ki(t,r,s)}function ml(t,r){return Ir(t)?t.parentNode(r):r.parentNode}let po=function uf(t,r,s){return 40&t.type?Vt(t,s):null};function yl(t,r,s,a){const d=Mn(t,a,r),p=r[11],x=function Ah(t,r,s){return po(t,r,s)}(a.parent||r[6],a,r);if(null!=d)if(Array.isArray(s))for(let k=0;k<s.length;k++)zu(p,d,s[k],x,!1);else zu(p,d,s,x,!1)}function Oc(t,r){if(null!==r){const s=r.type;if(3&s)return Vt(r,t);if(4&s)return Sh(-1,t[r.index]);if(8&s){const a=r.child;if(null!==a)return Oc(t,a);{const d=t[r.index];return en(d)?Sh(-1,d):j(d)}}if(32&s)return Nc(r,t)()||j(t[r.index]);{const a=ap(t,r);return null!==a?Array.isArray(a)?a[0]:Oc(hc(t[16]),a):Oc(t,r.next)}}return null}function ap(t,r){return null!==r?t[16][6].projection[r.projection]:null}function Sh(t,r){const s=10+t+1;if(s<r.length){const a=r[s],d=a[1].firstChild;if(null!==d)return Oc(a,d)}return r[7]}function kc(t,r,s,a,d,p,w){for(;null!=s;){const x=a[s.index],k=s.type;if(w&&0===r&&(x&&ki(j(x),a),s.flags|=4),64!=(64&s.flags))if(8&k)kc(t,r,s.child,a,d,p,!1),Sa(r,t,d,x,p);else if(32&k){const Y=Nc(s,a);let te;for(;te=Y();)Sa(r,t,d,te,p);Sa(r,t,d,x,p)}else 16&k?xh(t,r,a,s,d,p):Sa(r,t,d,x,p);s=w?s.projectionNext:s.next}}function su(t,r,s,a,d,p){kc(s,a,t.firstChild,r,d,p,!1)}function xh(t,r,s,a,d,p){const w=s[16],k=w[6].projection[a.projection];if(Array.isArray(k))for(let Y=0;Y<k.length;Y++)Sa(r,t,d,k[Y],p);else kc(t,r,k,w[3],d,p,!0)}function Qd(t,r,s){Ir(t)?t.setAttribute(r,"style",s):r.style.cssText=s}function Fc(t,r,s){Ir(t)?""===s?t.removeAttribute(r,"class"):t.setAttribute(r,"class",s):r.className=s}function Mh(t,r,s){let a=t.length;for(;;){const d=t.indexOf(r,s);if(-1===d)return d;if(0===d||t.charCodeAt(d-1)<=32){const p=r.length;if(d+p===a||t.charCodeAt(d+p)<=32)return d}s=d+1}}const Lc="ng-template";function Jd(t,r,s){let a=0;for(;a<t.length;){let d=t[a++];if(s&&"class"===d){if(d=t[a],-1!==Mh(d.toLowerCase(),r,0))return!0}else if(1===d){for(;a<t.length&&"string"==typeof(d=t[a++]);)if(d.toLowerCase()===r)return!0;return!1}}return!1}function Uc(t){return 4===t.type&&t.value!==Lc}function Xd(t,r,s){return r===(4!==t.type||s?t.value:Lc)}function Wo(t,r,s){let a=4;const d=t.attrs||[],p=function vl(t){for(let r=0;r<t.length;r++)if(Ju(t[r]))return r;return t.length}(d);let w=!1;for(let x=0;x<r.length;x++){const k=r[x];if("number"!=typeof k){if(!w)if(4&a){if(a=2|1&a,""!==k&&!Xd(t,k,s)||""===k&&1===r.length){if(ou(a))return!1;w=!0}}else{const Y=8&a?k:r[++x];if(8&a&&null!==t.attrs){if(!Jd(t.attrs,Y,s)){if(ou(a))return!1;w=!0}continue}const Ie=eh(8&a?"class":k,d,Uc(t),s);if(-1===Ie){if(ou(a))return!1;w=!0;continue}if(""!==Y){let ze;ze=Ie>p?"":d[Ie+1].toLowerCase();const ft=8&a?ze:null;if(ft&&-1!==Mh(ft,Y,0)||2&a&&Y!==ze){if(ou(a))return!1;w=!0}}}}else{if(!w&&!ou(a)&&!ou(k))return!1;if(w&&ou(k))continue;w=!1,a=k|1&a}}return ou(a)||w}function ou(t){return 0==(1&t)}function eh(t,r,s,a){if(null===r)return-1;let d=0;if(a||!s){let p=!1;for(;d<r.length;){const w=r[d];if(w===t)return d;if(3===w||6===w)p=!0;else{if(1===w||2===w){let x=r[++d];for(;"string"==typeof x;)x=r[++d];continue}if(4===w)break;if(0===w){d+=4;continue}}d+=p?1:2}return-1}return function Vc(t,r){let s=t.indexOf(4);if(s>-1)for(s++;s<t.length;){const a=t[s];if("number"==typeof a)return-1;if(a===r)return s;s++}return-1}(r,t)}function th(t,r,s=!1){for(let a=0;a<r.length;a++)if(Wo(t,r[a],s))return!0;return!1}function El(t,r){return t?":not("+r.trim()+")":r}function cp(t){let r=t[0],s=1,a=2,d="",p=!1;for(;s<t.length;){let w=t[s];if("string"==typeof w)if(2&a){const x=t[++s];d+="["+w+(x.length>0?'="'+x+'"':"")+"]"}else 8&a?d+="."+w:4&a&&(d+=" "+w);else""!==d&&!ou(w)&&(r+=El(p,d),d=""),a=w,p=p||!ou(a);s++}return""!==d&&(r+=El(p,d)),r}const dr={};function wl(t){Id(tt(),q(),xi()+t,Ra())}function Id(t,r,s,a){if(!a)if(3==(3&r[2])){const p=t.preOrderCheckHooks;null!==p&&Fo(r,p,s)}else{const p=t.preOrderHooks;null!==p&&uu(r,p,0,s)}Ks(s)}function Rh(t,r){return t<<17|r<<2}function Ku(t){return t>>17&32767}function Cd(t){return 2|t}function Il(t){return(131068&t)>>2}function hf(t,r){return-131069&t|r<<2}function Ph(t){return 1|t}function lh(t,r){const s=t.contentQueries;if(null!==s)for(let a=0;a<s.length;a+=2){const d=s[a],p=s[a+1];if(-1!==p){const w=t.data[p];Qo(d),w.contentQueries(2,r[p],p)}}}function E(t,r,s,a,d,p,w,x,k,Y){const te=r.blueprint.slice();return te[0]=d,te[2]=140|a,fs(te),te[3]=te[15]=t,te[8]=s,te[10]=w||t&&t[10],te[11]=x||t&&t[11],te[12]=k||t&&t[12]||null,te[9]=Y||t&&t[9]||null,te[6]=p,te[16]=2==r.type?t[16]:te,te}function v(t,r,s,a,d){let p=t.data[r];if(null===p)p=function S(t,r,s,a,d){const p=ns(),w=oo(),k=t.data[r]=function Do(t,r,s,a,d,p){return{type:s,index:a,insertBeforeIndex:null,injectorIndex:r?r.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:d,attrs:p,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:r,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,w?p:p&&p.parent,s,r,a,d);return null===t.firstChild&&(t.firstChild=k),null!==p&&(w?null==p.child&&null!==k.parent&&(p.child=k):null===p.next&&(p.next=k)),k}(t,r,s,a,d),function Du(){return Gn.lFrame.inI18n}()&&(p.flags|=64);else if(64&p.type){p.type=s,p.value=a,p.attrs=d;const w=function Ai(){const t=Gn.lFrame,r=t.currentTNode;return t.isParent?r:r.parent}();p.injectorIndex=null===w?-1:w.injectorIndex}return rs(p,!0),p}function K(t,r,s,a){if(0===s)return-1;const d=r.length;for(let p=0;p<s;p++)r.push(a),t.blueprint.push(a),t.data.push(null);return d}function re(t,r,s){is(r);try{const a=t.viewQuery;null!==a&&jl(1,a,s);const d=t.template;null!==d&&qt(t,r,d,1,s),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&lh(t,r),t.staticViewQueries&&jl(2,t.viewQuery,s);const p=t.components;null!==p&&function bf(t,r){for(let s=0;s<r.length;s++)Mp(t,r[s])}(r,p)}catch(a){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),a}finally{r[2]&=-5,ko()}}function Ve(t,r,s,a){const d=r[2];if(256==(256&d))return;is(r);const p=Ra();try{fs(r),function da(t){return Gn.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==s&&qt(t,r,s,2,a);const w=3==(3&d);if(!p)if(w){const Y=t.preOrderCheckHooks;null!==Y&&Fo(r,Y,null)}else{const Y=t.preOrderHooks;null!==Y&&uu(r,Y,0,null),lu(r,0)}if(function d_(t){for(let r=Nt(t);null!==r;r=gl(r)){if(!r[2])continue;const s=r[9];for(let a=0;a<s.length;a++){const d=s[a],p=d[3];0==(1024&d[2])&&Hi(p,1),d[2]|=1024}}}(r),function Wg(t){for(let r=Nt(t);null!==r;r=gl(r))for(let s=10;s<r.length;s++){const a=r[s],d=a[1];ti(a)&&Ve(d,a,d.template,a[8])}}(r),null!==t.contentQueries&&lh(t,r),!p)if(w){const Y=t.contentCheckHooks;null!==Y&&Fo(r,Y)}else{const Y=t.contentHooks;null!==Y&&uu(r,Y,1),lu(r,1)}!function Ep(t,r){const s=t.hostBindingOpCodes;if(null!==s)try{for(let a=0;a<s.length;a++){const d=s[a];if(d<0)Ks(~d);else{const p=d,w=s[++a],x=s[++a];Yo(w,p),x(2,r[p])}}}finally{Ks(-1)}}(t,r);const x=t.components;null!==x&&function Cf(t,r){for(let s=0;s<r.length;s++)Sp(t,r[s])}(r,x);const k=t.viewQuery;if(null!==k&&jl(2,k,a),!p)if(w){const Y=t.viewCheckHooks;null!==Y&&Fo(r,Y)}else{const Y=t.viewHooks;null!==Y&&uu(r,Y,2),lu(r,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),p||(r[2]&=-73),1024&r[2]&&(r[2]&=-1025,Hi(r[3],-1))}finally{ko()}}function vt(t,r,s,a){const d=r[10],p=!Ra(),w=Cr(r);try{p&&!w&&d.begin&&d.begin(),w&&re(t,r,a),Ve(t,r,s,a)}finally{p&&!w&&d.end&&d.end()}}function qt(t,r,s,a,d){const p=xi(),w=2&a;try{Ks(-1),w&&r.length>20&&Id(t,r,20,Ra()),s(a,d)}finally{Ks(p)}}function ar(t,r,s){!H()||(function $c(t,r,s,a){const d=s.directiveStart,p=s.directiveEnd;t.firstCreatePass||Io(s,r),ki(a,r);const w=s.initialInputs;for(let x=d;x<p;x++){const k=t.data[x],Y=Xr(k);Y&&Tp(r,s,k);const te=En(r,t,x,s);ki(te,r),null!==w&&Dp(0,x-d,te,k,0,w),Y&&(lr(s.index,r)[8]=te)}}(t,r,s,Vt(s,r)),128==(128&s.flags)&&function jg(t,r,s){const a=s.directiveStart,d=s.directiveEnd,w=s.index,x=function Si(){return Gn.lFrame.currentDirectiveIndex}();try{Ks(w);for(let k=a;k<d;k++){const Y=t.data[k],te=r[k];ui(k),(null!==Y.hostBindings||0!==Y.hostVars||null!==Y.hostAttrs)&&$g(Y,te)}}finally{Ks(-1),ui(x)}}(t,r,s))}function pr(t,r,s=Vt){const a=r.localNames;if(null!==a){let d=r.index+1;for(let p=0;p<a.length;p+=2){const w=a[p+1],x=-1===w?s(r,t):t[w];t[d++]=x}}}function qr(t){const r=t.tView;return null===r||r.incompleteFirstPass?t.tView=Mr(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):r}function Mr(t,r,s,a,d,p,w,x,k,Y){const te=20+a,Ie=te+d,ze=function Zr(t,r){const s=[];for(let a=0;a<r;a++)s.push(a<t?null:dr);return s}(te,Ie),ft="function"==typeof Y?Y():Y;return ze[1]={type:t,blueprint:ze,template:s,queries:null,viewQuery:x,declTNode:r,data:ze.slice().fill(null,te),bindingStartIndex:te,expandoStartIndex:Ie,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof p?p():p,pipeRegistry:"function"==typeof w?w():w,firstChild:null,schemas:k,consts:ft,incompleteFirstPass:!1}}function To(t,r,s,a){const d=xd(r);null===s?d.push(a):(d.push(s),t.firstCreatePass&&Op(t).push(a,d.length-1))}function go(t,r,s){for(let a in t)if(t.hasOwnProperty(a)){const d=t[a];(s=null===s?{}:s).hasOwnProperty(a)?s[a].push(r,d):s[a]=[r,d]}return s}function Js(t,r,s,a,d,p,w,x){const k=Vt(r,s);let te,Y=r.inputs;!x&&null!=Y&&(te=Y[a])?(Kg(t,s,te,a,d),vr(r)&&function _c(t,r){const s=lr(r,t);16&s[2]||(s[2]|=64)}(s,r.index)):3&r.type&&(a=function jc(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(a),d=null!=w?w(d,r.value||"",a):d,Ir(p)?p.setProperty(k,a,d):In(a)||(k.setProperty?k.setProperty(a,d):k[a]=d))}function Df(t,r,s,a){let d=!1;if(H()){const p=function Cp(t,r,s){const a=t.directiveRegistry;let d=null;if(a)for(let p=0;p<a.length;p++){const w=a[p];th(s,w.selectors,!1)&&(d||(d=[]),R(Io(s,r),t,w.type),Xr(w)?(Hg(t,s),d.unshift(w)):d.push(w))}return d}(t,r,s),w=null===a?null:{"":-1};if(null!==p){d=!0,Sf(s,t.data.length,p.length);for(let te=0;te<p.length;te++){const Ie=p[te];Ie.providersResolver&&Ie.providersResolver(Ie)}let x=!1,k=!1,Y=K(t,r,p.length,null);for(let te=0;te<p.length;te++){const Ie=p[te];s.mergedAttrs=Xn(s.mergedAttrs,Ie.hostAttrs),Uh(t,s,r,Y,Ie),l_(Y,Ie,w),null!==Ie.contentQueries&&(s.flags|=8),(null!==Ie.hostBindings||null!==Ie.hostAttrs||0!==Ie.hostVars)&&(s.flags|=128);const ze=Ie.type.prototype;!x&&(ze.ngOnChanges||ze.ngOnInit||ze.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(s.index),x=!0),!k&&(ze.ngOnChanges||ze.ngDoCheck)&&((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(s.index),k=!0),Y++}!function mo(t,r){const a=r.directiveEnd,d=t.data,p=r.attrs,w=[];let x=null,k=null;for(let Y=r.directiveStart;Y<a;Y++){const te=d[Y],Ie=te.inputs,ze=null===p||Uc(r)?null:c_(Ie,p);w.push(ze),x=go(Ie,Y,x),k=go(te.outputs,Y,k)}null!==x&&(x.hasOwnProperty("class")&&(r.flags|=16),x.hasOwnProperty("style")&&(r.flags|=32)),r.initialInputs=w,r.inputs=x,r.outputs=k}(t,s)}w&&function bp(t,r,s){if(r){const a=t.localNames=[];for(let d=0;d<r.length;d+=2){const p=s[r[d+1]];if(null==p)throw new dt(-301,!1);a.push(r[d],p)}}}(s,a,w)}return s.mergedAttrs=Xn(s.mergedAttrs,s.attrs),d}function Af(t,r,s,a,d,p){const w=p.hostBindings;if(w){let x=t.hostBindingOpCodes;null===x&&(x=t.hostBindingOpCodes=[]);const k=~r.index;(function Ip(t){let r=t.length;for(;r>0;){const s=t[--r];if("number"==typeof s&&s<0)return s}return 0})(x)!=k&&x.push(k),x.push(a,d,w)}}function $g(t,r){null!==t.hostBindings&&t.hostBindings(1,r)}function Hg(t,r){r.flags|=2,(t.components||(t.components=[])).push(r.index)}function l_(t,r,s){if(s){if(r.exportAs)for(let a=0;a<r.exportAs.length;a++)s[r.exportAs[a]]=t;Xr(r)&&(s[""]=t)}}function Sf(t,r,s){t.flags|=1,t.directiveStart=r,t.directiveEnd=r+s,t.providerIndexes=r}function Uh(t,r,s,a,d){t.data[a]=d;const p=d.factory||(d.factory=Ci(d.type)),w=new ea(p,Xr(d),null);t.blueprint[a]=w,s[a]=w,Af(t,r,0,a,K(t,s,d.hostVars,dr),d)}function Tp(t,r,s){const a=Vt(r,t),d=qr(s),p=t[10],w=ch(t,E(t,d,null,s.onPush?64:16,a,r,p,p.createRenderer(a,s),null,null));t[r.index]=w}function bl(t,r,s,a,d,p){const w=Vt(t,r);!function Hc(t,r,s,a,d,p,w){if(null==p)Ir(t)?t.removeAttribute(r,d,s):r.removeAttribute(d);else{const x=null==w?be(p):w(p,a||"",d);Ir(t)?t.setAttribute(r,d,x,s):s?r.setAttributeNS(s,d,x):r.setAttribute(d,x)}}(r[11],w,p,t.value,s,a,d)}function Dp(t,r,s,a,d,p){const w=p[r];if(null!==w){const x=a.setInput;for(let k=0;k<w.length;){const Y=w[k++],te=w[k++],Ie=w[k++];null!==x?a.setInput(s,Ie,Y,te):s[te]=Ie}}}function c_(t,r){let s=null,a=0;for(;a<r.length;){const d=r[a];if(0!==d)if(5!==d){if("number"==typeof d)break;t.hasOwnProperty(d)&&(null===s&&(s=[]),s.push(d,t[d],r[a+1])),a+=2}else a+=2;else a+=4}return s}function Ap(t,r,s,a){return new Array(t,!0,!1,r,null,0,a,s,null,null)}function Sp(t,r){const s=lr(r,t);if(ti(s)){const a=s[1];80&s[2]?Ve(a,s,a.template,s[8]):s[5]>0&&xp(s)}}function xp(t){for(let a=Nt(t);null!==a;a=gl(a))for(let d=10;d<a.length;d++){const p=a[d];if(1024&p[2]){const w=p[1];Ve(w,p,w.template,p[8])}else p[5]>0&&xp(p)}const s=t[1].components;if(null!==s)for(let a=0;a<s.length;a++){const d=lr(s[a],t);ti(d)&&d[5]>0&&xp(d)}}function Mp(t,r){const s=lr(r,t),a=s[1];(function h_(t,r){for(let s=r.length;s<t.blueprint.length;s++)r.push(t.blueprint[s])})(a,s),re(a,s,s[8])}function ch(t,r){return t[13]?t[14][4]=r:t[13]=r,t[14]=r,r}function Rp(t){for(;t;){t[2]|=64;const r=hc(t);if(oi(t)&&!r)return t;t=r}return null}function Vh(t,r,s){const a=r[10];a.begin&&a.begin();try{Ve(t,r,t.template,s)}catch(d){throw zg(r,d),d}finally{a.end&&a.end()}}function Mf(t){!function xf(t){for(let r=0;r<t.components.length;r++){const s=t.components[r],a=hl(s),d=a[1];vt(d,a,d.template,s)}}(t[8])}function jl(t,r,s){Qo(0),r(t,s)}const hh=(()=>Promise.resolve(null))();function xd(t){return t[7]||(t[7]=[])}function Op(t){return t.cleanup||(t.cleanup=[])}function zg(t,r){const s=t[9],a=s?s.get(lc,null):null;a&&a.handleError(r)}function Kg(t,r,s,a,d){for(let p=0;p<s.length;){const w=s[p++],x=s[p++],k=r[w],Y=t.data[w];null!==Y.setInput?Y.setInput(k,d,a,x):k[x]=d}}function Tl(t,r,s){const a=gt(r,t);!function Dh(t,r,s){Ir(t)?t.setValue(r,s):r.textContent=s}(t[11],a,s)}function fh(t,r,s){let a=s?t.styles:null,d=s?t.classes:null,p=0;if(null!==r)for(let w=0;w<r.length;w++){const x=r[w];"number"==typeof x?p=x:1==p?d=He(d,x):2==p&&(a=He(a,x+": "+r[++w]+";"))}s?t.styles=a:t.stylesWithoutHost=a,s?t.classes=d:t.classesWithoutHost=d}const Lp=new wr("INJECTOR",-1);class Rf{get(r,s=Qs){if(s===Qs){const a=new Error(`NullInjectorError: No provider for ${he(r)}!`);throw a.name="NullInjectorError",a}return s}}const Bh=new wr("Set Injector scope."),jh={},qg={};let Up;function Vp(){return void 0===Up&&(Up=new Rf),Up}function Bp(t,r=null,s=null,a){const d=jp(t,r,s,a);return d._resolveInjectorDefTypes(),d}function jp(t,r=null,s=null,a){return new Zg(t,s,r||Vp(),a)}class Zg{constructor(r,s,a,d=null){this.parent=a,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const p=[];s&&Ys(s,x=>this.processProvider(x,r,s)),Ys([r],x=>this.processInjectorType(x,[],p)),this.records.set(Lp,Wc(void 0,this));const w=this.records.get(Bh);this.scope=null!=w?w.value:null,this.source=d||("object"==typeof r?null:he(r))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(r=>r.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(r,s=Qs,a=wt.Default){this.assertNotDestroyed();const d=Nu(this),p=Rt(void 0);try{if(!(a&wt.SkipSelf)){let x=this.records.get(r);if(void 0===x){const k=function Gp(t){return"function"==typeof t||"object"==typeof t&&t instanceof wr}(r)&&Yt(r);x=k&&this.injectableDefInScope(k)?Wc($p(r),jh):null,this.records.set(r,x)}if(null!=x)return this.hydrate(r,x)}return(a&wt.Self?Vp():this.parent).get(r,s=a&wt.Optional&&s===Qs?null:s)}catch(w){if("NullInjectorError"===w.name){if((w[mi]=w[mi]||[]).unshift(he(r)),d)throw w;return function gu(t,r,s,a){const d=t[mi];throw r[Pu]&&d.unshift(r[Pu]),t.message=function Vo(t,r,s,a=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let d=he(r);if(Array.isArray(r))d=r.map(he).join(" -> ");else if("object"==typeof r){let p=[];for(let w in r)if(r.hasOwnProperty(w)){let x=r[w];p.push(w+":"+("string"==typeof x?JSON.stringify(x):he(x)))}d=`{${p.join(", ")}}`}return`${s}${a?"("+a+")":""}[${d}]: ${t.replace(Wa,"\n  ")}`}("\n"+t.message,d,s,a),t.ngTokenPath=d,t[mi]=null,t}(w,r,"R3InjectorError",this.source)}throw w}finally{Rt(p),Nu(d)}}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(r=>this.get(r))}toString(){const r=[];return this.records.forEach((a,d)=>r.push(he(d))),`R3Injector[${r.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new dt(205,!1)}processInjectorType(r,s,a){if(!(r=De(r)))return!1;let d=Pn(r);const p=null==d&&r.ngModule||void 0,w=void 0===p?r:p,x=-1!==a.indexOf(w);if(void 0!==p&&(d=Pn(p)),null==d)return!1;if(null!=d.imports&&!x){let te;a.push(w);try{Ys(d.imports,Ie=>{this.processInjectorType(Ie,s,a)&&(void 0===te&&(te=[]),te.push(Ie))})}finally{}if(void 0!==te)for(let Ie=0;Ie<te.length;Ie++){const{ngModule:ze,providers:ft}=te[Ie];Ys(ft,jt=>this.processProvider(jt,ze,ft||Ye))}}this.injectorDefTypes.add(w);const k=Ci(w)||(()=>new w);this.records.set(w,Wc(k,jh));const Y=d.providers;if(null!=Y&&!x){const te=r;Ys(Y,Ie=>this.processProvider(Ie,te,Y))}return void 0!==p&&void 0!==r.providers}processProvider(r,s,a){let d=Gc(r=De(r))?r:De(r&&r.provide);const p=function p_(t,r,s){return Pf(t)?Wc(void 0,t.useValue):Wc(Yg(t),jh)}(r);if(Gc(r)||!0!==r.multi)this.records.get(d);else{let w=this.records.get(d);w||(w=Wc(void 0,jh,!0),w.factory=()=>ya(w.multi),this.records.set(d,w)),d=r,w.multi.push(r)}this.records.set(d,p)}hydrate(r,s){return s.value===jh&&(s.value=qg,s.value=s.factory()),"object"==typeof s.value&&s.value&&function Qg(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(s.value)&&this.onDestroy.add(s.value),s.value}injectableDefInScope(r){if(!r.providedIn)return!1;const s=De(r.providedIn);return"string"==typeof s?"any"===s||s===this.scope:this.injectorDefTypes.has(s)}}function $p(t){const r=Yt(t),s=null!==r?r.factory:Ci(t);if(null!==s)return s;if(t instanceof wr)throw new dt(204,!1);if(t instanceof Function)return function f_(t){const r=t.length;if(r>0)throw function ws(t,r){const s=[];for(let a=0;a<t;a++)s.push(r);return s}(r,"?"),new dt(204,!1);const s=function gn(t){const r=t&&(t[Qn]||t[xn]);if(r){const s=function Cn(t){if(t.hasOwnProperty("name"))return t.name;const r=(""+t).match(/^function\s*([^\s(]+)/);return null===r?"":r[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${s}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${s}" class.`),r}return null}(t);return null!==s?()=>s.factory(t):()=>new t}(t);throw new dt(204,!1)}function Yg(t,r,s){let a;if(Gc(t)){const d=De(t);return Ci(d)||$p(d)}if(Pf(t))a=()=>De(t.useValue);else if(function g_(t){return!(!t||!t.useFactory)}(t))a=()=>t.useFactory(...ya(t.deps||[]));else if(function Hp(t){return!(!t||!t.useExisting)}(t))a=()=>ci(De(t.useExisting));else{const d=De(t&&(t.useClass||t.provide));if(!function Wp(t){return!!t.deps}(t))return Ci(d)||$p(d);a=()=>new d(...ya(t.deps))}return a}function Wc(t,r,s=!1){return{factory:t,value:r,multi:s?[]:void 0}}function Pf(t){return null!==t&&"object"==typeof t&&od in t}function Gc(t){return"function"==typeof t}let qu=(()=>{class t{static create(s,a){var d;if(Array.isArray(s))return Bp({name:""},a,s,"");{const p=null!==(d=s.name)&&void 0!==d?d:"";return Bp({name:p},s.parent,s.providers,p)}}}return t.THROW_IF_NOT_FOUND=Qs,t.NULL=new Rf,t.\u0275prov=sn({token:t,providedIn:"any",factory:()=>ci(Lp)}),t.__NG_ELEMENT_ID__=-1,t})();function Jp(t,r){uo(hl(t)[1],tr())}function Vf(t){let r=function Uf(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),s=!0;const a=[t];for(;r;){let d;if(Xr(t))d=r.\u0275cmp||r.\u0275dir;else{if(r.\u0275cmp)throw new dt(903,"");d=r.\u0275dir}if(d){if(s){a.push(d);const w=t;w.inputs=Xp(t.inputs),w.declaredInputs=Xp(t.declaredInputs),w.outputs=Xp(t.outputs);const x=d.hostBindings;x&&tg(t,x);const k=d.viewQuery,Y=d.contentQueries;if(k&&eg(t,k),Y&&I_(t,Y),Pe(t.inputs,d.inputs),Pe(t.declaredInputs,d.declaredInputs),Pe(t.outputs,d.outputs),Xr(d)&&d.data.animation){const te=t.data;te.animation=(te.animation||[]).concat(d.data.animation)}}const p=d.features;if(p)for(let w=0;w<p.length;w++){const x=p[w];x&&x.ngInherit&&x(t),x===Vf&&(s=!1)}}r=Object.getPrototypeOf(r)}!function w_(t){let r=0,s=null;for(let a=t.length-1;a>=0;a--){const d=t[a];d.hostVars=r+=d.hostVars,d.hostAttrs=Xn(d.hostAttrs,s=Xn(s,d.hostAttrs))}}(a)}function Xp(t){return t===Fn?{}:t===Ye?[]:t}function eg(t,r){const s=t.viewQuery;t.viewQuery=s?(a,d)=>{r(a,d),s(a,d)}:r}function I_(t,r){const s=t.contentQueries;t.contentQueries=s?(a,d,p)=>{r(a,d,p),s(a,d,p)}:r}function tg(t,r){const s=t.hostBindings;t.hostBindings=s?(a,d)=>{r(a,d),s(a,d)}:r}let Wh=null;function Rd(){if(!Wh){const t=Bn.Symbol;if(t&&t.iterator)Wh=t.iterator;else{const r=Object.getOwnPropertyNames(Map.prototype);for(let s=0;s<r.length;++s){const a=r[s];"entries"!==a&&"size"!==a&&Map.prototype[a]===Map.prototype.entries&&(Wh=a)}}}return Wh}function Pd(t){return!!ig(t)&&(Array.isArray(t)||!(t instanceof Map)&&Rd()in t)}function ig(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function $l(t,r,s){return t[r]=s}function la(t,r,s){return!Object.is(t[r],s)&&(t[r]=s,!0)}function zh(t,r,s,a){const d=q();return la(d,No(),r)&&(tt(),bl(li(),d,t,r,s,a)),zh}function Zc(t,r,s,a){return la(t,No(),s)?r+be(s)+a:dr}function hm(t,r,s,a,d,p,w,x){const k=q(),Y=tt(),te=t+20,Ie=Y.firstCreatePass?function T_(t,r,s,a,d,p,w,x,k){const Y=r.consts,te=v(r,t,4,w||null,zr(Y,x));Df(r,s,te,zr(Y,k)),uo(r,te);const Ie=te.tViews=Mr(2,te,a,d,p,r.directiveRegistry,r.pipeRegistry,null,r.schemas,Y);return null!==r.queries&&(r.queries.template(r,te),Ie.queries=r.queries.embeddedTView(te)),te}(te,Y,k,r,s,a,d,p,w):Y.data[te];rs(Ie,!1);const ze=k[11].createComment("");yl(Y,k,ze,Ie),ki(ze,k),ch(k,k[te]=Ap(ze,k,ze,Ie)),Er(Ie)&&ar(Y,k,Ie),null!=w&&pr(k,Ie,x)}function Yh(t,r=wt.Default){const s=q();return null===s?ci(t,r):W(tr(),s,De(t),r)}function Cm(){throw new Error("invalid")}function $f(t,r,s){const a=q();return la(a,No(),r)&&Js(tt(),li(),a,t,r,a[11],s,!1),$f}function Hf(t,r,s,a,d){const w=d?"class":"style";Kg(t,s,r.inputs[w],w,a)}function Gf(t,r,s,a){const d=q(),p=tt(),w=20+t,x=d[11],k=d[w]=h(x,r,function Nr(){return Gn.lFrame.currentNamespace}()),Y=p.firstCreatePass?function Wf(t,r,s,a,d,p,w){const x=r.consts,Y=v(r,t,2,d,zr(x,p));return Df(r,s,Y,zr(x,w)),null!==Y.attrs&&fh(Y,Y.attrs,!1),null!==Y.mergedAttrs&&fh(Y,Y.mergedAttrs,!0),null!==r.queries&&r.queries.elementStart(r,Y),Y}(w,p,d,0,r,s,a):p.data[w];rs(Y,!0);const te=Y.mergedAttrs;null!==te&&qs(x,k,te);const Ie=Y.classes;null!==Ie&&Fc(x,k,Ie);const ze=Y.styles;return null!==ze&&Qd(x,k,ze),64!=(64&Y.flags)&&yl(p,d,k,Y),0===function Ps(){return Gn.lFrame.elementDepthCount}()&&ki(k,d),function so(){Gn.lFrame.elementDepthCount++}(),Er(Y)&&(ar(p,d,Y),function cn(t,r,s){if(wn(r)){const d=r.directiveEnd;for(let p=r.directiveStart;p<d;p++){const w=t.data[p];w.contentQueries&&w.contentQueries(1,s[p],p)}}}(p,Y,d)),null!==a&&pr(d,Y),Gf}function Gl(){let t=tr();oo()?function vs(){Gn.lFrame.isParent=!1}():(t=t.parent,rs(t,!1));const r=t;!function qo(){Gn.lFrame.elementDepthCount--}();const s=tt();return s.firstCreatePass&&(uo(s,t),wn(t)&&s.queries.elementEnd(t)),null!=r.classesWithoutHost&&function ka(t){return 0!=(16&t.flags)}(r)&&Hf(s,r,q(),r.classesWithoutHost,!0),null!=r.stylesWithoutHost&&function bc(t){return 0!=(32&t.flags)}(r)&&Hf(s,r,q(),r.stylesWithoutHost,!1),Gl}function mh(t,r,s,a){return Gf(t,r,s,a),Gl(),mh}function Dm(){return q()}function Jh(t){return!!t&&"function"==typeof t.then}function Kf(t){return!!t&&"function"==typeof t.subscribe}const fg=Kf;function wc(t,r,s,a){const d=q(),p=tt(),w=tr();return function qf(t,r,s,a,d,p,w,x){const k=Er(a),te=t.firstCreatePass&&Op(t),Ie=r[8],ze=xd(r);let ft=!0;if(3&a.type||x){const An=Vt(a,r),Yn=x?x(An):An,Xt=ze.length,gr=x?Jr=>x(j(Jr[a.index])):a.index;if(Ir(s)){let Jr=null;if(!x&&k&&(Jr=function Am(t,r,s,a){const d=t.cleanup;if(null!=d)for(let p=0;p<d.length-1;p+=2){const w=d[p];if(w===s&&d[p+1]===a){const x=r[7],k=d[p+2];return x.length>k?x[k]:null}"string"==typeof w&&(p+=2)}return null}(t,r,d,a.index)),null!==Jr)(Jr.__ngLastListenerFn__||Jr).__ngNextListenerFn__=p,Jr.__ngLastListenerFn__=p,ft=!1;else{p=gg(a,r,Ie,p,!1);const Li=s.listen(Yn,d,p);ze.push(p,Li),te&&te.push(d,gr,Xt,Xt+1)}}else p=gg(a,r,Ie,p,!0),Yn.addEventListener(d,p,w),ze.push(p),te&&te.push(d,gr,Xt,w)}else p=gg(a,r,Ie,p,!1);const jt=a.outputs;let yn;if(ft&&null!==jt&&(yn=jt[d])){const An=yn.length;if(An)for(let Yn=0;Yn<An;Yn+=2){const xl=r[yn[Yn]][yn[Yn+1]].subscribe(p),sf=ze.length;ze.push(p,xl),te&&te.push(d,a.index,sf,-(sf+1))}}}(p,d,d[11],w,t,r,!!s,a),wc}function Zf(t,r,s,a){try{return!1!==s(a)}catch(d){return zg(t,d),!1}}function gg(t,r,s,a,d){return function p(w){if(w===Function)return a;const x=2&t.flags?lr(t.index,r):r;0==(32&r[2])&&Rp(x);let k=Zf(r,0,a,w),Y=p.__ngNextListenerFn__;for(;Y;)k=Zf(r,0,Y,w)&&k,Y=Y.__ngNextListenerFn__;return d&&!1===k&&(w.preventDefault(),w.returnValue=!1),k}}function Xh(t=1){return function Xo(t){return(Gn.lFrame.contextLView=function Au(t,r){for(;t>0;)r=r[15],t--;return r}(t,Gn.lFrame.contextLView))[8]}(t)}function mg(t,r,s){return Fd(t,"",r,"",s),mg}function Fd(t,r,s,a,d){const p=q(),w=Zc(p,r,s,a);return w!==dr&&Js(tt(),li(),p,t,w,p[11],d,!1),Fd}function Rm(t,r,s,a,d){const p=t[s+1],w=null===r;let x=a?Ku(p):Il(p),k=!1;for(;0!==x&&(!1===k||w);){const te=t[x+1];B_(t[x],r)&&(k=!0,t[x+1]=a?Ph(te):Cd(te)),x=a?Ku(te):Il(te)}k&&(t[s+1]=a?Cd(p):Ph(p))}function B_(t,r){return null===t||null==r||(Array.isArray(t)?t[1]:t)===r||!(!Array.isArray(t)||"string"!=typeof r)&&Ls(t,r)>=0}function Jf(t,r){return function Al(t,r,s,a){const d=q(),p=tt(),w=function ao(t){const r=Gn.lFrame,s=r.bindingIndex;return r.bindingIndex=r.bindingIndex+t,s}(2);p.firstUpdatePass&&function jm(t,r,s,a){const d=t.data;if(null===d[s+1]){const p=d[xi()],w=function Bm(t,r){return r>=t.expandoStartIndex}(t,s);(function Wm(t,r){return 0!=(t.flags&(r?16:32))})(p,a)&&null===r&&!w&&(r=!1),r=function W_(t,r,s,a){const d=function Oo(t){const r=Gn.lFrame.currentDirectiveIndex;return-1===r?null:t[r]}(t);let p=a?r.residualClasses:r.residualStyles;if(null===d)0===(a?r.classBindings:r.styleBindings)&&(s=tf(s=wg(null,t,r,s,a),r.attrs,a),p=null);else{const w=r.directiveStylingLast;if(-1===w||t[w]!==d)if(s=wg(d,t,r,s,a),null===p){let k=function G_(t,r,s){const a=s?r.classBindings:r.styleBindings;if(0!==Il(a))return t[Ku(a)]}(t,r,a);void 0!==k&&Array.isArray(k)&&(k=wg(null,t,r,k[1],a),k=tf(k,r.attrs,a),function z_(t,r,s,a){t[Ku(s?r.classBindings:r.styleBindings)]=a}(t,r,a,k))}else p=function K_(t,r,s){let a;const d=r.directiveEnd;for(let p=1+r.directiveStylingLast;p<d;p++)a=tf(a,t[p].hostAttrs,s);return tf(a,r.attrs,s)}(t,r,a)}return void 0!==p&&(a?r.residualClasses=p:r.residualStyles=p),s}(d,p,r,a),function U_(t,r,s,a,d,p){let w=p?r.classBindings:r.styleBindings,x=Ku(w),k=Il(w);t[a]=s;let te,Y=!1;if(Array.isArray(s)){const Ie=s;te=Ie[1],(null===te||Ls(Ie,te)>0)&&(Y=!0)}else te=s;if(d)if(0!==k){const ze=Ku(t[x+1]);t[a+1]=Rh(ze,x),0!==ze&&(t[ze+1]=hf(t[ze+1],a)),t[x+1]=function Og(t,r){return 131071&t|r<<17}(t[x+1],a)}else t[a+1]=Rh(x,0),0!==x&&(t[x+1]=hf(t[x+1],a)),x=a;else t[a+1]=Rh(k,0),0===x?x=a:t[k+1]=hf(t[k+1],a),k=a;Y&&(t[a+1]=Cd(t[a+1])),Rm(t,te,a,!0),Rm(t,te,a,!1),function V_(t,r,s,a,d){const p=d?t.residualClasses:t.residualStyles;null!=p&&"string"==typeof r&&Ls(p,r)>=0&&(s[a+1]=Ph(s[a+1]))}(r,te,t,a,p),w=Rh(x,k),p?r.classBindings=w:r.styleBindings=w}(d,p,r,s,w,a)}}(p,t,w,a),r!==dr&&la(d,w,r)&&function $m(t,r,s,a,d,p,w,x){if(!(3&r.type))return;const k=t.data,Y=k[x+1];ep(function hp(t){return 1==(1&t)}(Y)?Hm(k,r,s,d,Il(Y),w):void 0)||(ep(p)||function dp(t){return 2==(2&t)}(Y)&&(p=Hm(k,null,s,d,x,w)),function gc(t,r,s,a,d){const p=Ir(t);if(r)d?p?t.addClass(s,a):s.classList.add(a):p?t.removeClass(s,a):s.classList.remove(a);else{let w=-1===a.indexOf("-")?void 0:nu.DashCase;if(null==d)p?t.removeStyle(s,a,w):s.style.removeProperty(a);else{const x="string"==typeof d&&d.endsWith("!important");x&&(d=d.slice(0,-10),w|=nu.Important),p?t.setStyle(s,a,d,w):s.style.setProperty(a,d,x?"important":"")}}}(a,w,gt(xi(),s),d,p))}(p,p.data[xi()],d,d[11],t,d[w+1]=function Z_(t,r){return null==t||("string"==typeof r?t+=r:"object"==typeof t&&(t=he(jo(t)))),t}(r,s),a,w)}(t,r,null,!0),Jf}function wg(t,r,s,a,d){let p=null;const w=s.directiveEnd;let x=s.directiveStylingLast;for(-1===x?x=s.directiveStart:x++;x<w&&(p=r[x],a=tf(a,p.hostAttrs,d),p!==t);)x++;return null!==t&&(s.directiveStylingLast=x),a}function tf(t,r,s){const a=s?1:2;let d=-1;if(null!==r)for(let p=0;p<r.length;p++){const w=r[p];"number"==typeof w?d=w:d===a&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Is(t,w,!!s||r[++p]))}return void 0===t?null:t}function Hm(t,r,s,a,d,p){const w=null===r;let x;for(;d>0;){const k=t[d],Y=Array.isArray(k),te=Y?k[1]:k,Ie=null===te;let ze=s[d+1];ze===dr&&(ze=Ie?Ye:void 0);let ft=Ie?tl(ze,a):te===a?ze:void 0;if(Y&&!ep(ft)&&(ft=tl(k,a)),ep(ft)&&(x=ft,w))return x;const jt=t[d+1];d=w?Ku(jt):Il(jt)}if(null!==r){let k=p?r.residualClasses:r.residualStyles;null!=k&&(x=tl(k,a))}return x}function ep(t){return void 0!==t}function Gm(t,r=""){const s=q(),a=tt(),d=t+20,p=a.firstCreatePass?v(a,d,1,r,null):a.data[d],w=s[d]=function ru(t,r){return Ir(t)?t.createText(r):t.createTextNode(r)}(s[11],r);yl(a,s,w,p),rs(p,!1)}function zm(t){return Ig("",t,""),zm}function Ig(t,r,s){const a=q(),d=Zc(a,t,r,s);return d!==dr&&Tl(a,xi(),d),Ig}const nf=void 0;var tE=["en",[["a","p"],["AM","PM"],nf],[["AM","PM"],nf,nf],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],nf,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],nf,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",nf,"{1} 'at' {0}",nf],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function eE(t){const s=Math.floor(Math.abs(t)),a=t.toString().replace(/^[^.]*\.?/,"").length;return 1===s&&0===a?1:5}];let tp={};function Y_(t){const r=function nE(t){return t.toLowerCase().replace(/_/g,"-")}(t);let s=sv(r);if(s)return s;const a=r.split("-")[0];if(s=sv(a),s)return s;if("en"===a)return tE;throw new Error(`Missing locale data for the locale "${t}".`)}function iv(t){return Y_(t)[br.PluralCase]}function sv(t){return t in tp||(tp[t]=Bn.ng&&Bn.ng.common&&Bn.ng.common.locales&&Bn.ng.common.locales[t]),tp[t]}var br=(()=>((br=br||{})[br.LocaleId=0]="LocaleId",br[br.DayPeriodsFormat=1]="DayPeriodsFormat",br[br.DayPeriodsStandalone=2]="DayPeriodsStandalone",br[br.DaysFormat=3]="DaysFormat",br[br.DaysStandalone=4]="DaysStandalone",br[br.MonthsFormat=5]="MonthsFormat",br[br.MonthsStandalone=6]="MonthsStandalone",br[br.Eras=7]="Eras",br[br.FirstDayOfWeek=8]="FirstDayOfWeek",br[br.WeekendRange=9]="WeekendRange",br[br.DateFormat=10]="DateFormat",br[br.TimeFormat=11]="TimeFormat",br[br.DateTimeFormat=12]="DateTimeFormat",br[br.NumberSymbols=13]="NumberSymbols",br[br.NumberFormats=14]="NumberFormats",br[br.CurrencyCode=15]="CurrencyCode",br[br.CurrencySymbol=16]="CurrencySymbol",br[br.CurrencyName=17]="CurrencyName",br[br.Currencies=18]="Currencies",br[br.Directionality=19]="Directionality",br[br.PluralCase=20]="PluralCase",br[br.ExtraData=21]="ExtraData",br))();const Km="en-US";let ov=Km;function X_(t,r,s,a,d){if(t=De(t),Array.isArray(t))for(let p=0;p<t.length;p++)X_(t[p],r,s,a,d);else{const p=tt(),w=q();let x=Gc(t)?t:De(t.provide),k=Yg(t);const Y=tr(),te=1048575&Y.providerIndexes,Ie=Y.directiveStart,ze=Y.providerIndexes>>20;if(Gc(t)||!t.multi){const ft=new ea(k,d,Yh),jt=ty(x,r,d?te:te+ze,Ie);-1===jt?(R(Io(Y,w),p,x),ey(p,t,r.length),r.push(x),Y.directiveStart++,Y.directiveEnd++,d&&(Y.providerIndexes+=1048576),s.push(ft),w.push(ft)):(s[jt]=ft,w[jt]=ft)}else{const ft=ty(x,r,te+ze,Ie),jt=ty(x,r,te,te+ze),yn=ft>=0&&s[ft],An=jt>=0&&s[jt];if(d&&!An||!d&&!yn){R(Io(Y,w),p,x);const Yn=function ew(t,r,s,a,d){const p=new ea(t,s,Yh);return p.multi=[],p.index=r,p.componentProviders=0,Mv(p,d,a&&!s),p}(d?XE:JE,s.length,d,a,k);!d&&An&&(s[jt].providerFactory=Yn),ey(p,t,r.length,0),r.push(x),Y.directiveStart++,Y.directiveEnd++,d&&(Y.providerIndexes+=1048576),s.push(Yn),w.push(Yn)}else ey(p,t,ft>-1?ft:jt,Mv(s[d?jt:ft],k,!d&&a));!d&&a&&An&&s[jt].componentProviders++}}}function ey(t,r,s,a){const d=Gc(r),p=function m_(t){return!!t.useClass}(r);if(d||p){const k=(p?De(r.useClass):r).prototype.ngOnDestroy;if(k){const Y=t.destroyHooks||(t.destroyHooks=[]);if(!d&&r.multi){const te=Y.indexOf(s);-1===te?Y.push(s,[a,k]):Y[te+1].push(a,k)}else Y.push(s,k)}}}function Mv(t,r,s){return s&&t.componentProviders++,t.multi.push(r)-1}function ty(t,r,s,a){for(let d=s;d<a;d++)if(r[d]===t)return d;return-1}function JE(t,r,s,a){return ny(this.multi,[])}function XE(t,r,s,a){const d=this.multi;let p;if(this.providerFactory){const w=this.providerFactory.componentProviders,x=En(s,s[1],this.providerFactory.index,a);p=x.slice(0,w),ny(d,p);for(let k=w;k<x.length;k++)p.push(x[k])}else p=[],ny(d,p);return p}function ny(t,r){for(let s=0;s<t.length;s++)r.push((0,t[s])());return r}function Rv(t,r=[]){return s=>{s.providersResolver=(a,d)=>function QE(t,r,s){const a=tt();if(a.firstCreatePass){const d=Xr(t);X_(s,a.data,a.blueprint,d,!0),X_(r,a.data,a.blueprint,d,!1)}}(a,d?d(t):t,r)}}class Pv{}class rw{resolveComponentFactory(r){throw function nw(t){const r=Error(`No component factory found for ${he(t)}. Did you add it to @NgModule.entryComponents?`);return r.ngComponent=t,r}(r)}}let Jm=(()=>{class t{}return t.NULL=new rw,t})();function iw(){return rp(tr(),q())}function rp(t,r){return new Sg(Vt(t,r))}let Sg=(()=>{class t{constructor(s){this.nativeElement=s}}return t.__NG_ELEMENT_ID__=iw,t})();function sw(t){return t instanceof Sg?t.nativeElement:t}class Ov{}let ow=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>function uw(){const t=q(),s=lr(tr().index,t);return function aw(t){return t[11]}(zt(s)?s:t)}(),t})(),lw=(()=>{class t{}return t.\u0275prov=sn({token:t,providedIn:"root",factory:()=>null}),t})();class kv{constructor(r){this.full=r,this.major=r.split(".")[0],this.minor=r.split(".")[1],this.patch=r.split(".").slice(2).join(".")}}const Fv=new kv("13.2.7"),ry={};function Xm(t,r,s,a,d=!1){for(;null!==s;){const p=r[s.index];if(null!==p&&a.push(j(p)),en(p))for(let x=10;x<p.length;x++){const k=p[x],Y=k[1].firstChild;null!==Y&&Xm(k[1],k,Y,a)}const w=s.type;if(8&w)Xm(t,r,s.child,a);else if(32&w){const x=Nc(s,r);let k;for(;k=x();)a.push(k)}else if(16&w){const x=ap(r,s);if(Array.isArray(x))a.push(...x);else{const k=hc(r[16]);Xm(k[1],k,x,a,!0)}}s=d?s.projectionNext:s.next}return a}class xg{constructor(r,s){this._lView=r,this._cdRefInjectingView=s,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const r=this._lView,s=r[1];return Xm(s,r,s.firstChild,[])}get context(){return this._lView[8]}set context(r){this._lView[8]=r}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const r=this._lView[3];if(en(r)){const s=r[8],a=s?s.indexOf(this):-1;a>-1&&(Ae(r,a),hu(s,a))}this._attachedToViewContainer=!1}Be(this._lView[1],this._lView)}onDestroy(r){To(this._lView[1],this._lView,null,r)}markForCheck(){Rp(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Vh(this._lView[1],this._lView,this.context)}checkNoChanges(){!function Np(t,r,s){Es(!0);try{Vh(t,r,s)}finally{Es(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new dt(902,"");this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function _(t,r){su(t,r,r[11],2,null,null)}(this._lView[1],this._lView)}attachToAppRef(r){if(this._attachedToViewContainer)throw new dt(902,"");this._appRef=r}}class cw extends xg{constructor(r){super(r),this._view=r}detectChanges(){Mf(this._view)}checkNoChanges(){!function dh(t){Es(!0);try{Mf(t)}finally{Es(!1)}}(this._view)}get context(){return null}}class Lv extends Jm{constructor(r){super(),this.ngModule=r}resolveComponentFactory(r){const s=Qt(r);return new iy(s,this.ngModule)}}function Uv(t){const r=[];for(let s in t)t.hasOwnProperty(s)&&r.push({propName:t[s],templateName:s});return r}class iy extends Pv{constructor(r,s){super(),this.componentDef=r,this.ngModule=s,this.componentType=r.type,this.selector=function mc(t){return t.map(cp).join(",")}(r.selectors),this.ngContentSelectors=r.ngContentSelectors?r.ngContentSelectors:[],this.isBoundToModule=!!s}get inputs(){return Uv(this.componentDef.inputs)}get outputs(){return Uv(this.componentDef.outputs)}create(r,s,a,d){const p=(d=d||this.ngModule)?function hw(t,r){return{get:(s,a,d)=>{const p=t.get(s,ry,d);return p!==ry||a===ry?p:r.get(s,a,d)}}}(r,d.injector):r,w=p.get(Ov,B),x=p.get(lw,null),k=w.createRenderer(null,this.componentDef),Y=this.componentDef.selectors[0][0]||"div",te=a?function Yr(t,r,s){if(Ir(t))return t.selectRootElement(r,s===Ot.ShadowDom);let a="string"==typeof r?t.querySelector(r):r;return a.textContent="",a}(k,a,this.componentDef.encapsulation):h(w.createRenderer(null,this.componentDef),Y,function dw(t){const r=t.toLowerCase();return"svg"===r?"svg":"math"===r?"math":null}(Y)),Ie=this.componentDef.onPush?576:528,ze=function im(t,r){return{components:[],scheduler:t||zd,clean:hh,playerHandler:r||null,flags:0}}(),ft=Mr(0,null,null,1,0,null,null,null,null,null),jt=E(null,ft,ze,Ie,null,null,w,k,x,p);let yn,An;is(jt);try{const Yn=function rm(t,r,s,a,d,p){const w=s[1];s[20]=t;const k=v(w,20,2,"#host",null),Y=k.mergedAttrs=r.hostAttrs;null!==Y&&(fh(k,Y,!0),null!==t&&(qs(d,t,Y),null!==k.classes&&Fc(d,t,k.classes),null!==k.styles&&Qd(d,t,k.styles)));const te=a.createRenderer(t,r),Ie=E(s,qr(r),null,r.onPush?64:16,s[20],k,a,te,p||null,null);return w.firstCreatePass&&(R(Io(k,s),w,r.type),Hg(w,k),Sf(k,s.length,1)),ch(s,Ie),s[20]=Ie}(te,this.componentDef,jt,w,k);if(te)if(a)qs(k,te,["ng-version",Fv.full]);else{const{attrs:Xt,classes:gr}=function df(t){const r=[],s=[];let a=1,d=2;for(;a<t.length;){let p=t[a];if("string"==typeof p)2===d?""!==p&&r.push(p,t[++a]):8===d&&s.push(p);else{if(!ou(d))break;d=p}a++}return{attrs:r,classes:s}}(this.componentDef.selectors[0]);Xt&&qs(k,te,Xt),gr&&gr.length>0&&Fc(k,te,gr.join(" "))}if(An=kr(ft,20),void 0!==s){const Xt=An.projection=[];for(let gr=0;gr<this.ngContentSelectors.length;gr++){const Jr=s[gr];Xt.push(null!=Jr?Array.from(Jr):null)}}yn=function Lf(t,r,s,a,d){const p=s[1],w=function wp(t,r,s){const a=tr();t.firstCreatePass&&(s.providersResolver&&s.providersResolver(s),Uh(t,a,r,K(t,r,1,null),s));const d=En(r,t,a.directiveStart,a);ki(d,r);const p=Vt(a,r);return p&&ki(p,r),d}(p,s,r);if(a.components.push(w),t[8]=w,d&&d.forEach(k=>k(w,r)),r.contentQueries){const k=tr();r.contentQueries(1,w,k.directiveStart)}const x=tr();return!p.firstCreatePass||null===r.hostBindings&&null===r.hostAttrs||(Ks(x.index),Af(s[1],x,0,x.directiveStart,x.directiveEnd,r),$g(r,w)),w}(Yn,this.componentDef,jt,ze,[Jp]),re(ft,jt,null)}finally{ko()}return new pw(this.componentType,yn,rp(An,jt),jt,An)}}class pw extends class tw{}{constructor(r,s,a,d,p){super(),this.location=a,this._rootLView=d,this._tNode=p,this.instance=s,this.hostView=this.changeDetectorRef=new cw(d),this.componentType=r}get injector(){return new Dr(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(r){this.hostView.onDestroy(r)}}class ip{}class Vv{}const sp=new Map;class $v extends ip{constructor(r,s){super(),this._parent=s,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Lv(this);const a=On(r);this._bootstrapComponents=aa(a.bootstrap),this._r3Injector=jp(r,s,[{provide:ip,useValue:this},{provide:Jm,useValue:this.componentFactoryResolver}],he(r)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(r)}get(r,s=qu.THROW_IF_NOT_FOUND,a=wt.Default){return r===qu||r===ip||r===Lp?this:this._r3Injector.get(r,s,a)}destroy(){const r=this._r3Injector;!r.destroyed&&r.destroy(),this.destroyCbs.forEach(s=>s()),this.destroyCbs=null}onDestroy(r){this.destroyCbs.push(r)}}class sy extends Vv{constructor(r){super(),this.moduleType=r,null!==On(r)&&function mw(t){const r=new Set;!function s(a){const d=On(a,!0),p=d.id;null!==p&&(function Bv(t,r,s){if(r&&r!==s)throw new Error(`Duplicate module registered for ${t} - ${he(r)} vs ${he(r.name)}`)}(p,sp.get(p),a),sp.set(p,a));const w=aa(d.imports);for(const x of w)r.has(x)||(r.add(x),s(x))}(t)}(r)}create(r){return new $v(this.moduleType,r)}}function Mg(t,r){const s=t[r];return s===dr?void 0:s}function Wv(t,r,s,a,d,p,w){const x=r+s;return function Kc(t,r,s,a){const d=la(t,r,s);return la(t,r+1,a)||d}(t,x,d,p)?$l(t,x+2,w?a.call(w,d,p):a(d,p)):Mg(t,x+2)}function qv(t,r){const s=tt();let a;const d=t+20;s.firstCreatePass?(a=function Aw(t,r){if(r)for(let s=r.length-1;s>=0;s--){const a=r[s];if(t===a.name)return a}}(r,s.pipeRegistry),s.data[d]=a,a.onDestroy&&(s.destroyHooks||(s.destroyHooks=[])).push(d,a.onDestroy)):a=s.data[d];const p=a.factory||(a.factory=Ci(a.type)),w=Rt(Yh);try{const x=ta(!1),k=p();return ta(x),function fm(t,r,s,a){s>=t.data.length&&(t.data[s]=null,t.blueprint[s]=null),r[s]=a}(s,q(),d,k),k}finally{Rt(w)}}function Zv(t,r,s){const a=t+20,d=q(),p=Sr(d,a);return Rg(d,a)?function Hv(t,r,s,a,d,p){const w=r+s;return la(t,w,d)?$l(t,w+1,p?a.call(p,d):a(d)):Mg(t,w+1)}(d,pi(),r,p.transform,s,p):p.transform(s)}function Yv(t,r,s,a){const d=t+20,p=q(),w=Sr(p,d);return Rg(p,d)?Wv(p,pi(),r,w.transform,s,a,w):w.transform(s,a)}function Rg(t,r){return t[1].data[r].pure}function oy(t){return r=>{setTimeout(t,void 0,r)}}const id=class Rw extends f.x{constructor(r=!1){super(),this.__isAsync=r}emit(r){super.next(r)}subscribe(r,s,a){var d,p,w;let x=r,k=s||(()=>null),Y=a;if(r&&"object"==typeof r){const Ie=r;x=null===(d=Ie.next)||void 0===d?void 0:d.bind(Ie),k=null===(p=Ie.error)||void 0===p?void 0:p.bind(Ie),Y=null===(w=Ie.complete)||void 0===w?void 0:w.bind(Ie)}this.__isAsync&&(k=oy(k),x&&(x=oy(x)),Y&&(Y=oy(Y)));const te=super.subscribe({next:x,error:k,complete:Y});return r instanceof T.w0&&r.add(te),te}};function Pw(){return this._results[Rd()]()}class ay{constructor(r=!1){this._emitDistinctChangesOnly=r,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const s=Rd(),a=ay.prototype;a[s]||(a[s]=Pw)}get changes(){return this._changes||(this._changes=new id)}get(r){return this._results[r]}map(r){return this._results.map(r)}filter(r){return this._results.filter(r)}find(r){return this._results.find(r)}reduce(r,s){return this._results.reduce(r,s)}forEach(r){this._results.forEach(r)}some(r){return this._results.some(r)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(r,s){const a=this;a.dirty=!1;const d=Ni(r);(this._changesDetected=!function lo(t,r,s){if(t.length!==r.length)return!1;for(let a=0;a<t.length;a++){let d=t[a],p=r[a];if(s&&(d=s(d),p=s(p)),p!==d)return!1}return!0}(a._results,d,s))&&(a._results=d,a.length=d.length,a.last=d[this.length-1],a.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}Symbol;let Pg=(()=>{class t{}return t.__NG_ELEMENT_ID__=kw,t})();const Nw=Pg,Ow=class extends Nw{constructor(r,s,a){super(),this._declarationLView=r,this._declarationTContainer=s,this.elementRef=a}createEmbeddedView(r){const s=this._declarationTContainer.tViews,a=E(this._declarationLView,s,r,16,null,s.declTNode,null,null,null,null);a[17]=this._declarationLView[this._declarationTContainer.index];const p=this._declarationLView[19];return null!==p&&(a[19]=p.createEmbeddedView(s)),re(s,a,r),new xg(a)}};function kw(){return e_(tr(),q())}function e_(t,r){return 4&t.type?new Ow(r,t,rp(t,r)):null}let t_=(()=>{class t{}return t.__NG_ELEMENT_ID__=Fw,t})();function Fw(){return Xv(tr(),q())}const Lw=t_,Qv=class extends Lw{constructor(r,s,a){super(),this._lContainer=r,this._hostTNode=s,this._hostLView=a}get element(){return rp(this._hostTNode,this._hostLView)}get injector(){return new Dr(this._hostTNode,this._hostLView)}get parentInjector(){const r=xu(this._hostTNode,this._hostLView);if(nn(r)){const s=ii(r,this._hostLView),a=bt(r);return new Dr(s[1].data[a+8],s)}return new Dr(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(r){const s=Jv(this._lContainer);return null!==s&&s[r]||null}get length(){return this._lContainer.length-10}createEmbeddedView(r,s,a){const d=r.createEmbeddedView(s||{});return this.insert(d,a),d}createComponent(r,s,a,d,p){const w=r&&!function Ba(t){return"function"==typeof t}(r);let x;if(w)x=s;else{const Ie=s||{};x=Ie.index,a=Ie.injector,d=Ie.projectableNodes,p=Ie.ngModuleRef}const k=w?r:new iy(Qt(r)),Y=a||this.parentInjector;if(!p&&null==k.ngModule){const ze=(w?Y:this.parentInjector).get(ip,null);ze&&(p=ze)}const te=k.create(Y,d,void 0,p);return this.insert(te.hostView,x),te}insert(r,s){const a=r._lView,d=a[1];if(function Ur(t){return en(t[3])}(a)){const te=this.indexOf(r);if(-1!==te)this.detach(te);else{const Ie=a[3],ze=new Qv(Ie,Ie[6],Ie[3]);ze.detach(ze.indexOf(r))}}const p=this._adjustIndex(s),w=this._lContainer;!function L(t,r,s,a){const d=10+a,p=s.length;a>0&&(s[d-1][4]=r),a<p-10?(r[4]=s[d],el(s,10+a,r)):(s.push(r),r[4]=null),r[3]=s;const w=r[17];null!==w&&s!==w&&function G(t,r){const s=t[9];r[16]!==r[3][3][16]&&(t[2]=!0),null===s?t[9]=[r]:s.push(r)}(w,r);const x=r[19];null!==x&&x.insertView(t),r[2]|=128}(d,a,w,p);const x=Sh(p,w),k=a[11],Y=ml(k,w[7]);return null!==Y&&function c(t,r,s,a,d,p){a[0]=d,a[6]=r,su(t,a,s,1,d,p)}(d,w[6],k,a,Y,x),r.attachToViewContainerRef(),el(uy(w),p,r),r}move(r,s){return this.insert(r,s)}indexOf(r){const s=Jv(this._lContainer);return null!==s?s.indexOf(r):-1}remove(r){const s=this._adjustIndex(r,-1),a=Ae(this._lContainer,s);a&&(hu(uy(this._lContainer),s),Be(a[1],a))}detach(r){const s=this._adjustIndex(r,-1),a=Ae(this._lContainer,s);return a&&null!=hu(uy(this._lContainer),s)?new xg(a):null}_adjustIndex(r,s=0){return null==r?this.length+s:r}};function Jv(t){return t[8]}function uy(t){return t[8]||(t[8]=[])}function Xv(t,r){let s;const a=r[t.index];if(en(a))s=a;else{let d;if(8&t.type)d=j(a);else{const p=r[11];d=p.createComment("");const w=Vt(t,r);Or(p,ml(p,w),d,function Yd(t,r){return Ir(t)?t.nextSibling(r):r.nextSibling}(p,w),!1)}r[t.index]=s=Ap(a,r,d,t),ch(r,s)}return new Qv(s,t,r)}class ly{constructor(r){this.queryList=r,this.matches=null}clone(){return new ly(this.queryList)}setDirty(){this.queryList.setDirty()}}class cy{constructor(r=[]){this.queries=r}createEmbeddedView(r){const s=r.queries;if(null!==s){const a=null!==r.contentQueries?r.contentQueries[0]:s.length,d=[];for(let p=0;p<a;p++){const w=s.getByIndex(p);d.push(this.queries[w.indexInDeclarationView].clone())}return new cy(d)}return null}insertView(r){this.dirtyQueriesWithMatches(r)}detachView(r){this.dirtyQueriesWithMatches(r)}dirtyQueriesWithMatches(r){for(let s=0;s<this.queries.length;s++)null!==u0(r,s).matches&&this.queries[s].setDirty()}}class e0{constructor(r,s,a=null){this.predicate=r,this.flags=s,this.read=a}}class dy{constructor(r=[]){this.queries=r}elementStart(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].elementStart(r,s)}elementEnd(r){for(let s=0;s<this.queries.length;s++)this.queries[s].elementEnd(r)}embeddedTView(r){let s=null;for(let a=0;a<this.length;a++){const d=null!==s?s.length:0,p=this.getByIndex(a).embeddedTView(r,d);p&&(p.indexInDeclarationView=a,null!==s?s.push(p):s=[p])}return null!==s?new dy(s):null}template(r,s){for(let a=0;a<this.queries.length;a++)this.queries[a].template(r,s)}getByIndex(r){return this.queries[r]}get length(){return this.queries.length}track(r){this.queries.push(r)}}class hy{constructor(r,s=-1){this.metadata=r,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=s}elementStart(r,s){this.isApplyingToNode(s)&&this.matchTNode(r,s)}elementEnd(r){this._declarationNodeIndex===r.index&&(this._appliesToNextNode=!1)}template(r,s){this.elementStart(r,s)}embeddedTView(r,s){return this.isApplyingToNode(r)?(this.crossesNgTemplate=!0,this.addMatch(-r.index,s),new hy(this.metadata)):null}isApplyingToNode(r){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const s=this._declarationNodeIndex;let a=r.parent;for(;null!==a&&8&a.type&&a.index!==s;)a=a.parent;return s===(null!==a?a.index:-1)}return this._appliesToNextNode}matchTNode(r,s){const a=this.metadata.predicate;if(Array.isArray(a))for(let d=0;d<a.length;d++){const p=a[d];this.matchTNodeWithReadOption(r,s,Bw(s,p)),this.matchTNodeWithReadOption(r,s,At(s,r,p,!1,!1))}else a===Pg?4&s.type&&this.matchTNodeWithReadOption(r,s,-1):this.matchTNodeWithReadOption(r,s,At(s,r,a,!1,!1))}matchTNodeWithReadOption(r,s,a){if(null!==a){const d=this.metadata.read;if(null!==d)if(d===Sg||d===t_||d===Pg&&4&s.type)this.addMatch(s.index,-2);else{const p=At(s,r,d,!1,!1);null!==p&&this.addMatch(s.index,p)}else this.addMatch(s.index,a)}}addMatch(r,s){null===this.matches?this.matches=[r,s]:this.matches.push(r,s)}}function Bw(t,r){const s=t.localNames;if(null!==s)for(let a=0;a<s.length;a+=2)if(s[a]===r)return s[a+1];return null}function $w(t,r,s,a){return-1===s?function jw(t,r){return 11&t.type?rp(t,r):4&t.type?e_(t,r):null}(r,t):-2===s?function Hw(t,r,s){return s===Sg?rp(r,t):s===Pg?e_(r,t):s===t_?Xv(r,t):void 0}(t,r,a):En(t,t[1],s,r)}function t0(t,r,s,a){const d=r[19].queries[a];if(null===d.matches){const p=t.data,w=s.matches,x=[];for(let k=0;k<w.length;k+=2){const Y=w[k];x.push(Y<0?null:$w(r,p[Y],w[k+1],s.metadata.read))}d.matches=x}return d.matches}function fy(t,r,s,a){const d=t.queries.getByIndex(s),p=d.matches;if(null!==p){const w=t0(t,r,d,s);for(let x=0;x<p.length;x+=2){const k=p[x];if(k>0)a.push(w[x/2]);else{const Y=p[x+1],te=r[-k];for(let Ie=10;Ie<te.length;Ie++){const ze=te[Ie];ze[17]===ze[3]&&fy(ze[1],ze,Y,a)}if(null!==te[9]){const Ie=te[9];for(let ze=0;ze<Ie.length;ze++){const ft=Ie[ze];fy(ft[1],ft,Y,a)}}}}}return a}function n0(t){const r=q(),s=tt(),a=Pa();Qo(a+1);const d=u0(s,a);if(t.dirty&&Cr(r)===(2==(2&d.metadata.flags))){if(null===d.matches)t.reset([]);else{const p=d.crossesNgTemplate?fy(s,r,a,[]):t0(s,r,d,a);t.reset(p,sw),t.notifyOnChanges()}return!0}return!1}function r0(t,r,s,a){const d=tt();if(d.firstCreatePass){const p=tr();(function a0(t,r,s){null===t.queries&&(t.queries=new dy),t.queries.track(new hy(r,s))})(d,new e0(r,s,a),p.index),function zw(t,r){const s=t.contentQueries||(t.contentQueries=[]);r!==(s.length?s[s.length-1]:-1)&&s.push(t.queries.length-1,r)}(d,t),2==(2&s)&&(d.staticContentQueries=!0)}!function o0(t,r,s){const a=new ay(4==(4&s));To(t,r,a,a.destroy),null===r[19]&&(r[19]=new cy),r[19].queries.push(new ly(a))}(d,q(),s)}function s0(){return function Gw(t,r){return t[19].queries[r].queryList}(q(),Pa())}function u0(t,r){return t.queries.getByIndex(r)}function i_(...t){}const T0=new wr("Application Initializer");let vy=(()=>{class t{constructor(s){this.appInits=s,this.resolve=i_,this.reject=i_,this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,d)=>{this.resolve=a,this.reject=d})}runInitializers(){if(this.initialized)return;const s=[],a=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let d=0;d<this.appInits.length;d++){const p=this.appInits[d]();if(Jh(p))s.push(p);else if(fg(p)){const w=new Promise((x,k)=>{p.subscribe({complete:x,error:k})});s.push(w)}}Promise.all(s).then(()=>{a()}).catch(d=>{this.reject(d)}),0===s.length&&a(),this.initialized=!0}}return t.\u0275fac=function(s){return new(s||t)(ci(T0,8))},t.\u0275prov=sn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const D0=new wr("AppId",{providedIn:"root",factory:function A0(){return`${Ey()}${Ey()}${Ey()}`}});function Ey(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const S0=new wr("Platform Initializer"),x0=new wr("Platform ID"),M0=new wr("appBootstrapListener");let R0=(()=>{class t{log(s){console.log(s)}warn(s){console.warn(s)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=sn({token:t,factory:t.\u0275fac}),t})();const wy=new wr("LocaleId",{providedIn:"root",factory:()=>ud(wy,wt.Optional|wt.SkipSelf)||function cI(){return"undefined"!=typeof $localize&&$localize.locale||Km}()}),dI=new wr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});class hI{constructor(r,s){this.ngModuleFactory=r,this.componentFactories=s}}let fI=(()=>{class t{compileModuleSync(s){return new sy(s)}compileModuleAsync(s){return Promise.resolve(this.compileModuleSync(s))}compileModuleAndAllComponentsSync(s){const a=this.compileModuleSync(s),p=aa(On(s).declarations).reduce((w,x)=>{const k=Qt(x);return k&&w.push(new iy(k)),w},[]);return new hI(a,p)}compileModuleAndAllComponentsAsync(s){return Promise.resolve(this.compileModuleAndAllComponentsSync(s))}clearCache(){}clearCacheFor(s){}getModuleId(s){}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=sn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const gI=(()=>Promise.resolve(0))();function Iy(t){"undefined"==typeof Zone?gI.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Ic{constructor({enableLongStackTrace:r=!1,shouldCoalesceEventChangeDetection:s=!1,shouldCoalesceRunChangeDetection:a=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new id(!1),this.onMicrotaskEmpty=new id(!1),this.onStable=new id(!1),this.onError=new id(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),r&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!a&&s,d.shouldCoalesceRunChangeDetection=a,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function mI(){let t=Bn.requestAnimationFrame,r=Bn.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&r){const s=t[Zone.__symbol__("OriginalDelegate")];s&&(t=s);const a=r[Zone.__symbol__("OriginalDelegate")];a&&(r=a)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:r}}().nativeRequestAnimationFrame,function vI(t){const r=()=>{!function yI(t){t.isCheckStableRunning||-1!==t.lastRequestAnimationFrameId||(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(Bn,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,by(t),t.isCheckStableRunning=!0,Cy(t),t.isCheckStableRunning=!1},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),by(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(s,a,d,p,w,x)=>{try{return P0(t),s.invokeTask(d,p,w,x)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===p.type||t.shouldCoalesceRunChangeDetection)&&r(),N0(t)}},onInvoke:(s,a,d,p,w,x,k)=>{try{return P0(t),s.invoke(d,p,w,x,k)}finally{t.shouldCoalesceRunChangeDetection&&r(),N0(t)}},onHasTask:(s,a,d,p)=>{s.hasTask(d,p),a===d&&("microTask"==p.change?(t._hasPendingMicrotasks=p.microTask,by(t),Cy(t)):"macroTask"==p.change&&(t.hasPendingMacrotasks=p.macroTask))},onHandleError:(s,a,d,p)=>(s.handleError(d,p),t.runOutsideAngular(()=>t.onError.emit(p)),!1)})}(d)}static isInAngularZone(){return"undefined"!=typeof Zone&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Ic.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Ic.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(r,s,a){return this._inner.run(r,s,a)}runTask(r,s,a,d){const p=this._inner,w=p.scheduleEventTask("NgZoneEvent: "+d,r,_I,i_,i_);try{return p.runTask(w,s,a)}finally{p.cancelTask(w)}}runGuarded(r,s,a){return this._inner.runGuarded(r,s,a)}runOutsideAngular(r){return this._outer.run(r)}}const _I={};function Cy(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function by(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function P0(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function N0(t){t._nesting--,Cy(t)}class EI{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new id,this.onMicrotaskEmpty=new id,this.onStable=new id,this.onError=new id}run(r,s,a){return r.apply(s,a)}runGuarded(r,s,a){return r.apply(s,a)}runOutsideAngular(r){return r()}runTask(r,s,a,d){return r.apply(s,a)}}let O0=(()=>{class t{constructor(s){this._ngZone=s,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),s.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Ic.assertNotInAngularZone(),Iy(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Iy(()=>{for(;0!==this._callbacks.length;){let s=this._callbacks.pop();clearTimeout(s.timeoutId),s.doneCb(this._didWork)}this._didWork=!1});else{let s=this.getPendingTasks();this._callbacks=this._callbacks.filter(a=>!a.updateCb||!a.updateCb(s)||(clearTimeout(a.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(s=>({source:s.source,creationLocation:s.creationLocation,data:s.data})):[]}addCallback(s,a,d){let p=-1;a&&a>0&&(p=setTimeout(()=>{this._callbacks=this._callbacks.filter(w=>w.timeoutId!==p),s(this._didWork,this.getPendingTasks())},a)),this._callbacks.push({doneCb:s,timeoutId:p,updateCb:d})}whenStable(s,a,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(s,a,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(s,a,d){return[]}}return t.\u0275fac=function(s){return new(s||t)(ci(Ic))},t.\u0275prov=sn({token:t,factory:t.\u0275fac}),t})(),k0=(()=>{class t{constructor(){this._applications=new Map,Ty.addToWindow(this)}registerApplication(s,a){this._applications.set(s,a)}unregisterApplication(s){this._applications.delete(s)}unregisterAllApplications(){this._applications.clear()}getTestability(s){return this._applications.get(s)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(s,a=!0){return Ty.findTestabilityInTree(this,s,a)}}return t.\u0275fac=function(s){return new(s||t)},t.\u0275prov=sn({token:t,factory:t.\u0275fac}),t})();class wI{addToWindow(r){}findTestabilityInTree(r,s,a){return null}}function II(t){Ty=t}let Cc,Ty=new wI;const F0=new wr("AllowMultipleToken");class TI{constructor(r,s){this.name=r,this.token=s}}function L0(t,r,s=[]){const a=`Platform: ${r}`,d=new wr(a);return(p=[])=>{let w=U0();if(!w||w.injector.get(F0,!1))if(t)t(s.concat(p).concat({provide:d,useValue:!0}));else{const x=s.concat(p).concat({provide:d,useValue:!0},{provide:Bh,useValue:"platform"});!function DI(t){if(Cc&&!Cc.destroyed&&!Cc.injector.get(F0,!1))throw new dt(400,"");Cc=t.get(V0);const r=t.get(S0,null);r&&r.forEach(s=>s())}(qu.create({providers:x,name:a}))}return function AI(t){const r=U0();if(!r)throw new dt(401,"");return r}()}}function U0(){return Cc&&!Cc.destroyed?Cc:null}let V0=(()=>{class t{constructor(s){this._injector=s,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(s,a){const x=function SI(t,r){let s;return s="noop"===t?new EI:("zone.js"===t?void 0:t)||new Ic({enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:!!(null==r?void 0:r.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==r?void 0:r.ngZoneRunCoalescing)}),s}(a?a.ngZone:void 0,{ngZoneEventCoalescing:a&&a.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:a&&a.ngZoneRunCoalescing||!1}),k=[{provide:Ic,useValue:x}];return x.run(()=>{const Y=qu.create({providers:k,parent:this.injector,name:s.moduleType.name}),te=s.create(Y),Ie=te.injector.get(lc,null);if(!Ie)throw new dt(402,"");return x.runOutsideAngular(()=>{const ze=x.onError.subscribe({next:ft=>{Ie.handleError(ft)}});te.onDestroy(()=>{Ay(this._modules,te),ze.unsubscribe()})}),function xI(t,r,s){try{const a=s();return Jh(a)?a.catch(d=>{throw r.runOutsideAngular(()=>t.handleError(d)),d}):a}catch(a){throw r.runOutsideAngular(()=>t.handleError(a)),a}}(Ie,x,()=>{const ze=te.injector.get(vy);return ze.runInitializers(),ze.donePromise.then(()=>(function oE(t){nt(t,"Expected localeId to be defined"),"string"==typeof t&&(ov=t.toLowerCase().replace(/_/g,"-"))}(te.injector.get(wy,Km)||Km),this._moduleDoBootstrap(te),te))})})}bootstrapModule(s,a=[]){const d=B0({},a);return function CI(t,r,s){const a=new sy(s);return Promise.resolve(a)}(0,0,s).then(p=>this.bootstrapModuleFactory(p,d))}_moduleDoBootstrap(s){const a=s.injector.get(Dy);if(s._bootstrapComponents.length>0)s._bootstrapComponents.forEach(d=>a.bootstrap(d));else{if(!s.instance.ngDoBootstrap)throw new dt(403,"");s.instance.ngDoBootstrap(a)}this._modules.push(s)}onDestroy(s){this._destroyListeners.push(s)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new dt(404,"");this._modules.slice().forEach(s=>s.destroy()),this._destroyListeners.forEach(s=>s()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(s){return new(s||t)(ci(qu))},t.\u0275prov=sn({token:t,factory:t.\u0275fac}),t})();function B0(t,r){return Array.isArray(r)?r.reduce(B0,t):Object.assign(Object.assign({},t),r)}let Dy=(()=>{class t{constructor(s,a,d,p,w){this._zone=s,this._injector=a,this._exceptionHandler=d,this._componentFactoryResolver=p,this._initStatus=w,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const x=new P.y(Y=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{Y.next(this._stable),Y.complete()})}),k=new P.y(Y=>{let te;this._zone.runOutsideAngular(()=>{te=this._zone.onStable.subscribe(()=>{Ic.assertNotInAngularZone(),Iy(()=>{!this._stable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks&&(this._stable=!0,Y.next(!0))})})});const Ie=this._zone.onUnstable.subscribe(()=>{Ic.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{Y.next(!1)}))});return()=>{te.unsubscribe(),Ie.unsubscribe()}});this.isStable=(0,Z.T)(x,k.pipe((0,we.B)()))}bootstrap(s,a){if(!this._initStatus.done)throw new dt(405,"");let d;d=s instanceof Pv?s:this._componentFactoryResolver.resolveComponentFactory(s),this.componentTypes.push(d.componentType);const p=function bI(t){return t.isBoundToModule}(d)?void 0:this._injector.get(ip),x=d.create(qu.NULL,[],a||d.selector,p),k=x.location.nativeElement,Y=x.injector.get(O0,null),te=Y&&x.injector.get(k0);return Y&&te&&te.registerApplication(k,Y),x.onDestroy(()=>{this.detachView(x.hostView),Ay(this.components,x),te&&te.unregisterApplication(k)}),this._loadComponent(x),x}tick(){if(this._runningTick)throw new dt(101,"");try{this._runningTick=!0;for(let s of this._views)s.detectChanges()}catch(s){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(s))}finally{this._runningTick=!1}}attachView(s){const a=s;this._views.push(a),a.attachToAppRef(this)}detachView(s){const a=s;Ay(this._views,a),a.detachFromAppRef()}_loadComponent(s){this.attachView(s.hostView),this.tick(),this.components.push(s),this._injector.get(M0,[]).concat(this._bootstrapListeners).forEach(d=>d(s))}ngOnDestroy(){this._views.slice().forEach(s=>s.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(s){return new(s||t)(ci(Ic),ci(qu),ci(lc),ci(Jm),ci(vy))},t.\u0275prov=sn({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Ay(t,r){const s=t.indexOf(r);s>-1&&t.splice(s,1)}let $0=!0,H0=!1;function RI(){return H0=!0,$0}function PI(){if(H0)throw new Error("Cannot enable prod mode after platform setup.");$0=!1}let NI=(()=>{class t{}return t.__NG_ELEMENT_ID__=OI,t})();function OI(t){return function kI(t,r,s){if(vr(t)&&!s){const a=lr(t.index,r);return new xg(a,a)}return 47&t.type?new xg(r[16],r):null}(tr(),q(),16==(16&t))}class K0{constructor(){}supports(r){return Pd(r)}create(r){return new jI(r)}}const BI=(t,r)=>r;class jI{constructor(r){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=r||BI}forEachItem(r){let s;for(s=this._itHead;null!==s;s=s._next)r(s)}forEachOperation(r){let s=this._itHead,a=this._removalsHead,d=0,p=null;for(;s||a;){const w=!a||s&&s.currentIndex<Z0(a,d,p)?s:a,x=Z0(w,d,p),k=w.currentIndex;if(w===a)d--,a=a._nextRemoved;else if(s=s._next,null==w.previousIndex)d++;else{p||(p=[]);const Y=x-d,te=k-d;if(Y!=te){for(let ze=0;ze<Y;ze++){const ft=ze<p.length?p[ze]:p[ze]=0,jt=ft+ze;te<=jt&&jt<Y&&(p[ze]=ft+1)}p[w.previousIndex]=te-Y}}x!==k&&r(w,x,k)}}forEachPreviousItem(r){let s;for(s=this._previousItHead;null!==s;s=s._nextPrevious)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachMovedItem(r){let s;for(s=this._movesHead;null!==s;s=s._nextMoved)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}forEachIdentityChange(r){let s;for(s=this._identityChangesHead;null!==s;s=s._nextIdentityChange)r(s)}diff(r){if(null==r&&(r=[]),!Pd(r))throw new dt(900,"");return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let d,p,w,s=this._itHead,a=!1;if(Array.isArray(r)){this.length=r.length;for(let x=0;x<this.length;x++)p=r[x],w=this._trackByFn(x,p),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,p,w,x)),Object.is(s.item,p)||this._addIdentityChange(s,p)):(s=this._mismatch(s,p,w,x),a=!0),s=s._next}else d=0,function Bf(t,r){if(Array.isArray(t))for(let s=0;s<t.length;s++)r(t[s]);else{const s=t[Rd()]();let a;for(;!(a=s.next()).done;)r(a.value)}}(r,x=>{w=this._trackByFn(d,x),null!==s&&Object.is(s.trackById,w)?(a&&(s=this._verifyReinsertion(s,x,w,d)),Object.is(s.item,x)||this._addIdentityChange(s,x)):(s=this._mismatch(s,x,w,d),a=!0),s=s._next,d++}),this.length=d;return this._truncate(s),this.collection=r,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let r;for(r=this._previousItHead=this._itHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._additionsHead;null!==r;r=r._nextAdded)r.previousIndex=r.currentIndex;for(this._additionsHead=this._additionsTail=null,r=this._movesHead;null!==r;r=r._nextMoved)r.previousIndex=r.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(r,s,a,d){let p;return null===r?p=this._itTail:(p=r._prev,this._remove(r)),null!==(r=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._reinsertAfter(r,p,d)):null!==(r=null===this._linkedRecords?null:this._linkedRecords.get(a,d))?(Object.is(r.item,s)||this._addIdentityChange(r,s),this._moveAfter(r,p,d)):r=this._addAfter(new $I(s,a),p,d),r}_verifyReinsertion(r,s,a,d){let p=null===this._unlinkedRecords?null:this._unlinkedRecords.get(a,null);return null!==p?r=this._reinsertAfter(p,r._prev,d):r.currentIndex!=d&&(r.currentIndex=d,this._addToMoves(r,d)),r}_truncate(r){for(;null!==r;){const s=r._next;this._addToRemovals(this._unlink(r)),r=s}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(r,s,a){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(r);const d=r._prevRemoved,p=r._nextRemoved;return null===d?this._removalsHead=p:d._nextRemoved=p,null===p?this._removalsTail=d:p._prevRemoved=d,this._insertAfter(r,s,a),this._addToMoves(r,a),r}_moveAfter(r,s,a){return this._unlink(r),this._insertAfter(r,s,a),this._addToMoves(r,a),r}_addAfter(r,s,a){return this._insertAfter(r,s,a),this._additionsTail=null===this._additionsTail?this._additionsHead=r:this._additionsTail._nextAdded=r,r}_insertAfter(r,s,a){const d=null===s?this._itHead:s._next;return r._next=d,r._prev=s,null===d?this._itTail=r:d._prev=r,null===s?this._itHead=r:s._next=r,null===this._linkedRecords&&(this._linkedRecords=new q0),this._linkedRecords.put(r),r.currentIndex=a,r}_remove(r){return this._addToRemovals(this._unlink(r))}_unlink(r){null!==this._linkedRecords&&this._linkedRecords.remove(r);const s=r._prev,a=r._next;return null===s?this._itHead=a:s._next=a,null===a?this._itTail=s:a._prev=s,r}_addToMoves(r,s){return r.previousIndex===s||(this._movesTail=null===this._movesTail?this._movesHead=r:this._movesTail._nextMoved=r),r}_addToRemovals(r){return null===this._unlinkedRecords&&(this._unlinkedRecords=new q0),this._unlinkedRecords.put(r),r.currentIndex=null,r._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=r,r._prevRemoved=null):(r._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=r),r}_addIdentityChange(r,s){return r.item=s,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=r:this._identityChangesTail._nextIdentityChange=r,r}}class $I{constructor(r,s){this.item=r,this.trackById=s,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class HI{constructor(){this._head=null,this._tail=null}add(r){null===this._head?(this._head=this._tail=r,r._nextDup=null,r._prevDup=null):(this._tail._nextDup=r,r._prevDup=this._tail,r._nextDup=null,this._tail=r)}get(r,s){let a;for(a=this._head;null!==a;a=a._nextDup)if((null===s||s<=a.currentIndex)&&Object.is(a.trackById,r))return a;return null}remove(r){const s=r._prevDup,a=r._nextDup;return null===s?this._head=a:s._nextDup=a,null===a?this._tail=s:a._prevDup=s,null===this._head}}class q0{constructor(){this.map=new Map}put(r){const s=r.trackById;let a=this.map.get(s);a||(a=new HI,this.map.set(s,a)),a.add(r)}get(r,s){const d=this.map.get(r);return d?d.get(r,s):null}remove(r){const s=r.trackById;return this.map.get(s).remove(r)&&this.map.delete(s),r}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function Z0(t,r,s){const a=t.previousIndex;if(null===a)return a;let d=0;return s&&a<s.length&&(d=s[a]),a+r+d}class Y0{constructor(){}supports(r){return r instanceof Map||ig(r)}create(){return new WI}}class WI{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(r){let s;for(s=this._mapHead;null!==s;s=s._next)r(s)}forEachPreviousItem(r){let s;for(s=this._previousMapHead;null!==s;s=s._nextPrevious)r(s)}forEachChangedItem(r){let s;for(s=this._changesHead;null!==s;s=s._nextChanged)r(s)}forEachAddedItem(r){let s;for(s=this._additionsHead;null!==s;s=s._nextAdded)r(s)}forEachRemovedItem(r){let s;for(s=this._removalsHead;null!==s;s=s._nextRemoved)r(s)}diff(r){if(r){if(!(r instanceof Map||ig(r)))throw new dt(900,"")}else r=new Map;return this.check(r)?this:null}onDestroy(){}check(r){this._reset();let s=this._mapHead;if(this._appendAfter=null,this._forEach(r,(a,d)=>{if(s&&s.key===d)this._maybeAddToChanges(s,a),this._appendAfter=s,s=s._next;else{const p=this._getOrCreateRecordForKey(d,a);s=this._insertBeforeOrAppend(s,p)}}),s){s._prev&&(s._prev._next=null),this._removalsHead=s;for(let a=s;null!==a;a=a._nextRemoved)a===this._mapHead&&(this._mapHead=null),this._records.delete(a.key),a._nextRemoved=a._next,a.previousValue=a.currentValue,a.currentValue=null,a._prev=null,a._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(r,s){if(r){const a=r._prev;return s._next=r,s._prev=a,r._prev=s,a&&(a._next=s),r===this._mapHead&&(this._mapHead=s),this._appendAfter=r,r}return this._appendAfter?(this._appendAfter._next=s,s._prev=this._appendAfter):this._mapHead=s,this._appendAfter=s,null}_getOrCreateRecordForKey(r,s){if(this._records.has(r)){const d=this._records.get(r);this._maybeAddToChanges(d,s);const p=d._prev,w=d._next;return p&&(p._next=w),w&&(w._prev=p),d._next=null,d._prev=null,d}const a=new GI(r);return this._records.set(r,a),a.currentValue=s,this._addToAdditions(a),a}_reset(){if(this.isDirty){let r;for(this._previousMapHead=this._mapHead,r=this._previousMapHead;null!==r;r=r._next)r._nextPrevious=r._next;for(r=this._changesHead;null!==r;r=r._nextChanged)r.previousValue=r.currentValue;for(r=this._additionsHead;null!=r;r=r._nextAdded)r.previousValue=r.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(r,s){Object.is(s,r.currentValue)||(r.previousValue=r.currentValue,r.currentValue=s,this._addToChanges(r))}_addToAdditions(r){null===this._additionsHead?this._additionsHead=this._additionsTail=r:(this._additionsTail._nextAdded=r,this._additionsTail=r)}_addToChanges(r){null===this._changesHead?this._changesHead=this._changesTail=r:(this._changesTail._nextChanged=r,this._changesTail=r)}_forEach(r,s){r instanceof Map?r.forEach(s):Object.keys(r).forEach(a=>s(r[a],a))}}class GI{constructor(r){this.key=r,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function Q0(){return new Py([new K0])}let Py=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(null!=a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||Q0()),deps:[[t,new va,new Bo]]}}find(s){const a=this.factories.find(d=>d.supports(s));if(null!=a)return a;throw new dt(901,"")}}return t.\u0275prov=sn({token:t,providedIn:"root",factory:Q0}),t})();function J0(){return new Ny([new Y0])}let Ny=(()=>{class t{constructor(s){this.factories=s}static create(s,a){if(a){const d=a.factories.slice();s=s.concat(d)}return new t(s)}static extend(s){return{provide:t,useFactory:a=>t.create(s,a||J0()),deps:[[t,new va,new Bo]]}}find(s){const a=this.factories.find(p=>p.supports(s));if(a)return a;throw new dt(901,"")}}return t.\u0275prov=sn({token:t,providedIn:"root",factory:J0}),t})();const qI=L0(null,"core",[{provide:x0,useValue:"unknown"},{provide:V0,deps:[qu]},{provide:k0,deps:[]},{provide:R0,deps:[]}]);let ZI=(()=>{class t{constructor(s){}}return t.\u0275fac=function(s){return new(s||t)(ci(Dy))},t.\u0275mod=se({type:t}),t.\u0275inj=St({}),t})()},2382:(rn,et,N)=>{N.d(et,{Fj:()=>st,qu:()=>so,u:()=>bi,sg:()=>$s,u5:()=>Gn,JJ:()=>Dn,JL:()=>Hn,c5:()=>ti,UX:()=>Ui,kI:()=>Ke,_Y:()=>fi});var f=N(5e3),T=N(9808),P=N(8306),Z=N(4742),we=N(8421),Se=N(7669),Pe=N(5403),he=N(3268),He=N(1810),ve=N(8996),De=N(4004);let ot=(()=>{class H{constructor(F,q){this._renderer=F,this._elementRef=q,this.onChange=tt=>{},this.onTouched=()=>{}}setProperty(F,q){this._renderer.setProperty(this._elementRef.nativeElement,F,q)}registerOnTouched(F){this.onTouched=F}registerOnChange(F){this.onChange=F}setDisabledState(F){this.setProperty("disabled",F)}}return H.\u0275fac=function(F){return new(F||H)(f.Y36(f.Qsj),f.Y36(f.SBq))},H.\u0275dir=f.lG2({type:H}),H})(),at=(()=>{class H extends ot{}return H.\u0275fac=function(){let U;return function(q){return(U||(U=f.n5z(H)))(q||H)}}(),H.\u0275dir=f.lG2({type:H,features:[f.qOj]}),H})();const dt=new f.OlP("NgValueAccessor"),mt={provide:dt,useExisting:(0,f.Gpc)(()=>st),multi:!0},Pt=new f.OlP("CompositionEventMode");let st=(()=>{class H extends ot{constructor(F,q,tt){super(F,q),this._compositionMode=tt,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Mt(){const H=(0,T.q)()?(0,T.q)().getUserAgent():"";return/android (\d+)/.test(H.toLowerCase())}())}writeValue(F){this.setProperty("value",null==F?"":F)}_handleInput(F){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(F)}_compositionStart(){this._composing=!0}_compositionEnd(F){this._composing=!1,this._compositionMode&&this.onChange(F)}}return H.\u0275fac=function(F){return new(F||H)(f.Y36(f.Qsj),f.Y36(f.SBq),f.Y36(Pt,8))},H.\u0275dir=f.lG2({type:H,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(F,q){1&F&&f.NdJ("input",function(Sn){return q._handleInput(Sn.target.value)})("blur",function(){return q.onTouched()})("compositionstart",function(){return q._compositionStart()})("compositionend",function(Sn){return q._compositionEnd(Sn.target.value)})},features:[f._Bn([mt]),f.qOj]}),H})();function rt(H){return null==H||0===H.length}function ht(H){return null!=H&&"number"==typeof H.length}const ke=new f.OlP("NgValidators"),fe=new f.OlP("NgAsyncValidators"),Lt=/^(?=.{1,254}$)(?=.{1,64}@)[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+(?:\.[a-zA-Z0-9!#$%&'*+/=?^_`{|}~-]+)*@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/;class Ke{static min(U){return function it(H){return U=>{if(rt(U.value)||rt(H))return null;const F=parseFloat(U.value);return!isNaN(F)&&F<H?{min:{min:H,actual:U.value}}:null}}(U)}static max(U){return function xe(H){return U=>{if(rt(U.value)||rt(H))return null;const F=parseFloat(U.value);return!isNaN(F)&&F>H?{max:{max:H,actual:U.value}}:null}}(U)}static required(U){return function We(H){return rt(H.value)?{required:!0}:null}(U)}static requiredTrue(U){return function Qe(H){return!0===H.value?null:{required:!0}}(U)}static email(U){return function Ne(H){return rt(H.value)||Lt.test(H.value)?null:{email:!0}}(U)}static minLength(U){return function dn(H){return U=>rt(U.value)||!ht(U.value)?null:U.value.length<H?{minlength:{requiredLength:H,actualLength:U.value.length}}:null}(U)}static maxLength(U){return function Wt(H){return U=>ht(U.value)&&U.value.length>H?{maxlength:{requiredLength:H,actualLength:U.value.length}}:null}(U)}static pattern(U){return ut(U)}static nullValidator(U){return null}static compose(U){return St(U)}static composeAsync(U){return Kt(U)}}function ut(H){if(!H)return nt;let U,F;return"string"==typeof H?(F="","^"!==H.charAt(0)&&(F+="^"),F+=H,"$"!==H.charAt(H.length-1)&&(F+="$"),U=new RegExp(F)):(F=H.toString(),U=H),q=>{if(rt(q.value))return null;const tt=q.value;return U.test(tt)?null:{pattern:{requiredPattern:F,actualValue:tt}}}}function nt(H){return null}function Ce(H){return null!=H}function $t(H){const U=(0,f.QGY)(H)?(0,ve.D)(H):H;return(0,f.CqO)(U),U}function an(H){let U={};return H.forEach(F=>{U=null!=F?Object.assign(Object.assign({},U),F):U}),0===Object.keys(U).length?null:U}function Rn(H,U){return U.map(F=>F(H))}function un(H){return H.map(U=>function sn(H){return!H.validate}(U)?U:F=>U.validate(F))}function St(H){if(!H)return null;const U=H.filter(Ce);return 0==U.length?null:function(F){return an(Rn(F,U))}}function Yt(H){return null!=H?St(un(H)):null}function Kt(H){if(!H)return null;const U=H.filter(Ce);return 0==U.length?null:function(F){return function ae(...H){const U=(0,Se.jO)(H),{args:F,keys:q}=(0,Z.D)(H),tt=new P.y(Sn=>{const{length:tr}=F;if(!tr)return void Sn.complete();const ns=new Array(tr);let Ai=tr,rs=tr;for(let oo=0;oo<tr;oo++){let vs=!1;(0,we.Xf)(F[oo]).subscribe((0,Pe.x)(Sn,Yu=>{vs||(vs=!0,rs--),ns[oo]=Yu},()=>Ai--,void 0,()=>{(!Ai||!vs)&&(rs||Sn.next(q?(0,He.n)(q,ns):ns),Sn.complete())}))}});return U?tt.pipe((0,he.Z)(U)):tt}(Rn(F,U).map($t)).pipe((0,De.U)(an))}}function gn(H){return null!=H?Kt(un(H)):null}function Cn(H,U){return null===H?[U]:Array.isArray(H)?[...H,U]:[H,U]}function Pn(H){return H._rawValidators}function Qn(H){return H._rawAsyncValidators}function zn(H){return H?Array.isArray(H)?H:[H]:[]}function xn(H,U){return Array.isArray(H)?H.includes(U):H===U}function sr(H,U){const F=zn(U);return zn(H).forEach(tt=>{xn(F,tt)||F.push(tt)}),F}function wt(H,U){return zn(U).filter(F=>!xn(H,F))}class Xe{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(U){this._rawValidators=U||[],this._composedValidatorFn=Yt(this._rawValidators)}_setAsyncValidators(U){this._rawAsyncValidators=U||[],this._composedAsyncValidatorFn=gn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(U){this._onDestroyCallbacks.push(U)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(U=>U()),this._onDestroyCallbacks=[]}reset(U){this.control&&this.control.reset(U)}hasError(U,F){return!!this.control&&this.control.hasError(U,F)}getError(U,F){return this.control?this.control.getError(U,F):null}}class It extends Xe{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class Rt extends Xe{get formDirective(){return null}get path(){return null}}class pn{constructor(U){this._cd=U}is(U){var F,q,tt;return"submitted"===U?!!(null===(F=this._cd)||void 0===F?void 0:F.submitted):!!(null===(tt=null===(q=this._cd)||void 0===q?void 0:q.control)||void 0===tt?void 0:tt[U])}}let Dn=(()=>{class H extends pn{constructor(F){super(F)}}return H.\u0275fac=function(F){return new(F||H)(f.Y36(It,2))},H.\u0275dir=f.lG2({type:H,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(F,q){2&F&&f.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))},features:[f.qOj]}),H})(),Hn=(()=>{class H extends pn{constructor(F){super(F)}}return H.\u0275fac=function(F){return new(F||H)(f.Y36(Rt,10))},H.\u0275dir=f.lG2({type:H,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(F,q){2&F&&f.ekj("ng-untouched",q.is("untouched"))("ng-touched",q.is("touched"))("ng-pristine",q.is("pristine"))("ng-dirty",q.is("dirty"))("ng-valid",q.is("valid"))("ng-invalid",q.is("invalid"))("ng-pending",q.is("pending"))("ng-submitted",q.is("submitted"))},features:[f.qOj]}),H})();function Me(H,U){Ee(H,U),U.valueAccessor.writeValue(H.value),function se(H,U){U.valueAccessor.registerOnChange(F=>{H._pendingValue=F,H._pendingChange=!0,H._pendingDirty=!0,"change"===H.updateOn&&ye(H,U)})}(H,U),function lt(H,U){const F=(q,tt)=>{U.valueAccessor.writeValue(q),tt&&U.viewToModelUpdate(q)};H.registerOnChange(F),U._registerOnDestroy(()=>{H._unregisterOnChange(F)})}(H,U),function ge(H,U){U.valueAccessor.registerOnTouched(()=>{H._pendingTouched=!0,"blur"===H.updateOn&&H._pendingChange&&ye(H,U),"submit"!==H.updateOn&&H.markAsTouched()})}(H,U),function oe(H,U){if(U.valueAccessor.setDisabledState){const F=q=>{U.valueAccessor.setDisabledState(q)};H.registerOnDisabledChange(F),U._registerOnDestroy(()=>{H._unregisterOnDisabledChange(F)})}}(H,U)}function Ge(H,U,F=!0){const q=()=>{};U.valueAccessor&&(U.valueAccessor.registerOnChange(q),U.valueAccessor.registerOnTouched(q)),qe(H,U),H&&(U._invokeOnDestroyCallbacks(),H._registerOnCollectionChange(()=>{}))}function le(H,U){H.forEach(F=>{F.registerOnValidatorChange&&F.registerOnValidatorChange(U)})}function Ee(H,U){const F=Pn(H);null!==U.validator?H.setValidators(Cn(F,U.validator)):"function"==typeof F&&H.setValidators([F]);const q=Qn(H);null!==U.asyncValidator?H.setAsyncValidators(Cn(q,U.asyncValidator)):"function"==typeof q&&H.setAsyncValidators([q]);const tt=()=>H.updateValueAndValidity();le(U._rawValidators,tt),le(U._rawAsyncValidators,tt)}function qe(H,U){let F=!1;if(null!==H){if(null!==U.validator){const tt=Pn(H);if(Array.isArray(tt)&&tt.length>0){const Sn=tt.filter(tr=>tr!==U.validator);Sn.length!==tt.length&&(F=!0,H.setValidators(Sn))}}if(null!==U.asyncValidator){const tt=Qn(H);if(Array.isArray(tt)&&tt.length>0){const Sn=tt.filter(tr=>tr!==U.asyncValidator);Sn.length!==tt.length&&(F=!0,H.setAsyncValidators(Sn))}}}const q=()=>{};return le(U._rawValidators,q),le(U._rawAsyncValidators,q),F}function ye(H,U){H._pendingDirty&&H.markAsDirty(),H.setValue(H._pendingValue,{emitModelToViewChange:!1}),U.viewToModelUpdate(H._pendingValue),H._pendingChange=!1}function Ht(H,U){const F=H.indexOf(U);F>-1&&H.splice(F,1)}const _e="VALID",Je="INVALID",xt="PENDING",mn="DISABLED";function Wn(H){return(Wr(H)?H.validators:H)||null}function kn(H){return Array.isArray(H)?Yt(H):H||null}function ur(H,U){return(Wr(U)?U.asyncValidators:H)||null}function jr(H){return Array.isArray(H)?gn(H):H||null}function Wr(H){return null!=H&&!Array.isArray(H)&&"object"==typeof H}const nr=H=>H instanceof _r,yi=H=>H instanceof Oe,qi=H=>H instanceof Le;function ys(H){return nr(H)?H.value:H.getRawValue()}function er(H,U){const F=yi(H),q=H.controls;if(!(F?Object.keys(q):q).length)throw new f.vHH(1e3,"");if(!q[U])throw new f.vHH(1001,"")}function $n(H,U){yi(H),H._forEachChild((q,tt)=>{if(void 0===U[tt])throw new f.vHH(1002,"")})}class Ln{constructor(U,F){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._rawValidators=U,this._rawAsyncValidators=F,this._composedValidatorFn=kn(this._rawValidators),this._composedAsyncValidatorFn=jr(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn}set validator(U){this._rawValidators=this._composedValidatorFn=U}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(U){this._rawAsyncValidators=this._composedAsyncValidatorFn=U}get parent(){return this._parent}get valid(){return this.status===_e}get invalid(){return this.status===Je}get pending(){return this.status==xt}get disabled(){return this.status===mn}get enabled(){return this.status!==mn}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(U){this._rawValidators=U,this._composedValidatorFn=kn(U)}setAsyncValidators(U){this._rawAsyncValidators=U,this._composedAsyncValidatorFn=jr(U)}addValidators(U){this.setValidators(sr(U,this._rawValidators))}addAsyncValidators(U){this.setAsyncValidators(sr(U,this._rawAsyncValidators))}removeValidators(U){this.setValidators(wt(U,this._rawValidators))}removeAsyncValidators(U){this.setAsyncValidators(wt(U,this._rawAsyncValidators))}hasValidator(U){return xn(this._rawValidators,U)}hasAsyncValidator(U){return xn(this._rawAsyncValidators,U)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(U={}){this.touched=!0,this._parent&&!U.onlySelf&&this._parent.markAsTouched(U)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(U=>U.markAllAsTouched())}markAsUntouched(U={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(F=>{F.markAsUntouched({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}markAsDirty(U={}){this.pristine=!1,this._parent&&!U.onlySelf&&this._parent.markAsDirty(U)}markAsPristine(U={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(F=>{F.markAsPristine({onlySelf:!0})}),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}markAsPending(U={}){this.status=xt,!1!==U.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!U.onlySelf&&this._parent.markAsPending(U)}disable(U={}){const F=this._parentMarkedDirty(U.onlySelf);this.status=mn,this.errors=null,this._forEachChild(q=>{q.disable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this._updateValue(),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:F})),this._onDisabledChange.forEach(q=>q(!0))}enable(U={}){const F=this._parentMarkedDirty(U.onlySelf);this.status=_e,this._forEachChild(q=>{q.enable(Object.assign(Object.assign({},U),{onlySelf:!0}))}),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent}),this._updateAncestors(Object.assign(Object.assign({},U),{skipPristineCheck:F})),this._onDisabledChange.forEach(q=>q(!1))}_updateAncestors(U){this._parent&&!U.onlySelf&&(this._parent.updateValueAndValidity(U),U.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(U){this._parent=U}updateValueAndValidity(U={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===_e||this.status===xt)&&this._runAsyncValidator(U.emitEvent)),!1!==U.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!U.onlySelf&&this._parent.updateValueAndValidity(U)}_updateTreeValidity(U={emitEvent:!0}){this._forEachChild(F=>F._updateTreeValidity(U)),this.updateValueAndValidity({onlySelf:!0,emitEvent:U.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?mn:_e}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(U){if(this.asyncValidator){this.status=xt,this._hasOwnPendingAsyncValidator=!0;const F=$t(this.asyncValidator(this));this._asyncValidationSubscription=F.subscribe(q=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(q,{emitEvent:U})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(U,F={}){this.errors=U,this._updateControlsErrors(!1!==F.emitEvent)}get(U){return function yr(H,U,F){if(null==U||(Array.isArray(U)||(U=U.split(F)),Array.isArray(U)&&0===U.length))return null;let q=H;return U.forEach(tt=>{q=yi(q)?q.controls.hasOwnProperty(tt)?q.controls[tt]:null:qi(q)&&q.at(tt)||null}),q}(this,U,".")}getError(U,F){const q=F?this.get(F):this;return q&&q.errors?q.errors[U]:null}hasError(U,F){return!!this.getError(U,F)}get root(){let U=this;for(;U._parent;)U=U._parent;return U}_updateControlsErrors(U){this.status=this._calculateStatus(),U&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(U)}_initObservables(){this.valueChanges=new f.vpe,this.statusChanges=new f.vpe}_calculateStatus(){return this._allControlsDisabled()?mn:this.errors?Je:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(xt)?xt:this._anyControlsHaveStatus(Je)?Je:_e}_anyControlsHaveStatus(U){return this._anyControls(F=>F.status===U)}_anyControlsDirty(){return this._anyControls(U=>U.dirty)}_anyControlsTouched(){return this._anyControls(U=>U.touched)}_updatePristine(U={}){this.pristine=!this._anyControlsDirty(),this._parent&&!U.onlySelf&&this._parent._updatePristine(U)}_updateTouched(U={}){this.touched=this._anyControlsTouched(),this._parent&&!U.onlySelf&&this._parent._updateTouched(U)}_isBoxedValue(U){return"object"==typeof U&&null!==U&&2===Object.keys(U).length&&"value"in U&&"disabled"in U}_registerOnCollectionChange(U){this._onCollectionChange=U}_setUpdateStrategy(U){Wr(U)&&null!=U.updateOn&&(this._updateOn=U.updateOn)}_parentMarkedDirty(U){return!U&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}}class _r extends Ln{constructor(U=null,F,q){super(Wn(F),ur(q,F)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(U),this._setUpdateStrategy(F),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Wr(F)&&F.initialValueIsDefault&&(this.defaultValue=this._isBoxedValue(U)?U.value:U)}setValue(U,F={}){this.value=this._pendingValue=U,this._onChange.length&&!1!==F.emitModelToViewChange&&this._onChange.forEach(q=>q(this.value,!1!==F.emitViewToModelChange)),this.updateValueAndValidity(F)}patchValue(U,F={}){this.setValue(U,F)}reset(U=this.defaultValue,F={}){this._applyFormState(U),this.markAsPristine(F),this.markAsUntouched(F),this.setValue(this.value,F),this._pendingChange=!1}_updateValue(){}_anyControls(U){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(U){this._onChange.push(U)}_unregisterOnChange(U){Ht(this._onChange,U)}registerOnDisabledChange(U){this._onDisabledChange.push(U)}_unregisterOnDisabledChange(U){Ht(this._onDisabledChange,U)}_forEachChild(U){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(U){this._isBoxedValue(U)?(this.value=this._pendingValue=U.value,U.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=U}}class Oe extends Ln{constructor(U,F,q){super(Wn(F),ur(q,F)),this.controls=U,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}registerControl(U,F){return this.controls[U]?this.controls[U]:(this.controls[U]=F,F.setParent(this),F._registerOnCollectionChange(this._onCollectionChange),F)}addControl(U,F,q={}){this.registerControl(U,F),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}removeControl(U,F={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}setControl(U,F,q={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),delete this.controls[U],F&&this.registerControl(U,F),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}contains(U){return this.controls.hasOwnProperty(U)&&this.controls[U].enabled}setValue(U,F={}){$n(this,U),Object.keys(U).forEach(q=>{er(this,q),this.controls[q].setValue(U[q],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(U,F={}){null!=U&&(Object.keys(U).forEach(q=>{this.controls[q]&&this.controls[q].patchValue(U[q],{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(U={},F={}){this._forEachChild((q,tt)=>{q.reset(U[tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this._reduceChildren({},(U,F,q)=>(U[q]=ys(F),U))}_syncPendingControls(){let U=this._reduceChildren(!1,(F,q)=>!!q._syncPendingControls()||F);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){Object.keys(this.controls).forEach(F=>{const q=this.controls[F];q&&U(q,F)})}_setUpControls(){this._forEachChild(U=>{U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(U){for(const F of Object.keys(this.controls)){const q=this.controls[F];if(this.contains(F)&&U(q))return!0}return!1}_reduceValue(){return this._reduceChildren({},(U,F,q)=>((F.enabled||this.disabled)&&(U[q]=F.value),U))}_reduceChildren(U,F){let q=U;return this._forEachChild((tt,Sn)=>{q=F(q,tt,Sn)}),q}_allControlsDisabled(){for(const U of Object.keys(this.controls))if(this.controls[U].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}}class Le extends Ln{constructor(U,F,q){super(Wn(F),ur(q,F)),this.controls=U,this._initObservables(),this._setUpdateStrategy(F),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}at(U){return this.controls[U]}push(U,F={}){this.controls.push(U),this._registerControl(U),this.updateValueAndValidity({emitEvent:F.emitEvent}),this._onCollectionChange()}insert(U,F,q={}){this.controls.splice(U,0,F),this._registerControl(F),this.updateValueAndValidity({emitEvent:q.emitEvent})}removeAt(U,F={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),this.updateValueAndValidity({emitEvent:F.emitEvent})}setControl(U,F,q={}){this.controls[U]&&this.controls[U]._registerOnCollectionChange(()=>{}),this.controls.splice(U,1),F&&(this.controls.splice(U,0,F),this._registerControl(F)),this.updateValueAndValidity({emitEvent:q.emitEvent}),this._onCollectionChange()}get length(){return this.controls.length}setValue(U,F={}){$n(this,U),U.forEach((q,tt)=>{er(this,tt),this.at(tt).setValue(q,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F)}patchValue(U,F={}){null!=U&&(U.forEach((q,tt)=>{this.at(tt)&&this.at(tt).patchValue(q,{onlySelf:!0,emitEvent:F.emitEvent})}),this.updateValueAndValidity(F))}reset(U=[],F={}){this._forEachChild((q,tt)=>{q.reset(U[tt],{onlySelf:!0,emitEvent:F.emitEvent})}),this._updatePristine(F),this._updateTouched(F),this.updateValueAndValidity(F)}getRawValue(){return this.controls.map(U=>ys(U))}clear(U={}){this.controls.length<1||(this._forEachChild(F=>F._registerOnCollectionChange(()=>{})),this.controls.splice(0),this.updateValueAndValidity({emitEvent:U.emitEvent}))}_syncPendingControls(){let U=this.controls.reduce((F,q)=>!!q._syncPendingControls()||F,!1);return U&&this.updateValueAndValidity({onlySelf:!0}),U}_forEachChild(U){this.controls.forEach((F,q)=>{U(F,q)})}_updateValue(){this.value=this.controls.filter(U=>U.enabled||this.disabled).map(U=>U.value)}_anyControls(U){return this.controls.some(F=>F.enabled&&U(F))}_setUpControls(){this._forEachChild(U=>this._registerControl(U))}_allControlsDisabled(){for(const U of this.controls)if(U.enabled)return!1;return this.controls.length>0||this.disabled}_registerControl(U){U.setParent(this),U._registerOnCollectionChange(this._onCollectionChange)}}let fi=(()=>{class H{}return H.\u0275fac=function(F){return new(F||H)},H.\u0275dir=f.lG2({type:H,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""]}),H})(),zo=(()=>{class H{}return H.\u0275fac=function(F){return new(F||H)},H.\u0275mod=f.oAB({type:H}),H.\u0275inj=f.cJS({}),H})();const di=new f.OlP("NgModelWithFormControlWarning"),es={provide:Rt,useExisting:(0,f.Gpc)(()=>$s)};let $s=(()=>{class H extends Rt{constructor(F,q){super(),this.validators=F,this.asyncValidators=q,this.submitted=!1,this._onCollectionChange=()=>this._updateDomValue(),this.directives=[],this.form=null,this.ngSubmit=new f.vpe,this._setValidators(F),this._setAsyncValidators(q)}ngOnChanges(F){this._checkFormPresent(),F.hasOwnProperty("form")&&(this._updateValidators(),this._updateDomValue(),this._updateRegistrations(),this._oldForm=this.form)}ngOnDestroy(){this.form&&(qe(this.form,this),this.form._onCollectionChange===this._onCollectionChange&&this.form._registerOnCollectionChange(()=>{}))}get formDirective(){return this}get control(){return this.form}get path(){return[]}addControl(F){const q=this.form.get(F.path);return Me(q,F),q.updateValueAndValidity({emitEvent:!1}),this.directives.push(F),q}getControl(F){return this.form.get(F.path)}removeControl(F){Ge(F.control||null,F,!1),Ht(this.directives,F)}addFormGroup(F){this._setUpFormContainer(F)}removeFormGroup(F){this._cleanUpFormContainer(F)}getFormGroup(F){return this.form.get(F.path)}addFormArray(F){this._setUpFormContainer(F)}removeFormArray(F){this._cleanUpFormContainer(F)}getFormArray(F){return this.form.get(F.path)}updateModel(F,q){this.form.get(F.path).setValue(q)}onSubmit(F){return this.submitted=!0,function $e(H,U){H._syncPendingControls(),U.forEach(F=>{const q=F.control;"submit"===q.updateOn&&q._pendingChange&&(F.viewToModelUpdate(q._pendingValue),q._pendingChange=!1)})}(this.form,this.directives),this.ngSubmit.emit(F),!1}onReset(){this.resetForm()}resetForm(F){this.form.reset(F),this.submitted=!1}_updateDomValue(){this.directives.forEach(F=>{const q=F.control,tt=this.form.get(F.path);q!==tt&&(Ge(q||null,F),nr(tt)&&(Me(tt,F),F.control=tt))}),this.form._updateTreeValidity({emitEvent:!1})}_setUpFormContainer(F){const q=this.form.get(F.path);(function yt(H,U){Ee(H,U)})(q,F),q.updateValueAndValidity({emitEvent:!1})}_cleanUpFormContainer(F){if(this.form){const q=this.form.get(F.path);q&&function Qt(H,U){return qe(H,U)}(q,F)&&q.updateValueAndValidity({emitEvent:!1})}}_updateRegistrations(){this.form._registerOnCollectionChange(this._onCollectionChange),this._oldForm&&this._oldForm._registerOnCollectionChange(()=>{})}_updateValidators(){Ee(this.form,this),this._oldForm&&qe(this._oldForm,this)}_checkFormPresent(){}}return H.\u0275fac=function(F){return new(F||H)(f.Y36(ke,10),f.Y36(fe,10))},H.\u0275dir=f.lG2({type:H,selectors:[["","formGroup",""]],hostBindings:function(F,q){1&F&&f.NdJ("submit",function(Sn){return q.onSubmit(Sn)})("reset",function(){return q.onReset()})},inputs:{form:["formGroup","form"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],features:[f._Bn([es]),f.qOj,f.TTD]}),H})();const cs={provide:It,useExisting:(0,f.Gpc)(()=>bi)};let bi=(()=>{class H extends It{constructor(F,q,tt,Sn,tr){super(),this._ngModelWarningConfig=tr,this._added=!1,this.update=new f.vpe,this._ngModelWarningSent=!1,this._parent=F,this._setValidators(q),this._setAsyncValidators(tt),this.valueAccessor=function pt(H,U){if(!U)return null;let F,q,tt;return Array.isArray(U),U.forEach(Sn=>{Sn.constructor===st?F=Sn:function or(H){return Object.getPrototypeOf(H.constructor)===at}(Sn)?q=Sn:tt=Sn}),tt||q||F||null}(0,Sn)}set isDisabled(F){}ngOnChanges(F){this._added||this._setUpControl(),function Rr(H,U){if(!H.hasOwnProperty("model"))return!1;const F=H.model;return!!F.isFirstChange()||!Object.is(U,F.currentValue)}(F,this.viewModel)&&(this.viewModel=this.model,this.formDirective.updateModel(this,this.model))}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}viewToModelUpdate(F){this.viewModel=F,this.update.emit(F)}get path(){return function de(H,U){return[...U.path,H]}(null==this.name?this.name:this.name.toString(),this._parent)}get formDirective(){return this._parent?this._parent.formDirective:null}_checkParentType(){}_setUpControl(){this._checkParentType(),this.control=this.formDirective.addControl(this),this.control.disabled&&this.valueAccessor.setDisabledState&&this.valueAccessor.setDisabledState(!0),this._added=!0}}return H._ngModelWarningSentOnce=!1,H.\u0275fac=function(F){return new(F||H)(f.Y36(Rt,13),f.Y36(ke,10),f.Y36(fe,10),f.Y36(dt,10),f.Y36(di,8))},H.\u0275dir=f.lG2({type:H,selectors:[["","formControlName",""]],inputs:{name:["formControlName","name"],isDisabled:["disabled","isDisabled"],model:["ngModel","model"]},outputs:{update:"ngModelChange"},features:[f._Bn([cs]),f.qOj,f.TTD]}),H})(),Zi=(()=>{class H{constructor(){this._validator=nt}ngOnChanges(F){if(this.inputName in F){const q=this.normalizeInput(F[this.inputName].currentValue);this._enabled=this.enabled(q),this._validator=this._enabled?this.createValidator(q):nt,this._onChange&&this._onChange()}}validate(F){return this._validator(F)}registerOnValidatorChange(F){this._onChange=F}enabled(F){return null!=F}}return H.\u0275fac=function(F){return new(F||H)},H.\u0275dir=f.lG2({type:H,features:[f.TTD]}),H})();const Cr={provide:ke,useExisting:(0,f.Gpc)(()=>ti),multi:!0};let ti=(()=>{class H extends Zi{constructor(){super(...arguments),this.inputName="pattern",this.normalizeInput=F=>F,this.createValidator=F=>ut(F)}}return H.\u0275fac=function(){let U;return function(q){return(U||(U=f.n5z(H)))(q||H)}}(),H.\u0275dir=f.lG2({type:H,selectors:[["","pattern","","formControlName",""],["","pattern","","formControl",""],["","pattern","","ngModel",""]],hostVars:1,hostBindings:function(F,q){2&F&&f.uIk("pattern",q._enabled?q.pattern:null)},inputs:{pattern:"pattern"},features:[f._Bn([Cr]),f.qOj]}),H})(),Hi=(()=>{class H{}return H.\u0275fac=function(F){return new(F||H)},H.\u0275mod=f.oAB({type:H}),H.\u0275inj=f.cJS({imports:[[zo]]}),H})(),Gn=(()=>{class H{}return H.\u0275fac=function(F){return new(F||H)},H.\u0275mod=f.oAB({type:H}),H.\u0275inj=f.cJS({imports:[Hi]}),H})(),Ui=(()=>{class H{static withConfig(F){return{ngModule:H,providers:[{provide:di,useValue:F.warnOnNgModelWithFormControl}]}}}return H.\u0275fac=function(F){return new(F||H)},H.\u0275mod=f.oAB({type:H}),H.\u0275inj=f.cJS({imports:[Hi]}),H})(),so=(()=>{class H{group(F,q=null){const tt=this._reduceControls(F);let ns,Sn=null,tr=null;return null!=q&&(function Ps(H){return void 0!==H.asyncValidators||void 0!==H.validators||void 0!==H.updateOn}(q)?(Sn=null!=q.validators?q.validators:null,tr=null!=q.asyncValidators?q.asyncValidators:null,ns=null!=q.updateOn?q.updateOn:void 0):(Sn=null!=q.validator?q.validator:null,tr=null!=q.asyncValidator?q.asyncValidator:null)),new Oe(tt,{asyncValidators:tr,updateOn:ns,validators:Sn})}control(F,q,tt){return new _r(F,q,tt)}array(F,q,tt){const Sn=F.map(tr=>this._createControl(tr));return new Le(Sn,q,tt)}_reduceControls(F){const q={};return Object.keys(F).forEach(tt=>{q[tt]=this._createControl(F[tt])}),q}_createControl(F){return nr(F)||yi(F)||qi(F)?F:Array.isArray(F)?this.control(F[0],F.length>1?F[1]:null,F.length>2?F[2]:null):this.control(F)}}return H.\u0275fac=function(F){return new(F||H)},H.\u0275prov=f.Yz7({token:H,factory:H.\u0275fac,providedIn:Ui}),H})()},5839:(rn,et,N)=>{N.d(et,{gz:()=>kt,jw:()=>Hn,F0:()=>gi,yS:()=>ps,Bz:()=>bt,lC:()=>Ko,fw:()=>Zi});var f=N(5e3),T=N(7579);class P extends T.x{constructor(b){super(),this._value=b}get value(){return this.getValue()}_subscribe(b){const C=super._subscribe(b);return!C.closed&&b.next(this._value),C}getValue(){const{hasError:b,thrownError:C,_value:V}=this;if(b)throw C;return this._throwIfClosed(),V}next(b){super.next(this._value=b)}}var Z=N(8306),we=N(4742),Se=N(8996),Pe=N(4671),he=N(3268),He=N(7669),ae=N(1810),ve=N(5403),De=N(9672);function dt(R,b,C){R?(0,De.f)(C,R,b):b()}var Ct=N(576);function be(R,b){const C=(0,Ct.m)(R)?R:()=>R,V=W=>W.error(C());return new Z.y(b?W=>b.schedule(V,0,W):V)}var mt=N(8421);function Mt(R){return new Z.y(b=>{(0,mt.Xf)(R()).subscribe(b)})}var Pt=N(727),st=N(4482);function rt(){return(0,st.e)((R,b)=>{let C=null;R._refCount++;const V=(0,ve.x)(b,void 0,void 0,void 0,()=>{if(!R||R._refCount<=0||0<--R._refCount)return void(C=null);const W=R._connection,X=C;C=null,W&&(!X||W===X)&&W.unsubscribe(),b.unsubscribe()});R.subscribe(V),V.closed||(C=R.connect())})}class ht extends Z.y{constructor(b,C){super(),this.source=b,this.subjectFactory=C,this._subject=null,this._refCount=0,this._connection=null,(0,st.A)(b)&&(this.lift=b.lift)}_subscribe(b){return this.getSubject().subscribe(b)}getSubject(){const b=this._subject;return(!b||b.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:b}=this;this._subject=this._connection=null,null==b||b.unsubscribe()}connect(){let b=this._connection;if(!b){b=this._connection=new Pt.w0;const C=this.getSubject();b.add(this.source.subscribe((0,ve.x)(C,void 0,()=>{this._teardown(),C.complete()},V=>{this._teardown(),C.error(V)},()=>this._teardown()))),b.closed&&(this._connection=null,b=Pt.w0.EMPTY)}return b}refCount(){return rt()(this)}}var ke=N(9646),fe=N(6805),Lt=N(7272),Ke=N(515);function it(R){return(0,st.e)((b,C)=>{let X,V=null,W=!1;V=b.subscribe((0,ve.x)(C,void 0,void 0,Te=>{X=(0,mt.Xf)(R(Te,it(R)(b))),V?(V.unsubscribe(),V=null,X.subscribe(C)):W=!0})),W&&(V.unsubscribe(),V=null,X.subscribe(C))})}var xe=N(5577);function We(R,b){return(0,Ct.m)(b)?(0,xe.z)(R,b,1):(0,xe.z)(R,1)}var Qe=N(9300);function Ne(R){return R<=0?()=>Ke.E:(0,st.e)((b,C)=>{let V=[];b.subscribe((0,ve.x)(C,W=>{V.push(W),R<V.length&&V.shift()},()=>{for(const W of V)C.next(W);C.complete()},void 0,()=>{V=null}))})}var dn=N(8068),Wt=N(6590),Ce=N(4004),$t=N(3900),an=N(5698),Rn=N(8675),sn=N(5026),un=N(590),St=N(8505),Yt=N(8189),Kt=N(9808);class gn{constructor(b,C){this.id=b,this.url=C}}class Cn extends gn{constructor(b,C,V="imperative",W=null){super(b,C),this.navigationTrigger=V,this.restoredState=W}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Pn extends gn{constructor(b,C,V){super(b,C),this.urlAfterRedirects=V}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Qn extends gn{constructor(b,C,V){super(b,C),this.reason=V}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class zn extends gn{constructor(b,C,V){super(b,C),this.error=V}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xn extends gn{constructor(b,C,V,W){super(b,C),this.urlAfterRedirects=V,this.state=W}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class sr extends gn{constructor(b,C,V,W){super(b,C),this.urlAfterRedirects=V,this.state=W}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class wt extends gn{constructor(b,C,V,W,X){super(b,C),this.urlAfterRedirects=V,this.state=W,this.shouldActivate=X}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Xe extends gn{constructor(b,C,V,W){super(b,C),this.urlAfterRedirects=V,this.state=W}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class It extends gn{constructor(b,C,V,W){super(b,C),this.urlAfterRedirects=V,this.state=W}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Rt{constructor(b){this.route=b}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class pn{constructor(b){this.route=b}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class Nn{constructor(b){this.snapshot=b}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Vn{constructor(b){this.snapshot=b}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Dn{constructor(b){this.snapshot=b}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Hn{constructor(b){this.snapshot=b}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Kn{constructor(b,C,V){this.routerEvent=b,this.position=C,this.anchor=V}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Ot="primary";class hn{constructor(b){this.params=b||{}}has(b){return Object.prototype.hasOwnProperty.call(this.params,b)}get(b){if(this.has(b)){const C=this.params[b];return Array.isArray(C)?C[0]:C}return null}getAll(b){if(this.has(b)){const C=this.params[b];return Array.isArray(C)?C:[C]}return[]}get keys(){return Object.keys(this.params)}}function Gt(R){return new hn(R)}const hr="ngNavigationCancelingError";function Tr(R){const b=Error("NavigationCancelingError: "+R);return b[hr]=!0,b}function Ar(R,b,C){const V=C.path.split("/");if(V.length>R.length||"full"===C.pathMatch&&(b.hasChildren()||V.length<R.length))return null;const W={};for(let X=0;X<V.length;X++){const Te=V[X],Ue=R[X];if(Te.startsWith(":"))W[Te.substring(1)]=Ue;else if(Te!==Ue.path)return null}return{consumed:R.slice(0,V.length),posParams:W}}function Fn(R,b){const C=R?Object.keys(R):void 0,V=b?Object.keys(b):void 0;if(!C||!V||C.length!=V.length)return!1;let W;for(let X=0;X<C.length;X++)if(W=C[X],!Ye(R[W],b[W]))return!1;return!0}function Ye(R,b){if(Array.isArray(R)&&Array.isArray(b)){if(R.length!==b.length)return!1;const C=[...R].sort(),V=[...b].sort();return C.every((W,X)=>V[X]===W)}return R===b}function Fe(R){return Array.prototype.concat.apply([],R)}function ue(R){return R.length>0?R[R.length-1]:null}function z(R,b){for(const C in R)R.hasOwnProperty(C)&&b(R[C],C)}function me(R){return(0,f.CqO)(R)?R:(0,f.QGY)(R)?(0,Se.D)(Promise.resolve(R)):(0,ke.of)(R)}const Me={exact:function Ee(R,b,C){if(!fn(R.segments,b.segments)||!ye(R.segments,b.segments,C)||R.numberOfChildren!==b.numberOfChildren)return!1;for(const V in b.children)if(!R.children[V]||!Ee(R.children[V],b.children[V],C))return!1;return!0},subset:se},Ge={exact:function oe(R,b){return Fn(R,b)},subset:function qe(R,b){return Object.keys(b).length<=Object.keys(R).length&&Object.keys(b).every(C=>Ye(R[C],b[C]))},ignored:()=>!0};function le(R,b,C){return Me[C.paths](R.root,b.root,C.matrixParams)&&Ge[C.queryParams](R.queryParams,b.queryParams)&&!("exact"===C.fragment&&R.fragment!==b.fragment)}function se(R,b,C){return ge(R,b,b.segments,C)}function ge(R,b,C,V){if(R.segments.length>C.length){const W=R.segments.slice(0,C.length);return!(!fn(W,C)||b.hasChildren()||!ye(W,C,V))}if(R.segments.length===C.length){if(!fn(R.segments,C)||!ye(R.segments,C,V))return!1;for(const W in b.children)if(!R.children[W]||!se(R.children[W],b.children[W],V))return!1;return!0}{const W=C.slice(0,R.segments.length),X=C.slice(R.segments.length);return!!(fn(R.segments,W)&&ye(R.segments,W,V)&&R.children[Ot])&&ge(R.children[Ot],b,X,V)}}function ye(R,b,C){return b.every((V,W)=>Ge[C](R[W].parameters,V.parameters))}class lt{constructor(b,C,V){this.root=b,this.queryParams=C,this.fragment=V}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gt(this.queryParams)),this._queryParamMap}toString(){return or.serialize(this)}}class yt{constructor(b,C){this.segments=b,this.children=C,this.parent=null,z(C,(V,W)=>V.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return $e(this)}}class Qt{constructor(b,C){this.path=b,this.parameters=C}get parameterMap(){return this._parameterMap||(this._parameterMap=Gt(this.parameters)),this._parameterMap}toString(){return mn(this)}}function fn(R,b){return R.length===b.length&&R.every((C,V)=>C.path===b[V].path)}class mr{}class Rr{parse(b){const C=new qi(b);return new lt(C.parseRootSegment(),C.parseQueryParams(),C.parseFragment())}serialize(b){const C=`/${pt(b.root,!0)}`,V=function Wn(R){const b=Object.keys(R).map(C=>{const V=R[C];return Array.isArray(V)?V.map(W=>`${_n(C)}=${_n(W)}`).join("&"):`${_n(C)}=${_n(V)}`}).filter(C=>!!C);return b.length?`?${b.join("&")}`:""}(b.queryParams);return`${C}${V}${"string"==typeof b.fragment?`#${function Ut(R){return encodeURI(R)}(b.fragment)}`:""}`}}const or=new Rr;function $e(R){return R.segments.map(b=>mn(b)).join("/")}function pt(R,b){if(!R.hasChildren())return $e(R);if(b){const C=R.children[Ot]?pt(R.children[Ot],!1):"",V=[];return z(R.children,(W,X)=>{X!==Ot&&V.push(`${X}:${pt(W,!1)}`)}),V.length>0?`${C}(${V.join("//")})`:C}{const C=function On(R,b){let C=[];return z(R.children,(V,W)=>{W===Ot&&(C=C.concat(b(V,W)))}),z(R.children,(V,W)=>{W!==Ot&&(C=C.concat(b(V,W)))}),C}(R,(V,W)=>W===Ot?[pt(R.children[Ot],!1)]:[`${W}:${pt(V,!1)}`]);return 1===Object.keys(R.children).length&&null!=R.children[Ot]?`${$e(R)}/${C[0]}`:`${$e(R)}/(${C.join("//")})`}}function Ht(R){return encodeURIComponent(R).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function _n(R){return Ht(R).replace(/%3B/gi,";")}function _e(R){return Ht(R).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Je(R){return decodeURIComponent(R)}function xt(R){return Je(R.replace(/\+/g,"%20"))}function mn(R){return`${_e(R.path)}${function yr(R){return Object.keys(R).map(b=>`;${_e(b)}=${_e(R[b])}`).join("")}(R.parameters)}`}const kn=/^[^\/()?;=#]+/;function ur(R){const b=R.match(kn);return b?b[0]:""}const jr=/^[^=?&#]+/,nr=/^[^&#]+/;class qi{constructor(b){this.url=b,this.remaining=b}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new yt([],{}):new yt([],this.parseChildren())}parseQueryParams(){const b={};if(this.consumeOptional("?"))do{this.parseQueryParam(b)}while(this.consumeOptional("&"));return b}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const b=[];for(this.peekStartsWith("(")||b.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),b.push(this.parseSegment());let C={};this.peekStartsWith("/(")&&(this.capture("/"),C=this.parseParens(!0));let V={};return this.peekStartsWith("(")&&(V=this.parseParens(!1)),(b.length>0||Object.keys(C).length>0)&&(V[Ot]=new yt(b,C)),V}parseSegment(){const b=ur(this.remaining);if(""===b&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(b),new Qt(Je(b),this.parseMatrixParams())}parseMatrixParams(){const b={};for(;this.consumeOptional(";");)this.parseParam(b);return b}parseParam(b){const C=ur(this.remaining);if(!C)return;this.capture(C);let V="";if(this.consumeOptional("=")){const W=ur(this.remaining);W&&(V=W,this.capture(V))}b[Je(C)]=Je(V)}parseQueryParam(b){const C=function Wr(R){const b=R.match(jr);return b?b[0]:""}(this.remaining);if(!C)return;this.capture(C);let V="";if(this.consumeOptional("=")){const Te=function yi(R){const b=R.match(nr);return b?b[0]:""}(this.remaining);Te&&(V=Te,this.capture(V))}const W=xt(C),X=xt(V);if(b.hasOwnProperty(W)){let Te=b[W];Array.isArray(Te)||(Te=[Te],b[W]=Te),Te.push(X)}else b[W]=X}parseParens(b){const C={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const V=ur(this.remaining),W=this.remaining[V.length];if("/"!==W&&")"!==W&&";"!==W)throw new Error(`Cannot parse url '${this.url}'`);let X;V.indexOf(":")>-1?(X=V.substr(0,V.indexOf(":")),this.capture(X),this.capture(":")):b&&(X=Ot);const Te=this.parseChildren();C[X]=1===Object.keys(Te).length?Te[Ot]:new yt([],Te),this.consumeOptional("//")}return C}peekStartsWith(b){return this.remaining.startsWith(b)}consumeOptional(b){return!!this.peekStartsWith(b)&&(this.remaining=this.remaining.substring(b.length),!0)}capture(b){if(!this.consumeOptional(b))throw new Error(`Expected "${b}".`)}}class ys{constructor(b){this._root=b}get root(){return this._root.value}parent(b){const C=this.pathFromRoot(b);return C.length>1?C[C.length-2]:null}children(b){const C=er(b,this._root);return C?C.children.map(V=>V.value):[]}firstChild(b){const C=er(b,this._root);return C&&C.children.length>0?C.children[0].value:null}siblings(b){const C=$n(b,this._root);return C.length<2?[]:C[C.length-2].children.map(W=>W.value).filter(W=>W!==b)}pathFromRoot(b){return $n(b,this._root).map(C=>C.value)}}function er(R,b){if(R===b.value)return b;for(const C of b.children){const V=er(R,C);if(V)return V}return null}function $n(R,b){if(R===b.value)return[b];for(const C of b.children){const V=$n(R,C);if(V.length)return V.unshift(b),V}return[]}class Ln{constructor(b,C){this.value=b,this.children=C}toString(){return`TreeNode(${this.value})`}}function _r(R){const b={};return R&&R.children.forEach(C=>b[C.value.outlet]=C),b}class Oe extends ys{constructor(b,C){super(b),this.snapshot=C,Er(this,b)}toString(){return this.snapshot.toString()}}function Le(R,b){const C=function _t(R,b){const Te=new wn([],{},{},"",{},Ot,b,null,R.root,-1,{});return new vr("",new Ln(Te,[]))}(R,b),V=new P([new Qt("",{})]),W=new P({}),X=new P({}),Te=new P({}),Ue=new P(""),At=new kt(V,W,Te,Ue,X,Ot,b,C.root);return At.snapshot=C.root,new Oe(new Ln(At,[]),C)}class kt{constructor(b,C,V,W,X,Te,Ue,At){this.url=b,this.params=C,this.queryParams=V,this.fragment=W,this.data=X,this.outlet=Te,this.component=Ue,this._futureSnapshot=At}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,Ce.U)(b=>Gt(b)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,Ce.U)(b=>Gt(b)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function zt(R,b="emptyOnly"){const C=R.pathFromRoot;let V=0;if("always"!==b)for(V=C.length-1;V>=1;){const W=C[V],X=C[V-1];if(W.routeConfig&&""===W.routeConfig.path)V--;else{if(X.component)break;V--}}return function en(R){return R.reduce((b,C)=>({params:Object.assign(Object.assign({},b.params),C.params),data:Object.assign(Object.assign({},b.data),C.data),resolve:Object.assign(Object.assign({},b.resolve),C._resolvedData)}),{params:{},data:{},resolve:{}})}(C.slice(V))}class wn{constructor(b,C,V,W,X,Te,Ue,At,En,Tn,jn){this.url=b,this.params=C,this.queryParams=V,this.fragment=W,this.data=X,this.outlet=Te,this.component=Ue,this.routeConfig=At,this._urlSegment=En,this._lastPathIndex=Tn,this._resolve=jn}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Gt(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Gt(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(V=>V.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class vr extends ys{constructor(b,C){super(C),this.url=b,Er(this,C)}toString(){return Xr(this._root)}}function Er(R,b){b.value._routerState=R,b.children.forEach(C=>Er(R,C))}function Xr(R){const b=R.children.length>0?` { ${R.children.map(Xr).join(", ")} } `:"";return`${R.value}${b}`}function oi(R){if(R.snapshot){const b=R.snapshot,C=R._futureSnapshot;R.snapshot=C,Fn(b.queryParams,C.queryParams)||R.queryParams.next(C.queryParams),b.fragment!==C.fragment&&R.fragment.next(C.fragment),Fn(b.params,C.params)||R.params.next(C.params),function Jn(R,b){if(R.length!==b.length)return!1;for(let C=0;C<R.length;++C)if(!Fn(R[C],b[C]))return!1;return!0}(b.url,C.url)||R.url.next(C.url),Fn(b.data,C.data)||R.data.next(C.data)}else R.snapshot=R._futureSnapshot,R.data.next(R._futureSnapshot.data)}function vi(R,b){const C=Fn(R.params,b.params)&&function bn(R,b){return fn(R,b)&&R.every((C,V)=>Fn(C.parameters,b[V].parameters))}(R.url,b.url);return C&&!(!R.parent!=!b.parent)&&(!R.parent||vi(R.parent,b.parent))}function ni(R,b,C){if(C&&R.shouldReuseRoute(b.value,C.value.snapshot)){const V=C.value;V._futureSnapshot=b.value;const W=function xa(R,b,C){return b.children.map(V=>{for(const W of C.children)if(R.shouldReuseRoute(V.value,W.value.snapshot))return ni(R,V,W);return ni(R,V)})}(R,b,C);return new Ln(V,W)}{if(R.shouldAttach(b.value)){const X=R.retrieve(b.value);if(null!==X){const Te=X.route;return Te.value._futureSnapshot=b.value,Te.children=b.children.map(Ue=>ni(R,Ue)),Te}}const V=function fi(R){return new kt(new P(R.url),new P(R.params),new P(R.queryParams),new P(R.fragment),new P(R.data),R.outlet,R.component,R)}(b.value),W=b.children.map(X=>ni(R,X));return new Ln(V,W)}}function Ji(R){return"object"==typeof R&&null!=R&&!R.outlets&&!R.segmentPath}function _o(R){return"object"==typeof R&&null!=R&&R.outlets}function xo(R,b,C,V,W){let X={};if(V&&z(V,(Ue,At)=>{X[At]=Array.isArray(Ue)?Ue.map(En=>`${En}`):`${Ue}`}),R===b)return new lt(C,X,W);const Te=zo(R,b,C);return new lt(Te,X,W)}function zo(R,b,C){const V={};return z(R.children,(W,X)=>{V[X]=W===b?C:zo(W,b,C)}),new yt(R.segments,V)}class Mo{constructor(b,C,V){if(this.isAbsolute=b,this.numberOfDoubleDots=C,this.commands=V,b&&V.length>0&&Ji(V[0]))throw new Error("Root segment cannot have matrix parameters");const W=V.find(_o);if(W&&W!==ue(V))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class ca{constructor(b,C,V){this.segmentGroup=b,this.processChildren=C,this.index=V}}function ro(R,b,C){if(R||(R=new yt([],{})),0===R.segments.length&&R.hasChildren())return es(R,b,C);const V=function $s(R,b,C){let V=0,W=b;const X={match:!1,pathIndex:0,commandIndex:0};for(;W<R.segments.length;){if(V>=C.length)return X;const Te=R.segments[W],Ue=C[V];if(_o(Ue))break;const At=`${Ue}`,En=V<C.length-1?C[V+1]:null;if(W>0&&void 0===At)break;if(At&&En&&"object"==typeof En&&void 0===En.outlets){if(!Ci(At,En,Te))return X;V+=2}else{if(!Ci(At,{},Te))return X;V++}W++}return{match:!0,pathIndex:W,commandIndex:V}}(R,b,C),W=C.slice(V.commandIndex);if(V.match&&V.pathIndex<R.segments.length){const X=new yt(R.segments.slice(0,V.pathIndex),{});return X.children[Ot]=new yt(R.segments.slice(V.pathIndex),R.children),es(X,0,W)}return V.match&&0===W.length?new yt(R.segments,{}):V.match&&!R.hasChildren()?ai(R,b,C):V.match?es(R,0,W):ai(R,b,C)}function es(R,b,C){if(0===C.length)return new yt(R.segments,{});{const V=function cr(R){return _o(R[0])?R[0].outlets:{[Ot]:R}}(C),W={};return z(V,(X,Te)=>{"string"==typeof X&&(X=[X]),null!==X&&(W[Te]=ro(R.children[Te],b,X))}),z(R.children,(X,Te)=>{void 0===V[Te]&&(W[Te]=X)}),new yt(R.segments,W)}}function ai(R,b,C){const V=R.segments.slice(0,b);let W=0;for(;W<C.length;){const X=C[W];if(_o(X)){const At=Ii(X.outlets);return new yt(V,At)}if(0===W&&Ji(C[0])){V.push(new Qt(R.segments[b].path,ei(C[0]))),W++;continue}const Te=_o(X)?X.outlets[Ot]:`${X}`,Ue=W<C.length-1?C[W+1]:null;Te&&Ue&&Ji(Ue)?(V.push(new Qt(Te,ei(Ue))),W+=2):(V.push(new Qt(Te,{})),W++)}return new yt(V,{})}function Ii(R){const b={};return z(R,(C,V)=>{"string"==typeof C&&(C=[C]),null!==C&&(b[V]=ai(new yt([],{}),0,C))}),b}function ei(R){const b={};return z(R,(C,V)=>b[V]=`${C}`),b}function Ci(R,b,C){return R==C.path&&Fn(b,C.parameters)}class cs{constructor(b,C,V,W){this.routeReuseStrategy=b,this.futureState=C,this.currState=V,this.forwardEvent=W}activate(b){const C=this.futureState._root,V=this.currState?this.currState._root:null;this.deactivateChildRoutes(C,V,b),oi(this.futureState.root),this.activateChildRoutes(C,V,b)}deactivateChildRoutes(b,C,V){const W=_r(C);b.children.forEach(X=>{const Te=X.value.outlet;this.deactivateRoutes(X,W[Te],V),delete W[Te]}),z(W,(X,Te)=>{this.deactivateRouteAndItsChildren(X,V)})}deactivateRoutes(b,C,V){const W=b.value,X=C?C.value:null;if(W===X)if(W.component){const Te=V.getContext(W.outlet);Te&&this.deactivateChildRoutes(b,C,Te.children)}else this.deactivateChildRoutes(b,C,V);else X&&this.deactivateRouteAndItsChildren(C,V)}deactivateRouteAndItsChildren(b,C){b.value.component&&this.routeReuseStrategy.shouldDetach(b.value.snapshot)?this.detachAndStoreRouteSubtree(b,C):this.deactivateRouteAndOutlet(b,C)}detachAndStoreRouteSubtree(b,C){const V=C.getContext(b.value.outlet),W=V&&b.value.component?V.children:C,X=_r(b);for(const Te of Object.keys(X))this.deactivateRouteAndItsChildren(X[Te],W);if(V&&V.outlet){const Te=V.outlet.detach(),Ue=V.children.onOutletDeactivated();this.routeReuseStrategy.store(b.value.snapshot,{componentRef:Te,route:b,contexts:Ue})}}deactivateRouteAndOutlet(b,C){const V=C.getContext(b.value.outlet),W=V&&b.value.component?V.children:C,X=_r(b);for(const Te of Object.keys(X))this.deactivateRouteAndItsChildren(X[Te],W);V&&V.outlet&&(V.outlet.deactivate(),V.children.onOutletDeactivated(),V.attachRef=null,V.resolver=null,V.route=null)}activateChildRoutes(b,C,V){const W=_r(C);b.children.forEach(X=>{this.activateRoutes(X,W[X.value.outlet],V),this.forwardEvent(new Hn(X.value.snapshot))}),b.children.length&&this.forwardEvent(new Vn(b.value.snapshot))}activateRoutes(b,C,V){const W=b.value,X=C?C.value:null;if(oi(W),W===X)if(W.component){const Te=V.getOrCreateContext(W.outlet);this.activateChildRoutes(b,C,Te.children)}else this.activateChildRoutes(b,C,V);else if(W.component){const Te=V.getOrCreateContext(W.outlet);if(this.routeReuseStrategy.shouldAttach(W.snapshot)){const Ue=this.routeReuseStrategy.retrieve(W.snapshot);this.routeReuseStrategy.store(W.snapshot,null),Te.children.onOutletReAttached(Ue.contexts),Te.attachRef=Ue.componentRef,Te.route=Ue.route.value,Te.outlet&&Te.outlet.attach(Ue.componentRef,Ue.route.value),oi(Ue.route.value),this.activateChildRoutes(b,null,Te.children)}else{const Ue=function bi(R){for(let b=R.parent;b;b=b.parent){const C=b.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig;if(C&&C.component)return null}return null}(W.snapshot),At=Ue?Ue.module.componentFactoryResolver:null;Te.attachRef=null,Te.route=W,Te.resolver=At,Te.outlet&&Te.outlet.activateWith(W,At),this.activateChildRoutes(b,null,Te.children)}}else this.activateChildRoutes(b,null,V)}}class Hs{constructor(b,C){this.routes=b,this.module=C}}function Ti(R){return"function"==typeof R}function Di(R){return R instanceof lt}const ds=Symbol("INITIAL_VALUE");function Rs(){return(0,$t.w)(R=>function ot(...R){const b=(0,He.yG)(R),C=(0,He.jO)(R),{args:V,keys:W}=(0,we.D)(R);if(0===V.length)return(0,Se.D)([],b);const X=new Z.y(function at(R,b,C=Pe.y){return V=>{dt(b,()=>{const{length:W}=R,X=new Array(W);let Te=W,Ue=W;for(let At=0;At<W;At++)dt(b,()=>{const En=(0,Se.D)(R[At],b);let Tn=!1;En.subscribe((0,ve.x)(V,jn=>{X[At]=jn,Tn||(Tn=!0,Ue--),Ue||V.next(C(X.slice()))},()=>{--Te||V.complete()}))},V)},V)}}(V,b,W?Te=>(0,ae.n)(W,Te):Pe.y));return C?X.pipe((0,he.Z)(C)):X}(R.map(b=>b.pipe((0,an.q)(1),(0,Rn.O)(ds)))).pipe((0,sn.R)((b,C)=>{let V=!1;return C.reduce((W,X,Te)=>W!==ds?W:(X===ds&&(V=!0),V||!1!==X&&Te!==C.length-1&&!Di(X)?W:X),b)},ds),(0,Qe.h)(b=>b!==ds),(0,Ce.U)(b=>Di(b)?b:!0===b),(0,an.q)(1)))}class vo{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new xr,this.attachRef=null}}class xr{constructor(){this.contexts=new Map}onChildOutletCreated(b,C){const V=this.getOrCreateContext(b);V.outlet=C,this.contexts.set(b,V)}onChildOutletDestroyed(b){const C=this.getContext(b);C&&(C.outlet=null,C.attachRef=null)}onOutletDeactivated(){const b=this.contexts;return this.contexts=new Map,b}onOutletReAttached(b){this.contexts=b}getOrCreateContext(b){let C=this.getContext(b);return C||(C=new vo,this.contexts.set(b,C)),C}getContext(b){return this.contexts.get(b)||null}}let Ko=(()=>{class R{constructor(C,V,W,X,Te){this.parentContexts=C,this.location=V,this.resolver=W,this.changeDetector=Te,this.activated=null,this._activatedRoute=null,this.activateEvents=new f.vpe,this.deactivateEvents=new f.vpe,this.attachEvents=new f.vpe,this.detachEvents=new f.vpe,this.name=X||Ot,C.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const C=this.parentContexts.getContext(this.name);C&&C.route&&(C.attachRef?this.attach(C.attachRef,C.route):this.activateWith(C.route,C.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const C=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(C.instance),C}attach(C,V){this.activated=C,this._activatedRoute=V,this.location.insert(C.hostView),this.attachEvents.emit(C.instance)}deactivate(){if(this.activated){const C=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(C)}}activateWith(C,V){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=C;const Te=(V=V||this.resolver).resolveComponentFactory(C._futureSnapshot.routeConfig.component),Ue=this.parentContexts.getOrCreateContext(this.name).children,At=new Po(C,Ue,this.location.injector);this.activated=this.location.createComponent(Te,this.location.length,At),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return R.\u0275fac=function(C){return new(C||R)(f.Y36(xr),f.Y36(f.s_b),f.Y36(f._Vd),f.$8M("name"),f.Y36(f.sBO))},R.\u0275dir=f.lG2({type:R,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"]}),R})();class Po{constructor(b,C,V){this.route=b,this.childContexts=C,this.parent=V}get(b,C){return b===kt?this.route:b===xr?this.childContexts:this.parent.get(b,C)}}let Zi=(()=>{class R{}return R.\u0275fac=function(C){return new(C||R)},R.\u0275cmp=f.Xpm({type:R,selectors:[["ng-component"]],decls:1,vars:0,template:function(C,V){1&C&&f._UZ(0,"router-outlet")},directives:[Ko],encapsulation:2}),R})();function Ws(R,b=""){for(let C=0;C<R.length;C++){const V=R[C];hs(V,Ir(b,V))}}function hs(R,b){R.children&&Ws(R.children,b)}function Ir(R,b){return b?R||b.path?R&&!b.path?`${R}/`:!R&&b.path?b.path:`${R}/${b.path}`:"":R}function B(R){const b=R.children&&R.children.map(B),C=b?Object.assign(Object.assign({},R),{children:b}):Object.assign({},R);return!C.component&&(b||C.loadChildren)&&C.outlet&&C.outlet!==Ot&&(C.component=Zi),C}function J(R){return R.outlet||Ot}function j(R,b){const C=R.filter(V=>J(V)===b);return C.push(...R.filter(V=>J(V)!==b)),C}const ie={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function je(R,b,C){var V;if(""===b.path)return"full"===b.pathMatch&&(R.hasChildren()||C.length>0)?Object.assign({},ie):{matched:!0,consumedSegments:[],remainingSegments:C,parameters:{},positionalParamSegments:{}};const X=(b.matcher||Ar)(C,R,b);if(!X)return Object.assign({},ie);const Te={};z(X.posParams,(At,En)=>{Te[En]=At.path});const Ue=X.consumed.length>0?Object.assign(Object.assign({},Te),X.consumed[X.consumed.length-1].parameters):Te;return{matched:!0,consumedSegments:X.consumed,remainingSegments:C.slice(X.consumed.length),parameters:Ue,positionalParamSegments:null!==(V=X.posParams)&&void 0!==V?V:{}}}function gt(R,b,C,V,W="corrected"){if(C.length>0&&function kr(R,b,C){return C.some(V=>lr(R,b,V)&&J(V)!==Ot)}(R,C,V)){const Te=new yt(b,function Un(R,b,C,V){const W={};W[Ot]=V,V._sourceSegment=R,V._segmentIndexShift=b.length;for(const X of C)if(""===X.path&&J(X)!==Ot){const Te=new yt([],{});Te._sourceSegment=R,Te._segmentIndexShift=b.length,W[J(X)]=Te}return W}(R,b,V,new yt(C,R.children)));return Te._sourceSegment=R,Te._segmentIndexShift=b.length,{segmentGroup:Te,slicedSegments:[]}}if(0===C.length&&function Sr(R,b,C){return C.some(V=>lr(R,b,V))}(R,C,V)){const Te=new yt(R.segments,function Vt(R,b,C,V,W,X){const Te={};for(const Ue of V)if(lr(R,C,Ue)&&!W[J(Ue)]){const At=new yt([],{});At._sourceSegment=R,At._segmentIndexShift="legacy"===X?R.segments.length:b.length,Te[J(Ue)]=At}return Object.assign(Object.assign({},W),Te)}(R,b,C,V,R.children,W));return Te._sourceSegment=R,Te._segmentIndexShift=b.length,{segmentGroup:Te,slicedSegments:C}}const X=new yt(R.segments,R.children);return X._sourceSegment=R,X._segmentIndexShift=b.length,{segmentGroup:X,slicedSegments:C}}function lr(R,b,C){return(!(R.hasChildren()||b.length>0)||"full"!==C.pathMatch)&&""===C.path}function Cr(R,b,C,V){return!!(J(R)===V||V!==Ot&&lr(b,C,R))&&("**"===R.path||je(b,R,C).matched)}function ti(R,b,C){return 0===b.length&&!R.children[C]}class Ur{constructor(b){this.segmentGroup=b||null}}class zr{constructor(b){this.urlTree=b}}function fs(R){return be(new Ur(R))}function Hi(R){return be(new zr(R))}class so{constructor(b,C,V,W,X){this.configLoader=C,this.urlSerializer=V,this.urlTree=W,this.config=X,this.allowRedirects=!0,this.ngModule=b.get(f.h0i)}apply(){const b=gt(this.urlTree.root,[],[],this.config).segmentGroup,C=new yt(b.segments,b.children);return this.expandSegmentGroup(this.ngModule,this.config,C,Ot).pipe((0,Ce.U)(X=>this.createUrlTree(H(X),this.urlTree.queryParams,this.urlTree.fragment))).pipe(it(X=>{if(X instanceof zr)return this.allowRedirects=!1,this.match(X.urlTree);throw X instanceof Ur?this.noMatchError(X):X}))}match(b){return this.expandSegmentGroup(this.ngModule,this.config,b.root,Ot).pipe((0,Ce.U)(W=>this.createUrlTree(H(W),b.queryParams,b.fragment))).pipe(it(W=>{throw W instanceof Ur?this.noMatchError(W):W}))}noMatchError(b){return new Error(`Cannot match any routes. URL Segment: '${b.segmentGroup}'`)}createUrlTree(b,C,V){const W=b.segments.length>0?new yt([],{[Ot]:b}):b;return new lt(W,C,V)}expandSegmentGroup(b,C,V,W){return 0===V.segments.length&&V.hasChildren()?this.expandChildren(b,C,V).pipe((0,Ce.U)(X=>new yt([],X))):this.expandSegment(b,V,C,V.segments,W,!0)}expandChildren(b,C,V){const W=[];for(const X of Object.keys(V.children))"primary"===X?W.unshift(X):W.push(X);return(0,Se.D)(W).pipe(We(X=>{const Te=V.children[X],Ue=j(C,X);return this.expandSegmentGroup(b,Ue,Te,X).pipe((0,Ce.U)(At=>({segment:At,outlet:X})))}),(0,sn.R)((X,Te)=>(X[Te.outlet]=Te.segment,X),{}),function ut(R,b){const C=arguments.length>=2;return V=>V.pipe(R?(0,Qe.h)((W,X)=>R(W,X,V)):Pe.y,Ne(1),C?(0,Wt.d)(b):(0,dn.T)(()=>new fe.K))}())}expandSegment(b,C,V,W,X,Te){return(0,Se.D)(V).pipe(We(Ue=>this.expandSegmentAgainstRoute(b,C,V,Ue,W,X,Te).pipe(it(En=>{if(En instanceof Ur)return(0,ke.of)(null);throw En}))),(0,un.P)(Ue=>!!Ue),it((Ue,At)=>{if(Ue instanceof fe.K||"EmptyError"===Ue.name)return ti(C,W,X)?(0,ke.of)(new yt([],{})):fs(C);throw Ue}))}expandSegmentAgainstRoute(b,C,V,W,X,Te,Ue){return Cr(W,C,X,Te)?void 0===W.redirectTo?this.matchSegmentAgainstRoute(b,C,W,X,Te):Ue&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(b,C,V,W,X,Te):fs(C):fs(C)}expandSegmentAgainstRouteUsingRedirect(b,C,V,W,X,Te){return"**"===W.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(b,V,W,Te):this.expandRegularSegmentAgainstRouteUsingRedirect(b,C,V,W,X,Te)}expandWildCardWithParamsAgainstRouteUsingRedirect(b,C,V,W){const X=this.applyRedirectCommands([],V.redirectTo,{});return V.redirectTo.startsWith("/")?Hi(X):this.lineralizeSegments(V,X).pipe((0,xe.z)(Te=>{const Ue=new yt(Te,{});return this.expandSegment(b,Ue,C,Te,W,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(b,C,V,W,X,Te){const{matched:Ue,consumedSegments:At,remainingSegments:En,positionalParamSegments:Tn}=je(C,W,X);if(!Ue)return fs(C);const jn=this.applyRedirectCommands(At,W.redirectTo,Tn);return W.redirectTo.startsWith("/")?Hi(jn):this.lineralizeSegments(W,jn).pipe((0,xe.z)(rr=>this.expandSegment(b,C,V,rr.concat(En),Te,!1)))}matchSegmentAgainstRoute(b,C,V,W,X){if("**"===V.path)return V.loadChildren?(V._loadedConfig?(0,ke.of)(V._loadedConfig):this.configLoader.load(b.injector,V)).pipe((0,Ce.U)(jn=>(V._loadedConfig=jn,new yt(W,{})))):(0,ke.of)(new yt(W,{}));const{matched:Te,consumedSegments:Ue,remainingSegments:At}=je(C,V,W);return Te?this.getChildConfig(b,V,W).pipe((0,xe.z)(Tn=>{const jn=Tn.module,rr=Tn.routes,{segmentGroup:Dr,slicedSegments:Os}=gt(C,Ue,At,rr),Kr=new yt(Dr.segments,Dr.children);if(0===Os.length&&Kr.hasChildren())return this.expandChildren(jn,rr,Kr).pipe((0,Ce.U)(ks=>new yt(Ue,ks)));if(0===rr.length&&0===Os.length)return(0,ke.of)(new yt(Ue,{}));const Ua=J(V)===X;return this.expandSegment(jn,Kr,rr,Os,Ua?Ot:X,!0).pipe((0,Ce.U)(Fr=>new yt(Ue.concat(Fr.segments),Fr.children)))})):fs(C)}getChildConfig(b,C,V){return C.children?(0,ke.of)(new Hs(C.children,b)):C.loadChildren?void 0!==C._loadedConfig?(0,ke.of)(C._loadedConfig):this.runCanLoadGuards(b.injector,C,V).pipe((0,xe.z)(W=>W?this.configLoader.load(b.injector,C).pipe((0,Ce.U)(X=>(C._loadedConfig=X,X))):function Ui(R){return be(Tr(`Cannot load children because the guard of the route "path: '${R.path}'" returned false`))}(C))):(0,ke.of)(new Hs([],b))}runCanLoadGuards(b,C,V){const W=C.canLoad;if(!W||0===W.length)return(0,ke.of)(!0);const X=W.map(Te=>{const Ue=b.get(Te);let At;if(function Lr(R){return R&&Ti(R.canLoad)}(Ue))At=Ue.canLoad(C,V);else{if(!Ti(Ue))throw new Error("Invalid CanLoad guard");At=Ue(C,V)}return me(At)});return(0,ke.of)(X).pipe(Rs(),(0,St.b)(Te=>{if(!Di(Te))return;const Ue=Tr(`Redirecting to "${this.urlSerializer.serialize(Te)}"`);throw Ue.url=Te,Ue}),(0,Ce.U)(Te=>!0===Te))}lineralizeSegments(b,C){let V=[],W=C.root;for(;;){if(V=V.concat(W.segments),0===W.numberOfChildren)return(0,ke.of)(V);if(W.numberOfChildren>1||!W.children[Ot])return be(new Error(`Only absolute redirects can have named outlets. redirectTo: '${b.redirectTo}'`));W=W.children[Ot]}}applyRedirectCommands(b,C,V){return this.applyRedirectCreatreUrlTree(C,this.urlSerializer.parse(C),b,V)}applyRedirectCreatreUrlTree(b,C,V,W){const X=this.createSegmentGroup(b,C.root,V,W);return new lt(X,this.createQueryParams(C.queryParams,this.urlTree.queryParams),C.fragment)}createQueryParams(b,C){const V={};return z(b,(W,X)=>{if("string"==typeof W&&W.startsWith(":")){const Ue=W.substring(1);V[X]=C[Ue]}else V[X]=W}),V}createSegmentGroup(b,C,V,W){const X=this.createSegments(b,C.segments,V,W);let Te={};return z(C.children,(Ue,At)=>{Te[At]=this.createSegmentGroup(b,Ue,V,W)}),new yt(X,Te)}createSegments(b,C,V,W){return C.map(X=>X.path.startsWith(":")?this.findPosParam(b,X,W):this.findOrReturn(X,V))}findPosParam(b,C,V){const W=V[C.path.substring(1)];if(!W)throw new Error(`Cannot redirect to '${b}'. Cannot find '${C.path}'.`);return W}findOrReturn(b,C){let V=0;for(const W of C){if(W.path===b.path)return C.splice(V),W;V++}return b}}function H(R){const b={};for(const V of Object.keys(R.children)){const X=H(R.children[V]);(X.segments.length>0||X.hasChildren())&&(b[V]=X)}return function qo(R){if(1===R.numberOfChildren&&R.children[Ot]){const b=R.children[Ot];return new yt(R.segments.concat(b.segments),b.children)}return R}(new yt(R.segments,b))}class F{constructor(b){this.path=b,this.route=this.path[this.path.length-1]}}class q{constructor(b,C){this.component=b,this.route=C}}function tt(R,b,C){const V=R._root;return Ai(V,b?b._root:null,C,[V.value])}function tr(R,b,C){const V=function ns(R){if(!R)return null;for(let b=R.parent;b;b=b.parent){const C=b.routeConfig;if(C&&C._loadedConfig)return C._loadedConfig}return null}(b);return(V?V.module.injector:C).get(R)}function Ai(R,b,C,V,W={canDeactivateChecks:[],canActivateChecks:[]}){const X=_r(b);return R.children.forEach(Te=>{(function rs(R,b,C,V,W={canDeactivateChecks:[],canActivateChecks:[]}){const X=R.value,Te=b?b.value:null,Ue=C?C.getContext(R.value.outlet):null;if(Te&&X.routeConfig===Te.routeConfig){const At=function oo(R,b,C){if("function"==typeof C)return C(R,b);switch(C){case"pathParamsChange":return!fn(R.url,b.url);case"pathParamsOrQueryParamsChange":return!fn(R.url,b.url)||!Fn(R.queryParams,b.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!vi(R,b)||!Fn(R.queryParams,b.queryParams);default:return!vi(R,b)}}(Te,X,X.routeConfig.runGuardsAndResolvers);At?W.canActivateChecks.push(new F(V)):(X.data=Te.data,X._resolvedData=Te._resolvedData),Ai(R,b,X.component?Ue?Ue.children:null:C,V,W),At&&Ue&&Ue.outlet&&Ue.outlet.isActivated&&W.canDeactivateChecks.push(new q(Ue.outlet.component,Te))}else Te&&vs(b,Ue,W),W.canActivateChecks.push(new F(V)),Ai(R,null,X.component?Ue?Ue.children:null:C,V,W)})(Te,X[Te.value.outlet],C,V.concat([Te.value]),W),delete X[Te.value.outlet]}),z(X,(Te,Ue)=>vs(Te,C.getContext(Ue),W)),W}function vs(R,b,C){const V=_r(R),W=R.value;z(V,(X,Te)=>{vs(X,W.component?b?b.children.getContext(Te):null:b,C)}),C.canDeactivateChecks.push(new q(W.component&&b&&b.outlet&&b.outlet.isActivated?b.outlet.component:null,W))}class ao{}function Du(R){return new Z.y(b=>b.error(R))}class Yo{constructor(b,C,V,W,X,Te){this.rootComponentType=b,this.config=C,this.urlTree=V,this.url=W,this.paramsInheritanceStrategy=X,this.relativeLinkResolution=Te}recognize(){const b=gt(this.urlTree.root,[],[],this.config.filter(Te=>void 0===Te.redirectTo),this.relativeLinkResolution).segmentGroup,C=this.processSegmentGroup(this.config,b,Ot);if(null===C)return null;const V=new wn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Ot,this.rootComponentType,null,this.urlTree.root,-1,{}),W=new Ln(V,C),X=new vr(this.url,W);return this.inheritParamsAndData(X._root),X}inheritParamsAndData(b){const C=b.value,V=zt(C,this.paramsInheritanceStrategy);C.params=Object.freeze(V.params),C.data=Object.freeze(V.data),b.children.forEach(W=>this.inheritParamsAndData(W))}processSegmentGroup(b,C,V){return 0===C.segments.length&&C.hasChildren()?this.processChildren(b,C):this.processSegment(b,C,C.segments,V)}processChildren(b,C){const V=[];for(const X of Object.keys(C.children)){const Te=C.children[X],Ue=j(b,X),At=this.processSegmentGroup(Ue,Te,X);if(null===At)return null;V.push(...At)}const W=Pa(V);return function Si(R){R.sort((b,C)=>b.value.outlet===Ot?-1:C.value.outlet===Ot?1:b.value.outlet.localeCompare(C.value.outlet))}(W),W}processSegment(b,C,V,W){for(const X of b){const Te=this.processSegmentAgainstRoute(X,C,V,W);if(null!==Te)return Te}return ti(C,V,W)?[]:null}processSegmentAgainstRoute(b,C,V,W){if(b.redirectTo||!Cr(b,C,V,W))return null;let X,Te=[],Ue=[];if("**"===b.path){const Dr=V.length>0?ue(V).parameters:{};X=new wn(V,Dr,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,is(b),J(b),b.component,b,Jo(C),Gs(C)+V.length,Yi(b))}else{const Dr=je(C,b,V);if(!Dr.matched)return null;Te=Dr.consumedSegments,Ue=Dr.remainingSegments,X=new wn(Te,Dr.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,is(b),J(b),b.component,b,Jo(C),Gs(C)+Te.length,Yi(b))}const At=function ui(R){return R.children?R.children:R.loadChildren?R._loadedConfig.routes:[]}(b),{segmentGroup:En,slicedSegments:Tn}=gt(C,Te,Ue,At.filter(Dr=>void 0===Dr.redirectTo),this.relativeLinkResolution);if(0===Tn.length&&En.hasChildren()){const Dr=this.processChildren(At,En);return null===Dr?null:[new Ln(X,Dr)]}if(0===At.length&&0===Tn.length)return[new Ln(X,[])];const jn=J(b)===W,rr=this.processSegment(At,En,Tn,jn?Ot:W);return null===rr?null:[new Ln(X,rr)]}}function Oo(R){const b=R.value.routeConfig;return b&&""===b.path&&void 0===b.redirectTo}function Pa(R){const b=[],C=new Set;for(const V of R){if(!Oo(V)){b.push(V);continue}const W=b.find(X=>V.value.routeConfig===X.value.routeConfig);void 0!==W?(W.children.push(...V.children),C.add(W)):b.push(V)}for(const V of C){const W=Pa(V.children);b.push(new Ln(V.value,W))}return b.filter(V=>!C.has(V))}function Jo(R){let b=R;for(;b._sourceSegment;)b=b._sourceSegment;return b}function Gs(R){let b=R,C=b._segmentIndexShift?b._segmentIndexShift:0;for(;b._sourceSegment;)b=b._sourceSegment,C+=b._segmentIndexShift?b._segmentIndexShift:0;return C-1}function is(R){return R.data||{}}function Yi(R){return R.resolve||{}}function Xo(R){return[...Object.keys(R),...Object.getOwnPropertySymbols(R)]}function xi(R){return(0,$t.w)(b=>{const C=R(b);return C?(0,Se.D)(C).pipe((0,Ce.U)(()=>b)):(0,ke.of)(b)})}class Na extends class li{shouldDetach(b){return!1}store(b,C){}shouldAttach(b){return!1}retrieve(b){return null}shouldReuseRoute(b,C){return b.routeConfig===C.routeConfig}}{}const Mi=new f.OlP("ROUTES");class Oa{constructor(b,C,V,W){this.injector=b,this.compiler=C,this.onLoadStartListener=V,this.onLoadEndListener=W}load(b,C){if(C._loader$)return C._loader$;this.onLoadStartListener&&this.onLoadStartListener(C);const W=this.loadModuleFactory(C.loadChildren).pipe((0,Ce.U)(X=>{this.onLoadEndListener&&this.onLoadEndListener(C);const Te=X.create(b);return new Hs(Fe(Te.injector.get(Mi,void 0,f.XFs.Self|f.XFs.Optional)).map(B),Te)}),it(X=>{throw C._loader$=void 0,X}));return C._loader$=new ht(W,()=>new T.x).pipe(rt()),C._loader$}loadModuleFactory(b){return me(b()).pipe((0,xe.z)(C=>C instanceof f.YKP?(0,ke.of)(C):(0,Se.D)(this.compiler.compileModuleAsync(C))))}}class Nr{shouldProcessUrl(b){return!0}extract(b){return b}merge(b,C){return b}}function Wi(R){throw R}function uo(R,b,C){return b.parse("/")}function Fo(R,b){return(0,ke.of)(null)}const uu={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},lu={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let gi=(()=>{class R{constructor(C,V,W,X,Te,Ue,At){this.rootComponentType=C,this.urlSerializer=V,this.rootContexts=W,this.location=X,this.config=At,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.navigationId=0,this.currentPageId=0,this.isNgZoneEnabled=!1,this.events=new T.x,this.errorHandler=Wi,this.malformedUriErrorHandler=uo,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Fo,afterPreactivation:Fo},this.urlHandlingStrategy=new Nr,this.routeReuseStrategy=new Na,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.canceledNavigationResolution="replace",this.ngModule=Te.get(f.h0i),this.console=Te.get(f.c2e);const jn=Te.get(f.R0b);this.isNgZoneEnabled=jn instanceof f.R0b&&f.R0b.isInAngularZone(),this.resetConfig(At),this.currentUrlTree=function de(){return new lt(new yt([],{}),{},null)}(),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Oa(Te,Ue,rr=>this.triggerEvent(new Rt(rr)),rr=>this.triggerEvent(new pn(rr))),this.routerState=Le(this.currentUrlTree,this.rootComponentType),this.transitions=new P({id:0,targetPageId:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}get browserPageId(){var C;return null===(C=this.location.getState())||void 0===C?void 0:C.\u0275routerPageId}setupNavigations(C){const V=this.events;return C.pipe((0,Qe.h)(W=>0!==W.id),(0,Ce.U)(W=>Object.assign(Object.assign({},W),{extractedUrl:this.urlHandlingStrategy.extract(W.rawUrl)})),(0,$t.w)(W=>{let X=!1,Te=!1;return(0,ke.of)(W).pipe((0,St.b)(Ue=>{this.currentNavigation={id:Ue.id,initialUrl:Ue.currentRawUrl,extractedUrl:Ue.extractedUrl,trigger:Ue.source,extras:Ue.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),(0,$t.w)(Ue=>{const At=this.browserUrlTree.toString(),En=!this.navigated||Ue.extractedUrl.toString()!==At||At!==this.currentUrlTree.toString();if(("reload"===this.onSameUrlNavigation||En)&&this.urlHandlingStrategy.shouldProcessUrl(Ue.rawUrl))return Ri(Ue.source)&&(this.browserUrlTree=Ue.extractedUrl),(0,ke.of)(Ue).pipe((0,$t.w)(jn=>{const rr=this.transitions.getValue();return V.next(new Cn(jn.id,this.serializeUrl(jn.extractedUrl),jn.source,jn.restoredState)),rr!==this.transitions.getValue()?Ke.E:Promise.resolve(jn)}),function U(R,b,C,V){return(0,$t.w)(W=>function Ps(R,b,C,V,W){return new so(R,b,C,V,W).apply()}(R,b,C,W.extractedUrl,V).pipe((0,Ce.U)(X=>Object.assign(Object.assign({},W),{urlAfterRedirects:X}))))}(this.ngModule.injector,this.configLoader,this.urlSerializer,this.config),(0,St.b)(jn=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:jn.urlAfterRedirects})}),function zs(R,b,C,V,W){return(0,xe.z)(X=>function Zo(R,b,C,V,W="emptyOnly",X="legacy"){try{const Te=new Yo(R,b,C,V,W,X).recognize();return null===Te?Du(new ao):(0,ke.of)(Te)}catch(Te){return Du(Te)}}(R,b,X.urlAfterRedirects,C(X.urlAfterRedirects),V,W).pipe((0,Ce.U)(Te=>Object.assign(Object.assign({},X),{targetSnapshot:Te}))))}(this.rootComponentType,this.config,jn=>this.serializeUrl(jn),this.paramsInheritanceStrategy,this.relativeLinkResolution),(0,St.b)(jn=>{if("eager"===this.urlUpdateStrategy){if(!jn.extras.skipLocationChange){const Dr=this.urlHandlingStrategy.merge(jn.urlAfterRedirects,jn.rawUrl);this.setBrowserUrl(Dr,jn)}this.browserUrlTree=jn.urlAfterRedirects}const rr=new xn(jn.id,this.serializeUrl(jn.extractedUrl),this.serializeUrl(jn.urlAfterRedirects),jn.targetSnapshot);V.next(rr)}));if(En&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:rr,extractedUrl:Dr,source:Os,restoredState:Kr,extras:Ua}=Ue,ms=new Cn(rr,this.serializeUrl(Dr),Os,Kr);V.next(ms);const Fr=Le(Dr,this.rootComponentType).snapshot;return(0,ke.of)(Object.assign(Object.assign({},Ue),{targetSnapshot:Fr,urlAfterRedirects:Dr,extras:Object.assign(Object.assign({},Ua),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=Ue.rawUrl,Ue.resolve(null),Ke.E}),xi(Ue=>{const{targetSnapshot:At,id:En,extractedUrl:Tn,rawUrl:jn,extras:{skipLocationChange:rr,replaceUrl:Dr}}=Ue;return this.hooks.beforePreactivation(At,{navigationId:En,appliedUrlTree:Tn,rawUrlTree:jn,skipLocationChange:!!rr,replaceUrl:!!Dr})}),(0,St.b)(Ue=>{const At=new sr(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot);this.triggerEvent(At)}),(0,Ce.U)(Ue=>Object.assign(Object.assign({},Ue),{guards:tt(Ue.targetSnapshot,Ue.currentSnapshot,this.rootContexts)})),function Yu(R,b){return(0,xe.z)(C=>{const{targetSnapshot:V,currentSnapshot:W,guards:{canActivateChecks:X,canDeactivateChecks:Te}}=C;return 0===Te.length&&0===X.length?(0,ke.of)(Object.assign(Object.assign({},C),{guardsResult:!0})):function Ma(R,b,C,V){return(0,Se.D)(R).pipe((0,xe.z)(W=>function No(R,b,C,V,W){const X=b&&b.routeConfig?b.routeConfig.canDeactivate:null;if(!X||0===X.length)return(0,ke.of)(!0);const Te=X.map(Ue=>{const At=tr(Ue,b,W);let En;if(function Gr(R){return R&&Ti(R.canDeactivate)}(At))En=me(At.canDeactivate(R,b,C,V));else{if(!Ti(At))throw new Error("Invalid CanDeactivate guard");En=me(At(R,b,C,V))}return En.pipe((0,un.P)())});return(0,ke.of)(Te).pipe(Rs())}(W.component,W.route,C,b,V)),(0,un.P)(W=>!0!==W,!0))}(Te,V,W,R).pipe((0,xe.z)(Ue=>Ue&&function yo(R){return"boolean"==typeof R}(Ue)?function Ra(R,b,C,V){return(0,Se.D)(b).pipe(We(W=>(0,Lt.z)(function pi(R,b){return null!==R&&b&&b(new Nn(R)),(0,ke.of)(!0)}(W.route.parent,V),function Es(R,b){return null!==R&&b&&b(new Dn(R)),(0,ke.of)(!0)}(W.route,V),function da(R,b,C){const V=b[b.length-1],X=b.slice(0,b.length-1).reverse().map(Te=>function Sn(R){const b=R.routeConfig?R.routeConfig.canActivateChild:null;return b&&0!==b.length?{node:R,guards:b}:null}(Te)).filter(Te=>null!==Te).map(Te=>Mt(()=>{const Ue=Te.guards.map(At=>{const En=tr(At,Te.node,C);let Tn;if(function io(R){return R&&Ti(R.canActivateChild)}(En))Tn=me(En.canActivateChild(V,R));else{if(!Ti(En))throw new Error("Invalid CanActivateChild guard");Tn=me(En(V,R))}return Tn.pipe((0,un.P)())});return(0,ke.of)(Ue).pipe(Rs())}));return(0,ke.of)(X).pipe(Rs())}(R,W.path,C),function Eo(R,b,C){const V=b.routeConfig?b.routeConfig.canActivate:null;if(!V||0===V.length)return(0,ke.of)(!0);const W=V.map(X=>Mt(()=>{const Te=tr(X,b,C);let Ue;if(function ts(R){return R&&Ti(R.canActivate)}(Te))Ue=me(Te.canActivate(b,R));else{if(!Ti(Te))throw new Error("Invalid CanActivate guard");Ue=me(Te(b,R))}return Ue.pipe((0,un.P)())}));return(0,ke.of)(W).pipe(Rs())}(R,W.route,C))),(0,un.P)(W=>!0!==W,!0))}(V,X,R,b):(0,ke.of)(Ue)),(0,Ce.U)(Ue=>Object.assign(Object.assign({},C),{guardsResult:Ue})))})}(this.ngModule.injector,Ue=>this.triggerEvent(Ue)),(0,St.b)(Ue=>{if(Di(Ue.guardsResult)){const En=Tr(`Redirecting to "${this.serializeUrl(Ue.guardsResult)}"`);throw En.url=Ue.guardsResult,En}const At=new wt(Ue.id,this.serializeUrl(Ue.extractedUrl),this.serializeUrl(Ue.urlAfterRedirects),Ue.targetSnapshot,!!Ue.guardsResult);this.triggerEvent(At)}),(0,Qe.h)(Ue=>!!Ue.guardsResult||(this.restoreHistory(Ue),this.cancelNavigationTransition(Ue,""),!1)),xi(Ue=>{if(Ue.guards.canActivateChecks.length)return(0,ke.of)(Ue).pipe((0,St.b)(At=>{const En=new Xe(At.id,this.serializeUrl(At.extractedUrl),this.serializeUrl(At.urlAfterRedirects),At.targetSnapshot);this.triggerEvent(En)}),(0,$t.w)(At=>{let En=!1;return(0,ke.of)(At).pipe(function wo(R,b){return(0,xe.z)(C=>{const{targetSnapshot:V,guards:{canActivateChecks:W}}=C;if(!W.length)return(0,ke.of)(C);let X=0;return(0,Se.D)(W).pipe(We(Te=>function Qu(R,b,C,V){return function ko(R,b,C,V){const W=Xo(R);if(0===W.length)return(0,ke.of)({});const X={};return(0,Se.D)(W).pipe((0,xe.z)(Te=>function Au(R,b,C,V){const W=tr(R,b,V);return me(W.resolve?W.resolve(b,C):W(b,C))}(R[Te],b,C,V).pipe((0,St.b)(Ue=>{X[Te]=Ue}))),Ne(1),(0,xe.z)(()=>Xo(X).length===W.length?(0,ke.of)(X):Ke.E))}(R._resolve,R,b,V).pipe((0,Ce.U)(X=>(R._resolvedData=X,R.data=Object.assign(Object.assign({},R.data),zt(R,C).resolve),null)))}(Te.route,V,R,b)),(0,St.b)(()=>X++),Ne(1),(0,xe.z)(Te=>X===W.length?(0,ke.of)(C):Ke.E))})}(this.paramsInheritanceStrategy,this.ngModule.injector),(0,St.b)({next:()=>En=!0,complete:()=>{En||(this.restoreHistory(At),this.cancelNavigationTransition(At,"At least one route resolver didn't emit any value."))}}))}),(0,St.b)(At=>{const En=new It(At.id,this.serializeUrl(At.extractedUrl),this.serializeUrl(At.urlAfterRedirects),At.targetSnapshot);this.triggerEvent(En)}))}),xi(Ue=>{const{targetSnapshot:At,id:En,extractedUrl:Tn,rawUrl:jn,extras:{skipLocationChange:rr,replaceUrl:Dr}}=Ue;return this.hooks.afterPreactivation(At,{navigationId:En,appliedUrlTree:Tn,rawUrlTree:jn,skipLocationChange:!!rr,replaceUrl:!!Dr})}),(0,Ce.U)(Ue=>{const At=function ls(R,b,C){const V=ni(R,b._root,C?C._root:void 0);return new Oe(V,b)}(this.routeReuseStrategy,Ue.targetSnapshot,Ue.currentRouterState);return Object.assign(Object.assign({},Ue),{targetRouterState:At})}),(0,St.b)(Ue=>{this.currentUrlTree=Ue.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(Ue.urlAfterRedirects,Ue.rawUrl),this.routerState=Ue.targetRouterState,"deferred"===this.urlUpdateStrategy&&(Ue.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,Ue),this.browserUrlTree=Ue.urlAfterRedirects)}),((R,b,C)=>(0,Ce.U)(V=>(new cs(b,V.targetRouterState,V.currentRouterState,C).activate(R),V)))(this.rootContexts,this.routeReuseStrategy,Ue=>this.triggerEvent(Ue)),(0,St.b)({next(){X=!0},complete(){X=!0}}),function nt(R){return(0,st.e)((b,C)=>{try{b.subscribe(C)}finally{C.add(R)}})}(()=>{var Ue;X||Te||this.cancelNavigationTransition(W,`Navigation ID ${W.id} is not equal to the current navigation id ${this.navigationId}`),(null===(Ue=this.currentNavigation)||void 0===Ue?void 0:Ue.id)===W.id&&(this.currentNavigation=null)}),it(Ue=>{if(Te=!0,function Bn(R){return R&&R[hr]}(Ue)){const At=Di(Ue.url);At||(this.navigated=!0,this.restoreHistory(W,!0));const En=new Qn(W.id,this.serializeUrl(W.extractedUrl),Ue.message);V.next(En),At?setTimeout(()=>{const Tn=this.urlHandlingStrategy.merge(Ue.url,this.rawUrlTree),jn={skipLocationChange:W.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy||Ri(W.source)};this.scheduleNavigation(Tn,"imperative",null,jn,{resolve:W.resolve,reject:W.reject,promise:W.promise})},0):W.resolve(!1)}else{this.restoreHistory(W,!0);const At=new zn(W.id,this.serializeUrl(W.extractedUrl),Ue);V.next(At);try{W.resolve(this.errorHandler(Ue))}catch(En){W.reject(En)}}return Ke.E}))}))}resetRootComponentType(C){this.rootComponentType=C,this.routerState.root.component=this.rootComponentType}setTransition(C){this.transitions.next(Object.assign(Object.assign({},this.transitions.value),C))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(C=>{const V="popstate"===C.type?"popstate":"hashchange";"popstate"===V&&setTimeout(()=>{var W;const X={replaceUrl:!0},Te=(null===(W=C.state)||void 0===W?void 0:W.navigationId)?C.state:null;if(Te){const At=Object.assign({},Te);delete At.navigationId,delete At.\u0275routerPageId,0!==Object.keys(At).length&&(X.state=At)}const Ue=this.parseUrl(C.url);this.scheduleNavigation(Ue,V,Te,X)},0)}))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(C){this.events.next(C)}resetConfig(C){Ws(C),this.config=C.map(B),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(C,V={}){const{relativeTo:W,queryParams:X,fragment:Te,queryParamsHandling:Ue,preserveFragment:At}=V,En=W||this.routerState.root,Tn=At?this.currentUrlTree.fragment:Te;let jn=null;switch(Ue){case"merge":jn=Object.assign(Object.assign({},this.currentUrlTree.queryParams),X);break;case"preserve":jn=this.currentUrlTree.queryParams;break;default:jn=X||null}return null!==jn&&(jn=this.removeEmptyProps(jn)),function So(R,b,C,V,W){if(0===C.length)return xo(b.root,b.root,b.root,V,W);const X=function Ro(R){if("string"==typeof R[0]&&1===R.length&&"/"===R[0])return new Mo(!0,0,R);let b=0,C=!1;const V=R.reduce((W,X,Te)=>{if("object"==typeof X&&null!=X){if(X.outlets){const Ue={};return z(X.outlets,(At,En)=>{Ue[En]="string"==typeof At?At.split("/"):At}),[...W,{outlets:Ue}]}if(X.segmentPath)return[...W,X.segmentPath]}return"string"!=typeof X?[...W,X]:0===Te?(X.split("/").forEach((Ue,At)=>{0==At&&"."===Ue||(0==At&&""===Ue?C=!0:".."===Ue?b++:""!=Ue&&W.push(Ue))}),W):[...W,X]},[]);return new Mo(C,b,V)}(C);if(X.toRoot())return xo(b.root,b.root,new yt([],{}),V,W);const Te=function Xi(R,b,C){if(R.isAbsolute)return new ca(b.root,!0,0);if(-1===C.snapshot._lastPathIndex){const X=C.snapshot._urlSegment;return new ca(X,X===b.root,0)}const V=Ji(R.commands[0])?0:1;return function di(R,b,C){let V=R,W=b,X=C;for(;X>W;){if(X-=W,V=V.parent,!V)throw new Error("Invalid number of '../'");W=V.segments.length}return new ca(V,!1,W-X)}(C.snapshot._urlSegment,C.snapshot._lastPathIndex+V,R.numberOfDoubleDots)}(X,b,R),Ue=Te.processChildren?es(Te.segmentGroup,Te.index,X.commands):ro(Te.segmentGroup,Te.index,X.commands);return xo(b.root,Te.segmentGroup,Ue,V,W)}(En,this.currentUrlTree,C,jn,null!=Tn?Tn:null)}navigateByUrl(C,V={skipLocationChange:!1}){const W=Di(C)?C:this.parseUrl(C),X=this.urlHandlingStrategy.merge(W,this.rawUrlTree);return this.scheduleNavigation(X,"imperative",null,V)}navigate(C,V={skipLocationChange:!1}){return function Su(R){for(let b=0;b<R.length;b++){const C=R[b];if(null==C)throw new Error(`The requested path contains ${C} segment at index ${b}`)}}(C),this.navigateByUrl(this.createUrlTree(C,V),V)}serializeUrl(C){return this.urlSerializer.serialize(C)}parseUrl(C){let V;try{V=this.urlSerializer.parse(C)}catch(W){V=this.malformedUriErrorHandler(W,this.urlSerializer,C)}return V}isActive(C,V){let W;if(W=!0===V?Object.assign({},uu):!1===V?Object.assign({},lu):V,Di(C))return le(this.currentUrlTree,C,W);const X=this.parseUrl(C);return le(this.currentUrlTree,X,W)}removeEmptyProps(C){return Object.keys(C).reduce((V,W)=>{const X=C[W];return null!=X&&(V[W]=X),V},{})}processNavigations(){this.navigations.subscribe(C=>{this.navigated=!0,this.lastSuccessfulId=C.id,this.currentPageId=C.targetPageId,this.events.next(new Pn(C.id,this.serializeUrl(C.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,C.resolve(!0)},C=>{this.console.warn(`Unhandled Navigation Error: ${C}`)})}scheduleNavigation(C,V,W,X,Te){var Ue,At;if(this.disposed)return Promise.resolve(!1);let En,Tn,jn;Te?(En=Te.resolve,Tn=Te.reject,jn=Te.promise):jn=new Promise((Os,Kr)=>{En=Os,Tn=Kr});const rr=++this.navigationId;let Dr;return"computed"===this.canceledNavigationResolution?(0===this.currentPageId&&(W=this.location.getState()),Dr=W&&W.\u0275routerPageId?W.\u0275routerPageId:X.replaceUrl||X.skipLocationChange?null!==(Ue=this.browserPageId)&&void 0!==Ue?Ue:0:(null!==(At=this.browserPageId)&&void 0!==At?At:0)+1):Dr=0,this.setTransition({id:rr,targetPageId:Dr,source:V,restoredState:W,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:C,extras:X,resolve:En,reject:Tn,promise:jn,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),jn.catch(Os=>Promise.reject(Os))}setBrowserUrl(C,V){const W=this.urlSerializer.serialize(C),X=Object.assign(Object.assign({},V.extras.state),this.generateNgRouterState(V.id,V.targetPageId));this.location.isCurrentPathEqualTo(W)||V.extras.replaceUrl?this.location.replaceState(W,"",X):this.location.go(W,"",X)}restoreHistory(C,V=!1){var W,X;if("computed"===this.canceledNavigationResolution){const Te=this.currentPageId-C.targetPageId;"popstate"!==C.source&&"eager"!==this.urlUpdateStrategy&&this.currentUrlTree!==(null===(W=this.currentNavigation)||void 0===W?void 0:W.finalUrl)||0===Te?this.currentUrlTree===(null===(X=this.currentNavigation)||void 0===X?void 0:X.finalUrl)&&0===Te&&(this.resetState(C),this.browserUrlTree=C.currentUrlTree,this.resetUrlToCurrentUrlTree()):this.location.historyGo(Te)}else"replace"===this.canceledNavigationResolution&&(V&&this.resetState(C),this.resetUrlToCurrentUrlTree())}resetState(C){this.routerState=C.currentRouterState,this.currentUrlTree=C.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,C.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}cancelNavigationTransition(C,V){const W=new Qn(C.id,this.serializeUrl(C.extractedUrl),V);this.triggerEvent(W),C.resolve(!1)}generateNgRouterState(C,V){return"computed"===this.canceledNavigationResolution?{navigationId:C,\u0275routerPageId:V}:{navigationId:C}}}return R.\u0275fac=function(C){f.$Z()},R.\u0275prov=f.Yz7({token:R,factory:R.\u0275fac}),R})();function Ri(R){return"imperative"!==R}let ps=(()=>{class R{constructor(C,V,W){this.router=C,this.route=V,this.locationStrategy=W,this.commands=null,this.href=null,this.onChanges=new T.x,this.subscription=C.events.subscribe(X=>{X instanceof Pn&&this.updateTargetUrlAndHref()})}set routerLink(C){this.commands=null!=C?Array.isArray(C)?C:[C]:null}ngOnChanges(C){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(C,V,W,X,Te){if(0!==C||V||W||X||Te||"string"==typeof this.target&&"_self"!=this.target||null===this.urlTree)return!0;const Ue={skipLocationChange:ri(this.skipLocationChange),replaceUrl:ri(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,Ue),!1}updateTargetUrlAndHref(){this.href=null!==this.urlTree?this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:ri(this.preserveFragment)})}}return R.\u0275fac=function(C){return new(C||R)(f.Y36(gi),f.Y36(kt),f.Y36(Kt.S$))},R.\u0275dir=f.lG2({type:R,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(C,V){1&C&&f.NdJ("click",function(X){return V.onClick(X.button,X.ctrlKey,X.shiftKey,X.altKey,X.metaKey)}),2&C&&f.uIk("target",V.target)("href",V.href,f.LSH)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo",routerLink:"routerLink"},features:[f.TTD]}),R})();function ri(R){return""===R||!!R}class ka{}class on{preload(b,C){return(0,ke.of)(null)}}let Vi=(()=>{class R{constructor(C,V,W,X){this.router=C,this.injector=W,this.preloadingStrategy=X,this.loader=new Oa(W,V,At=>C.triggerEvent(new Rt(At)),At=>C.triggerEvent(new pn(At)))}setUpPreloading(){this.subscription=this.router.events.pipe((0,Qe.h)(C=>C instanceof Pn),We(()=>this.preload())).subscribe(()=>{})}preload(){const C=this.injector.get(f.h0i);return this.processRoutes(C,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(C,V){const W=[];for(const X of V)if(X.loadChildren&&!X.canLoad&&X._loadedConfig){const Te=X._loadedConfig;W.push(this.processRoutes(Te.module,Te.routes))}else X.loadChildren&&!X.canLoad?W.push(this.preloadConfig(C,X)):X.children&&W.push(this.processRoutes(C,X.children));return(0,Se.D)(W).pipe((0,Yt.J)(),(0,Ce.U)(X=>{}))}preloadConfig(C,V){return this.preloadingStrategy.preload(V,()=>(V._loadedConfig?(0,ke.of)(V._loadedConfig):this.loader.load(C.injector,V)).pipe((0,xe.z)(X=>(V._loadedConfig=X,this.processRoutes(X.module,X.routes)))))}}return R.\u0275fac=function(C){return new(C||R)(f.LFG(gi),f.LFG(f.Sil),f.LFG(f.zs3),f.LFG(ka))},R.\u0275prov=f.Yz7({token:R,factory:R.\u0275fac}),R})(),qs=(()=>{class R{constructor(C,V,W={}){this.router=C,this.viewportScroller=V,this.options=W,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},W.scrollPositionRestoration=W.scrollPositionRestoration||"disabled",W.anchorScrolling=W.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Cn?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=C.navigationTrigger,this.restoredId=C.restoredState?C.restoredState.navigationId:0):C instanceof Pn&&(this.lastId=C.id,this.scheduleScrollEvent(C,this.router.parseUrl(C.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(C=>{C instanceof Kn&&(C.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(C.position):C.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(C.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(C,V){this.router.triggerEvent(new Kn(C,"popstate"===this.lastSource?this.store[this.restoredId]:null,V))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return R.\u0275fac=function(C){f.$Z()},R.\u0275prov=f.Yz7({token:R,factory:R.\u0275fac}),R})();const In=new f.OlP("ROUTER_CONFIGURATION"),Xn=new f.OlP("ROUTER_FORROOT_GUARD"),ql=[Kt.Ye,{provide:mr,useClass:Rr},{provide:gi,useFactory:function Zl(R,b,C,V,W,X,Te={},Ue,At){const En=new gi(null,R,b,C,V,W,Fe(X));return Ue&&(En.urlHandlingStrategy=Ue),At&&(En.routeReuseStrategy=At),function Fa(R,b){R.errorHandler&&(b.errorHandler=R.errorHandler),R.malformedUriErrorHandler&&(b.malformedUriErrorHandler=R.malformedUriErrorHandler),R.onSameUrlNavigation&&(b.onSameUrlNavigation=R.onSameUrlNavigation),R.paramsInheritanceStrategy&&(b.paramsInheritanceStrategy=R.paramsInheritanceStrategy),R.relativeLinkResolution&&(b.relativeLinkResolution=R.relativeLinkResolution),R.urlUpdateStrategy&&(b.urlUpdateStrategy=R.urlUpdateStrategy),R.canceledNavigationResolution&&(b.canceledNavigationResolution=R.canceledNavigationResolution)}(Te,En),Te.enableTracing&&En.events.subscribe(Tn=>{var jn,rr;null===(jn=console.group)||void 0===jn||jn.call(console,`Router Event: ${Tn.constructor.name}`),console.log(Tn.toString()),console.log(Tn),null===(rr=console.groupEnd)||void 0===rr||rr.call(console)}),En},deps:[mr,xr,Kt.Ye,f.zs3,f.Sil,Mi,In,[class Kl{},new f.FiY],[class Ks{},new f.FiY]]},xr,{provide:kt,useFactory:function cu(R){return R.routerState.root},deps:[gi]},Vi,on,class bc{preload(b,C){return C().pipe(it(()=>(0,ke.of)(null)))}},{provide:In,useValue:{enableTracing:!1}}];function nn(){return new f.PXZ("Router",gi)}let bt=(()=>{class R{constructor(C,V){}static forRoot(C,V){return{ngModule:R,providers:[ql,ta(C),{provide:Xn,useFactory:ha,deps:[[gi,new f.FiY,new f.tp0]]},{provide:In,useValue:V||{}},{provide:Kt.S$,useFactory:ii,deps:[Kt.lw,[new f.tBr(Kt.mr),new f.FiY],In]},{provide:qs,useFactory:Jt,deps:[gi,Kt.EM,In]},{provide:ka,useExisting:V&&V.preloadingStrategy?V.preloadingStrategy:on},{provide:f.PXZ,multi:!0,useFactory:nn},[La,{provide:f.ip1,multi:!0,useFactory:du,deps:[La]},{provide:fa,useFactory:Io,deps:[La]},{provide:f.tb,multi:!0,useExisting:fa}]]}}static forChild(C){return{ngModule:R,providers:[ta(C)]}}}return R.\u0275fac=function(C){return new(C||R)(f.LFG(Xn,8),f.LFG(gi,8))},R.\u0275mod=f.oAB({type:R}),R.\u0275inj=f.cJS({}),R})();function Jt(R,b,C){return C.scrollOffset&&b.setOffset(C.scrollOffset),new qs(R,b,C)}function ii(R,b,C={}){return C.useHash?new Kt.Do(R,b):new Kt.b0(R,b)}function ha(R){return"guarded"}function ta(R){return[{provide:f.deG,multi:!0,useValue:R},{provide:Mi,multi:!0,useValue:R}]}let La=(()=>{class R{constructor(C){this.injector=C,this.initNavigation=!1,this.destroyed=!1,this.resultOfPreactivationDone=new T.x}appInitializer(){return this.injector.get(Kt.V_,Promise.resolve(null)).then(()=>{if(this.destroyed)return Promise.resolve(!0);let V=null;const W=new Promise(Ue=>V=Ue),X=this.injector.get(gi),Te=this.injector.get(In);return"disabled"===Te.initialNavigation?(X.setUpLocationChangeListener(),V(!0)):"enabled"===Te.initialNavigation||"enabledBlocking"===Te.initialNavigation?(X.hooks.afterPreactivation=()=>this.initNavigation?(0,ke.of)(null):(this.initNavigation=!0,V(!0),this.resultOfPreactivationDone),X.initialNavigation()):V(!0),W})}bootstrapListener(C){const V=this.injector.get(In),W=this.injector.get(Vi),X=this.injector.get(qs),Te=this.injector.get(gi),Ue=this.injector.get(f.z2F);C===Ue.components[0]&&(("enabledNonBlocking"===V.initialNavigation||void 0===V.initialNavigation)&&Te.initialNavigation(),W.setUpPreloading(),X.init(),Te.resetRootComponentType(Ue.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}ngOnDestroy(){this.destroyed=!0}}return R.\u0275fac=function(C){return new(C||R)(f.LFG(f.zs3))},R.\u0275prov=f.Yz7({token:R,factory:R.\u0275fac}),R})();function du(R){return R.appInitializer.bind(R)}function Io(R){return R.bootstrapListener.bind(R)}const fa=new f.OlP("Router Initializer")},3942:(rn,et,N)=>{N.d(et,{Z:()=>dt});var f=N(2090),T=N(4859),P=N(9681),Z=N(1877);class we{constructor(be,mt){this._delegate=be,this.firebase=mt,(0,P._addComponent)(be,new T.wA("app-compat",()=>this,"PUBLIC")),this.container=be.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(be){this._delegate.automaticDataCollectionEnabled=be}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(be=>{this._delegate.checkDestroyed(),be()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,P.deleteApp)(this._delegate)))}_getService(be,mt=P._DEFAULT_ENTRY_NAME){var Mt;this._delegate.checkDestroyed();const Pt=this._delegate.container.getProvider(be);return!Pt.isInitialized()&&"EXPLICIT"===(null===(Mt=Pt.getComponent())||void 0===Mt?void 0:Mt.instantiationMode)&&Pt.initialize(),Pt.getImmediate({identifier:mt})}_removeServiceInstance(be,mt=P._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(be).clearInstance(mt)}_addComponent(be){(0,P._addComponent)(this._delegate,be)}_addOrOverwriteComponent(be){(0,P._addOrOverwriteComponent)(this._delegate,be)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Pe=new f.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),ae=function He(){const Ct=function he(Ct){const be={},mt={__esModule:!0,initializeApp:function st(fe,Lt={}){const Ke=P.initializeApp(fe,Lt);if((0,f.r3)(be,Ke.name))return be[Ke.name];const it=new Ct(Ke,mt);return be[Ke.name]=it,it},app:Pt,registerVersion:P.registerVersion,setLogLevel:P.setLogLevel,onLog:P.onLog,apps:null,SDK_VERSION:P.SDK_VERSION,INTERNAL:{registerComponent:function ht(fe){const Lt=fe.name,Ke=Lt.replace("-compat","");if(P._registerComponent(fe)&&"PUBLIC"===fe.type){const it=(xe=Pt())=>{if("function"!=typeof xe[Ke])throw Pe.create("invalid-app-argument",{appName:Lt});return xe[Ke]()};void 0!==fe.serviceProps&&(0,f.ZB)(it,fe.serviceProps),mt[Ke]=it,Ct.prototype[Ke]=function(...xe){return this._getService.bind(this,Lt).apply(this,fe.multipleInstances?xe:[])}}return"PUBLIC"===fe.type?mt[Ke]:null},removeApp:function Mt(fe){delete be[fe]},useAsService:function ke(fe,Lt){return"serverAuth"===Lt?null:Lt},modularAPIs:P}};function Pt(fe){if(!(0,f.r3)(be,fe=fe||P._DEFAULT_ENTRY_NAME))throw Pe.create("no-app",{appName:fe});return be[fe]}return mt.default=mt,Object.defineProperty(mt,"apps",{get:function rt(){return Object.keys(be).map(fe=>be[fe])}}),Pt.App=Ct,mt}(we);return Ct.INTERNAL=Object.assign(Object.assign({},Ct.INTERNAL),{createFirebaseNamespace:He,extendNamespace:function be(mt){(0,f.ZB)(Ct,mt)},createSubscribe:f.ne,ErrorFactory:f.LL,deepExtend:f.ZB}),Ct}(),ve=new Z.Yd("@firebase/app-compat");if((0,f.jU)()&&void 0!==self.firebase){ve.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const Ct=self.firebase.SDK_VERSION;Ct&&Ct.indexOf("LITE")>=0&&ve.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const dt=ae;!function at(Ct){(0,P.registerVersion)("@firebase/app-compat","0.1.21",Ct)}()},9681:(rn,et,N)=>{N.r(et),N.d(et,{FirebaseError:()=>Z.ZR,SDK_VERSION:()=>Pn,_DEFAULT_ENTRY_NAME:()=>ut,_addComponent:()=>an,_addOrOverwriteComponent:()=>Rn,_apps:()=>Ce,_clearComponents:()=>Yt,_components:()=>$t,_getProvider:()=>un,_registerComponent:()=>sn,_removeServiceInstance:()=>St,deleteApp:()=>sr,getApp:()=>zn,getApps:()=>xn,initializeApp:()=>Qn,onLog:()=>It,registerVersion:()=>Xe,setLogLevel:()=>Rt});var f=N(5861),T=N(4859),P=N(1877),Z=N(2090);class we{constructor(z){this.container=z}getPlatformInfoString(){return this.container.getProviders().map(me=>{if(function Se($){const z=$.getComponent();return"VERSION"===(null==z?void 0:z.type)}(me)){const de=me.getImmediate();return`${de.library}/${de.version}`}return null}).filter(me=>me).join(" ")}}const Pe="@firebase/app",He=new P.Yd("@firebase/app"),ut="[DEFAULT]",nt={[Pe]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ce=new Map,$t=new Map;function an($,z){try{$.container.addComponent(z)}catch(me){He.debug(`Component ${z.name} failed to register with FirebaseApp ${$.name}`,me)}}function Rn($,z){$.container.addOrOverwriteComponent(z)}function sn($){const z=$.name;if($t.has(z))return He.debug(`There were multiple attempts to register component ${z}.`),!1;$t.set(z,$);for(const me of Ce.values())an(me,$);return!0}function un($,z){const me=$.container.getProvider("heartbeat").getImmediate({optional:!0});return me&&me.triggerHeartbeat(),$.container.getProvider(z)}function St($,z,me=ut){un($,z).clearInstance(me)}function Yt(){$t.clear()}const gn=new Z.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}."});class Cn{constructor(z,me,de){this._isDeleted=!1,this._options=Object.assign({},z),this._config=Object.assign({},me),this._name=me.name,this._automaticDataCollectionEnabled=me.automaticDataCollectionEnabled,this._container=de,this.container.addComponent(new T.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(z){this.checkDestroyed(),this._automaticDataCollectionEnabled=z}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(z){this._isDeleted=z}checkDestroyed(){if(this.isDeleted)throw gn.create("app-deleted",{appName:this._name})}}const Pn="9.6.10";function Qn($,z={}){"object"!=typeof z&&(z={name:z});const me=Object.assign({name:ut,automaticDataCollectionEnabled:!1},z),de=me.name;if("string"!=typeof de||!de)throw gn.create("bad-app-name",{appName:String(de)});const Me=Ce.get(de);if(Me){if((0,Z.vZ)($,Me.options)&&(0,Z.vZ)(me,Me.config))return Me;throw gn.create("duplicate-app",{appName:de})}const Ge=new T.H0(de);for(const oe of $t.values())Ge.addComponent(oe);const le=new Cn($,me,Ge);return Ce.set(de,le),le}function zn($=ut){const z=Ce.get($);if(!z)throw gn.create("no-app",{appName:$});return z}function xn(){return Array.from(Ce.values())}function sr($){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*($){const z=$.name;Ce.has(z)&&(Ce.delete(z),yield Promise.all($.container.getProviders().map(me=>me.delete())),$.isDeleted=!0)})).apply(this,arguments)}function Xe($,z,me){var de;let Me=null!==(de=nt[$])&&void 0!==de?de:$;me&&(Me+=`-${me}`);const Ge=Me.match(/\s|\//),le=z.match(/\s|\//);if(Ge||le){const oe=[`Unable to register library "${Me}" with version "${z}":`];return Ge&&oe.push(`library name "${Me}" contains illegal characters (whitespace or "/")`),Ge&&le&&oe.push("and"),le&&oe.push(`version name "${z}" contains illegal characters (whitespace or "/")`),void He.warn(oe.join(" "))}sn(new T.wA(`${Me}-version`,()=>({library:Me,version:z}),"VERSION"))}function It($,z){if(null!==$&&"function"!=typeof $)throw gn.create("invalid-log-argument");(0,P.Am)($,z)}function Rt($){(0,P.Ub)($)}const Vn="firebase-heartbeat-store";let Dn=null;function Hn(){return Dn||(Dn=(0,Z.X3)("firebase-heartbeat-database",1,($,z)=>{0===z&&$.createObjectStore(Vn)}).catch($=>{throw gn.create("storage-open",{originalErrorMessage:$.message})})),Dn}function Ot(){return(Ot=(0,f.Z)(function*($){try{return(yield Hn()).transaction(Vn).objectStore(Vn).get(hr($))}catch(z){throw gn.create("storage-get",{originalErrorMessage:z.message})}})).apply(this,arguments)}function hn($,z){return Gt.apply(this,arguments)}function Gt(){return(Gt=(0,f.Z)(function*($,z){try{const de=(yield Hn()).transaction(Vn,"readwrite");return yield de.objectStore(Vn).put(z,hr($)),de.complete}catch(me){throw gn.create("storage-set",{originalErrorMessage:me.message})}})).apply(this,arguments)}function hr($){return`${$.name}!${$.options.appId}`}class Ar{constructor(z){this.container=z,this._heartbeatsCache=null;const me=this.container.getProvider("app").getImmediate();this._storage=new Ye(me),this._heartbeatsCachePromise=this._storage.read().then(de=>(this._heartbeatsCache=de,de))}triggerHeartbeat(){var z=this;return(0,f.Z)(function*(){const de=z.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Me=Jn();if(null===z._heartbeatsCache&&(z._heartbeatsCache=yield z._heartbeatsCachePromise),z._heartbeatsCache.lastSentHeartbeatDate!==Me&&!z._heartbeatsCache.heartbeats.some(Ge=>Ge.date===Me))return z._heartbeatsCache.heartbeats.push({date:Me,agent:de}),z._heartbeatsCache.heartbeats=z._heartbeatsCache.heartbeats.filter(Ge=>{const le=new Date(Ge.date).valueOf();return Date.now()-le<=2592e6}),z._storage.overwrite(z._heartbeatsCache)})()}getHeartbeatsHeader(){var z=this;return(0,f.Z)(function*(){if(null===z._heartbeatsCache&&(yield z._heartbeatsCachePromise),null===z._heartbeatsCache||0===z._heartbeatsCache.heartbeats.length)return"";const me=Jn(),{heartbeatsToSend:de,unsentEntries:Me}=function Fn($,z=1024){const me=[];let de=$.slice();for(const Me of $){const Ge=me.find(le=>le.agent===Me.agent);if(Ge){if(Ge.dates.push(Me.date),Fe(me)>z){Ge.dates.pop();break}}else if(me.push({agent:Me.agent,dates:[Me.date]}),Fe(me)>z){me.pop();break}de=de.slice(1)}return{heartbeatsToSend:me,unsentEntries:de}}(z._heartbeatsCache.heartbeats),Ge=(0,Z.L)(JSON.stringify({version:2,heartbeats:de}));return z._heartbeatsCache.lastSentHeartbeatDate=me,Me.length>0?(z._heartbeatsCache.heartbeats=Me,yield z._storage.overwrite(z._heartbeatsCache)):(z._heartbeatsCache.heartbeats=[],z._storage.overwrite(z._heartbeatsCache)),Ge})()}}function Jn(){return(new Date).toISOString().substring(0,10)}class Ye{constructor(z){this.app=z,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,f.Z)(function*(){return!!(0,Z.hl)()&&(0,Z.eu)().then(()=>!0).catch(()=>!1)})()}read(){var z=this;return(0,f.Z)(function*(){return(yield z._canUseIndexedDBPromise)&&(yield function Kn($){return Ot.apply(this,arguments)}(z.app))||{heartbeats:[]}})()}overwrite(z){var me=this;return(0,f.Z)(function*(){var de;if(yield me._canUseIndexedDBPromise){const Ge=yield me.read();return hn(me.app,{lastSentHeartbeatDate:null!==(de=z.lastSentHeartbeatDate)&&void 0!==de?de:Ge.lastSentHeartbeatDate,heartbeats:z.heartbeats})}})()}add(z){var me=this;return(0,f.Z)(function*(){var de;if(yield me._canUseIndexedDBPromise){const Ge=yield me.read();return hn(me.app,{lastSentHeartbeatDate:null!==(de=z.lastSentHeartbeatDate)&&void 0!==de?de:Ge.lastSentHeartbeatDate,heartbeats:[...Ge.heartbeats,...z.heartbeats]})}})()}}function Fe($){return(0,Z.L)(JSON.stringify({version:2,heartbeats:$})).length}!function ue($){sn(new T.wA("platform-logger",z=>new we(z),"PRIVATE")),sn(new T.wA("heartbeat",z=>new Ar(z),"PRIVATE")),Xe(Pe,"0.7.20",$),Xe(Pe,"0.7.20","esm2017"),Xe("fire-js","")}("")},4859:(rn,et,N)=>{N.d(et,{wA:()=>P,H0:()=>he,zt:()=>we});var f=N(5861),T=N(2090);class P{constructor(ae,ve,De){this.name=ae,this.instanceFactory=ve,this.type=De,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(ae){return this.instantiationMode=ae,this}setMultipleInstances(ae){return this.multipleInstances=ae,this}setServiceProps(ae){return this.serviceProps=ae,this}setInstanceCreatedCallback(ae){return this.onInstanceCreated=ae,this}}const Z="[DEFAULT]";class we{constructor(ae,ve){this.name=ae,this.container=ve,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(ae){const ve=this.normalizeInstanceIdentifier(ae);if(!this.instancesDeferred.has(ve)){const De=new T.BH;if(this.instancesDeferred.set(ve,De),this.isInitialized(ve)||this.shouldAutoInitialize())try{const ot=this.getOrInitializeService({instanceIdentifier:ve});ot&&De.resolve(ot)}catch(ot){}}return this.instancesDeferred.get(ve).promise}getImmediate(ae){var ve;const De=this.normalizeInstanceIdentifier(null==ae?void 0:ae.identifier),ot=null!==(ve=null==ae?void 0:ae.optional)&&void 0!==ve&&ve;if(!this.isInitialized(De)&&!this.shouldAutoInitialize()){if(ot)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:De})}catch(at){if(ot)return null;throw at}}getComponent(){return this.component}setComponent(ae){if(ae.name!==this.name)throw Error(`Mismatching Component ${ae.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=ae,this.shouldAutoInitialize()){if(function Pe(He){return"EAGER"===He.instantiationMode}(ae))try{this.getOrInitializeService({instanceIdentifier:Z})}catch(ve){}for(const[ve,De]of this.instancesDeferred.entries()){const ot=this.normalizeInstanceIdentifier(ve);try{const at=this.getOrInitializeService({instanceIdentifier:ot});De.resolve(at)}catch(at){}}}}clearInstance(ae=Z){this.instancesDeferred.delete(ae),this.instancesOptions.delete(ae),this.instances.delete(ae)}delete(){var ae=this;return(0,f.Z)(function*(){const ve=Array.from(ae.instances.values());yield Promise.all([...ve.filter(De=>"INTERNAL"in De).map(De=>De.INTERNAL.delete()),...ve.filter(De=>"_delete"in De).map(De=>De._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(ae=Z){return this.instances.has(ae)}getOptions(ae=Z){return this.instancesOptions.get(ae)||{}}initialize(ae={}){const{options:ve={}}=ae,De=this.normalizeInstanceIdentifier(ae.instanceIdentifier);if(this.isInitialized(De))throw Error(`${this.name}(${De}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const ot=this.getOrInitializeService({instanceIdentifier:De,options:ve});for(const[at,dt]of this.instancesDeferred.entries())De===this.normalizeInstanceIdentifier(at)&&dt.resolve(ot);return ot}onInit(ae,ve){var De;const ot=this.normalizeInstanceIdentifier(ve),at=null!==(De=this.onInitCallbacks.get(ot))&&void 0!==De?De:new Set;at.add(ae),this.onInitCallbacks.set(ot,at);const dt=this.instances.get(ot);return dt&&ae(dt,ot),()=>{at.delete(ae)}}invokeOnInitCallbacks(ae,ve){const De=this.onInitCallbacks.get(ve);if(De)for(const ot of De)try{ot(ae,ve)}catch(at){}}getOrInitializeService({instanceIdentifier:ae,options:ve={}}){let De=this.instances.get(ae);if(!De&&this.component&&(De=this.component.instanceFactory(this.container,{instanceIdentifier:(He=ae,He===Z?void 0:He),options:ve}),this.instances.set(ae,De),this.instancesOptions.set(ae,ve),this.invokeOnInitCallbacks(De,ae),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,ae,De)}catch(ot){}var He;return De||null}normalizeInstanceIdentifier(ae=Z){return this.component?this.component.multipleInstances?ae:Z:ae}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class he{constructor(ae){this.name=ae,this.providers=new Map}addComponent(ae){const ve=this.getProvider(ae.name);if(ve.isComponentSet())throw new Error(`Component ${ae.name} has already been registered with ${this.name}`);ve.setComponent(ae)}addOrOverwriteComponent(ae){this.getProvider(ae.name).isComponentSet()&&this.providers.delete(ae.name),this.addComponent(ae)}getProvider(ae){if(this.providers.has(ae))return this.providers.get(ae);const ve=new we(ae,this);return this.providers.set(ae,ve),ve}getProviders(){return Array.from(this.providers.values())}}},2833:(rn,et,N)=>{var f=N(5861),T=N(9681),P=N(4859),Z=N(2090);const we="@firebase/installations",he="w:0.5.7",He="FIS_v2",dt=new Z.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function Ct(_e){return _e instanceof Z.ZR&&_e.code.includes("request-failed")}function be({projectId:_e}){return`https://firebaseinstallations.googleapis.com/v1/projects/${_e}/installations`}function mt(_e){return{token:_e.token,requestStatus:2,expiresIn:fe(_e.expiresIn),creationTime:Date.now()}}function Mt(_e,Je){return Pt.apply(this,arguments)}function Pt(){return(Pt=(0,f.Z)(function*(_e,Je){const mn=(yield Je.json()).error;return dt.create("request-failed",{requestName:_e,serverCode:mn.code,serverMessage:mn.message,serverStatus:mn.status})})).apply(this,arguments)}function st({apiKey:_e}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":_e})}function rt(_e,{refreshToken:Je}){const xt=st(_e);return xt.append("Authorization",function Lt(_e){return`${He} ${_e}`}(Je)),xt}function ht(_e){return ke.apply(this,arguments)}function ke(){return(ke=(0,f.Z)(function*(_e){const Je=yield _e();return Je.status>=500&&Je.status<600?_e():Je})).apply(this,arguments)}function fe(_e){return Number(_e.replace("s","000"))}function Ke(_e,Je){return it.apply(this,arguments)}function it(){return(it=(0,f.Z)(function*({appConfig:_e,heartbeatServiceProvider:Je},{fid:xt}){const mn=be(_e),yr=st(_e),Wn=Je.getImmediate({optional:!0});if(Wn){const Wr=yield Wn.getHeartbeatsHeader();Wr&&yr.append("x-firebase-client",Wr)}const ur={method:"POST",headers:yr,body:JSON.stringify({fid:xt,authVersion:He,appId:_e.appId,sdkVersion:he})},jr=yield ht(()=>fetch(mn,ur));if(jr.ok){const Wr=yield jr.json();return{fid:Wr.fid||xt,registrationStatus:2,refreshToken:Wr.refreshToken,authToken:mt(Wr.authToken)}}throw yield Mt("Create Installation",jr)})).apply(this,arguments)}function xe(_e){return new Promise(Je=>{setTimeout(Je,_e)})}const Qe=/^[cdef][\w-]{21}$/;function dn(){try{const _e=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(_e),_e[0]=112+_e[0]%16;const xt=function Wt(_e){return function We(_e){return btoa(String.fromCharCode(..._e)).replace(/\+/g,"-").replace(/\//g,"_")}(_e).substr(0,22)}(_e);return Qe.test(xt)?xt:""}catch(_e){return""}}function ut(_e){return`${_e.appName}!${_e.appId}`}const nt=new Map;function Ce(_e,Je){const xt=ut(_e);Rn(xt,Je),function sn(_e,Je){const xt=function St(){return!un&&"BroadcastChannel"in self&&(un=new BroadcastChannel("[Firebase] FID Change"),un.onmessage=_e=>{Rn(_e.data.key,_e.data.fid)}),un}();xt&&xt.postMessage({key:_e,fid:Je}),function Yt(){0===nt.size&&un&&(un.close(),un=null)}()}(xt,Je)}function Rn(_e,Je){const xt=nt.get(_e);if(xt)for(const mn of xt)mn(Je)}let un=null;const Cn="firebase-installations-store";let Pn=null;function Qn(){return Pn||(Pn=(0,Z.X3)("firebase-installations-database",1,(_e,Je)=>{0===Je&&_e.createObjectStore(Cn)})),Pn}function zn(_e,Je){return xn.apply(this,arguments)}function xn(){return(xn=(0,f.Z)(function*(_e,Je){const xt=ut(_e),yr=(yield Qn()).transaction(Cn,"readwrite"),Wn=yr.objectStore(Cn),kn=yield Wn.get(xt);return yield Wn.put(Je,xt),yield yr.complete,(!kn||kn.fid!==Je.fid)&&Ce(_e,Je.fid),Je})).apply(this,arguments)}function sr(_e){return wt.apply(this,arguments)}function wt(){return(wt=(0,f.Z)(function*(_e){const Je=ut(_e),mn=(yield Qn()).transaction(Cn,"readwrite");yield mn.objectStore(Cn).delete(Je),yield mn.complete})).apply(this,arguments)}function Xe(_e,Je){return It.apply(this,arguments)}function It(){return(It=(0,f.Z)(function*(_e,Je){const xt=ut(_e),yr=(yield Qn()).transaction(Cn,"readwrite"),Wn=yr.objectStore(Cn),kn=yield Wn.get(xt),ur=Je(kn);return void 0===ur?yield Wn.delete(xt):yield Wn.put(ur,xt),yield yr.complete,ur&&(!kn||kn.fid!==ur.fid)&&Ce(_e,ur.fid),ur})).apply(this,arguments)}function Rt(_e){return pn.apply(this,arguments)}function pn(){return(pn=(0,f.Z)(function*(_e){let Je;const xt=yield Xe(_e.appConfig,mn=>{const yr=Nn(mn),Wn=Vn(_e,yr);return Je=Wn.registrationPromise,Wn.installationEntry});return""===xt.fid?{installationEntry:yield Je}:{installationEntry:xt,registrationPromise:Je}})).apply(this,arguments)}function Nn(_e){return Gt(_e||{fid:dn(),registrationStatus:0})}function Vn(_e,Je){if(0===Je.registrationStatus){if(!navigator.onLine)return{installationEntry:Je,registrationPromise:Promise.reject(dt.create("app-offline"))};const xt={fid:Je.fid,registrationStatus:1,registrationTime:Date.now()},mn=function Dn(_e,Je){return Hn.apply(this,arguments)}(_e,xt);return{installationEntry:xt,registrationPromise:mn}}return 1===Je.registrationStatus?{installationEntry:Je,registrationPromise:Kn(_e)}:{installationEntry:Je}}function Hn(){return(Hn=(0,f.Z)(function*(_e,Je){try{const xt=yield Ke(_e,Je);return zn(_e.appConfig,xt)}catch(xt){throw Ct(xt)&&409===xt.customData.serverCode?yield sr(_e.appConfig):yield zn(_e.appConfig,{fid:Je.fid,registrationStatus:0}),xt}})).apply(this,arguments)}function Kn(_e){return Ot.apply(this,arguments)}function Ot(){return(Ot=(0,f.Z)(function*(_e){let Je=yield hn(_e.appConfig);for(;1===Je.registrationStatus;)yield xe(100),Je=yield hn(_e.appConfig);if(0===Je.registrationStatus){const{installationEntry:xt,registrationPromise:mn}=yield Rt(_e);return mn||xt}return Je})).apply(this,arguments)}function hn(_e){return Xe(_e,Je=>{if(!Je)throw dt.create("installation-not-found");return Gt(Je)})}function Gt(_e){return function hr(_e){return 1===_e.registrationStatus&&_e.registrationTime+1e4<Date.now()}(_e)?{fid:_e.fid,registrationStatus:0}:_e}function Tr(_e,Je){return Bn.apply(this,arguments)}function Bn(){return(Bn=(0,f.Z)(function*({appConfig:_e,heartbeatServiceProvider:Je},xt){const mn=Ar(_e,xt),yr=rt(_e,xt),Wn=Je.getImmediate({optional:!0});if(Wn){const Wr=yield Wn.getHeartbeatsHeader();Wr&&yr.append("x-firebase-client",Wr)}const ur={method:"POST",headers:yr,body:JSON.stringify({installation:{sdkVersion:he,appId:_e.appId}})},jr=yield ht(()=>fetch(mn,ur));if(jr.ok)return mt(yield jr.json());throw yield Mt("Generate Auth Token",jr)})).apply(this,arguments)}function Ar(_e,{fid:Je}){return`${be(_e)}/${Je}/authTokens:generate`}function Jn(_e){return Fn.apply(this,arguments)}function Fn(){return(Fn=(0,f.Z)(function*(_e,Je=!1){let xt;const mn=yield Xe(_e.appConfig,Wn=>{if(!me(Wn))throw dt.create("not-registered");const kn=Wn.authToken;if(!Je&&de(kn))return Wn;if(1===kn.requestStatus)return xt=Ye(_e,Je),Wn;{if(!navigator.onLine)throw dt.create("app-offline");const ur=Ge(Wn);return xt=$(_e,ur),ur}});return xt?yield xt:mn.authToken})).apply(this,arguments)}function Ye(_e,Je){return Fe.apply(this,arguments)}function Fe(){return(Fe=(0,f.Z)(function*(_e,Je){let xt=yield ue(_e.appConfig);for(;1===xt.authToken.requestStatus;)yield xe(100),xt=yield ue(_e.appConfig);const mn=xt.authToken;return 0===mn.requestStatus?Jn(_e,Je):mn})).apply(this,arguments)}function ue(_e){return Xe(_e,Je=>{if(!me(Je))throw dt.create("not-registered");return function le(_e){return 1===_e.requestStatus&&_e.requestTime+1e4<Date.now()}(Je.authToken)?Object.assign(Object.assign({},Je),{authToken:{requestStatus:0}}):Je})}function $(_e,Je){return z.apply(this,arguments)}function z(){return(z=(0,f.Z)(function*(_e,Je){try{const xt=yield Tr(_e,Je),mn=Object.assign(Object.assign({},Je),{authToken:xt});return yield zn(_e.appConfig,mn),xt}catch(xt){if(!Ct(xt)||401!==xt.customData.serverCode&&404!==xt.customData.serverCode){const mn=Object.assign(Object.assign({},Je),{authToken:{requestStatus:0}});yield zn(_e.appConfig,mn)}else yield sr(_e.appConfig);throw xt}})).apply(this,arguments)}function me(_e){return void 0!==_e&&2===_e.registrationStatus}function de(_e){return 2===_e.requestStatus&&!function Me(_e){const Je=Date.now();return Je<_e.creationTime||_e.creationTime+_e.expiresIn<Je+36e5}(_e)}function Ge(_e){const Je={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},_e),{authToken:Je})}function Ee(){return(Ee=(0,f.Z)(function*(_e){const Je=_e,{installationEntry:xt,registrationPromise:mn}=yield Rt(Je);return mn?mn.catch(console.error):Jn(Je).catch(console.error),xt.fid})).apply(this,arguments)}function se(){return(se=(0,f.Z)(function*(_e,Je=!1){const xt=_e;return yield ge(xt),(yield Jn(xt,Je)).token})).apply(this,arguments)}function ge(_e){return ye.apply(this,arguments)}function ye(){return(ye=(0,f.Z)(function*(_e){const{registrationPromise:Je}=yield Rt(_e);Je&&(yield Je)})).apply(this,arguments)}function or(_e){return dt.create("missing-app-config-values",{valueName:_e})}const $e="installations",Ht=_e=>{const Je=_e.getProvider("app").getImmediate(),xt=function Rr(_e){if(!_e||!_e.options)throw or("App Configuration");if(!_e.name)throw or("App Name");const Je=["projectId","apiKey","appId"];for(const xt of Je)if(!_e.options[xt])throw or(xt);return{appName:_e.name,projectId:_e.options.projectId,apiKey:_e.options.apiKey,appId:_e.options.appId}}(Je);return{app:Je,appConfig:xt,heartbeatServiceProvider:(0,T._getProvider)(Je,"heartbeat"),_delete:()=>Promise.resolve()}},_n=_e=>{const Je=_e.getProvider("app").getImmediate(),xt=(0,T._getProvider)(Je,$e).getImmediate();return{getId:()=>function oe(_e){return Ee.apply(this,arguments)}(xt),getToken:yr=>function qe(_e){return se.apply(this,arguments)}(xt,yr)}};(function Ut(){(0,T._registerComponent)(new P.wA($e,Ht,"PUBLIC")),(0,T._registerComponent)(new P.wA("installations-internal",_n,"PRIVATE"))})(),(0,T.registerVersion)(we,"0.5.7"),(0,T.registerVersion)(we,"0.5.7","esm2017")},1877:(rn,et,N)=>{N.d(et,{in:()=>T,Yd:()=>Pe,Ub:()=>he,Am:()=>He});const f=[];var T=(()=>{return(ae=T||(T={}))[ae.DEBUG=0]="DEBUG",ae[ae.VERBOSE=1]="VERBOSE",ae[ae.INFO=2]="INFO",ae[ae.WARN=3]="WARN",ae[ae.ERROR=4]="ERROR",ae[ae.SILENT=5]="SILENT",T;var ae})();const P={debug:T.DEBUG,verbose:T.VERBOSE,info:T.INFO,warn:T.WARN,error:T.ERROR,silent:T.SILENT},Z=T.INFO,we={[T.DEBUG]:"log",[T.VERBOSE]:"log",[T.INFO]:"info",[T.WARN]:"warn",[T.ERROR]:"error"},Se=(ae,ve,...De)=>{if(ve<ae.logLevel)return;const ot=(new Date).toISOString(),at=we[ve];if(!at)throw new Error(`Attempted to log a message with an invalid logType (value: ${ve})`);console[at](`[${ot}]  ${ae.name}:`,...De)};class Pe{constructor(ve){this.name=ve,this._logLevel=Z,this._logHandler=Se,this._userLogHandler=null,f.push(this)}get logLevel(){return this._logLevel}set logLevel(ve){if(!(ve in T))throw new TypeError(`Invalid value "${ve}" assigned to \`logLevel\``);this._logLevel=ve}setLogLevel(ve){this._logLevel="string"==typeof ve?P[ve]:ve}get logHandler(){return this._logHandler}set logHandler(ve){if("function"!=typeof ve)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=ve}get userLogHandler(){return this._userLogHandler}set userLogHandler(ve){this._userLogHandler=ve}debug(...ve){this._userLogHandler&&this._userLogHandler(this,T.DEBUG,...ve),this._logHandler(this,T.DEBUG,...ve)}log(...ve){this._userLogHandler&&this._userLogHandler(this,T.VERBOSE,...ve),this._logHandler(this,T.VERBOSE,...ve)}info(...ve){this._userLogHandler&&this._userLogHandler(this,T.INFO,...ve),this._logHandler(this,T.INFO,...ve)}warn(...ve){this._userLogHandler&&this._userLogHandler(this,T.WARN,...ve),this._logHandler(this,T.WARN,...ve)}error(...ve){this._userLogHandler&&this._userLogHandler(this,T.ERROR,...ve),this._logHandler(this,T.ERROR,...ve)}}function he(ae){f.forEach(ve=>{ve.setLogLevel(ae)})}function He(ae,ve){for(const De of f){let ot=null;ve&&ve.level&&(ot=P[ve.level]),De.userLogHandler=null===ae?null:(at,dt,...Ct)=>{const be=Ct.map(mt=>{if(null==mt)return null;if("string"==typeof mt)return mt;if("number"==typeof mt||"boolean"==typeof mt)return mt.toString();if(mt instanceof Error)return mt.message;try{return JSON.stringify(mt)}catch(Mt){return null}}).filter(mt=>mt).join(" ");dt>=(null!=ot?ot:at.logLevel)&&ae({level:T[dt].toLowerCase(),message:be,args:Ct,type:at.name})}}}},5861:(rn,et,N)=>{function f(P,Z,we,Se,Pe,he,He){try{var ae=P[he](He),ve=ae.value}catch(De){return void we(De)}ae.done?Z(ve):Promise.resolve(ve).then(Se,Pe)}function T(P){return function(){var Z=this,we=arguments;return new Promise(function(Se,Pe){var he=P.apply(Z,we);function He(ve){f(he,Se,Pe,He,ae,"next",ve)}function ae(ve){f(he,Se,Pe,He,ae,"throw",ve)}He(void 0)})}}N.d(et,{Z:()=>T})}},rn=>{rn(rn.s=5293)}]);